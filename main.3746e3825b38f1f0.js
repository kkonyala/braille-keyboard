(self.webpackChunkbraille_keyboard=self.webpackChunkbraille_keyboard||[]).push([[179],{2011:(St,Ve,G)=>{"use strict";G.d(Ve,{Dh:()=>We,GT:()=>Le,cc:()=>Xe,on:()=>Ye,pX:()=>we,xv:()=>ke});var h=G(4650),R=G(127);St=G.hmd(St);const $=["ngOnDestroy"],we=(pe,Ce,at,ut={})=>new Proxy(pe,{get:(Be,Ne)=>at.runOutsideAngular(()=>{var De;if(pe[Ne])return!(null===(De=ut?.spy)||void 0===De)&&De.get&&ut.spy.get(Ne,pe[Ne]),pe[Ne];if($.indexOf(Ne)>-1)return()=>{};const tt=Ce.toPromise().then(he=>{const ge=he&&he[Ne];return"function"==typeof ge?ge.bind(he):ge&&ge.then?ge.then(Te=>at.run(()=>Te)):at.run(()=>ge)});return new Proxy(()=>{},{get:(he,ge)=>tt[ge],apply:(he,ge,Te)=>tt.then(re=>{var ie;const ve=re&&re(...Te);return!(null===(ie=ut?.spy)||void 0===ie)&&ie.apply&&ut.spy.apply(Ne,Te,ve),ve})})})}),Le=(pe,Ce)=>{Ce.forEach(at=>{Object.getOwnPropertyNames(at.prototype||at).forEach(ut=>{Object.defineProperty(pe.prototype,ut,Object.getOwnPropertyDescriptor(at.prototype||at,ut))})})};class Ae{constructor(Ce){return Ce}}const We=new h.OlP("angularfire2.app.options"),ke=new h.OlP("angularfire2.app.name");function Ye(pe,Ce,at){const Be="object"==typeof at&&at||{};Be.name=Be.name||"string"==typeof at&&at||"[DEFAULT]";const De=R.Z.apps.filter(tt=>tt&&tt.name===Be.name)[0]||Ce.runOutsideAngular(()=>R.Z.initializeApp(pe,Be));try{JSON.stringify(pe)!==JSON.stringify(De.options)&&X("error",`${De.name} Firebase App already initialized with different options${St.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ae(De)}const X=(pe,...Ce)=>{(0,h.X6Q)()&&typeof console<"u"&&console[pe](...Ce)};function Xe(pe,Ce,at,ut,Be){const[,Ne,De]=globalThis.\u0275AngularfireInstanceCache.find(tt=>tt[0]===pe)||[];if(Ne)return function Ge(pe,Ce){try{return pe.toString()===Ce.toString()}catch{return pe===Ce}}(Be,De)||(Je("error",`${Ce} was already initialized on the ${at} Firebase App with different settings.${ze?" You may need to reload as Firebase is not HMR aware.":""}`),Je("warn",{is:Be,was:De})),Ne;{const tt=ut();return globalThis.\u0275AngularfireInstanceCache.push([pe,tt,Be]),tt}}const ze=!!St.hot,Je=(pe,...Ce)=>{(0,h.X6Q)()&&typeof console<"u"&&console[pe](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7573:(St,Ve,G)=>{"use strict";G.d(Ve,{$:()=>Ha,A:()=>Z,B:()=>Ge,G:()=>ka,H:()=>hs,J:()=>lo,L:()=>Y,M:()=>uf,N:()=>cf,P:()=>rg,Q:()=>Gn,R:()=>V_,T:()=>Ln,U:()=>Va,V:()=>Ua,W:()=>qp,X:()=>Yp,Y:()=>Nl,Z:()=>Ht,_:()=>or,a:()=>ko,a0:()=>vc,a1:()=>Yr,a2:()=>yu,a3:()=>vu,a4:()=>Zp,a5:()=>hf,a6:()=>Ir,a7:()=>fr,a8:()=>Ro,a9:()=>Mo,aA:()=>Ur,aB:()=>$l,aC:()=>ku,aD:()=>Ls,aE:()=>xt,aI:()=>Wa,aL:()=>Cl,aa:()=>B_,ab:()=>Pd,ac:()=>Fd,af:()=>da,ag:()=>Jp,ah:()=>pf,ak:()=>Sl,al:()=>wc,an:()=>Ec,ao:()=>gf,ap:()=>zt,aq:()=>Te,ar:()=>Ke,as:()=>vt,at:()=>ut,au:()=>$u,av:()=>tl,aw:()=>Be,ax:()=>he,ay:()=>ie,az:()=>z,b:()=>ki,c:()=>ig,d:()=>Ou,e:()=>Gd,f:()=>Df,g:()=>sg,h:()=>Pu,i:()=>Po,j:()=>Bo,k:()=>ug,l:()=>Br,m:()=>Vo,n:()=>th,o:()=>ke,r:()=>zn,s:()=>Ja,u:()=>yr});var h=G(5861),R=G(2090),$=G(9681),we=G(1877),Le=G(655),Ae=G(4859);const ke={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ge=function de(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Je=new R.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new we.Yd("@firebase/auth");function at(D,..._){Ce.logLevel<=we.in.ERROR&&Ce.error(`Auth (${$.SDK_VERSION}): ${D}`,..._)}function ut(D,..._){throw tt(D,..._)}function Be(D,..._){return tt(D,..._)}function Ne(D,_,v){const C=Object.assign(Object.assign({},ze()),{[_]:v});return new R.LL("auth","Firebase",C).create(_,{appName:D.name})}function De(D,_,v){if(!(_ instanceof v))throw v.name!==_.constructor.name&&ut(D,"argument-error"),Ne(D,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(D,..._){if("string"!=typeof D){const v=_[0],C=[..._.slice(1)];return C[0]&&(C[0].appName=D.name),D._errorFactory.create(v,...C)}return Je.create(D,..._)}function he(D,_,...v){if(!D)throw tt(_,...v)}function ge(D){const _="INTERNAL ASSERTION FAILED: "+D;throw at(_),new Error(_)}function Te(D,_){D||ge(_)}const re=new Map;function ie(D){Te(D instanceof Function,"Expected a class definition");let _=re.get(D);return _?(Te(_ instanceof D,"Instance stored in cache mismatched with class"),_):(_=new D,re.set(D,_),_)}function qe(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function He(){return"http:"===Dt()||"https:"===Dt()}function Dt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class et{constructor(_,v){this.shortDelay=_,this.longDelay=v,Te(v>_,"Short delay should be less than long delay!"),this.isMobile=(0,R.uI)()||(0,R.b$)()}get(){return function Cn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(He()||(0,R.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pn(D,_){Te(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return _?`${v}${_.startsWith("/")?_.slice(1):_}`:v}class Er{static initialize(_,v,C){this.fetchImpl=_,v&&(this.headersImpl=v),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dn=new et(3e4,6e4);function tn(D,_){return D.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:D.tenantId}):_}function Qt(D,_,v,C){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,h.Z)(function*(D,_,v,C,O={}){return Gi(D,O,(0,h.Z)(function*(){let V={},le={};C&&("GET"===_?le=C:V={body:JSON.stringify(C)});const Se=(0,R.xO)(Object.assign({key:D.config.apiKey},le)).slice(1),ht=yield D._getAdditionalHeaders();return ht["Content-Type"]="application/json",D.languageCode&&(ht["X-Firebase-Locale"]=D.languageCode),Er.fetch()(Rs(D,D.config.apiHost,v,Se),Object.assign({method:_,headers:ht,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function Gi(D,_,v){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(D,_,v){D._canInitEmulator=!1;const C=Object.assign(Object.assign({},Fn),_);try{const O=new Jn(D),V=yield Promise.race([v(),O.promise]);O.clearNetworkTimeout();const le=yield V.json();if("needConfirmation"in le)throw Fr(D,"account-exists-with-different-credential",le);if(V.ok&&!("errorMessage"in le))return le;{const Se=V.ok?le.errorMessage:le.error.message,[ht,At]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ht)throw Fr(D,"credential-already-in-use",le);if("EMAIL_EXISTS"===ht)throw Fr(D,"email-already-in-use",le);if("USER_DISABLED"===ht)throw Fr(D,"user-disabled",le);const qt=C[ht]||ht.toLowerCase().replace(/[_\s]+/g,"-");if(At)throw Ne(D,qt,At);ut(D,qt)}}catch(O){if(O instanceof R.ZR)throw O;ut(D,"network-request-failed")}})).apply(this,arguments)}function Qn(D,_,v,C){return ds.apply(this,arguments)}function ds(){return(ds=(0,h.Z)(function*(D,_,v,C,O={}){const V=yield Qt(D,_,v,C,O);return"mfaPendingCredential"in V&&ut(D,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function Rs(D,_,v,C){const O=`${_}${v}?${C}`;return D.config.emulator?Pn(D.config,O):`${D.config.apiScheme}://${O}`}class Jn{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((v,C)=>{this.timer=setTimeout(()=>C(Be(this.auth,"network-request-failed")),dn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fr(D,_,v){const C={appName:D.name};v.email&&(C.email=v.email),v.phoneNumber&&(C.phoneNumber=v.phoneNumber);const O=Be(D,_,C);return O.customData._tokenResponse=v,O}function ui(){return(ui=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function yt(D,_){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function cr(D,_){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function ii(D){if(D)try{const _=new Date(Number(D));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function jn(){return(jn=(0,h.Z)(function*(D,_=!1){const v=(0,R.m9)(D),C=yield v.getIdToken(_),O=Tt(C);he(O&&O.exp&&O.auth_time&&O.iat,v.auth,"internal-error");const V="object"==typeof O.firebase?O.firebase:void 0,le=V?.sign_in_provider;return{claims:O,token:C,authTime:ii($n(O.auth_time)),issuedAtTime:ii($n(O.iat)),expirationTime:ii($n(O.exp)),signInProvider:le||null,signInSecondFactor:V?.sign_in_second_factor||null}})).apply(this,arguments)}function $n(D){return 1e3*Number(D)}function Tt(D){var _;const[v,C,O]=D.split(".");if(void 0===v||void 0===C||void 0===O)return at("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,R.tV)(C);return V?JSON.parse(V):(at("Failed to decode base64 JWT payload"),null)}catch(V){return at("Caught error parsing JWT payload as JSON",null===(_=V)||void 0===_?void 0:_.toString()),null}}function $t(D,_){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(D,_,v=!1){if(v)return _;try{return yield _}catch(C){throw C instanceof R.ZR&&Dr(C)&&D.auth.currentUser===D&&(yield D.auth.signOut()),C}})).apply(this,arguments)}function Dr({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class ci{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var v;if(_){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const O=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(_=!1){var v=this;if(!this.isRunning)return;const C=this.getInterval(_);this.timerId=setTimeout((0,h.Z)(function*(){yield v.iteration()}),C)}iteration(){var _=this;return(0,h.Z)(function*(){var v;try{yield _.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(v=C)||void 0===v?void 0:v.code)&&_.schedule(!0))}_.schedule()})()}}class Vt{constructor(_,v){this.createdAt=_,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function di(D){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(D){var _;const v=D.auth,C=yield D.getIdToken(),O=yield $t(D,cr(v,{idToken:C}));he(O?.users.length,v,"internal-error");const V=O.users[0];D._notifyReloadListener(V);const le=null!==(_=V.providerUserInfo)&&void 0!==_&&_.length?dr(V.providerUserInfo):[],Se=hi(D.providerData,le),qt=!!D.isAnonymous&&!(D.email&&V.passwordHash||Se?.length),vn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Se,metadata:new Vt(V.createdAt,V.lastLoginAt),isAnonymous:qt};Object.assign(D,vn)})).apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(D){const _=(0,R.m9)(D);yield di(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function hi(D,_){return[...D.filter(C=>!_.some(O=>O.providerId===C.providerId)),..._]}function dr(D){return D.map(_=>{var{providerId:v}=_,C=(0,Le._T)(_,["providerId"]);return{providerId:v,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Re(){return(Re=(0,h.Z)(function*(D,_){const v=yield Gi(D,{},(0,h.Z)(function*(){const C=(0,R.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:O,apiKey:V}=D.config,le=Rs(D,O,"/v1/token",`key=${V}`),Se=yield D._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",Er.fetch()(le,{method:"POST",headers:Se,body:C})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){he(_.idToken,"internal-error"),he(typeof _.idToken<"u","internal-error"),he(typeof _.refreshToken<"u","internal-error");const v="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function It(D){const _=Tt(D);return he(_,"internal-error"),he(typeof _.exp<"u","internal-error"),he(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,v)}getToken(_,v=!1){var C=this;return(0,h.Z)(function*(){return he(!C.accessToken||C.refreshToken,_,"user-token-expired"),v||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(_,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,v){var C=this;return(0,h.Z)(function*(){const{accessToken:O,refreshToken:V,expiresIn:le}=yield function gt(D,_){return Re.apply(this,arguments)}(_,v);C.updateTokensAndExpiration(O,V,Number(le))})()}updateTokensAndExpiration(_,v,C){this.refreshToken=v||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(_,v){const{refreshToken:C,accessToken:O,expirationTime:V}=v,le=new mt;return C&&(he("string"==typeof C,"internal-error",{appName:_}),le.refreshToken=C),O&&(he("string"==typeof O,"internal-error",{appName:_}),le.accessToken=O),V&&(he("number"==typeof V,"internal-error",{appName:_}),le.expirationTime=V),le}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new mt,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Mt(D,_){he("string"==typeof D||typeof D>"u","internal-error",{appName:_})}class kt{constructor(_){var{uid:v,auth:C,stsTokenManager:O}=_,V=(0,Le._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ci(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=C,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new Vt(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(_){var v=this;return(0,h.Z)(function*(){const C=yield $t(v,v.stsTokenManager.getToken(v.auth,_));return he(C,v.auth,"internal-error"),v.accessToken!==C&&(v.accessToken=C,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),C})()}getIdTokenResult(_){return function Xn(D){return jn.apply(this,arguments)}(this,_)}reload(){return function Wi(D){return ln.apply(this,arguments)}(this)}_assign(_){this!==_&&(he(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(v=>Object.assign({},v)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new kt(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,v=!1){var C=this;return(0,h.Z)(function*(){let O=!1;_.idToken&&_.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(_),O=!0),v&&(yield di(C)),yield C.auth._persistUserIfCurrent(C),O&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var _=this;return(0,h.Z)(function*(){const v=yield _.getIdToken();return yield $t(_,function So(D,_){return ui.apply(this,arguments)}(_.auth,{idToken:v})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,v){var C,O,V,le,Se,ht,At,qt;const vn=null!==(C=v.displayName)&&void 0!==C?C:void 0,es=null!==(O=v.email)&&void 0!==O?O:void 0,Ei=null!==(V=v.phoneNumber)&&void 0!==V?V:void 0,Qr=null!==(le=v.photoURL)&&void 0!==le?le:void 0,$s=null!==(Se=v.tenantId)&&void 0!==Se?Se:void 0,zl=null!==(ht=v._redirectEventId)&&void 0!==ht?ht:void 0,fg=null!==(At=v.createdAt)&&void 0!==At?At:void 0,pg=null!==(qt=v.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:nh,emailVerified:Bc,isAnonymous:va,providerData:Kl,stsTokenManager:Gu}=v;he(nh&&Gu,_,"internal-error");const Vc=mt.fromJSON(this.name,Gu);he("string"==typeof nh,_,"internal-error"),Mt(vn,_.name),Mt(es,_.name),he("boolean"==typeof Bc,_,"internal-error"),he("boolean"==typeof va,_,"internal-error"),Mt(Ei,_.name),Mt(Qr,_.name),Mt($s,_.name),Mt(zl,_.name),Mt(fg,_.name),Mt(pg,_.name);const gn=new kt({uid:nh,auth:_,email:es,emailVerified:Bc,displayName:vn,isAnonymous:va,photoURL:Qr,phoneNumber:Ei,tenantId:$s,stsTokenManager:Vc,createdAt:fg,lastLoginAt:pg});return Kl&&Array.isArray(Kl)&&(gn.providerData=Kl.map(Uo=>Object.assign({},Uo))),zl&&(gn._redirectEventId=zl),gn}static _fromIdTokenResponse(_,v,C=!1){return(0,h.Z)(function*(){const O=new mt;O.updateFromServerResponse(v);const V=new kt({uid:v.localId,auth:_,stsTokenManager:O,isAnonymous:C});return yield di(V),V})()}}const Y=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(v,C){var O=this;return(0,h.Z)(function*(){O.storage[v]=C})()}_get(v){var C=this;return(0,h.Z)(function*(){const O=C.storage[v];return void 0===O?null:O})()}_remove(v){var C=this;return(0,h.Z)(function*(){delete C.storage[v]})()}_addListener(v,C){}_removeListener(v,C){}}return D.type="NONE",D})();function z(D,_,v){return`firebase:${D}:${_}:${v}`}class te{constructor(_,v,C){this.persistence=_,this.auth=v,this.userKey=C;const{config:O,name:V}=this.auth;this.fullUserKey=z(this.userKey,O.apiKey,V),this.fullPersistenceKey=z("persistence",O.apiKey,V),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,h.Z)(function*(){const v=yield _.persistence._get(_.fullUserKey);return v?kt._fromJSON(_.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var v=this;return(0,h.Z)(function*(){if(v.persistence===_)return;const C=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=_,C?v.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,v,C="authUser"){return(0,h.Z)(function*(){if(!v.length)return new te(ie(Y),_,C);const O=(yield Promise.all(v.map(function(){var At=(0,h.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return At.apply(this,arguments)}}()))).filter(At=>At);let V=O[0]||ie(Y);const le=z(C,_.config.apiKey,_.name);let Se=null;for(const At of v)try{const qt=yield At._get(le);if(qt){const vn=kt._fromJSON(_,qt);At!==V&&(Se=vn),V=At;break}}catch{}const ht=O.filter(At=>At._shouldAllowMigration);return V._shouldAllowMigration&&ht.length?(V=ht[0],Se&&(yield V._set(le,Se.toJSON())),yield Promise.all(v.map(function(){var At=(0,h.Z)(function*(qt){if(qt!==V)try{yield qt._remove(le)}catch{}});return function(qt){return At.apply(this,arguments)}}())),new te(V,_,C)):new te(V,_,C)})()}}function W(D){const _=D.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(Ue(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(P(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(bt(_))return"Blackberry";if(Me(_))return"Webos";if(j(_))return"Safari";if((_.includes("chrome/")||ce(_))&&!_.includes("edge/"))return"Chrome";if(vt(_))return"Android";{const C=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function P(D=(0,R.z$)()){return/firefox\//i.test(D)}function j(D=(0,R.z$)()){const _=D.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function ce(D=(0,R.z$)()){return/crios\//i.test(D)}function Ue(D=(0,R.z$)()){return/iemobile/i.test(D)}function vt(D=(0,R.z$)()){return/android/i.test(D)}function bt(D=(0,R.z$)()){return/blackberry/i.test(D)}function Me(D=(0,R.z$)()){return/webos/i.test(D)}function Ke(D=(0,R.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function zt(D=(0,R.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function xn(D=(0,R.z$)()){return Ke(D)||vt(D)||Me(D)||bt(D)||/windows phone/i.test(D)||Ue(D)}function Yn(D,_=[]){let v;switch(D){case"Browser":v=W((0,R.z$)());break;case"Worker":v=`${W((0,R.z$)())}-${D}`;break;default:v=D}const C=_.length?_.join(","):"FirebaseCore-web";return`${v}/JsCore/${$.SDK_VERSION}/${C}`}class du{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,v){const C=V=>new Promise((le,Se)=>{try{le(_(V))}catch(ht){Se(ht)}});C.onAbort=v,this.queue.push(C);const O=this.queue.length-1;return()=>{this.queue[O]=()=>Promise.resolve()}}runMiddleware(_){var v=this;return(0,h.Z)(function*(){var C;if(v.auth.currentUser===_)return;const O=[];try{for(const V of v.queue)yield V(_),V.onAbort&&O.push(V.onAbort)}catch(V){O.reverse();for(const le of O)try{le()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=V)||void 0===C?void 0:C.message})}})()}}class hu{constructor(_,v,C){this.app=_,this.heartbeatServiceProvider=v,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oa(this),this.idTokenSubscription=new Oa(this),this.beforeStateQueue=new du(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(_,v){var C=this;return v&&(this._popupRedirectResolver=ie(v)),this._initializationPromise=this.queue((0,h.Z)(function*(){var O,V;if(!C._deleted&&(C.persistenceManager=yield te.create(C,_),!C._deleted)){if(null!==(O=C._popupRedirectResolver)&&void 0!==O&&O._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(v),C.lastNotifiedUid=(null===(V=C.currentUser)||void 0===V?void 0:V.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,h.Z)(function*(){if(_._deleted)return;const v=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||v){if(_.currentUser&&v&&_.currentUser.uid===v.uid)return _._currentUser._assign(v),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(v,!0)}})()}initializeCurrentUser(_){var v=this;return(0,h.Z)(function*(){var C;const O=yield v.assertedPersistence.getCurrentUser();let V=O,le=!1;if(_&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const Se=null===(C=v.redirectUser)||void 0===C?void 0:C._redirectEventId,ht=V?._redirectEventId,At=yield v.tryRedirectSignIn(_);(!Se||Se===ht)&&At?.user&&(V=At.user,le=!0)}if(!V)return v.directlySetCurrentUser(null);if(!V._redirectEventId){if(le)try{yield v.beforeStateQueue.runMiddleware(V)}catch(Se){V=O,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(Se))}return V?v.reloadAndSetCurrentUserOrClear(V):v.directlySetCurrentUser(null)}return he(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===V._redirectEventId?v.directlySetCurrentUser(V):v.reloadAndSetCurrentUserOrClear(V)})()}tryRedirectSignIn(_){var v=this;return(0,h.Z)(function*(){let C=null;try{C=yield v._popupRedirectResolver._completeRedirectFn(v,_,!0)}catch{yield v._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(_){var v=this;return(0,h.Z)(function*(){var C;try{yield di(_)}catch(O){if("auth/network-request-failed"!==(null===(C=O)||void 0===C?void 0:C.code))return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function en(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var _=this;return(0,h.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var v=this;return(0,h.Z)(function*(){const C=_?(0,R.m9)(_):null;return C&&he(C.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(C&&C._clone(v))})()}_updateCurrentUser(_,v=!1){var C=this;return(0,h.Z)(function*(){if(!C._deleted)return _&&he(C.tenantId===_.tenantId,C,"tenant-id-mismatch"),v||(yield C.beforeStateQueue.runMiddleware(_)),C.queue((0,h.Z)(function*(){yield C.directlySetCurrentUser(_),C.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,h.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var v=this;return this.queue((0,h.Z)(function*(){yield v.assertedPersistence.setPersistence(ie(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new R.LL("auth","Firebase",_())}onAuthStateChanged(_,v,C){return this.registerStateListener(this.authStateSubscription,_,v,C)}beforeAuthStateChanged(_,v){return this.beforeStateQueue.pushCallback(_,v)}onIdTokenChanged(_,v,C){return this.registerStateListener(this.idTokenSubscription,_,v,C)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,v){var C=this;return(0,h.Z)(function*(){const O=yield C.getOrInitRedirectPersistenceManager(v);return null===_?O.removeCurrentUser():O.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var v=this;return(0,h.Z)(function*(){if(!v.redirectPersistenceManager){const C=_&&ie(_)||v._popupRedirectResolver;he(C,v,"argument-error"),v.redirectPersistenceManager=yield te.create(v,[ie(C._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(_){var v=this;return(0,h.Z)(function*(){var C,O;return v._isInitialized&&(yield v.queue((0,h.Z)(function*(){}))),(null===(C=v._currentUser)||void 0===C?void 0:C._redirectEventId)===_?v._currentUser:(null===(O=v.redirectUser)||void 0===O?void 0:O._redirectEventId)===_?v.redirectUser:null})()}_persistUserIfCurrent(_){var v=this;return(0,h.Z)(function*(){if(_===v.currentUser)return v.queue((0,h.Z)(function*(){return v.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(v=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,v,C,O){if(this._deleted)return()=>{};const V="function"==typeof v?v:v.next.bind(v),le=this._isInitialized?Promise.resolve():this._initializationPromise;return he(le,this,"internal-error"),le.then(()=>V(this.currentUser)),"function"==typeof v?_.addObserver(v,C,O):_.addObserver(v)}directlySetCurrentUser(_){var v=this;return(0,h.Z)(function*(){v.currentUser&&v.currentUser!==_&&v._currentUser._stopProactiveRefresh(),_&&v.isProactiveRefreshEnabled&&_._startProactiveRefresh(),v.currentUser=_,_?yield v.assertedPersistence.setCurrentUser(_):yield v.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Yn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,h.Z)(function*(){var v;const C={"X-Client-Version":_.clientVersion};_.app.options.appId&&(C["X-Firebase-gmpid"]=_.app.options.appId);const O=yield null===(v=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return O&&(C["X-Firebase-Client"]=O),C})()}}function xt(D){return(0,R.m9)(D)}class Oa{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,R.ne)(v=>this.observer=v)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ka(D,_,v){const C=xt(D);he(C._canInitEmulator,C,"emulator-config-failed"),he(/^https?:\/\//.test(_),C,"invalid-emulator-scheme");const O=!!v?.disableWarnings,V=Pa(_),{host:le,port:Se}=function Fa(D){const _=Pa(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(_.length));if(!v)return{host:"",port:null};const C=v[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(C);if(O){const V=O[1];return{host:V,port:hr(C.substr(V.length+1))}}{const[V,le]=C.split(":");return{host:V,port:hr(le)}}}(_);C.config.emulator={url:`${V}//${le}${null===Se?"":`:${Se}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:le,port:Se,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function La(){function D(){const _=document.createElement("p"),v=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function Pa(D){const _=D.indexOf(":");return _<0?"":D.substr(0,_+1)}function hr(D){if(!D)return null;const _=Number(D);return isNaN(_)?null:_}class hs{constructor(_,v){this.providerId=_,this.signInMethod=v}toJSON(){return ge("not implemented")}_getIdTokenResponse(_){return ge("not implemented")}_linkToIdToken(_,v){return ge("not implemented")}_getReauthenticationResolver(_){return ge("not implemented")}}function fs(D,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:resetPassword",tn(D,_))})).apply(this,arguments)}function fc(D,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function jp(D,_){return pc.apply(this,arguments)}function pc(){return(pc=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:update",tn(D,_))})).apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithPassword",tn(D,_))})).apply(this,arguments)}function zi(D,_){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:sendOobCode",tn(D,_))})).apply(this,arguments)}function aa(D,_){return er.apply(this,arguments)}function er(){return(er=(0,h.Z)(function*(D,_){return zi(D,_)})).apply(this,arguments)}function $p(D,_){return qr.apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(D,_){return zi(D,_)})).apply(this,arguments)}function fi(D,_){return la.apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(D,_){return zi(D,_)})).apply(this,arguments)}function gc(D,_){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,h.Z)(function*(D,_){return zi(D,_)})).apply(this,arguments)}function El(){return(El=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithEmailLink",tn(D,_))})).apply(this,arguments)}function mc(){return(mc=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithEmailLink",tn(D,_))})).apply(this,arguments)}class ks extends hs{constructor(_,v,C,O=null){super("password",C),this._email=_,this._password=v,this._tenantId=O}static _fromEmailAndPassword(_,v){return new ks(_,v,"password")}static _fromEmailAndCode(_,v,C=null){return new ks(_,v,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(_){var v=this;return(0,h.Z)(function*(){switch(v.signInMethod){case"password":return function fu(D,_){return pu.apply(this,arguments)}(_,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Os(D,_){return El.apply(this,arguments)}(_,{email:v._email,oobCode:v._password});default:ut(_,"internal-error")}})()}_linkToIdToken(_,v){var C=this;return(0,h.Z)(function*(){switch(C.signInMethod){case"password":return fc(_,{idToken:v,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function k_(D,_){return mc.apply(this,arguments)}(_,{idToken:v,email:C._email,oobCode:C._password});default:ut(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Ao(D,_){return si.apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithIdp",tn(D,_))})).apply(this,arguments)}class lo extends hs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const v=new lo(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(v.idToken=_.idToken),_.accessToken&&(v.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(v.nonce=_.nonce),_.pendingToken&&(v.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(v.accessToken=_.oauthToken,v.secret=_.oauthTokenSecret):ut("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:C,signInMethod:O}=v,V=(0,Le._T)(v,["providerId","signInMethod"]);if(!C||!O)return null;const le=new lo(C,O);return le.idToken=V.idToken||void 0,le.accessToken=V.accessToken||void 0,le.secret=V.secret,le.nonce=V.nonce,le.pendingToken=V.pendingToken||null,le}_getIdTokenResponse(_){return Ao(_,this.buildRequest())}_linkToIdToken(_,v){const C=this.buildRequest();return C.idToken=v,Ao(_,C)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Ao(_,v)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),_.postBody=(0,R.xO)(v)}return _}}function P_(D,_){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:sendVerificationCode",tn(D,_))})).apply(this,arguments)}function Td(){return(Td=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithPhoneNumber",tn(D,_))})).apply(this,arguments)}function af(){return(af=(0,h.Z)(function*(D,_){const v=yield Qn(D,"POST","/v1/accounts:signInWithPhoneNumber",tn(D,_));if(v.temporaryProof)throw Fr(D,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const F_={USER_NOT_FOUND:"user-not-found"};function Sd(){return(Sd=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithPhoneNumber",tn(D,Object.assign(Object.assign({},_),{operation:"REAUTH"})),F_)})).apply(this,arguments)}class Dl extends hs{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,v){return new Dl({verificationId:_,verificationCode:v})}static _fromTokenResponse(_,v){return new Dl({phoneNumber:_,temporaryProof:v})}_getIdTokenResponse(_){return function Wp(D,_){return Td.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,v){return function zp(D,_){return af.apply(this,arguments)}(_,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function L_(D,_){return Sd.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:v,verificationId:C,verificationCode:O}=this.params;return _&&v?{temporaryProof:_,phoneNumber:v}:{sessionInfo:C,code:O}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:v,verificationCode:C,phoneNumber:O,temporaryProof:V}=_;return C||v||O||V?new Dl({verificationId:v,verificationCode:C,phoneNumber:O,temporaryProof:V}):null}}class _c{constructor(_){var v,C,O,V,le,Se;const ht=(0,R.zd)((0,R.pd)(_)),At=null!==(v=ht.apiKey)&&void 0!==v?v:null,qt=null!==(C=ht.oobCode)&&void 0!==C?C:null,vn=function lf(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=ht.mode)&&void 0!==O?O:null);he(At&&qt&&vn,"argument-error"),this.apiKey=At,this.operation=vn,this.code=qt,this.continueUrl=null!==(V=ht.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(le=ht.languageCode)&&void 0!==le?le:null,this.tenantId=null!==(Se=ht.tenantId)&&void 0!==Se?Se:null}static parseLink(_){const v=function Ad(D){const _=(0,R.zd)((0,R.pd)(D)).link,v=_?(0,R.zd)((0,R.pd)(_)).deep_link_id:null,C=(0,R.zd)((0,R.pd)(D)).deep_link_id;return(C?(0,R.zd)((0,R.pd)(C)).link:null)||C||v||_||D}(_);try{return new _c(v)}catch{return null}}}let uf=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,C){return ks._fromEmailAndPassword(v,C)}static credentialWithLink(v,C){const O=_c.parseLink(C);return he(O,"argument-error"),ks._fromEmailAndCode(v,O.code,O.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class pi{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Il extends pi{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Va extends Il{static credentialFromJSON(_){const v="string"==typeof _?JSON.parse(_):_;return he("providerId"in v&&"signInMethod"in v,"argument-error"),lo._fromParams(v)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return he(_.idToken||_.accessToken,"argument-error"),lo._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Va.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Va.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:v,oauthAccessToken:C,oauthTokenSecret:O,pendingToken:V,nonce:le,providerId:Se}=_;if(!C&&!O&&!v&&!V||!Se)return null;try{return new Va(Se)._credential({idToken:v,accessToken:C,nonce:le,pendingToken:V})}catch{return null}}}let cf=(()=>{class D extends Il{constructor(){super("facebook.com")}static credential(v){return lo._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Gn=(()=>{class D extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(v,C){return lo._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:C})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:C,oauthAccessToken:O}=v;if(!C&&!O)return null;try{return D.credential(C,O)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),Ln=(()=>{class D extends Il{constructor(){super("github.com")}static credential(v){return lo._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Cl extends hs{constructor(_,v){super(_,_),this.pendingToken=v}_getIdTokenResponse(_){return Ao(_,this.buildRequest())}_linkToIdToken(_,v){const C=this.buildRequest();return C.idToken=v,Ao(_,C)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Ao(_,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:C,signInMethod:O,pendingToken:V}=v;return C&&O&&V&&C===O?new Cl(C,V):null}static _create(_,v){return new Cl(_,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ua extends pi{constructor(_){he(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return Ua.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return Ua.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const v=Cl.fromJSON(_);return he(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:v,providerId:C}=_;if(!v||!C)return null;try{return Cl._create(C,v)}catch{return null}}}let qp=(()=>{class D extends Il{constructor(){super("twitter.com")}static credential(v,C){return lo._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:C})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:C,oauthTokenSecret:O}=v;if(!C||!O)return null;try{return D.credential(C,O)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function qi(D,_){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signUp",tn(D,_))})).apply(this,arguments)}class Ri{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,v,C,O=!1){return(0,h.Z)(function*(){const V=yield kt._fromIdTokenResponse(_,C,O),le=gr(C);return new Ri({user:V,providerId:le,_tokenResponse:C,operationType:v})})()}static _forOperation(_,v,C){return(0,h.Z)(function*(){yield _._updateTokensIfNecessary(C,!0);const O=gr(C);return new Ri({user:_,providerId:O,_tokenResponse:C,operationType:v})})()}}function gr(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Yp(D){return gu.apply(this,arguments)}function gu(){return(gu=(0,h.Z)(function*(D){var _;const v=xt(D);if(yield v._initializationPromise,null!==(_=v.currentUser)&&void 0!==_&&_.isAnonymous)return new Ri({user:v.currentUser,providerId:null,operationType:"signIn"});const C=yield qi(v,{returnSecureToken:!0}),O=yield Ri._fromIdTokenResponse(v,"signIn",C,!0);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}class sr extends R.ZR{constructor(_,v,C,O){var V;super(v.code,v.message),this.operationType=C,this.user=O,Object.setPrototypeOf(this,sr.prototype),this.customData={appName:_.name,tenantId:null!==(V=_.tenantId)&&void 0!==V?V:void 0,_serverResponse:v.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(_,v,C,O){return new sr(_,v,C,O)}}function Nd(D,_,v,C){return("reauthenticate"===_?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?sr._fromErrorAndOperation(D,V,_,C):V})}function Ps(D){return new Set(D.map(({providerId:_})=>_).filter(_=>!!_))}function Sl(D,_){return wi.apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(D,_){const v=(0,R.m9)(D);yield No(!0,v,_);const{providerUserInfo:C}=yield yt(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[_]}),O=Ps(C||[]);return v.providerData=v.providerData.filter(V=>O.has(V.providerId)),O.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function xd(D,_){return Al.apply(this,arguments)}function Al(){return(Al=(0,h.Z)(function*(D,_,v=!1){const C=yield $t(D,_._linkToIdToken(D.auth,yield D.getIdToken()),v);return Ri._forOperation(D,"link",C)})).apply(this,arguments)}function No(D,_,v){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,h.Z)(function*(D,_,v){yield di(_);const O=!1===D?"provider-already-linked":"no-such-provider";he(Ps(_.providerData).has(v)===D,_.auth,O)})).apply(this,arguments)}function Yi(D,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(D,_,v=!1){var C;const{auth:O}=D,V="reauthenticate";try{const le=yield $t(D,Nd(O,V,_,D),v);he(le.idToken,O,"internal-error");const Se=Tt(le.idToken);he(Se,O,"internal-error");const{sub:ht}=Se;return he(D.uid===ht,O,"user-mismatch"),Ri._forOperation(D,V,le)}catch(le){throw"auth/user-not-found"===(null===(C=le)||void 0===C?void 0:C.code)&&ut(O,"user-mismatch"),le}})).apply(this,arguments)}function ps(D,_){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(D,_,v=!1){const C="signIn",O=yield Nd(D,C,_),V=yield Ri._fromIdTokenResponse(D,C,O);return v||(yield D._updateCurrentUser(V.user)),V})).apply(this,arguments)}function Nl(D,_){return gs.apply(this,arguments)}function gs(){return(gs=(0,h.Z)(function*(D,_){return ps(xt(D),_)})).apply(this,arguments)}function Ht(D,_){return mu.apply(this,arguments)}function mu(){return(mu=(0,h.Z)(function*(D,_){const v=(0,R.m9)(D);return yield No(!1,v,_.providerId),xd(v,_)})).apply(this,arguments)}function or(D,_){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(D,_){return Yi((0,R.m9)(D),_)})).apply(this,arguments)}function Rd(D,_){return Md.apply(this,arguments)}function Md(){return(Md=(0,h.Z)(function*(D,_){return Qn(D,"POST","/v1/accounts:signInWithCustomToken",tn(D,_))})).apply(this,arguments)}function Ha(D,_){return Od.apply(this,arguments)}function Od(){return(Od=(0,h.Z)(function*(D,_){const v=xt(D),C=yield Rd(v,{token:_,returnSecureToken:!0}),O=yield Ri._fromIdTokenResponse(v,"signIn",C);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}class yc{constructor(_,v){this.factorId=_,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(_,v){return"phoneInfo"in v?Pe._fromServerResponse(_,v):ut(_,"internal-error")}}class Pe extends yc{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,v){return new Pe(v)}}function un(D,_,v){var C;he((null===(C=v.url)||void 0===C?void 0:C.length)>0,D,"invalid-continue-uri"),he(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),_.continueUrl=v.url,_.dynamicLinkDomain=v.dynamicLinkDomain,_.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(he(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),_.iOSBundleId=v.iOS.bundleId),v.android&&(he(v.android.packageName.length>0,D,"missing-android-pkg-name"),_.androidInstallApp=v.android.installApp,_.androidMinimumVersionCode=v.android.minimumVersion,_.androidPackageName=v.android.packageName)}function vc(D,_,v){return xo.apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D),O={requestType:"PASSWORD_RESET",email:_};v&&un(C,O,v),yield $p(C,O)})).apply(this,arguments)}function Yr(D,_,v){return _u.apply(this,arguments)}function _u(){return(_u=(0,h.Z)(function*(D,_,v){yield fs((0,R.m9)(D),{oobCode:_,newPassword:v})})).apply(this,arguments)}function yu(D,_){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,h.Z)(function*(D,_){yield jp((0,R.m9)(D),{oobCode:_})})).apply(this,arguments)}function vu(D,_){return bu.apply(this,arguments)}function bu(){return(bu=(0,h.Z)(function*(D,_){const v=(0,R.m9)(D),C=yield fs(v,{oobCode:_}),O=C.requestType;switch(he(O,v,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(C.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(C.mfaInfo,v,"internal-error");default:he(C.email,v,"internal-error")}let V=null;return C.mfaInfo&&(V=yc._fromServerResponse(xt(v),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:V},operation:O}})).apply(this,arguments)}function Zp(D,_){return wu.apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(D,_){const{data:v}=yield vu((0,R.m9)(D),_);return v.email})).apply(this,arguments)}function hf(D,_,v){return xl.apply(this,arguments)}function xl(){return(xl=(0,h.Z)(function*(D,_,v){const C=xt(D),O=yield qi(C,{returnSecureToken:!0,email:_,password:v}),V=yield Ri._fromIdTokenResponse(C,"signIn",O);return yield C._updateCurrentUser(V.user),V})).apply(this,arguments)}function Ir(D,_,v){return Nl((0,R.m9)(D),uf.credential(_,v))}function fr(D,_,v){return ja.apply(this,arguments)}function ja(){return(ja=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D),O={requestType:"EMAIL_SIGNIN",email:_};he(v.handleCodeInApp,C,"argument-error"),v&&un(C,O,v),yield fi(C,O)})).apply(this,arguments)}function Ro(D,_){return"EMAIL_SIGNIN"===_c.parseLink(_)?.operation}function Mo(D,_,v){return kd.apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D),O=uf.credentialWithLink(_,v||qe());return he(O._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Nl(C,O)})).apply(this,arguments)}function Qp(D,_){return ff.apply(this,arguments)}function ff(){return(ff=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:createAuthUri",tn(D,_))})).apply(this,arguments)}function B_(D,_){return bc.apply(this,arguments)}function bc(){return(bc=(0,h.Z)(function*(D,_){const C={identifier:_,continueUri:He()?qe():"http://localhost"},{signinMethods:O}=yield Qp((0,R.m9)(D),C);return O||[]})).apply(this,arguments)}function Pd(D,_){return ca.apply(this,arguments)}function ca(){return(ca=(0,h.Z)(function*(D,_){const v=(0,R.m9)(D),O={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};_&&un(v.auth,O,_);const{email:V}=yield aa(v.auth,O);V!==D.email&&(yield D.reload())})).apply(this,arguments)}function Fd(D,_,v){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:_};v&&un(C.auth,V,v);const{email:le}=yield gc(C.auth,V);le!==D.email&&(yield D.reload())})).apply(this,arguments)}function Bd(D,_){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(D,_){return Qt(D,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function da(D,_){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,h.Z)(function*(D,{displayName:_,photoURL:v}){if(void 0===_&&void 0===v)return;const C=(0,R.m9)(D),V={idToken:yield C.getIdToken(),displayName:_,photoUrl:v,returnSecureToken:!0},le=yield $t(C,Bd(C.auth,V));C.displayName=le.displayName||null,C.photoURL=le.photoUrl||null;const Se=C.providerData.find(({providerId:ht})=>"password"===ht);Se&&(Se.displayName=C.displayName,Se.photoURL=C.photoURL),yield C._updateTokensIfNecessary(le)})).apply(this,arguments)}function Jp(D,_){return Ml((0,R.m9)(D),_,null)}function pf(D,_){return Ml((0,R.m9)(D),null,_)}function Ml(D,_,v){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(D,_,v){const{auth:C}=D,V={idToken:yield D.getIdToken(),returnSecureToken:!0};_&&(V.email=_),v&&(V.password=v);const le=yield $t(D,fc(C,V));yield D._updateTokensIfNecessary(le,!0)})).apply(this,arguments)}class tr{constructor(_,v,C={}){this.isNewUser=_,this.providerId=v,this.profile=C}}class Oo extends tr{constructor(_,v,C,O){super(_,v,C),this.username=O}}class ar extends tr{constructor(_,v){super(_,"facebook.com",v)}}class Xp extends Oo{constructor(_,v){super(_,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class eg extends tr{constructor(_,v){super(_,"google.com",v)}}class tg extends Oo{constructor(_,v,C){super(_,"twitter.com",v,C)}}function wc(D){const{user:_,_tokenResponse:v}=D;return _.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Fs(D){var _,v;if(!D)return null;const{providerId:C}=D,O=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},V=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!C&&D?.idToken){const le=null===(v=null===(_=Tt(D.idToken))||void 0===_?void 0:_.firebase)||void 0===v?void 0:v.sign_in_provider;if(le)return new tr(V,"anonymous"!==le&&"custom"!==le?le:null)}if(!C)return null;switch(C){case"facebook.com":return new ar(V,O);case"github.com":return new Xp(V,O);case"google.com":return new eg(V,O);case"twitter.com":return new tg(V,O,D.screenName||null);case"custom":case"anonymous":return new tr(V,null);default:return new tr(V,C,O)}}(v)}class _s{constructor(_,v,C){this.type=_,this.credential=v,this.auth=C}static _fromIdtoken(_,v){return new _s("enroll",_,v)}static _fromMfaPendingCredential(_){return new _s("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var v,C;if(_?.multiFactorSession){if(null!==(v=_.multiFactorSession)&&void 0!==v&&v.pendingCredential)return _s._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(C=_.multiFactorSession)&&void 0!==C&&C.idToken)return _s._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Oi{constructor(_,v,C){this.session=_,this.hints=v,this.signInResolver=C}static _fromError(_,v){const C=xt(_),O=v.customData._serverResponse,V=(O.mfaInfo||[]).map(Se=>yc._fromServerResponse(C,Se));he(O.mfaPendingCredential,C,"internal-error");const le=_s._fromMfaPendingCredential(O.mfaPendingCredential);return new Oi(le,V,function(){var Se=(0,h.Z)(function*(ht){const At=yield ht._process(C,le);delete O.mfaInfo,delete O.mfaPendingCredential;const qt=Object.assign(Object.assign({},O),{idToken:At.idToken,refreshToken:At.refreshToken});switch(v.operationType){case"signIn":const vn=yield Ri._fromIdTokenResponse(C,v.operationType,qt);return yield C._updateCurrentUser(vn.user),vn;case"reauthenticate":return he(v.user,C,"internal-error"),Ri._forOperation(v.user,v.operationType,qt);default:ut(C,"internal-error")}});return function(ht){return Se.apply(this,arguments)}}())}resolveSignIn(_){var v=this;return(0,h.Z)(function*(){return v.signInResolver(_)})()}}function Ec(D,_){var v;const C=(0,R.m9)(D),O=_;return he(_.customData.operationType,C,"argument-error"),he(null===(v=O.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,C,"argument-error"),Oi._fromError(C,O)}function Du(D,_){return Qt(D,"POST","/v2/accounts/mfaEnrollment:start",tn(D,_))}class Ga{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(C=>yc._fromServerResponse(_.auth,C)))})}static _fromUser(_){return new Ga(_)}getSession(){var _=this;return(0,h.Z)(function*(){return _s._fromIdtoken(yield _.user.getIdToken(),_.user.auth)})()}enroll(_,v){var C=this;return(0,h.Z)(function*(){const O=_,V=yield C.getSession(),le=yield $t(C.user,O._process(C.user.auth,V,v));return yield C.user._updateTokensIfNecessary(le),C.user.reload()})()}unenroll(_){var v=this;return(0,h.Z)(function*(){var C;const O="string"==typeof _?_:_.uid,V=yield v.user.getIdToken(),le=yield $t(v.user,function $a(D,_){return Qt(D,"POST","/v2/accounts/mfaEnrollment:withdraw",tn(D,_))}(v.user.auth,{idToken:V,mfaEnrollmentId:O}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Se})=>Se!==O),yield v.user._updateTokensIfNecessary(le);try{yield v.user.reload()}catch(Se){if("auth/user-token-expired"!==(null===(C=Se)||void 0===C?void 0:C.code))throw Se}})()}}const Mn=new WeakMap;function gf(D){const _=(0,R.m9)(D);return Mn.has(_)||Mn.set(_,Ga._fromUser(_)),Mn.get(_)}const ho="__sak";class Ol{constructor(_,v){this.storageRetriever=_,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(ho,"1"),this.storage.removeItem(ho),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,v){return this.storage.setItem(_,JSON.stringify(v)),Promise.resolve()}_get(_){const v=this.storage.getItem(_);return Promise.resolve(v?JSON.parse(v):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const ki=(()=>{class D extends Ol{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,C)=>this.onStorageEvent(v,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vd(){const D=(0,R.z$)();return j(D)||Ke(D)}()&&function Ms(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xn(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const C of Object.keys(this.listeners)){const O=this.storage.getItem(C),V=this.localCache[C];O!==V&&v(C,V,O)}}onStorageEvent(v,C=!1){if(!v.key)return void this.forAllChangedKeys((Se,ht,At)=>{this.notifyListeners(Se,At)});const O=v.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(O);if(v.newValue!==Se)null!==v.newValue?this.storage.setItem(O,v.newValue):this.storage.removeItem(O);else if(this.localCache[O]===v.newValue&&!C)return}const V=()=>{const Se=this.storage.getItem(O);!C&&this.localCache[O]===Se||this.notifyListeners(O,Se)},le=this.storage.getItem(O);!function Jt(){return(0,R.w1)()&&10===document.documentMode}()||le===v.newValue||v.newValue===v.oldValue?V():setTimeout(V,10)}notifyListeners(v,C){this.localCache[v]=C;const O=this.listeners[v];if(O)for(const V of Array.from(O))V(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,C,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:C,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,C){var O=()=>super._set,V=this;return(0,h.Z)(function*(){yield O().call(V,v,C),V.localCache[v]=JSON.stringify(C)})()}_get(v){var C=()=>super._get,O=this;return(0,h.Z)(function*(){const V=yield C().call(O,v);return O.localCache[v]=JSON.stringify(V),V})()}_remove(v){var C=()=>super._remove,O=this;return(0,h.Z)(function*(){yield C().call(O,v),delete O.localCache[v]})()}}return D.type="LOCAL",D})(),ko=(()=>{class D extends Ol{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,C){}_removeListener(v,C){}}return D.type="SESSION",D})();let Cu=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const C=this.receivers.find(V=>V.isListeningto(v));if(C)return C;const O=new D(v);return this.receivers.push(O),O}isListeningto(v){return this.eventTarget===v}handleEvent(v){var C=this;return(0,h.Z)(function*(){const O=v,{eventId:V,eventType:le,data:Se}=O.data,ht=C.handlersMap[le];if(!ht?.size)return;O.ports[0].postMessage({status:"ack",eventId:V,eventType:le});const At=Array.from(ht).map(function(){var vn=(0,h.Z)(function*(es){return es(O.origin,Se)});return function(es){return vn.apply(this,arguments)}}()),qt=yield function kl(D){return Promise.all(D.map(function(){var _=(0,h.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(C){return{fulfilled:!1,reason:C}}});return function(v){return _.apply(this,arguments)}}()))}(At);O.ports[0].postMessage({status:"done",eventId:V,eventType:le,response:qt})})()}_subscribe(v,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(C)}_unsubscribe(v,C){this.handlersMap[v]&&C&&this.handlersMap[v].delete(C),(!C||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function Wa(D="",_=10){let v="";for(let C=0;C<_;C++)v+=Math.floor(10*Math.random());return D+v}class Cc{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,v,C=50){var O=this;return(0,h.Z)(function*(){const V=typeof MessageChannel<"u"?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let le,Se;return new Promise((ht,At)=>{const qt=Wa("",20);V.port1.start();const vn=setTimeout(()=>{At(new Error("unsupported_event"))},C);Se={messageChannel:V,onMessage(es){const Ei=es;if(Ei.data.eventId===qt)switch(Ei.data.status){case"ack":clearTimeout(vn),le=setTimeout(()=>{At(new Error("timeout"))},3e3);break;case"done":clearTimeout(le),ht(Ei.data.response);break;default:clearTimeout(vn),clearTimeout(le),At(new Error("invalid_response"))}}},O.handlers.add(Se),V.port1.addEventListener("message",Se.onMessage),O.target.postMessage({eventType:_,eventId:qt,data:v},[V.port2])}).finally(()=>{Se&&O.removeMessageHandler(Se)})})()}}function Cr(){return window}function oi(){return typeof Cr().WorkerGlobalScope<"u"&&"function"==typeof Cr().importScripts}function za(){return(za=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fa="firebaseLocalStorageDb",Ka="firebaseLocalStorage",Ac="fbase_key";class qa{constructor(_){this.request=_}toPromise(){return new Promise((_,v)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Nc(D,_){return D.transaction([Ka],_?"readwrite":"readonly").objectStore(Ka)}function Tr(){const D=indexedDB.open(fa,1);return new Promise((_,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const C=D.result;try{C.createObjectStore(Ka,{keyPath:Ac})}catch(O){v(O)}}),D.addEventListener("success",(0,h.Z)(function*(){const C=D.result;C.objectStoreNames.contains(Ka)?_(C):(C.close(),yield function _f(){const D=indexedDB.deleteDatabase(fa);return new qa(D).toPromise()}(),_(yield Tr()))}))})}function Lr(D,_,v){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(D,_,v){const C=Nc(D,!0).put({[Ac]:_,value:v});return new qa(C).toPromise()})).apply(this,arguments)}function Tu(){return(Tu=(0,h.Z)(function*(D,_){const v=Nc(D,!1).get(_),C=yield new qa(v).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function yf(D,_){const v=Nc(D,!0).delete(_);return new qa(v).toPromise()}const Po=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,h.Z)(function*(){return v.db||(v.db=yield Tr()),v.db})()}_withRetries(v){var C=this;return(0,h.Z)(function*(){let O=0;for(;;)try{const V=yield C._openDb();return yield v(V)}catch(V){if(O++>3)throw V;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,h.Z)(function*(){return oi()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,h.Z)(function*(){v.receiver=Cu._getInstance(function Sc(){return oi()?self:null}()),v.receiver._subscribe("keyChanged",function(){var C=(0,h.Z)(function*(O,V){return{keyProcessed:(yield v._poll()).includes(V.key)}});return function(O,V){return C.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var C=(0,h.Z)(function*(O,V){return["keyChanged"]});return function(O,V){return C.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,h.Z)(function*(){var C,O;if(v.activeServiceWorker=yield function Tc(){return za.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Cc(v.activeServiceWorker);const V=yield v.sender._send("ping",{},800);!V||(null===(C=V[0])||void 0===C?void 0:C.fulfilled)&&(null===(O=V[0])||void 0===O?void 0:O.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var C=this;return(0,h.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Ud(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:v},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const v=yield Tr();return yield Lr(v,ho,"1"),yield yf(v,ho),!0}catch{}return!1})()}_withPendingWrite(v){var C=this;return(0,h.Z)(function*(){C.pendingWrites++;try{yield v()}finally{C.pendingWrites--}})()}_set(v,C){var O=this;return(0,h.Z)(function*(){return O._withPendingWrite((0,h.Z)(function*(){return yield O._withRetries(V=>Lr(V,v,C)),O.localCache[v]=C,O.notifyServiceWorker(v)}))})()}_get(v){var C=this;return(0,h.Z)(function*(){const O=yield C._withRetries(V=>function ng(D,_){return Tu.apply(this,arguments)}(V,v));return C.localCache[v]=O,O})()}_remove(v){var C=this;return(0,h.Z)(function*(){return C._withPendingWrite((0,h.Z)(function*(){return yield C._withRetries(O=>yf(O,v)),delete C.localCache[v],C.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,h.Z)(function*(){const C=yield v._withRetries(le=>{const Se=Nc(le,!1).getAll();return new qa(Se).toPromise()});if(!C)return[];if(0!==v.pendingWrites)return[];const O=[],V=new Set;for(const{fbase_key:le,value:Se}of C)V.add(le),JSON.stringify(v.localCache[le])!==JSON.stringify(Se)&&(v.notifyListeners(le,Se),O.push(le));for(const le of Object.keys(v.localCache))v.localCache[le]&&!V.has(le)&&(v.notifyListeners(le,null),O.push(le));return O})()}notifyListeners(v,C){this.localCache[v]=C;const O=this.listeners[v];if(O)for(const V of Array.from(O))V(C)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(C)}_removeListener(v,C){this.listeners[v]&&(this.listeners[v].delete(C),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function Su(D,_){return Qt(D,"POST","/v2/accounts/mfaSignIn:start",tn(D,_))}function ys(){return(ys=(0,h.Z)(function*(D){return(yield Qt(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ll(D){return new Promise((_,v)=>{const C=document.createElement("script");C.setAttribute("src",D),C.onload=_,C.onerror=O=>{const V=Be("internal-error");V.customData=O,v(V)},C.type="text/javascript",C.charset="UTF-8",function Au(){var D,_;return null!==(_=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==_?_:document}().appendChild(C)})}function Hd(D){return`__${D}${Math.floor(1e6*Math.random())}`}const xu=1e12;class xc{constructor(_){this.auth=_,this.counter=xu,this._widgets=new Map}render(_,v){const C=this.counter;return this._widgets.set(C,new Wn(_,this.auth.name,v||{})),this.counter++,C}reset(_){var v;const C=_||xu;null===(v=this._widgets.get(C))||void 0===v||v.delete(),this._widgets.delete(C)}getResponse(_){var v;return(null===(v=this._widgets.get(_||xu))||void 0===v?void 0:v.getResponse())||""}execute(_){var v=this;return(0,h.Z)(function*(){var C;return null===(C=v._widgets.get(_||xu))||void 0===C||C.execute(),""})()}}class Wn{constructor(_,v,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof _?document.getElementById(_):_;he(O,"argument-error",{appName:v}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function L(D){const _=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<D;C++)_.push(v.charAt(Math.floor(Math.random()*v.length)));return _.join("")}(50);const{callback:_,"expired-callback":v}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bl=Hd("rcb"),bf=new et(3e4,6e4);class yn{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=Cr().grecaptcha)||void 0===_||!_.render)}load(_,v=""){return he(function X0(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(v),_,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(Cr().grecaptcha):new Promise((C,O)=>{const V=Cr().setTimeout(()=>{O(Be(_,"network-request-failed"))},bf.get());Cr()[Bl]=()=>{Cr().clearTimeout(V),delete Cr()[Bl];const Se=Cr().grecaptcha;if(!Se)return void O(Be(_,"internal-error"));const ht=Se.render;Se.render=(At,qt)=>{const vn=ht(At,qt);return this.counter++,vn},this.hostLanguage=v,C(Se)},Ll(`https://www.google.com/recaptcha/api.js??${(0,R.xO)({onload:Bl,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(V),O(Be(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var v;return!(null===(v=Cr().grecaptcha)||void 0===v||!v.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class eb{load(_){return(0,h.Z)(function*(){return new xc(_)})()}clearedOneInstance(){}}const Ru="recaptcha",Mu={theme:"light",type:"image"};class V_{constructor(_,v=Object.assign({},Mu),C){this.parameters=v,this.type=Ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xt(C),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof _?document.getElementById(_):_;he(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new eb:new yn,this.validateStartingState()}verify(){var _=this;return(0,h.Z)(function*(){_.assertNotDestroyed();const v=yield _.render(),C=_.getAssertedRecaptcha();return C.getResponse(v)||new Promise(V=>{const le=Se=>{!Se||(_.tokenChangeListeners.delete(le),V(Se))};_.tokenChangeListeners.add(le),_.isInvisible&&C.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return v=>{if(this.tokenChangeListeners.forEach(C=>C(v)),"function"==typeof _)_(v);else if("string"==typeof _){const C=Cr()[_];"function"==typeof C&&C(v)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,h.Z)(function*(){if(yield _.init(),!_.widgetId){let v=_.container;if(!_.isInvisible){const C=document.createElement("div");v.appendChild(C),v=C}_.widgetId=_.getAssertedRecaptcha().render(v,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,h.Z)(function*(){he(He()&&!oi(),_.auth,"internal-error"),yield function Zr(){let D=null;return new Promise(_=>{"complete"!==document.readyState?(D=()=>_(),window.addEventListener("load",D)):_()}).catch(_=>{throw D&&window.removeEventListener("load",D),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const v=yield function Qa(D){return ys.apply(this,arguments)}(_.auth);he(v,_.auth,"internal-error"),_.parameters.sitekey=v})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _r{constructor(_,v){this.verificationId=_,this.onConfirmation=v}confirm(_){const v=Dl._fromVerification(this.verificationId,_);return this.onConfirmation(v)}}function Ja(D,_,v){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(D,_,v){const C=xt(D),O=yield ma(C,_,(0,R.m9)(v));return new _r(O,V=>Nl(C,V))})).apply(this,arguments)}function Br(D,_,v){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D);yield No(!1,C,"phone");const O=yield ma(C.auth,_,(0,R.m9)(v));return new _r(O,V=>Ht(C,V))})).apply(this,arguments)}function zn(D,_,v){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D),O=yield ma(C.auth,_,(0,R.m9)(v));return new _r(O,V=>or(C,V))})).apply(this,arguments)}function ma(D,_,v){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(D,_,v){var C;const O=yield v.verify();try{let V;if(he("string"==typeof O,D,"argument-error"),he(v.type===Ru,D,"argument-error"),V="string"==typeof _?{phoneNumber:_}:_,"session"in V){const le=V.session;if("phoneNumber"in V)return he("enroll"===le.type,D,"internal-error"),(yield Du(D,{idToken:le.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{he("signin"===le.type,D,"internal-error");const Se=(null===(C=V.multiFactorHint)||void 0===C?void 0:C.uid)||V.multiFactorUid;return he(Se,D,"missing-multi-factor-info"),(yield Su(D,{mfaPendingCredential:le.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:le}=yield P_(D,{phoneNumber:V.phoneNumber,recaptchaToken:O});return le}}finally{v._reset()}})).apply(this,arguments)}function yr(D,_){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(D,_){yield xd((0,R.m9)(D),_)})).apply(this,arguments)}let rg=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=xt(v)}verifyPhoneNumber(v,C){return ma(this.auth,v,(0,R.m9)(C))}static credential(v,C){return Dl._fromVerification(v,C)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:C,temporaryProof:O}=v;return C&&O?Dl._fromTokenResponse(C,O):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Vl(D,_){return _?ie(_):(he(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class Rc extends hs{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Ao(_,this._buildIdpRequest())}_linkToIdToken(_,v){return Ao(_,this._buildIdpRequest(v))}_getReauthenticationResolver(_){return Ao(_,this._buildIdpRequest())}_buildIdpRequest(_){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(v.idToken=_),v}}function wf(D){return ps(D.auth,new Rc(D),D.bypassAuthState)}function Vr(D){const{auth:_,user:v}=D;return he(v,_,"internal-error"),Yi(v,new Rc(D),D.bypassAuthState)}function jd(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,h.Z)(function*(D){const{auth:_,user:v}=D;return he(v,_,"internal-error"),xd(v,new Rc(D),D.bypassAuthState)})).apply(this,arguments)}class vs{constructor(_,v,C,O,V=!1){this.auth=_,this.resolver=C,this.user=O,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var _=this;return new Promise(function(){var v=(0,h.Z)(function*(C,O){_.pendingPromise={resolve:C,reject:O};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(V){_.reject(V)}});return function(C,O){return v.apply(this,arguments)}}())}onAuthEvent(_){var v=this;return(0,h.Z)(function*(){const{urlResponse:C,sessionId:O,postBody:V,tenantId:le,error:Se,type:ht}=_;if(Se)return void v.reject(Se);const At={auth:v.auth,requestUri:C,sessionId:O,tenantId:le||void 0,postBody:V||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(ht)(At))}catch(qt){v.reject(qt)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return wf;case"linkViaPopup":case"linkViaRedirect":return jd;case"reauthViaPopup":case"reauthViaRedirect":return Vr;default:ut(this.auth,"internal-error")}}resolve(_){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ef=new et(2e3,1e4);function ig(D,_,v){return $d.apply(this,arguments)}function $d(){return($d=(0,h.Z)(function*(D,_,v){const C=xt(D);De(D,_,pi);const O=Vl(C,v);return new Ul(C,"signInViaPopup",_,O).executeNotNull()})).apply(this,arguments)}function Gd(D,_,v){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D);De(C.auth,_,pi);const O=Vl(C.auth,v);return new Ul(C.auth,"reauthViaPopup",_,O,C).executeNotNull()})).apply(this,arguments)}function Ou(D,_,v){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D);De(C.auth,_,pi);const O=Vl(C.auth,v);return new Ul(C.auth,"linkViaPopup",_,O,C).executeNotNull()})).apply(this,arguments)}let Ul=(()=>{class D extends vs{constructor(v,C,O,V,le){super(v,C,V,le),this.provider=O,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,h.Z)(function*(){const C=yield v.execute();return he(C,v.auth,"internal-error"),C})()}onExecution(){var v=this;return(0,h.Z)(function*(){Te(1===v.filter.length,"Popup operations only handle one event");const C=Wa();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],C),v.authWindow.associatedEvent=C,v.resolver._originValidation(v.auth).catch(O=>{v.reject(O)}),v.resolver._isIframeWebStorageSupported(v.auth,O=>{O||v.reject(Be(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var C,O;this.pollId=null!==(O=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==O&&O.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,Ef.get())};v()}}return D.currentPopupAction=null,D})();const go=new Map;class mo extends vs{constructor(_,v,C=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,C),this.eventId=null}execute(){var _=()=>super.execute,v=this;return(0,h.Z)(function*(){let C=go.get(v.auth._key());if(!C){try{const V=(yield function Lo(D,_){return jl.apply(this,arguments)}(v.resolver,v.auth))?yield _().call(v):null;C=()=>Promise.resolve(V)}catch(O){C=()=>Promise.reject(O)}go.set(v.auth._key(),C)}return v.bypassAuthState||go.set(v.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(_){var v=()=>super.onAuthEvent,C=this;return(0,h.Z)(function*(){if("signInViaRedirect"===_.type)return v().call(C,_);if("unknown"!==_.type){if(_.eventId){const O=yield C.auth._redirectUserForId(_.eventId);if(O)return C.user=O,v().call(C,_);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function jl(){return(jl=(0,h.Z)(function*(D,_){const v=hn(_),C=Ji(D);if(!(yield C._isAvailable()))return!1;const O="true"===(yield C._get(v));return yield C._remove(v),O})).apply(this,arguments)}function Oc(D,_){return zd.apply(this,arguments)}function zd(){return(zd=(0,h.Z)(function*(D,_){return Ji(D)._set(hn(_),"true")})).apply(this,arguments)}function Ls(){go.clear()}function ku(D,_){go.set(D._key(),_)}function Ji(D){return ie(D._redirectPersistence)}function hn(D){return z("pendingRedirect",D.config.apiKey,D.name)}function Df(D,_,v){return function vr(D,_,v){return Bs.apply(this,arguments)}(D,_,v)}function Bs(){return(Bs=(0,h.Z)(function*(D,_,v){const C=xt(D);De(D,_,pi);const O=Vl(C,v);return yield Oc(O,C),O._openRedirect(C,_,"signInViaRedirect")})).apply(this,arguments)}function Pu(D,_,v){return function _o(D,_,v){return _a.apply(this,arguments)}(D,_,v)}function _a(){return(_a=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D);De(C.auth,_,pi);const O=Vl(C.auth,v);yield Oc(O,C.auth);const V=yield Vs(C);return O._openRedirect(C.auth,_,"reauthViaRedirect",V)})).apply(this,arguments)}function sg(D,_,v){return function Fu(D,_,v){return Kd.apply(this,arguments)}(D,_,v)}function Kd(){return(Kd=(0,h.Z)(function*(D,_,v){const C=(0,R.m9)(D);De(C.auth,_,pi);const O=Vl(C.auth,v);yield No(!1,C,_.providerId),yield Oc(O,C.auth);const V=yield Vs(C);return O._openRedirect(C.auth,_,"linkViaRedirect",V)})).apply(this,arguments)}function Bo(D,_){return rr.apply(this,arguments)}function rr(){return(rr=(0,h.Z)(function*(D,_){return yield xt(D)._initializationPromise,$l(D,_,!1)})).apply(this,arguments)}function $l(D,_){return ya.apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(D,_,v=!1){const C=xt(D),O=Vl(C,_),le=yield new mo(C,O,v).execute();return le&&!v&&(delete le.user._redirectEventId,yield C._persistUserIfCurrent(le.user),yield C._setRedirectUser(null,_)),le})).apply(this,arguments)}function Vs(D){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(D){const _=Wa(`${D.uid}:::`);return D._redirectEventId=_,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),_})).apply(this,arguments)}class Ur{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let v=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(_,C)&&(v=!0,this.sendToConsumer(_,C),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function Yd(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hr(D);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=_,v=!0)),v}sendToConsumer(_,v){var C;if(_.error&&!Hr(_)){const O=(null===(C=_.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";v.onError(Be(this.auth,O))}else v.onAuthEvent(_)}isEventForConsumer(_,v){const C=null===v.eventId||!!_.eventId&&_.eventId===v.eventId;return v.filter.includes(_.type)&&C}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qd(_))}saveEventToCache(_){this.cachedEventUids.add(qd(_)),this.lastProcessedEventTime=Date.now()}}function qd(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(_=>_).join("-")}function Hr({type:D,error:_}){return"unknown"===D&&"auth/no-auth-event"===_?.code}function tl(D){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,h.Z)(function*(D,_={}){return Qt(D,"GET","/v1/projects",_)})).apply(this,arguments)}const og=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ai=/^https?/;function lr(){return(lr=(0,h.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:_}=yield tl(D);for(const v of _)try{if(jr(v))return}catch{}ut(D,"unauthorized-domain")})).apply(this,arguments)}function jr(D){const _=qe(),{protocol:v,hostname:C}=new URL(_);if(D.startsWith("chrome-extension://")){const le=new URL(D);return""===le.hostname&&""===C?"chrome-extension:"===v&&D.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===v&&le.hostname===C}if(!ai.test(v))return!1;if(og.test(D))return C===D;const O=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(C)}const Gl=new et(3e4,6e4);function Lu(){const D=Cr().___jsl;if(D?.H)for(const _ of Object.keys(D.H))if(D.H[_].r=D.H[_].r||[],D.H[_].L=D.H[_].L||[],D.H[_].r=[...D.H[_].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let Ar=null;function Vu(D){return Ar=Ar||function Bu(D){return new Promise((_,v)=>{var C,O,V;function le(){Lu(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Lu(),v(Be(D,"network-request-failed"))},timeout:Gl.get()})}if(null!==(O=null===(C=Cr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==O&&O.Iframe)_(gapi.iframes.getContext());else{if(null===(V=Cr().gapi)||void 0===V||!V.load){const Se=Hd("iframefcb");return Cr()[Se]=()=>{gapi.load?le():v(Be(D,"network-request-failed"))},Ll(`https://apis.google.com/js/api.js?onload=${Se}`).catch(ht=>v(ht))}le()}}).catch(_=>{throw Ar=null,_})}(D),Ar}const Uu=new et(5e3,15e3),Qd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ag=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kc(D){const _=D.config;he(_.authDomain,D,"auth-domain-config-required");const v=_.emulator?Pn(_,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,C={apiKey:_.apiKey,appName:D.name,v:$.SDK_VERSION},O=ag.get(D.config.apiHost);O&&(C.eid=O);const V=D._getFrameworks();return V.length&&(C.fw=V.join(",")),`${v}?${(0,R.xO)(C).slice(1)}`}function Hu(){return Hu=(0,h.Z)(function*(D){const _=yield Vu(D),v=Cr().gapi;return he(v,D,"internal-error"),_.open({where:document.body,url:kc(D),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qd,dontclear:!0},C=>new Promise(function(){var O=(0,h.Z)(function*(V,le){yield C.restyle({setHideOnLeave:!1});const Se=Be(D,"network-request-failed"),ht=Cr().setTimeout(()=>{le(Se)},Uu.get());function At(){Cr().clearTimeout(ht),V(C)}C.ping(At).then(At,()=>{le(Se)})});return function(V,le){return O.apply(this,arguments)}}()))}),Hu.apply(this,arguments)}const bs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lg{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $u(D,_,v,C,O,V){he(D.config.authDomain,D,"auth-domain-config-required"),he(D.config.apiKey,D,"invalid-api-key");const le={apiKey:D.config.apiKey,appName:D.name,authType:v,redirectUrl:C,v:$.SDK_VERSION,eventId:O};if(_ instanceof pi){_.setDefaultLanguage(D.languageCode),le.providerId=_.providerId||"",(0,R.xb)(_.getCustomParameters())||(le.customParameters=JSON.stringify(_.getCustomParameters()));for(const[ht,At]of Object.entries(V||{}))le[ht]=At}if(_ instanceof Il){const ht=_.getScopes().filter(At=>""!==At);ht.length>0&&(le.scopes=ht.join(","))}D.tenantId&&(le.tid=D.tenantId);const Se=le;for(const ht of Object.keys(Se))void 0===Se[ht]&&delete Se[ht];return`${function $r({config:D}){return D.emulator?Pn(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,R.xO)(Se).slice(1)}`}const js="webStorageSupport",ug=class eh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ko,this._completeRedirectFn=$l,this._overrideRedirectResult=ku}_openPopup(_,v,C,O){var V=this;return(0,h.Z)(function*(){var le;Te(null===(le=V.eventManagers[_._key()])||void 0===le?void 0:le.manager,"_initialize() not called before _openPopup()");const Se=$u(_,v,C,qe(),O);return function ju(D,_,v,C=500,O=600){const V=Math.max((window.screen.availHeight-O)/2,0).toString(),le=Math.max((window.screen.availWidth-C)/2,0).toString();let Se="";const ht=Object.assign(Object.assign({},bs),{width:C.toString(),height:O.toString(),top:V,left:le}),At=(0,R.z$)().toLowerCase();v&&(Se=ce(At)?"_blank":v),P(At)&&(_=_||"http://localhost",ht.scrollbars="yes");const qt=Object.entries(ht).reduce((es,[Ei,Qr])=>`${es}${Ei}=${Qr},`,"");if(function Nn(D=(0,R.z$)()){var _;return Ke(D)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(At)&&"_self"!==Se)return function Wl(D,_){const v=document.createElement("a");v.href=D,v.target=_;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(C)}(_||"",Se),new lg(null);const vn=window.open(_||"",Se,qt);he(vn,D,"popup-blocked");try{vn.focus()}catch{}return new lg(vn)}(_,Se,Wa())})()}_openRedirect(_,v,C,O){var V=this;return(0,h.Z)(function*(){return yield V._originValidation(_),function Pl(D){Cr().location.href=D}($u(_,v,C,qe(),O)),new Promise(()=>{})})()}_initialize(_){const v=_._key();if(this.eventManagers[v]){const{manager:O,promise:V}=this.eventManagers[v];return O?Promise.resolve(O):(Te(V,"If manager is not set, promise should be"),V)}const C=this.initAndGetManager(_);return this.eventManagers[v]={promise:C},C.catch(()=>{delete this.eventManagers[v]}),C}initAndGetManager(_){var v=this;return(0,h.Z)(function*(){const C=yield function Jd(D){return Hu.apply(this,arguments)}(_),O=new Ur(_);return C.register("authEvent",V=>(he(V?.authEvent,_,"invalid-auth-event"),{status:O.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[_._key()]={manager:O},v.iframes[_._key()]=C,O})()}_isIframeWebStorageSupported(_,v){this.iframes[_._key()].send(js,{type:js},O=>{var V;const le=null===(V=O?.[0])||void 0===V?void 0:V[js];void 0!==le&&v(!!le),ut(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const v=_._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Sr(D){return lr.apply(this,arguments)}(_)),this.originValidationPromises[v]}get _shouldInitProactively(){return xn()||j()||Ke()}};class Xt extends class Fc{constructor(_){this.factorId=_}_process(_,v,C){switch(v.type){case"enroll":return this._finalizeEnroll(_,v.credential,C);case"signin":return this._finalizeSignIn(_,v.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new Xt(_)}_finalizeEnroll(_,v,C){return function ha(D,_){return Qt(D,"POST","/v2/accounts/mfaEnrollment:finalize",tn(D,_))}(_,{idToken:v,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,v){return function ga(D,_){return Qt(D,"POST","/v2/accounts/mfaSignIn:finalize",tn(D,_))}(_,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vo=(()=>{class D{constructor(){}static assertion(v){return Xt._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var rl="@firebase/auth",il="0.20.10";class Cf{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var v=this;return(0,h.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const v=this.auth.onIdTokenChanged(C=>{var O;_((null===(O=C)||void 0===O?void 0:O.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,v),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const v=this.internalListeners.get(_);!v||(this.internalListeners.delete(_),v(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const hg=(0,R.Pz)("authIdTokenMaxAge")||300;let sl=null;const Lc=D=>function(){var _=(0,h.Z)(function*(v){const C=v&&(yield v.getIdTokenResult()),O=C&&((new Date).getTime()-Date.parse(C.issuedAtTime))/1e3;if(O&&O>hg)return;const V=C?.token;sl!==V&&(sl=V,yield fetch(D,{method:V?"POST":"DELETE",headers:V?{Authorization:`Bearer ${V}`}:{}}))});return function(v){return _.apply(this,arguments)}}();function th(D=(0,$.getApp)()){const _=(0,$._getProvider)(D,"auth");if(_.isInitialized())return _.getImmediate();const v=function ve(D,_){const v=(0,$._getProvider)(D,"auth");if(v.isInitialized()){const O=v.getImmediate(),V=v.getOptions();if((0,R.vZ)(V,_??{}))return O;ut(O,"already-initialized")}return v.initialize({options:_})}(D,{popupRedirectResolver:ug,persistence:[Po,ki,ko]}),C=(0,R.Pz)("authTokenSyncURL");if(C){const V=Lc(C);(function _e(D,_,v){(0,R.m9)(D).beforeAuthStateChanged(_,v)})(v,V,()=>V(v.currentUser)),function Ee(D,_,v,C){(0,R.m9)(D).onIdTokenChanged(_,v,C)}(v,le=>V(le))}const O=(0,R.q4)("auth");return O&&ka(v,`http://${O}`),v}!function dg(D){(0,$._registerComponent)(new Ae.wA("auth",(_,{options:v})=>{const C=_.getProvider("app").getImmediate(),O=_.getProvider("heartbeat"),{apiKey:V,authDomain:le}=C.options;return((Se,ht)=>{he(V&&!V.includes(":"),"invalid-api-key",{appName:Se.name}),he(!le?.includes(":"),"argument-error",{appName:Se.name});const At={apiKey:V,authDomain:le,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yn(D)},qt=new hu(Se,ht,At);return function fe(D,_){const v=_?.persistence||[],C=(Array.isArray(v)?v:[v]).map(ie);_?.errorMap&&D._updateErrorMap(_.errorMap),D._initializeWithPersistence(C,_?.popupRedirectResolver)}(qt,v),qt})(C,O)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,v,C)=>{_.getProvider("auth-internal").initialize()})),(0,$._registerComponent)(new Ae.wA("auth-internal",_=>{const v=xt(_.getProvider("auth").getImmediate());return new Cf(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$.registerVersion)(rl,il,function cg(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,$.registerVersion)(rl,il,"esm2017")}("Browser")},2090:(St,Ve,G)=>{"use strict";G.d(Ve,{$s:()=>mt,BH:()=>en,DV:()=>Fr,G6:()=>De,GJ:()=>Rs,L:()=>ke,LL:()=>Fn,P0:()=>He,Pz:()=>Cn,Sg:()=>et,UG:()=>ze,UI:()=>ui,US:()=>Ae,Wl:()=>Pr,Yr:()=>Ne,ZB:()=>Z,ZR:()=>Er,aH:()=>Dt,b$:()=>Ce,cI:()=>Qt,dS:()=>Wt,eu:()=>he,g5:()=>$,gK:()=>Dr,gQ:()=>Xn,h$:()=>We,hl:()=>tt,hu:()=>R,jU:()=>Je,m9:()=>_n,ne:()=>jn,p$:()=>X,pd:()=>ia,q4:()=>qe,r3:()=>Jn,ru:()=>pe,tV:()=>Ye,uI:()=>Ge,ug:()=>Wi,vZ:()=>yt,w1:()=>ut,w9:()=>ds,xO:()=>mn,xb:()=>So,z$:()=>Xe,zI:()=>ge,zd:()=>ii});const R=function(Y,z){if(!Y)throw $(z)},$=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},we=function(Y){const z=[];let te=0;for(let W=0;W<Y.length;W++){let P=Y.charCodeAt(W);P<128?z[te++]=P:P<2048?(z[te++]=P>>6|192,z[te++]=63&P|128):55296==(64512&P)&&W+1<Y.length&&56320==(64512&Y.charCodeAt(W+1))?(P=65536+((1023&P)<<10)+(1023&Y.charCodeAt(++W)),z[te++]=P>>18|240,z[te++]=P>>12&63|128,z[te++]=P>>6&63|128,z[te++]=63&P|128):(z[te++]=P>>12|224,z[te++]=P>>6&63|128,z[te++]=63&P|128)}return z},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,z){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let P=0;P<Y.length;P+=3){const j=Y[P],ce=P+1<Y.length,Ue=ce?Y[P+1]:0,vt=P+2<Y.length,bt=vt?Y[P+2]:0;let zt=(15&Ue)<<2|bt>>6,Nn=63&bt;vt||(Nn=64,ce||(zt=64)),W.push(te[j>>2],te[(3&j)<<4|Ue>>4],te[zt],te[Nn])}return W.join("")},encodeString(Y,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(Y):this.encodeByteArray(we(Y),z)},decodeString(Y,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(Y):function(Y){const z=[];let te=0,W=0;for(;te<Y.length;){const P=Y[te++];if(P<128)z[W++]=String.fromCharCode(P);else if(P>191&&P<224){const j=Y[te++];z[W++]=String.fromCharCode((31&P)<<6|63&j)}else if(P>239&&P<365){const vt=((7&P)<<18|(63&Y[te++])<<12|(63&Y[te++])<<6|63&Y[te++])-65536;z[W++]=String.fromCharCode(55296+(vt>>10)),z[W++]=String.fromCharCode(56320+(1023&vt))}else{const j=Y[te++],ce=Y[te++];z[W++]=String.fromCharCode((15&P)<<12|(63&j)<<6|63&ce)}}return z.join("")}(this.decodeStringToByteArray(Y,z))},decodeStringToByteArray(Y,z){this.init_();const te=z?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let P=0;P<Y.length;){const j=te[Y.charAt(P++)],Ue=P<Y.length?te[Y.charAt(P)]:0;++P;const bt=P<Y.length?te[Y.charAt(P)]:64;++P;const Ke=P<Y.length?te[Y.charAt(P)]:64;if(++P,null==j||null==Ue||null==bt||null==Ke)throw Error();W.push(j<<2|Ue>>4),64!==bt&&(W.push(Ue<<4&240|bt>>2),64!==Ke&&W.push(bt<<6&192|Ke))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},We=function(Y){const z=we(Y);return Ae.encodeByteArray(z,!0)},ke=function(Y){return We(Y).replace(/\./g,"")},Ye=function(Y){try{return Ae.decodeString(Y,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function X(Y){return Z(void 0,Y)}function Z(Y,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return z}for(const te in z)!z.hasOwnProperty(te)||!de(te)||(Y[te]=Z(Y[te],z[te]));return Y}function de(Y){return"__proto__"!==Y}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Je(){return"object"==typeof self&&self.self===self}function pe(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ut(){const Y=Xe();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Ne(){return!1}function De(){return!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tt(){return"object"==typeof indexedDB}function he(){return new Promise((Y,z)=>{try{let te=!0;const W="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(W);P.onsuccess=()=>{P.result.close(),te||self.indexedDB.deleteDatabase(W),Y(!0)},P.onupgradeneeded=()=>{te=!1},P.onerror=()=>{var j;z((null===(j=P.error)||void 0===j?void 0:j.message)||"")}}catch(te){z(te)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const fe=()=>{try{return function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Y=process.env.__FIREBASE_DEFAULTS__;return Y?JSON.parse(Y):void 0})()||(()=>{if(typeof document>"u")return;let Y;try{Y=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=Y&&Ye(Y[1]);return z&&JSON.parse(z)})()}catch(Y){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Y}`)}},qe=Y=>{var z,te;return null===(te=null===(z=fe())||void 0===z?void 0:z.emulatorHosts)||void 0===te?void 0:te[Y]},He=Y=>{const z=qe(Y);if(!z)return;const te=z.lastIndexOf(":");if(te<=0||te+1===z.length)throw new Error(`Invalid host ${z} with no separate hostname and port!`);const W=parseInt(z.substring(te+1),10);return"["===z[0]?[z.substring(1,te-1),W]:[z.substring(0,te),W]},Dt=()=>{var Y;return null===(Y=fe())||void 0===Y?void 0:Y.config},Cn=Y=>{var z;return null===(z=fe())||void 0===z?void 0:z[`_${Y}`]};class en{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,te)=>{this.resolve=z,this.reject=te})}wrapCallback(z){return(te,W)=>{te?this.reject(te):this.resolve(W),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(te):z(te,W))}}}function et(Y,z){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=z||"demo-project",P=Y.iat||0,j=Y.sub||Y.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ce=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:P,exp:P+3600,auth_time:P,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[ke(JSON.stringify({alg:"none",type:"JWT"})),ke(JSON.stringify(ce)),""].join(".")}class Er extends Error{constructor(z,te,W){super(te),this.code=z,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fn.prototype.create)}}class Fn{constructor(z,te,W){this.service=z,this.serviceName=te,this.errors=W}create(z,...te){const W=te[0]||{},P=`${this.service}/${z}`,j=this.errors[z],ce=j?function dn(Y,z){return Y.replace(tn,(te,W)=>{const P=z[W];return null!=P?String(P):`<${W}?>`})}(j,W):"Error";return new Er(P,`${this.serviceName}: ${ce} (${P}).`,W)}}const tn=/\{\$([^}]+)}/g;function Qt(Y){return JSON.parse(Y)}function Pr(Y){return JSON.stringify(Y)}const Gi=function(Y){let z={},te={},W={},P="";try{const j=Y.split(".");z=Qt(Ye(j[0])||""),te=Qt(Ye(j[1])||""),P=j[2],W=te.d||{},delete te.d}catch{}return{header:z,claims:te,data:W,signature:P}},ds=function(Y){const te=Gi(Y).claims;return!!te&&"object"==typeof te&&te.hasOwnProperty("iat")},Rs=function(Y){const z=Gi(Y).claims;return"object"==typeof z&&!0===z.admin};function Jn(Y,z){return Object.prototype.hasOwnProperty.call(Y,z)}function Fr(Y,z){if(Object.prototype.hasOwnProperty.call(Y,z))return Y[z]}function So(Y){for(const z in Y)if(Object.prototype.hasOwnProperty.call(Y,z))return!1;return!0}function ui(Y,z,te){const W={};for(const P in Y)Object.prototype.hasOwnProperty.call(Y,P)&&(W[P]=z.call(te,Y[P],P,Y));return W}function yt(Y,z){if(Y===z)return!0;const te=Object.keys(Y),W=Object.keys(z);for(const P of te){if(!W.includes(P))return!1;const j=Y[P],ce=z[P];if(ri(j)&&ri(ce)){if(!yt(j,ce))return!1}else if(j!==ce)return!1}for(const P of W)if(!te.includes(P))return!1;return!0}function ri(Y){return null!==Y&&"object"==typeof Y}function mn(Y){const z=[];for(const[te,W]of Object.entries(Y))Array.isArray(W)?W.forEach(P=>{z.push(encodeURIComponent(te)+"="+encodeURIComponent(P))}):z.push(encodeURIComponent(te)+"="+encodeURIComponent(W));return z.length?"&"+z.join("&"):""}function ii(Y){const z={};return Y.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[P,j]=W.split("=");z[decodeURIComponent(P)]=decodeURIComponent(j)}}),z}function ia(Y){const z=Y.indexOf("?");if(!z)return"";const te=Y.indexOf("#",z);return Y.substring(z,te>0?te:void 0)}class Xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,te){te||(te=0);const W=this.W_;if("string"==typeof z)for(let Ke=0;Ke<16;Ke++)W[Ke]=z.charCodeAt(te)<<24|z.charCodeAt(te+1)<<16|z.charCodeAt(te+2)<<8|z.charCodeAt(te+3),te+=4;else for(let Ke=0;Ke<16;Ke++)W[Ke]=z[te]<<24|z[te+1]<<16|z[te+2]<<8|z[te+3],te+=4;for(let Ke=16;Ke<80;Ke++){const zt=W[Ke-3]^W[Ke-8]^W[Ke-14]^W[Ke-16];W[Ke]=4294967295&(zt<<1|zt>>>31)}let bt,Me,P=this.chain_[0],j=this.chain_[1],ce=this.chain_[2],Ue=this.chain_[3],vt=this.chain_[4];for(let Ke=0;Ke<80;Ke++){Ke<40?Ke<20?(bt=Ue^j&(ce^Ue),Me=1518500249):(bt=j^ce^Ue,Me=1859775393):Ke<60?(bt=j&ce|Ue&(j|ce),Me=2400959708):(bt=j^ce^Ue,Me=3395469782);const zt=(P<<5|P>>>27)+bt+vt+Me+W[Ke]&4294967295;vt=Ue,Ue=ce,ce=4294967295&(j<<30|j>>>2),j=P,P=zt}this.chain_[0]=this.chain_[0]+P&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+ce&4294967295,this.chain_[3]=this.chain_[3]+Ue&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update(z,te){if(null==z)return;void 0===te&&(te=z.length);const W=te-this.blockSize;let P=0;const j=this.buf_;let ce=this.inbuf_;for(;P<te;){if(0===ce)for(;P<=W;)this.compress_(z,P),P+=this.blockSize;if("string"==typeof z){for(;P<te;)if(j[ce]=z.charCodeAt(P),++ce,++P,ce===this.blockSize){this.compress_(j),ce=0;break}}else for(;P<te;)if(j[ce]=z[P],++ce,++P,ce===this.blockSize){this.compress_(j),ce=0;break}}this.inbuf_=ce,this.total_+=te}digest(){const z=[];let te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let P=this.blockSize-1;P>=56;P--)this.buf_[P]=255&te,te/=256;this.compress_(this.buf_);let W=0;for(let P=0;P<5;P++)for(let j=24;j>=0;j-=8)z[W]=this.chain_[P]>>j&255,++W;return z}}function jn(Y,z){const te=new $n(Y,z);return te.subscribe.bind(te)}class $n{constructor(z,te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=te,this.task.then(()=>{z(this)}).catch(W=>{this.error(W)})}next(z){this.forEachObserver(te=>{te.next(z)})}error(z){this.forEachObserver(te=>{te.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,te,W){let P;if(void 0===z&&void 0===te&&void 0===W)throw new Error("Missing Observer.");P=function It(Y,z){if("object"!=typeof Y||null===Y)return!1;for(const te of z)if(te in Y&&"function"==typeof Y[te])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:te,complete:W},void 0===P.next&&(P.next=$t),void 0===P.error&&(P.error=$t),void 0===P.complete&&(P.complete=$t);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),j}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let te=0;te<this.observers.length;te++)this.sendOne(te,z)}sendOne(z,te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{te(this.observers[z])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $t(){}function Dr(Y,z){return`${Y} failed: ${z} argument `}const Wt=function(Y){const z=[];let te=0;for(let W=0;W<Y.length;W++){let P=Y.charCodeAt(W);if(P>=55296&&P<=56319){const j=P-55296;W++,R(W<Y.length,"Surrogate pair missing trail surrogate."),P=65536+(j<<10)+(Y.charCodeAt(W)-56320)}P<128?z[te++]=P:P<2048?(z[te++]=P>>6|192,z[te++]=63&P|128):P<65536?(z[te++]=P>>12|224,z[te++]=P>>6&63|128,z[te++]=63&P|128):(z[te++]=P>>18|240,z[te++]=P>>12&63|128,z[te++]=P>>6&63|128,z[te++]=63&P|128)}return z},Wi=function(Y){let z=0;for(let te=0;te<Y.length;te++){const W=Y.charCodeAt(te);W<128?z++:W<2048?z+=2:W>=55296&&W<=56319?(z+=4,te++):z+=3}return z};function mt(Y,z=1e3,te=2){const W=z*Math.pow(te,Y),P=Math.round(.5*W*(Math.random()-.5)*2);return Math.min(144e5,W+P)}function _n(Y){return Y&&Y._delegate?Y._delegate:Y}},5188:(St,Ve,G)=>{"use strict";var h=G(4650);let R=null;function $(){return R}const We=new h.OlP("DocumentToken");var re=(()=>((re=re||{})[re.Format=0]="Format",re[re.Standalone=1]="Standalone",re))(),ie=(()=>((ie=ie||{})[ie.Narrow=0]="Narrow",ie[ie.Abbreviated=1]="Abbreviated",ie[ie.Wide=2]="Wide",ie[ie.Short=3]="Short",ie))(),ve=(()=>((ve=ve||{})[ve.Short=0]="Short",ve[ve.Medium=1]="Medium",ve[ve.Long=2]="Long",ve[ve.Full=3]="Full",ve))(),fe=(()=>((fe=fe||{})[fe.Decimal=0]="Decimal",fe[fe.Group=1]="Group",fe[fe.List=2]="List",fe[fe.PercentSign=3]="PercentSign",fe[fe.PlusSign=4]="PlusSign",fe[fe.MinusSign=5]="MinusSign",fe[fe.Exponential=6]="Exponential",fe[fe.SuperscriptingExponent=7]="SuperscriptingExponent",fe[fe.PerMille=8]="PerMille",fe[fe.Infinity=9]="Infinity",fe[fe.NaN=10]="NaN",fe[fe.TimeSeparator=11]="TimeSeparator",fe[fe.CurrencyDecimal=12]="CurrencyDecimal",fe[fe.CurrencyGroup=13]="CurrencyGroup",fe))();function Fn(n,e){return yt((0,h.cg1)(n)[h.wAp.DateFormat],e)}function dn(n,e){return yt((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function tn(n,e){return yt((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function Qt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===fe.CurrencyDecimal)return t[h.wAp.NumberSymbols][fe.Decimal];if(e===fe.CurrencyGroup)return t[h.wAp.NumberSymbols][fe.Group]}return r}function Jn(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function yt(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function ri(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ia=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Xn={},jn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var $n=(()=>(($n=$n||{})[$n.Short=0]="Short",$n[$n.ShortGMT=1]="ShortGMT",$n[$n.Long=2]="Long",$n[$n.Extended=3]="Extended",$n))(),Tt=(()=>((Tt=Tt||{})[Tt.FullYear=0]="FullYear",Tt[Tt.Month=1]="Month",Tt[Tt.Date=2]="Date",Tt[Tt.Hours=3]="Hours",Tt[Tt.Minutes=4]="Minutes",Tt[Tt.Seconds=5]="Seconds",Tt[Tt.FractionalSeconds=6]="FractionalSeconds",Tt[Tt.Day=7]="Day",Tt))(),It=(()=>((It=It||{})[It.DayPeriods=0]="DayPeriods",It[It.Days=1]="Days",It[It.Months=2]="Months",It[It.Eras=3]="Eras",It))();function $t(n,e,t,r){let i=function j(n){if(Ue(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,u=1]=n.split("-").map(g=>+g);return bi(i,a-1,u)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ia))return function ce(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const u=Number(n[4]||0)-t,g=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,u,g,y,b),e}(r)}const e=new Date(n);if(!Ue(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Dr(t,e)||e;let g,u=[];for(;e;){if(g=jn.exec(e),!g){u.push(e);break}{u=u.concat(g.slice(1));const T=u.pop();if(!T)break;e=T}}let y=i.getTimezoneOffset();r&&(y=te(r,y),i=function P(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function W(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(te(e,i)-i))}(i,r,!0));let b="";return u.forEach(T=>{const N=function z(n){if(Y[n])return Y[n];let e;switch(n){case"G":case"GG":case"GGG":e=ln(It.Eras,ie.Abbreviated);break;case"GGGG":e=ln(It.Eras,ie.Wide);break;case"GGGGG":e=ln(It.Eras,ie.Narrow);break;case"y":e=Wt(Tt.FullYear,1,0,!1,!0);break;case"yy":e=Wt(Tt.FullYear,2,0,!0,!0);break;case"yyy":e=Wt(Tt.FullYear,3,0,!1,!0);break;case"yyyy":e=Wt(Tt.FullYear,4,0,!1,!0);break;case"Y":e=_n(1);break;case"YY":e=_n(2,!0);break;case"YYY":e=_n(3);break;case"YYYY":e=_n(4);break;case"M":case"L":e=Wt(Tt.Month,1,1);break;case"MM":case"LL":e=Wt(Tt.Month,2,1);break;case"MMM":e=ln(It.Months,ie.Abbreviated);break;case"MMMM":e=ln(It.Months,ie.Wide);break;case"MMMMM":e=ln(It.Months,ie.Narrow);break;case"LLL":e=ln(It.Months,ie.Abbreviated,re.Standalone);break;case"LLLL":e=ln(It.Months,ie.Wide,re.Standalone);break;case"LLLLL":e=ln(It.Months,ie.Narrow,re.Standalone);break;case"w":e=kt(1);break;case"ww":e=kt(2);break;case"W":e=kt(1,!0);break;case"d":e=Wt(Tt.Date,1);break;case"dd":e=Wt(Tt.Date,2);break;case"c":case"cc":e=Wt(Tt.Day,1);break;case"ccc":e=ln(It.Days,ie.Abbreviated,re.Standalone);break;case"cccc":e=ln(It.Days,ie.Wide,re.Standalone);break;case"ccccc":e=ln(It.Days,ie.Narrow,re.Standalone);break;case"cccccc":e=ln(It.Days,ie.Short,re.Standalone);break;case"E":case"EE":case"EEE":e=ln(It.Days,ie.Abbreviated);break;case"EEEE":e=ln(It.Days,ie.Wide);break;case"EEEEE":e=ln(It.Days,ie.Narrow);break;case"EEEEEE":e=ln(It.Days,ie.Short);break;case"a":case"aa":case"aaa":e=ln(It.DayPeriods,ie.Abbreviated);break;case"aaaa":e=ln(It.DayPeriods,ie.Wide);break;case"aaaaa":e=ln(It.DayPeriods,ie.Narrow);break;case"b":case"bb":case"bbb":e=ln(It.DayPeriods,ie.Abbreviated,re.Standalone,!0);break;case"bbbb":e=ln(It.DayPeriods,ie.Wide,re.Standalone,!0);break;case"bbbbb":e=ln(It.DayPeriods,ie.Narrow,re.Standalone,!0);break;case"B":case"BB":case"BBB":e=ln(It.DayPeriods,ie.Abbreviated,re.Format,!0);break;case"BBBB":e=ln(It.DayPeriods,ie.Wide,re.Format,!0);break;case"BBBBB":e=ln(It.DayPeriods,ie.Narrow,re.Format,!0);break;case"h":e=Wt(Tt.Hours,1,-12);break;case"hh":e=Wt(Tt.Hours,2,-12);break;case"H":e=Wt(Tt.Hours,1);break;case"HH":e=Wt(Tt.Hours,2);break;case"m":e=Wt(Tt.Minutes,1);break;case"mm":e=Wt(Tt.Minutes,2);break;case"s":e=Wt(Tt.Seconds,1);break;case"ss":e=Wt(Tt.Seconds,2);break;case"S":e=Wt(Tt.FractionalSeconds,1);break;case"SS":e=Wt(Tt.FractionalSeconds,2);break;case"SSS":e=Wt(Tt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=dr($n.Short);break;case"ZZZZZ":e=dr($n.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=dr($n.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=dr($n.Long);break;default:return null}return Y[n]=e,e}(T);b+=N?N(i,t,y):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function bi(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Dr(n,e){const t=function He(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if(Xn[t]=Xn[t]||{},Xn[t][e])return Xn[t][e];let r="";switch(e){case"shortDate":r=Fn(n,ve.Short);break;case"mediumDate":r=Fn(n,ve.Medium);break;case"longDate":r=Fn(n,ve.Long);break;case"fullDate":r=Fn(n,ve.Full);break;case"shortTime":r=dn(n,ve.Short);break;case"mediumTime":r=dn(n,ve.Medium);break;case"longTime":r=dn(n,ve.Long);break;case"fullTime":r=dn(n,ve.Full);break;case"short":const i=Dr(n,"shortTime"),a=Dr(n,"shortDate");r=ci(tn(n,ve.Short),[i,a]);break;case"medium":const u=Dr(n,"mediumTime"),g=Dr(n,"mediumDate");r=ci(tn(n,ve.Medium),[u,g]);break;case"long":const y=Dr(n,"longTime"),b=Dr(n,"longDate");r=ci(tn(n,ve.Long),[y,b]);break;case"full":const T=Dr(n,"fullTime"),N=Dr(n,"fullDate");r=ci(tn(n,ve.Full),[T,N])}return r&&(Xn[t][e]=r),r}function ci(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Vt(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let u=String(n);for(;u.length<e;)u="0"+u;return r&&(u=u.slice(u.length-e)),a+u}function Wt(n,e,t=0,r=!1,i=!1){return function(a,u){let g=function Wi(n,e){switch(n){case Tt.FullYear:return e.getFullYear();case Tt.Month:return e.getMonth();case Tt.Date:return e.getDate();case Tt.Hours:return e.getHours();case Tt.Minutes:return e.getMinutes();case Tt.Seconds:return e.getSeconds();case Tt.FractionalSeconds:return e.getMilliseconds();case Tt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||g>-t)&&(g+=t),n===Tt.Hours)0===g&&-12===t&&(g=12);else if(n===Tt.FractionalSeconds)return function di(n,e){return Vt(n,3).substring(0,e)}(g,e);const y=Qt(u,fe.MinusSign);return Vt(g,e,y,r,i)}}function ln(n,e,t=re.Format,r=!1){return function(i,a){return function hi(n,e,t,r,i,a){switch(t){case It.Months:return function en(n,e,t){const r=(0,h.cg1)(n),a=yt([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return yt(a,t)}(e,i,r)[n.getMonth()];case It.Days:return function Cn(n,e,t){const r=(0,h.cg1)(n),a=yt([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return yt(a,t)}(e,i,r)[n.getDay()];case It.DayPeriods:const u=n.getHours(),g=n.getMinutes();if(a){const b=function Fr(n){const e=(0,h.cg1)(n);return Jn(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?ri(r):[ri(r[0]),ri(r[1])])}(e),T=function So(n,e,t){const r=(0,h.cg1)(n);Jn(r);const a=yt([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return yt(a,t)||[]}(e,i,r),N=b.findIndex(k=>{if(Array.isArray(k)){const[U,q]=k,ae=u>=U.hours&&g>=U.minutes,me=u<q.hours||u===q.hours&&g<q.minutes;if(U.hours<q.hours){if(ae&&me)return!0}else if(ae||me)return!0}else if(k.hours===u&&k.minutes===g)return!0;return!1});if(-1!==N)return T[N]}return function Dt(n,e,t){const r=(0,h.cg1)(n),a=yt([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return yt(a,t)}(e,i,r)[u<12?0:1];case It.Eras:return function et(n,e){return yt((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function dr(n){return function(e,t,r){const i=-1*r,a=Qt(t,fe.MinusSign),u=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case $n.Short:return(i>=0?"+":"")+Vt(u,2,a)+Vt(Math.abs(i%60),2,a);case $n.ShortGMT:return"GMT"+(i>=0?"+":"")+Vt(u,1,a);case $n.Long:return"GMT"+(i>=0?"+":"")+Vt(u,2,a)+":"+Vt(Math.abs(i%60),2,a);case $n.Extended:return 0===r?"Z":(i>=0?"+":"")+Vt(u,2,a)+":"+Vt(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Mt(n){return bi(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function kt(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,u=t.getDate();i=1+Math.floor((u+a)/7)}else{const a=Mt(t),u=function mt(n){const e=bi(n,0,1).getDay();return bi(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),g=a.getTime()-u.getTime();i=1+Math.round(g/6048e5)}return Vt(i,n,Qt(r,fe.MinusSign))}}function _n(n,e=!1){return function(t,r){return Vt(Mt(t).getFullYear(),n,Qt(r,fe.MinusSign),e)}}const Y={};function te(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ue(n){return n instanceof Date&&!isNaN(n.valueOf())}let Ki=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ua="browser";function Ri(n){return n===Ua}function gr(n){return"server"===n}class Ml extends class pf extends class Ae{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Le(n){R||(R=n)}(new Ml)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fs(){return ms=ms||document.querySelector("base"),ms?ms.getAttribute("href"):null}();return null==t?null:function Oo(n){tr=tr||document.createElement("a"),tr.setAttribute("href",n);const e=tr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let tr,ms=null;const ar=new h.OlP("TRANSITION_ID"),eg=[{provide:h.ip1,useFactory:function Xp(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=$(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[ar,We,h.zs3],multi:!0}];let wc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ne=new h.OlP("EventManagerPlugins");let Ee=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ne),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class _e{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=$().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let _t=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Pt=(()=>{class n extends _t{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(wn),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(wn))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(We))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function wn(n){$().remove(n)}const mr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bn=/%COMP%/g;function $a(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?$a(n,i,t):(i=i.replace(Bn,n),t.push(i))}return t}function Ga(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gf=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ho(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new mf(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Dc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=$a(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee),h.LFG(Pt),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ho{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mr[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Iu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Iu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=mr[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mr[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ga(r)):this.eventManager.addEventListener(e,t,Ga(r))}}function Iu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mf extends ho{constructor(e,t,r,i){super(e),this.component=r;const a=$a(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Du(n){return"_ngcontent-%COMP%".replace(Bn,n)}(i+"-"+r.id),this.hostAttr=function ha(n){return"_nghost-%COMP%".replace(Bn,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Dc extends ho{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=$a(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const g=document.createElement("style");g.textContent=a[u],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ki=(()=>{class n extends _e{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(We))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ic=["alt","control","meta","shift"],ko={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Cu=(()=>{class n extends _e{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),u="code."),Ic.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),u+=b+".")}),u+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=u,y}static matchEventFullKeyCode(t,r){let i=ko[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ic.forEach(u=>{u!==i&&(0,kl[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(We))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fa=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ua},{provide:h.g9A,useValue:function Tc(){Ml.makeCurrent()},multi:!0},{provide:We,useFactory:function Ud(){return(0,h.RDi)(document),document},deps:[]}]),pa=new h.OlP(""),Ka=[{provide:h.rWj,useClass:class tg{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const g=function(y){u=u||y,a--,0==a&&r(u)};i.forEach(function(y){y.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?$().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Ac=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function za(){return new h.qLn},deps:[]},{provide:ne,useClass:ki,multi:!0,deps:[We,h.R0b,h.Lbi]},{provide:ne,useClass:Cu,multi:!0,deps:[We]},{provide:gf,useClass:gf,deps:[Ee,Pt,h.AFp]},{provide:h.FYo,useExisting:gf},{provide:_t,useExisting:Pt},{provide:Pt,useClass:Pt,deps:[We]},{provide:Ee,useClass:Ee,deps:[ne,h.R0b]},{provide:class Al{},useClass:wc,deps:[]},[]];let qa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:ar,useExisting:h.AFp},eg]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pa,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Ac,...Ka],imports:[Ki,h.hGG]}),n})();typeof window<"u"&&window;var _r=G(8306),Ja=G(515),Fo=G(3269),Br=G(8996);function Kn(...n){const e=(0,Fo.yG)(n);return(0,Br.D)(n,e)}var zn=G(7579),Qi=G(8421),ma=G(5577),Xa=G(1144),yr=G(576),En=G(4004);const{isArray:rg}=Array;const wf=["addListener","removeListener"],Vr=["addEventListener","removeEventListener"],jd=["on","off"];function nr(n,e,t,r){if((0,yr.m)(t)&&(r=t,t=void 0),r)return nr(n,e,t).pipe(function Rc(n){return(0,En.U)(e=>function Vl(n,e){return rg(e)?n(...e):n(e)}(n,e))}(r));const[i,a]=function $d(n){return(0,yr.m)(n.addEventListener)&&(0,yr.m)(n.removeEventListener)}(n)?Vr.map(u=>g=>n[u](e,g,t)):function Ef(n){return(0,yr.m)(n.addListener)&&(0,yr.m)(n.removeListener)}(n)?wf.map(vs(n,e)):function ig(n){return(0,yr.m)(n.on)&&(0,yr.m)(n.off)}(n)?jd.map(vs(n,e)):[];if(!i&&(0,Xa.z)(n))return(0,ma.z)(u=>nr(u,e,t))((0,Qi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new _r.y(u=>{const g=(...y)=>u.next(1<y.length?y:y[0]);return i(g),()=>a(g)})}function vs(n,e){return t=>r=>n[t](e,r)}var Gd=G(727);class Wd extends Gd.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Ou={setInterval(n,e,...t){const{delegate:r}=Ou;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Ou;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Mc=G(8737);class Ul extends Wd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return Ou.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;Ou.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Mc.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const Hl={now:()=>(Hl.delegate||Date).now(),delegate:void 0};class go{constructor(e,t=go.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}go.now=Hl.now;class mo extends go{constructor(e,t=go.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Lo=new mo(Ul),jl=Lo;var Oc=G(3532);function Ls(n=0,e,t=jl){let r=-1;return null!=e&&((0,Oc.K)(e)?t=e:r=e),new _r.y(i=>{let a=function zd(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}const{isArray:ku}=Array;function Ji(n){return 1===n.length&&ku(n[0])?n[0]:n}var hn=G(5403);var Bo=G(4671);G(9672);var Us=G(5032);const Ur=new _r.y(Us.Z);function Hr(...n){const e=(0,Fo.jO)(n),t=Ji(n);return t.length?new _r.y(r=>{let i=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{i=a=null});for(let u=0;!r.closed&&u<t.length;u++)(0,Qi.Xf)(t[u]).subscribe((0,hn.x)(r,g=>{if(i[u].push(g),i.every(y=>y.length)){const y=i.map(b=>b.shift());r.next(e?e(...y):y),i.some((b,T)=>!b.length&&a[T])&&r.complete()}},()=>{a[u]=!0,!i[u].length&&r.complete()}));return()=>{i=a=null}}):Ja.E}var Yd=G(8189);function Hs(...n){return function tl(){return(0,Yd.J)(1)}()((0,Br.D)(n,(0,Fo.yG)(n)))}var ai=G(4482);function Sr(n){return(0,ai.e)((e,t)=>{(0,Qi.Xf)(n).subscribe((0,hn.x)(t,()=>t.complete(),Us.Z)),!t.closed&&e.subscribe(t)})}function lr(n,e){return(0,ai.e)((t,r)=>{let i=0;t.subscribe((0,hn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function jr(n){return n<=0?()=>Ja.E:(0,ai.e)((e,t)=>{let r=0;e.subscribe((0,hn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gl(...n){const e=(0,Fo.yG)(n);return(0,ai.e)((t,r)=>{(e?Hs(n,t,e):Hs(n,t)).subscribe(r)})}function Bu(n,e){return n===e}function Ar(n,e){return(0,ai.e)((t,r)=>{let i=null,a=0,u=!1;const g=()=>u&&!i&&r.complete();t.subscribe((0,hn.x)(r,y=>{i?.unsubscribe();let b=0;const T=a++;(0,Qi.Xf)(n(y,T)).subscribe(i=(0,hn.x)(r,N=>r.next(e?e(y,N,T,b++):N),()=>{i=null,g()}))},()=>{u=!0,g()}))})}function Vu(n,e,t){const r=(0,yr.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,ai.e)((i,a)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let g=!0;i.subscribe((0,hn.x)(a,y=>{var b;null===(b=r.next)||void 0===b||b.call(r,y),a.next(y)},()=>{var y;g=!1,null===(y=r.complete)||void 0===y||y.call(r),a.complete()},y=>{var b;g=!1,null===(b=r.error)||void 0===b||b.call(r,y),a.error(y)},()=>{var y,b;g&&(null===(y=r.unsubscribe)||void 0===y||y.call(r)),null===(b=r.finalize)||void 0===b||b.call(r)}))}):Bo.y}function Uu(...n){const e=(0,Fo.jO)(n);return(0,ai.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),g=!1;for(let y=0;y<i;y++)(0,Qi.Xf)(n[y]).subscribe((0,hn.x)(r,b=>{a[y]=b,!g&&!u[y]&&(u[y]=!0,(g=u.every(Bo.y))&&(u=null))},Us.Z));t.subscribe((0,hn.x)(r,y=>{if(g){const b=[y,...a];r.next(e?e(...b):b)}}))})}function Qd(n,e){return e?t=>Hs(e.pipe(jr(1),function Zd(){return(0,ai.e)((n,e)=>{n.subscribe((0,hn.x)(e,Us.Z))})}()),t.pipe(Qd(n))):(0,ma.z)((t,r)=>n(t,r).pipe(jr(1),function U_(n){return(0,En.U)(()=>n)}(t)))}function ag(n,e=Lo){const t=Ls(n,e);return Qd(()=>t)}let yh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),Ea=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[yh]}),n})(),kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ea]}),n})();Math,Math,Math;const Wo=["*"],Wy=["dialog"];function nu(n){return"string"==typeof n}function ed(n){return null!=n}function ji(n){return(n||document.body).getBoundingClientRect()}const dv={animation:!0,transitionTimerDelayMs:5},hm=()=>{},{transitionTimerDelayMs:hv}=dv,Lh=new Map,rs=(n,e,t,r)=>{let i=r.context||{};const a=Lh.get(e);if(a)switch(r.runningTransition){case"continue":return Ja.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),Lh.delete(e)}const u=t(e,r.animation,i)||hm;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>u()),Kn(void 0).pipe(function td(n){return e=>new _r.y(t=>e.subscribe({next:u=>n.run(()=>t.next(u)),error:u=>n.run(()=>t.error(u)),complete:()=>n.run(()=>t.complete())}))}(n));const g=new zn.x,y=new zn.x,b=g.pipe(function og(...n){return e=>Hs(e,Kn(...n))}(!0));Lh.set(e,{transition$:g,complete:()=>{y.next(),y.complete()},context:i});const T=function Fh(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const N=nr(e,"transitionend").pipe(Sr(b),lr(({target:U})=>U===e));(function Df(...n){return 1===(n=Ji(n)).length?(0,Qi.Xf)(n[0]):new _r.y(function vr(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Qi.Xf)(n[r]).subscribe((0,hn.x)(e,i=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(i)})))}}(n))})(Ls(T+hv).pipe(Sr(b)),N,y).pipe(Sr(b)).subscribe(()=>{Lh.delete(e),n.run(()=>{u(),g.next(),g.complete()})})}),g.asObservable()};let Qf=(()=>{class n{constructor(){this.animation=dv.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),c=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),Gt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),Gr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();var gi=(()=>{return(n=gi||(gi={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",gi;var n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const lw=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function o1(n){const e=Array.from(n.querySelectorAll(lw)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let S1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki,kg]}),n})(),_w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();class od{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let x1=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(jr(1)).subscribe(()=>{rs(this._zone,this._el.nativeElement,(t,r)=>{r&&ji(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return rs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(h.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),h.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class ad{close(e){}dismiss(e){}}class mN{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new zn.x,this._dismissed=new zn.x,this._hidden=new zn.x,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,u)=>{this._resolve=a,this._reject=u}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Sr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Sr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function um(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Kn(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Hr(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Im=(()=>{return(n=Im||(Im={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",Im;var n})();let tp=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new zn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new h.vpe,this.shown=new zn.x,this.hidden=new zn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":nu(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(jr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},u=Hr(rs(this._zone,t,()=>t.classList.remove("show"),r),rs(this._zone,this._dialogEl.nativeElement,()=>{},r));return u.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),u}_show(){const t={animation:this.animation,runningTransition:"continue"};Hr(rs(this._zone,this._elRef.nativeElement,(a,u)=>{u&&ji(a),a.classList.add("show")},t),rs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{nr(t,"keydown").pipe(Sr(this._closed$),lr(i=>i.which===gi.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(Im.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;nr(this._dialogEl.nativeElement,"mousedown").pipe(Sr(this._closed$),Vu(()=>r=!1),Ar(()=>nr(t,"mouseup").pipe(Sr(this._closed$),jr(1))),lr(({target:i})=>t===i)).subscribe(()=>{r=!0}),nr(t,"click").pipe(Sr(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(Im.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=o1(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&rs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(We),h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&h.Gf(Wy,7),2&t){let i;h.iGM(i=h.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(h.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),h.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),h.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Wo,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0,1)(2,"div",2),h.Hsn(3),h.qZA()()),2&t&&h.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),WP=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:a,paddingRight:u}=i;if(t>0){const g=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${g+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=u),i.overflow=a}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(We))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yw=(()=>{class n{constructor(t,r,i,a,u,g){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=u,this._ngZone=g,this._activeWindowCmptHasChanged=new zn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new h.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const y=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=nr(e,"focusin").pipe(Sr(t),(0,En.U)(a=>a.target));nr(e,"keydown").pipe(Sr(t),lr(a=>a.which===gi.Tab),Uu(i)).subscribe(([a,u])=>{const[g,y]=o1(e);(u===g||u===e)&&a.shiftKey&&(y.focus(),a.preventDefault()),u===y&&!a.shiftKey&&(g.focus(),a.preventDefault())}),r&&nr(e,"click").pipe(Sr(t),Uu(i),(0,En.U)(a=>a[1])).subscribe(a=>a.focus())})})(0,y.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(y.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const a=i.container instanceof HTMLElement?i.container:ed(i.container)?this._document.querySelector(i.container):this._document.body,u=this._rendererFactory.createRenderer(null,null);if(!a)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const g=new ad,y=this._getContentRef(i.injector||t,r,g,i);let b=!1!==i.backdrop?this._attachBackdrop(a):void 0,T=this._attachWindowComponent(a,y.nodes),N=new mN(T,y,b,i.beforeDismiss);return this._registerModalRef(N),this._registerWindowCmpt(T),N.hidden.pipe(jr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(u.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),g.close=k=>{N.close(k)},g.dismiss=k=>{N.dismiss(k)},this._applyWindowOptions(T.instance,i),1===this._modalRefs.length&&u.addClass(this._document.body,"modal-open"),b&&b.instance&&(this._applyBackdropOptions(b.instance,i),b.changeDetectorRef.detectChanges()),T.changeDetectorRef.detectChanges(),N}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,h.LMc)(x1,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,h.LMc)(tp,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{ed(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{ed(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a){return r?r instanceof h.Rgc?this._createFromTemplateRef(r,i):nu(r)?this._createFromString(r):this._createFromComponent(t,r,i,a):new od([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(u){r.close(u)},dismiss(u){r.dismiss(u)}});return this._applicationRef.attachView(a),new od([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new od([[r]])}_createFromComponent(t,r,i,a){const u=h.zs3.create({providers:[{provide:ad,useValue:i}],parent:t}),g=(0,h.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:u}),y=g.location.nativeElement;return a.scrollable&&y.classList.add("component-host-scrollable"),this._applicationRef.attachView(g.hostView),new od([[y]],g.hostView,g)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.z2F),h.LFG(h.zs3),h.LFG(We),h.LFG(WP),h.LFG(h.FYo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zP=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vw=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(yw),h.LFG(zP))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[vw]}),n})(),Ew=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),F1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),Aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),V1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),U1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),j1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),$1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),G1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();new h.OlP("live announcer delay",{providedIn:"root",factory:function xw(){return 100}});let W1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Ki]}),n})(),K1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const kN=[c,M,Gt,Gr,S1,_w,bw,Ew,K1,F1,Aw,V1,U1,j1,$1,G1,W1];let PN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[kN,c,M,Gt,Gr,S1,_w,bw,Ew,K1,F1,Aw,V1,U1,j1,$1,G1,W1]}),n})();var rn=G(9681);(0,rn.registerVersion)("firebase","9.12.1","app");var se=G(5861),ee=G(2090),bo=G(4859),wo=G(1877),np=G(8766);const Z1="@firebase/installations",Cm="0.5.15",Rw=`w:${Cm}`,Av="FIS_v2",Eo=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function J1(n){return n instanceof ee.ZR&&n.code.includes("request-failed")}function Ow({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function VN(n){return{token:n.token,requestStatus:2,expiresIn:Lw(n.expiresIn),creationTime:Date.now()}}function Nv(n,e){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,se.Z)(function*(n,e){const r=(yield e.json()).error;return Eo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function X1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function kw(n,{refreshToken:e}){const t=X1(n);return t.append("Authorization",function eC(n){return`${Av} ${n}`}(e)),t}function Pw(n){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,se.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function Lw(n){return Number(n.replace("s","000"))}function tC(n,e){return xv.apply(this,arguments)}function xv(){return(xv=(0,se.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Ow(n),i=X1(n),a=e.getImmediate({optional:!0});if(a){const b=yield a.getHeartbeatsHeader();b&&i.append("x-firebase-client",b)}const g={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Av,appId:n.appId,sdkVersion:Rw})},y=yield Pw(()=>fetch(r,g));if(y.ok){const b=yield y.json();return{fid:b.fid||t,registrationStatus:2,refreshToken:b.refreshToken,authToken:VN(b.authToken)}}throw yield Nv("Create Installation",y)})).apply(this,arguments)}function Bw(n){return new Promise(e=>{setTimeout(e,n)})}const HN=/^[cdef][\w-]{21}$/;function jN(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function nC(n){return function UN(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return HN.test(t)?t:""}catch{return""}}function Sm(n){return`${n.appName}!${n.appId}`}const Hh=new Map;function rC(n,e){const t=Sm(n);GN(t,e),function WN(n,e){const t=function iC(){return!jh&&"BroadcastChannel"in self&&(jh=new BroadcastChannel("[Firebase] FID Change"),jh.onmessage=n=>{GN(n.data.key,n.data.fid)}),jh}();t&&t.postMessage({key:n,fid:e}),function Uw(){0===Hh.size&&jh&&(jh.close(),jh=null)}()}(t,e)}function GN(n,e){const t=Hh.get(n);if(t)for(const r of t)r(e)}let jh=null;const $h="firebase-installations-store";let Hw=null;function jw(){return Hw||(Hw=(0,np.X3)("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore($h)}})),Hw}function Rv(n,e){return $w.apply(this,arguments)}function $w(){return($w=(0,se.Z)(function*(n,e){const t=Sm(n),i=(yield jw()).transaction($h,"readwrite"),a=i.objectStore($h),u=yield a.get(t);return yield a.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&rC(n,e.fid),e})).apply(this,arguments)}function Gw(n){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,se.Z)(function*(n){const e=Sm(n),r=(yield jw()).transaction($h,"readwrite");yield r.objectStore($h).delete(e),yield r.done})).apply(this,arguments)}function rp(n,e){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,se.Z)(function*(n,e){const t=Sm(n),i=(yield jw()).transaction($h,"readwrite"),a=i.objectStore($h),u=yield a.get(t),g=e(u);return void 0===g?yield a.delete(t):yield a.put(g,t),yield i.done,g&&(!u||u.fid!==g.fid)&&rC(n,g.fid),g})).apply(this,arguments)}function Ov(n){return kv.apply(this,arguments)}function kv(){return(kv=(0,se.Z)(function*(n){let e;const t=yield rp(n.appConfig,r=>{const i=aC(r),a=zN(n,i);return e=a.registrationPromise,a.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function aC(n){return cC(n||{fid:jN(),registrationStatus:0})}function zN(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Eo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function KN(n,e){return lC.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:qN(n)}:{installationEntry:e}}function lC(){return(lC=(0,se.Z)(function*(n,e){try{const t=yield tC(n,e);return Rv(n.appConfig,t)}catch(t){throw J1(t)&&409===t.customData.serverCode?yield Gw(n.appConfig):yield Rv(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function qN(n){return Ww.apply(this,arguments)}function Ww(){return(Ww=(0,se.Z)(function*(n){let e=yield uC(n.appConfig);for(;1===e.registrationStatus;)yield Bw(100),e=yield uC(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Ov(n);return r||t}return e})).apply(this,arguments)}function uC(n){return rp(n,e=>{if(!e)throw Eo.create("installation-not-found");return cC(e)})}function cC(n){return function YN(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Am(n,e){return zw.apply(this,arguments)}function zw(){return(zw=(0,se.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=Kw(n,t),i=kw(n,t),a=e.getImmediate({optional:!0});if(a){const b=yield a.getHeartbeatsHeader();b&&i.append("x-firebase-client",b)}const g={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Rw,appId:n.appId}})},y=yield Pw(()=>fetch(r,g));if(y.ok)return VN(yield y.json());throw yield Nv("Generate Auth Token",y)})).apply(this,arguments)}function Kw(n,{fid:e}){return`${Ow(n)}/${e}/authTokens:generate`}function Ta(n){return qw.apply(this,arguments)}function qw(){return(qw=(0,se.Z)(function*(n,e=!1){let t;const r=yield rp(n.appConfig,a=>{if(!Nm(a))throw Eo.create("not-registered");const u=a.authToken;if(!e&&Pv(u))return a;if(1===u.requestStatus)return t=Yw(n,e),a;{if(!navigator.onLine)throw Eo.create("app-offline");const g=JN(a);return t=ZN(n,g),g}});return t?yield t:r.authToken})).apply(this,arguments)}function Yw(n,e){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,se.Z)(function*(n,e){let t=yield dC(n.appConfig);for(;1===t.authToken.requestStatus;)yield Bw(100),t=yield dC(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Ta(n,e):r})).apply(this,arguments)}function dC(n){return rp(n,e=>{if(!Nm(e))throw Eo.create("not-registered");return function hC(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ZN(n,e){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,se.Z)(function*(n,e){try{const t=yield Am(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Rv(n.appConfig,r),t}catch(t){if(!J1(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Rv(n.appConfig,r)}else yield Gw(n.appConfig);throw t}})).apply(this,arguments)}function Nm(n){return void 0!==n&&2===n.registrationStatus}function Pv(n){return 2===n.requestStatus&&!function QN(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function JN(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function xm(){return(xm=(0,se.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Ov(e);return r?r.catch(console.error):Ta(e).catch(console.error),t.fid})).apply(this,arguments)}function Qw(){return(Qw=(0,se.Z)(function*(n,e=!1){const t=n;return yield XN(t),(yield Ta(t,e)).token})).apply(this,arguments)}function XN(n){return gC.apply(this,arguments)}function gC(){return(gC=(0,se.Z)(function*(n){const{registrationPromise:e}=yield Ov(n);e&&(yield e)})).apply(this,arguments)}function Xw(n){return Eo.create("missing-app-config-values",{valueName:n})}const eE="installations",yC=n=>{const e=n.getProvider("app").getImmediate(),t=function ex(n){if(!n||!n.options)throw Xw("App Configuration");if(!n.name)throw Xw("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Xw(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,rn._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},vC=n=>{const e=n.getProvider("app").getImmediate(),t=(0,rn._getProvider)(e,eE).getImmediate();return{getId:()=>function fC(n){return xm.apply(this,arguments)}(t),getToken:i=>function pC(n){return Qw.apply(this,arguments)}(t,i)}};(function bC(){(0,rn._registerComponent)(new bo.wA(eE,yC,"PUBLIC")),(0,rn._registerComponent)(new bo.wA("installations-internal",vC,"PRIVATE"))})(),(0,rn.registerVersion)(Z1,Cm),(0,rn.registerVersion)(Z1,Cm,"esm2017");const Fv="@firebase/remote-config",to=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class NC{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,se.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const a=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===a.status&&u.push(t.storage.setLastSuccessfulFetchResponse(a)),yield Promise.all(u),a})()}}function Vv(n=navigator){return n.languages&&n.languages[0]||n.language}class rE{constructor(e,t,r,i,a,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=a,this.appId=u}fetch(e){var t=this;return(0,se.Z)(function*(){var r,i,a;const[u,g]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),b=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,T={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},N={sdk_version:t.sdkVersion,app_instance_id:u,app_instance_id_token:g,app_id:t.appId,language_code:Vv()},k={method:"POST",headers:T,body:JSON.stringify(N)},U=fetch(b,k),q=new Promise((rt,it)=>{e.signal.addEventListener(()=>{const pt=new Error("The operation was aborted.");pt.name="AbortError",it(pt)})});let ae;try{yield Promise.race([U,q]),ae=yield U}catch(rt){let it="fetch-client-network";throw"AbortError"===(null===(r=rt)||void 0===r?void 0:r.name)&&(it="fetch-timeout"),to.create(it,{originalErrorMessage:null===(i=rt)||void 0===i?void 0:i.message})}let me=ae.status;const nt=ae.headers.get("ETag")||void 0;let ot,dt;if(200===ae.status){let rt;try{rt=yield ae.json()}catch(it){throw to.create("fetch-client-parse",{originalErrorMessage:null===(a=it)||void 0===a?void 0:a.message})}ot=rt.entries,dt=rt.state}if("INSTANCE_STATE_UNSPECIFIED"===dt?me=500:"NO_CHANGE"===dt?me=304:("NO_TEMPLATE"===dt||"EMPTY_CONFIG"===dt)&&(ot={}),304!==me&&200!==me)throw to.create("fetch-status",{httpStatus:me});return{status:me,eTag:nt,config:ot}})()}}class sx{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,se.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,se.Z)(function*(){yield function EF(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(to.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const a=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),a}catch(a){if(!function xC(n){if(!(n instanceof ee.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(a))throw a;const u={throttleEndTimeMillis:Date.now()+(0,ee.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class ox{constructor(e,t,r,i,a){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=a,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Pm(n,e){var t;const r=n.target.error||void 0;return to.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const nc="app_namespace_store";class lx{constructor(e,t,r,i=function IF(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(Pm(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(nc,{keyPath:"compositeKey"})}}catch(r){e(to.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,se.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{var u;const y=r.transaction([nc],"readonly").objectStore(nc),b=t.createCompositeKey(e);try{const T=y.get(b);T.onerror=N=>{a(Pm(N,"storage-get"))},T.onsuccess=N=>{const k=N.target.result;i(k?k.value:void 0)}}catch(T){a(to.create("storage-get",{originalErrorMessage:null===(u=T)||void 0===u?void 0:u.message}))}})})()}set(e,t){var r=this;return(0,se.Z)(function*(){const i=yield r.openDbPromise;return new Promise((a,u)=>{var g;const b=i.transaction([nc],"readwrite").objectStore(nc),T=r.createCompositeKey(e);try{const N=b.put({compositeKey:T,value:t});N.onerror=k=>{u(Pm(k,"storage-set"))},N.onsuccess=()=>{a()}}catch(N){u(to.create("storage-set",{originalErrorMessage:null===(g=N)||void 0===g?void 0:g.message}))}})})()}delete(e){var t=this;return(0,se.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,a)=>{var u;const y=r.transaction([nc],"readwrite").objectStore(nc),b=t.createCompositeKey(e);try{const T=y.delete(b);T.onerror=N=>{a(Pm(N,"storage-delete"))},T.onsuccess=()=>{i()}}catch(T){a(to.create("storage-delete",{originalErrorMessage:null===(u=T)||void 0===u?void 0:u.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class ux{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,se.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),a=yield t;a&&(e.lastFetchStatus=a);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const g=yield i;g&&(e.activeConfig=g)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function hx(){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,se.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}!function cx(){(0,rn._registerComponent)(new bo.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw to.create("registration-window");if(!(0,ee.hl)())throw to.create("indexed-db-unavailable");const{projectId:a,apiKey:u,appId:g}=r.options;if(!a)throw to.create("registration-project-id");if(!u)throw to.create("registration-api-key");if(!g)throw to.create("registration-app-id");const y=new lx(g,r.name,t=t||"firebase"),b=new ux(y),T=new wo.Yd(Fv);T.logLevel=wo.in.ERROR;const N=new rE(i,rn.SDK_VERSION,t,a,u,g),k=new sx(N,y),U=new NC(k,y,b,T),q=new ox(r,U,b,y,T);return function Om(n){const e=(0,ee.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(q),q},"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(Fv,"0.3.14"),(0,rn.registerVersion)(Fv,"0.3.14","esm2017")}();const MC="/firebase-messaging-sw.js",fx="/firebase-cloud-messaging-push-scope",OC="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",PC="google.c.a.c_id",FC="google.c.a.c_l",LC="google.c.a.ts",BC="google.c.a.e";var op=(()=>{return(n=op||(op={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",op;var n})();function rc(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CF(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}const jv="fcm_token_details_db",gx="fcm_token_object_Store";function SF(n){return VC.apply(this,arguments)}function VC(){return VC=(0,se.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(jv))return null;let e=null;return(yield(0,np.X3)(jv,5,{upgrade:(r=(0,se.Z)(function*(i,a,u,g){var y;if(a<2||!i.objectStoreNames.contains(gx))return;const b=g.objectStore(gx),T=yield b.index("fcmSenderId").get(n);if(yield b.clear(),T)if(2===a){const N=T;if(!N.auth||!N.p256dh||!N.endpoint)return;e={token:N.fcmToken,createTime:null!==(y=N.createTime)&&void 0!==y?y:Date.now(),subscriptionOptions:{auth:N.auth,p256dh:N.p256dh,endpoint:N.endpoint,swScope:N.swScope,vapidKey:"string"==typeof N.vapidKey?N.vapidKey:rc(N.vapidKey)}}}else if(3===a){const N=T;e={token:N.fcmToken,createTime:N.createTime,subscriptionOptions:{auth:rc(N.auth),p256dh:rc(N.p256dh),endpoint:N.endpoint,swScope:N.swScope,vapidKey:rc(N.vapidKey)}}}else if(4===a){const N=T;e={token:N.fcmToken,createTime:N.createTime,subscriptionOptions:{auth:rc(N.auth),p256dh:rc(N.p256dh),endpoint:N.endpoint,swScope:N.swScope,vapidKey:rc(N.vapidKey)}}}}),function(a,u,g,y){return r.apply(this,arguments)})})).close(),yield(0,np.Lj)(jv),yield(0,np.Lj)("fcm_vapid_details_db"),yield(0,np.Lj)("undefined"),AF(e)?e:null;var r}),VC.apply(this,arguments)}function AF(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const ap="firebase-messaging-store";let lp=null;function UC(){return lp||(lp=(0,np.X3)("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(ap)}})),lp}function iE(n){return up.apply(this,arguments)}function up(){return(up=(0,se.Z)(function*(n){const e=Wv(n),r=yield(yield UC()).transaction(ap).objectStore(ap).get(e);if(r)return r;{const i=yield SF(n.appConfig.senderId);if(i)return yield $v(n,i),i}})).apply(this,arguments)}function $v(n,e){return Gv.apply(this,arguments)}function Gv(){return(Gv=(0,se.Z)(function*(n,e){const t=Wv(n),i=(yield UC()).transaction(ap,"readwrite");return yield i.objectStore(ap).put(e,t),yield i.done,e})).apply(this,arguments)}function RF(n){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,se.Z)(function*(n){const e=Wv(n),r=(yield UC()).transaction(ap,"readwrite");yield r.objectStore(ap).delete(e),yield r.done})).apply(this,arguments)}function Wv({appConfig:n}){return n.appId}const ss=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function MF(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,se.Z)(function*(n,e){var t;const r=yield $C(n),i=WC(e),a={method:"POST",headers:r,body:JSON.stringify(i)};let u;try{u=yield(yield fetch(jC(n.appConfig),a)).json()}catch(g){throw ss.create("token-subscribe-failed",{errorInfo:null===(t=g)||void 0===t?void 0:t.toString()})}if(u.error)throw ss.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw ss.create("token-subscribe-no-token");return u.token})).apply(this,arguments)}function OF(n,e){return sE.apply(this,arguments)}function sE(){return(sE=(0,se.Z)(function*(n,e){var t;const r=yield $C(n),i=WC(e.subscriptionOptions),a={method:"PATCH",headers:r,body:JSON.stringify(i)};let u;try{u=yield(yield fetch(`${jC(n.appConfig)}/${e.token}`,a)).json()}catch(g){throw ss.create("token-update-failed",{errorInfo:null===(t=g)||void 0===t?void 0:t.toString()})}if(u.error)throw ss.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw ss.create("token-update-no-token");return u.token})).apply(this,arguments)}function Lm(n,e){return oE.apply(this,arguments)}function oE(){return(oE=(0,se.Z)(function*(n,e){var t;const i={method:"DELETE",headers:yield $C(n)};try{const u=yield(yield fetch(`${jC(n.appConfig)}/${e}`,i)).json();if(u.error)throw ss.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(a){throw ss.create("token-unsubscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function jC({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function $C(n){return GC.apply(this,arguments)}function GC(){return(GC=(0,se.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function WC({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==OC&&(i.web.applicationPubKey=r),i}const kF=6048e5;function _x(n){return zC.apply(this,arguments)}function zC(){return(zC=(0,se.Z)(function*(n){const e=yield lE(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:rc(e.getKey("auth")),p256dh:rc(e.getKey("p256dh"))},r=yield iE(n.firebaseDependencies);if(r){if(Aa(r.subscriptionOptions,t))return Date.now()>=r.createTime+kF?qC(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Lm(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Sa(n.firebaseDependencies,t)}return Sa(n.firebaseDependencies,t)})).apply(this,arguments)}function KC(n){return zv.apply(this,arguments)}function zv(){return(zv=(0,se.Z)(function*(n){const e=yield iE(n.firebaseDependencies);e&&(yield Lm(n.firebaseDependencies,e.token),yield RF(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function qC(n,e){return YC.apply(this,arguments)}function YC(){return(YC=(0,se.Z)(function*(n,e){try{const t=yield OF(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield $v(n.firebaseDependencies,r),t}catch(t){throw yield KC(n),t}})).apply(this,arguments)}function Sa(n,e){return aE.apply(this,arguments)}function aE(){return(aE=(0,se.Z)(function*(n,e){const r={token:yield MF(n,e),createTime:Date.now(),subscriptionOptions:e};return yield $v(n,r),r.token})).apply(this,arguments)}function lE(n,e){return uE.apply(this,arguments)}function uE(){return(uE=(0,se.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:CF(e)})})).apply(this,arguments)}function Aa(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function ZC(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function cE(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function yx(n,e){!e.data||(n.data=e.data)}(e,n),function vx(n,e){var t,r,i,a,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const g=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(a=e.notification)||void 0===a?void 0:a.click_action;g&&(n.fcmOptions.link=g);const y=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;y&&(n.fcmOptions.analyticsLabel=y)}(e,n),e}function dE(n){return"object"==typeof n&&!!n&&PC in n}function hE(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function fE(n){return ss.create("missing-app-config-values",{valueName:n})}hE("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),hE("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class JC{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function QC(n){if(!n||!n.options)throw fE("App Configuration Object");if(!n.name)throw fE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw fE(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function pE(n){return gE.apply(this,arguments)}function gE(){return(gE=(0,se.Z)(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(MC,{scope:fx}),n.swRegistration.update().catch(()=>{})}catch(t){throw ss.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function XC(n,e){return mE.apply(this,arguments)}function mE(){return(mE=(0,se.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield pE(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw ss.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function _E(n,e){return ou.apply(this,arguments)}function ou(){return(ou=(0,se.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=OC)})).apply(this,arguments)}function Bm(){return(Bm=(0,se.Z)(function*(n,e){if(!navigator)throw ss.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ss.create("permission-blocked");return yield _E(n,e?.vapidKey),yield XC(n,e?.serviceWorkerRegistration),_x(n)})).apply(this,arguments)}function ic(n,e,t){return vE.apply(this,arguments)}function vE(){return(vE=(0,se.Z)(function*(n,e,t){const r=PF(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[PC],message_name:t[FC],message_time:t[LC],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function PF(n){switch(n){case op.NOTIFICATION_CLICKED:return"notification_open";case op.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function eT(){return(eT=(0,se.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===op.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(ZC(t)):n.onMessageHandler.next(ZC(t)));const r=t.data;dE(r)&&"1"===r[BC]&&(yield ic(n,t.messageType,r))})).apply(this,arguments)}const tT="@firebase/messaging",rT=n=>{const e=new JC(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function bx(n,e){return eT.apply(this,arguments)}(e,t)),e},FF=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function yE(n,e){return Bm.apply(this,arguments)}(e,r)}};function sT(){return Kv.apply(this,arguments)}function Kv(){return(Kv=(0,se.Z)(function*(){try{yield(0,ee.eu)()}catch{return!1}return typeof window<"u"&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function iT(){(0,rn._registerComponent)(new bo.wA("messaging",rT,"PUBLIC")),(0,rn._registerComponent)(new bo.wA("messaging-internal",FF,"PRIVATE")),(0,rn.registerVersion)(tT,"0.9.19"),(0,rn.registerVersion)(tT,"0.9.19","esm2017")}();const zh="analytics",aT="firebase_id",uT="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cT="https://www.googletagmanager.com/gtag/js",os=new wo.Yd("@firebase/analytics");function Cx(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function BF(n,e){const t=document.createElement("script");t.src=`${cT}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function Tx(n,e,t,r,i,a){return wE.apply(this,arguments)}function wE(){return(wE=(0,se.Z)(function*(n,e,t,r,i,a){const u=r[i];try{if(u)yield e[u];else{const y=(yield Cx(t)).find(b=>b.measurementId===i);y&&(yield e[y.appId])}}catch(g){os.error(g)}n("config",i,a)})).apply(this,arguments)}function Sx(n,e,t,r,i){return hT.apply(this,arguments)}function hT(){return(hT=(0,se.Z)(function*(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const g=yield Cx(t);for(const y of u){const b=g.find(N=>N.measurementId===y),T=b&&e[b.appId];if(!T){a=[];break}a.push(T)}}0===a.length&&(a=Object.values(e)),yield Promise.all(a),n("event",r,i||{})}catch(a){os.error(a)}})).apply(this,arguments)}function HF(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(cT)&&t.src.includes(n))return t;return null}const qo=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),EE=new class Nx{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Kh(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function fT(n){return Um.apply(this,arguments)}function Um(){return(Um=(0,se.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:Kh(r)},a=uT.replace("{app-id}",t),u=yield fetch(a,i);if(200!==u.status&&304!==u.status){let g="";try{const y=yield u.json();null!==(e=y.error)&&void 0!==e&&e.message&&(g=y.error.message)}catch{}throw qo.create("config-fetch-failed",{httpStatus:u.status,responseMessage:g})}return u.json()})).apply(this,arguments)}function DE(n){return IE.apply(this,arguments)}function IE(){return(IE=(0,se.Z)(function*(n,e=EE,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw qo.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw qo.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},g=new GF;return setTimeout((0,se.Z)(function*(){g.abort()}),void 0!==t?t:6e4),Zv({appId:r,apiKey:i,measurementId:a},u,g,e)})).apply(this,arguments)}function Zv(n,e,t){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,se.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=EE){var a,u;const{appId:g,measurementId:y}=n;try{yield Qv(r,e)}catch(b){if(y)return os.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${y} provided in the "measurementId" field in the local Firebase config. [${null===(a=b)||void 0===a?void 0:a.message}]`),{appId:g,measurementId:y};throw b}try{const b=yield fT(n);return i.deleteThrottleMetadata(g),b}catch(b){const T=b;if(!$F(T)){if(i.deleteThrottleMetadata(g),y)return os.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${y} provided in the "measurementId" field in the local Firebase config. [${T?.message}]`),{appId:g,measurementId:y};throw b}const N=503===Number(null===(u=T?.customData)||void 0===u?void 0:u.httpStatus)?(0,ee.$s)(t,i.intervalMillis,30):(0,ee.$s)(t,i.intervalMillis),k={throttleEndTimeMillis:Date.now()+N,backoffCount:t+1};return i.setThrottleMetadata(g,k),os.debug(`Calling attemptFetch again in ${N} millis`),Zv(n,k,r,i)}})).apply(this,arguments)}function Qv(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(qo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $F(n){if(!(n instanceof ee.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class GF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let pT,AE;function Jv(){return(Jv=(0,se.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const a=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:a}))}})).apply(this,arguments)}function NE(n){AE=n}function e0(n){pT=n}function zF(){return t0.apply(this,arguments)}function t0(){return(t0=(0,se.Z)(function*(){var n;if(!(0,ee.hl)())return os.warn(qo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(e){return os.warn(qo.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function RE(){return(RE=(0,se.Z)(function*(n,e,t,r,i,a,u){var g;const y=DE(n);y.then(U=>{t[U.measurementId]=U.appId,n.options.measurementId&&U.measurementId!==n.options.measurementId&&os.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${U.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(U=>os.error(U)),e.push(y);const b=zF().then(U=>{if(U)return r.getId()}),[T,N]=yield Promise.all([y,b]);HF(a)||BF(a,T.measurementId),AE&&(i("consent","default",AE),NE(void 0)),i("js",new Date);const k=null!==(g=u?.config)&&void 0!==g?g:{};return k.origin="firebase",k.update=!0,null!=N&&(k[aT]=N),i("config",T.measurementId,k),pT&&(i("set",pT),e0(void 0)),T.measurementId})).apply(this,arguments)}class Mx{constructor(e){this.app=e}_delete(){return delete ud[this.app.options.appId],Promise.resolve()}}let ud={},Ox=[];const _T={};let kx,cd,n0="dataLayer",vT=!1;function Px(n,e,t){!function KF(){const n=[];if((0,ee.ru)()&&n.push("This is a browser extension environment."),(0,ee.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=qo.create("invalid-analytics-context",{errorInfo:e});os.warn(t.message)}}();const r=n.options.appId;if(!r)throw qo.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw qo.create("no-api-key");os.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ud[r])throw qo.create("already-exists",{id:r});if(!vT){!function dT(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(n0);const{wrappedGtag:a,gtagCore:u}=function UF(n,e,t,r,i){let a=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(a=window[i]),window[i]=function VF(n,e,t,r){function a(){return(a=(0,se.Z)(function*(u,g,y){try{"event"===u?yield Sx(n,e,t,g,y):"config"===u?yield Tx(n,e,t,r,g,y):"consent"===u?n("consent","update",y):n("set",g)}catch(b){os.error(b)}})).apply(this,arguments)}return function i(u,g,y){return a.apply(this,arguments)}}(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}(ud,Ox,_T,n0,"gtag");cd=a,kx=u,vT=!0}return ud[r]=function xE(n,e,t,r,i,a,u){return RE.apply(this,arguments)}(n,Ox,_T,e,kx,n0,t),new Mx(n)}function YF(){return bT.apply(this,arguments)}function bT(){return(bT=(0,se.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}const m="@firebase/analytics",E="0.8.3";!function I(){(0,rn._registerComponent)(new bo.wA(zh,(e,{options:t})=>Px(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,rn._registerComponent)(new bo.wA("analytics-internal",function n(e){try{const t=e.getProvider(zh).getImmediate();return{logEvent:(r,i,a)=>function d(n,e,t,r){n=(0,ee.m9)(n),function WF(n,e,t,r,i){return Jv.apply(this,arguments)}(cd,ud[n.app.options.appId],e,t,r).catch(i=>os.error(i))}(t,r,i,a)}}catch(t){throw qo.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,rn.registerVersion)(m,E),(0,rn.registerVersion)(m,E,"esm2017")}();const F=new class x extends mo{}(class S extends Ul{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}});var J=G(9468),ue=G(5363);const Ie=new h.GfV("7.4.1"),Ze="__angularfire_symbol__analyticsIsSupportedValue",lt="__angularfire_symbol__analyticsIsSupported",Ct="__angularfire_symbol__remoteConfigIsSupportedValue",Ot="__angularfire_symbol__remoteConfigIsSupported",Fe="__angularfire_symbol__messagingIsSupportedValue",jt="__angularfire_symbol__messagingIsSupported";function dp(n,e,t){if(e){if(1===e.length)return e[0];const a=e.filter(u=>u.app===t);if(1===a.length)return a[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[lt]||(globalThis[lt]=YF().then(n=>globalThis[Ze]=n).catch(()=>globalThis[Ze]=!1)),globalThis[jt]||(globalThis[jt]=sT().then(n=>globalThis[Fe]=n).catch(()=>globalThis[Fe]=!1)),globalThis[Ot]||(globalThis[Ot]=hx().then(n=>globalThis[Ct]=n).catch(()=>globalThis[Ct]=!1));const hp=(n,e)=>{const t=e?[e]:(0,rn.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function dd(){}class r0{constructor(e,t=F){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class ME{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dd,{},dd,dd)),t.pipe(Vu({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hd=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new r0(Zone.current)),this.insideAngular=t.run(()=>new r0(Zone.current,Lo)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sc(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function OE(n){return sc().ngZone.runOutsideAngular(()=>n())}function jm(n){return sc().ngZone.run(()=>n())}function gl(n){return sc(),function H$(n){return function(t){return(t=t.lift(new ME(n.ngZone))).pipe((0,J.R)(n.outsideAngular),(0,ue.Q)(n.insideAngular))}}(sc())(n)}const j$=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),jm(()=>n.apply(void 0,r))},ET=(n,e)=>function(){let t;const r=arguments;for(let a=0;a<arguments.length;a++)"function"==typeof r[a]&&(e&&(t||(t=jm(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dd,{},dd,dd)))),r[a]=j$(r[a],t));const i=OE(()=>n.apply(this,r));if(!e){if(i instanceof _r.y){const a=sc();return i.pipe((0,J.R)(a.outsideAngular),(0,ue.Q)(a.insideAngular))}return jm(()=>i)}return i instanceof _r.y?i.pipe(gl):i instanceof Promise?jm(()=>new Promise((a,u)=>i.then(g=>jm(()=>a(g)),g=>jm(()=>u(g))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:jm(()=>i)};function Fx(){return(0,ai.e)((n,e)=>{let t,r=!1;n.subscribe((0,hn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function $$(n,e,t,r,i){return(a,u)=>{let g=t,y=e,b=0;a.subscribe((0,hn.x)(u,T=>{const N=b++;y=g?n(y,T,N):(g=!0,T),r&&u.next(y)},i&&(()=>{g&&u.next(y),u.complete()})))}}function Lx(n,e){return(0,ai.e)($$(n,e,arguments.length>=2,!0))}var Rt,oc=G(2011),G$=(G(5881),G(3942)),W$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qh={},Bx=Bx||{},on=W$||self;function DT(){}function IT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Vx="closure_uid_"+(1e9*Math.random()>>>0),K$=0;function q$(n,e,t){return n.call.apply(n.bind,arguments)}function Y$(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Do(n,e,t){return(Do=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?q$:Y$).apply(null,arguments)}function CT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ro(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var u=Array(arguments.length-2),g=2;g<arguments.length;g++)u[g-2]=arguments[g];return e.prototype[i].apply(r,u)}}function fp(){this.s=this.s,this.o=this.o}var Q$={};fp.prototype.s=!1,fp.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function z$(n){return Object.prototype.hasOwnProperty.call(n,Vx)&&n[Vx]||(n[Vx]=++K$)}(this);delete Q$[n]}},fp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const QF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ux(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function JF(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(IT(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let u=0;u<a;u++)n[i+u]=r[u]}else n.push(r)}}function Io(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Io.prototype.h=function(){this.defaultPrevented=!0};var J$=function(){if(!on.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{on.addEventListener("test",DT,e),on.removeEventListener("test",DT,e)}catch{}return n}();function TT(n){return/^[\s\xa0]*$/.test(n)}var XF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hx(n,e){return n<e?-1:n>e?1:0}function ST(){var n=on.navigator;return n&&(n=n.userAgent)?n:""}function fd(n){return-1!=ST().indexOf(n)}function jx(n){return jx[" "](n),n}jx[" "]=DT;var AT,n,eG=fd("Opera"),s0=fd("Trident")||fd("MSIE"),eL=fd("Edge"),$x=eL||s0,tL=fd("Gecko")&&!(-1!=ST().toLowerCase().indexOf("webkit")&&!fd("Edge"))&&!(fd("Trident")||fd("MSIE"))&&!fd("Edge"),tG=-1!=ST().toLowerCase().indexOf("webkit")&&!fd("Edge");function nL(){var n=on.document;return n?n.documentMode:void 0}e:{var Gx="",Wx=(n=ST(),tL?/rv:([^\);]+)(\)|;)/.exec(n):eL?/Edge\/([\d\.]+)/.exec(n):s0?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tG?/WebKit\/(\S+)/.exec(n):eG?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Wx&&(Gx=Wx?Wx[1]:""),s0){var zx=nL();if(null!=zx&&zx>parseFloat(Gx)){AT=String(zx);break e}}AT=Gx}var nG={};var iG=on.document&&s0&&(nL()||parseInt(AT,10))||void 0;function PE(n,e){if(Io.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tL){e:{try{jx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&PE.X.h.call(this)}}ro(PE,Io);var sG={2:"touch",3:"pen",4:"mouse"};PE.prototype.h=function(){PE.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var FE="closure_listenable_"+(1e6*Math.random()|0),oG=0;function aG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++oG,this.ba=this.ea=!1}function NT(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function qx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function iL(n){const e={};for(const t in n)e[t]=n[t];return e}const sL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<sL.length;a++)t=sL[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xT(n){this.src=n,this.g={},this.h=0}function Yx(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=QF(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(NT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Zx(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}xT.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=Zx(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new aG(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Qx="closure_lm_"+(1e6*Math.random()|0),Jx={};function aL(n,e,t,r,i){if(r&&r.once)return uL(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)aL(n,e[a],t,r,i);return null}return t=nR(t),n&&n[FE]?n.N(e,t,kE(r)?!!r.capture:!!r,i):lL(n,e,t,!1,r,i)}function lL(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=kE(i)?!!i.capture:!!i,g=eR(n);if(g||(n[Qx]=g=new xT(n)),(t=g.add(e,t,r,u,a)).proxy)return t;if(r=function lG(){const e=uG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)J$||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(dL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uL(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)uL(n,e[a],t,r,i);return null}return t=nR(t),n&&n[FE]?n.O(e,t,kE(r)?!!r.capture:!!r,i):lL(n,e,t,!0,r,i)}function cL(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)cL(n,e[a],t,r,i);else r=kE(r)?!!r.capture:!!r,t=nR(t),n&&n[FE]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Zx(a=n.g[e],t,r,i))&&(NT(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=eR(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Zx(e,t,r,i)),(t=-1<n?e[n]:null)&&Xx(t))}function Xx(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[FE])Yx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(dL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=eR(e))?(Yx(t,n),0==t.h&&(t.src=null,e[Qx]=null)):NT(n)}}}function dL(n){return n in Jx?Jx[n]:Jx[n]="on"+n}function uG(n,e){if(n.ba)n=!0;else{e=new PE(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Xx(n),n=t.call(r,e)}return n}function eR(n){return(n=n[Qx])instanceof xT?n:null}var tR="__closure_events_fn_"+(1e9*Math.random()>>>0);function nR(n){return"function"==typeof n?n:(n[tR]||(n[tR]=function(e){return n.handleEvent(e)}),n[tR])}function Ds(){fp.call(this),this.i=new xT(this),this.P=this,this.I=null}function io(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Io(e,n);else if(e instanceof Io)e.target=e.target||n;else{var i=e;oL(e=new Io(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=RT(u,r,!0,e)&&i}if(i=RT(u=e.g=n,r,!0,e)&&i,i=RT(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=RT(u=e.g=t[a],r,!1,e)&&i}function RT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ba&&u.capture==t){var g=u.listener,y=u.ha||u.src;u.ea&&Yx(n.i,u),i=!1!==g.call(y,r)&&i}}return i&&!r.defaultPrevented}ro(Ds,fp),Ds.prototype[FE]=!0,Ds.prototype.removeEventListener=function(n,e,t,r){cL(this,n,e,t,r)},Ds.prototype.M=function(){if(Ds.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)NT(t[r]);delete n.g[e],n.h--}}this.I=null},Ds.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ds.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rR=on.JSON.stringify;function cG(){var n=pL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var iR,hL=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new hG,n=>n.reset());class hG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fG(n){on.setTimeout(()=>{throw n},0)}function fL(n,e){iR||function pG(){var n=on.Promise.resolve(void 0);iR=function(){n.then(gG)}}(),sR||(iR(),sR=!0),pL.add(n,e)}var sR=!1,pL=new class dG{constructor(){this.h=this.g=null}add(e,t){const r=hL.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function gG(){for(var n;n=cG();){try{n.h.call(n.g)}catch(t){fG(t)}var e=hL;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sR=!1}function MT(n,e){Ds.call(this),this.h=n||1,this.g=e||on,this.j=Do(this.lb,this),this.l=Date.now()}function oR(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function aR(n,e,t){if("function"==typeof n)t&&(n=Do(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Do(n.handleEvent,n)}return 2147483647<Number(e)?-1:on.setTimeout(n,e||0)}function gL(n){n.g=aR(()=>{n.g=null,n.i&&(n.i=!1,gL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ro(MT,Ds),(Rt=MT.prototype).ca=!1,Rt.R=null,Rt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),io(this,"tick"),this.ca&&(oR(this),this.start()))}},Rt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rt.M=function(){MT.X.M.call(this),oR(this),delete this.g};class mG extends fp{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gL(this)}M(){super.M(),this.g&&(on.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function LE(n){fp.call(this),this.h=n,this.g={}}ro(LE,fp);var mL=[];function _L(n,e,t,r){Array.isArray(t)||(t&&(mL[0]=t.toString()),t=mL);for(var i=0;i<t.length;i++){var a=aL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function yL(n){qx(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xx(e)},n),n.g={}}function OT(){this.g=!0}function o0(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function bG(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return rR(t)}catch{return e}}(n,t)+(r?" "+r:"")})}LE.prototype.M=function(){LE.X.M.call(this),yL(this)},LE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},OT.prototype.Aa=function(){this.g=!1},OT.prototype.info=function(){};var $m={},vL=null;function kT(){return vL=vL||new Ds}function bL(n){Io.call(this,$m.Pa,n)}function BE(n){const e=kT();io(e,new bL(e,n))}function wL(n,e){Io.call(this,$m.STAT_EVENT,n),this.stat=e}function Yo(n){const e=kT();io(e,new wL(e,n))}function EL(n,e){Io.call(this,$m.Qa,n),this.size=e}function VE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return on.setTimeout(function(){n()},e)}$m.Pa="serverreachability",ro(bL,Io),$m.STAT_EVENT="statevent",ro(wL,Io),$m.Qa="timingevent",ro(EL,Io);var PT={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},DL={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function lR(){}function CL(){}lR.prototype.h=null;var dR,UE={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function uR(){Io.call(this,"d")}function cR(){Io.call(this,"c")}function FT(){}function HE(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new LE(this),this.O=wG,this.T=new MT(n=$x?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new TL}function TL(){this.i=null,this.g="",this.h=!1}ro(uR,Io),ro(cR,Io),ro(FT,lR),FT.prototype.g=function(){return new XMLHttpRequest},FT.prototype.i=function(){return{}},dR=new FT;var wG=45e3,hR={},LT={};function fR(n,e,t){n.K=1,n.v=HT(Yh(e)),n.s=t,n.P=!0,SL(n,null)}function SL(n,e){n.F=Date.now(),jE(n),n.A=Yh(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),LL(t.i,"t",r),n.C=0,t=n.l.H,n.h=new TL,n.g=aB(n.l,t?e:null,!n.s),0<n.N&&(n.L=new mG(Do(n.La,n,n.g),n.N)),_L(n.S,n.g,"readystatechange",n.ib),e=n.H?iL(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),BE(1),function _G(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",g=a.split("&"),y=0;y<g.length;y++){var b=g[y].split("=");if(1<b.length){var T=b[0];b=b[1];var N=T.split("_");u=2<=N.length&&"type"==N[1]?u+(T+"=")+b+"&":u+(T+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function AL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function NL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=EG(n,t),i==LT){4==e&&(n.o=4,Yo(14),r=!1),o0(n.j,n.m,null,"[Incomplete Response]");break}if(i==hR){n.o=4,Yo(15),o0(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}o0(n.j,n.m,i,null),pR(n,i)}AL(n)&&i!=LT&&i!=hR&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Yo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ER(e),e.K=!0,Yo(11))):(o0(n.j,n.m,t,"[Invalid Chunked Response]"),Gm(n),$E(n))}function EG(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?LT:(t=Number(e.substring(t,r)),isNaN(t)?hR:(r+=1)+t>e.length?LT:(e=e.substr(r,t),n.C=r+t,e))}function jE(n){n.V=Date.now()+n.O,xL(n,n.O)}function xL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=VE(Do(n.gb,n),e)}function BT(n){n.B&&(on.clearTimeout(n.B),n.B=null)}function $E(n){0==n.l.G||n.I||rB(n.l,n)}function Gm(n){BT(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,oR(n.T),yL(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pR(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||gR(t.h,n)))if(!n.J&&gR(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;KT(t),WT(t)}wR(t),Yo(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=VE(Do(t.cb,t),6e3));if(1>=UL(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else zm(t,11)}else if((n.J||t.g==n)&&KT(t),!TT(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const T=b[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const k=b[5];null!=k&&"number"==typeof k&&0<k&&(t.J=r=1.5*k,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.h;a.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(mR(a,a.h),a.h=null))}if(r.D){const ae=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.za=ae,Xr(r.F,r.D,ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=oB(r,r.H?r.ka:null,r.V),u.J){HL(r.h,u);var g=u,y=r.J;y&&g.setTimeout(y),g.B&&(BT(g),jE(g)),r.g=u}else tB(r);0<t.i.length&&zT(t)}else"stop"!=b[0]&&"close"!=b[0]||zm(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?zm(t,7):bR(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}BE(4)}catch{}}function RL(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(IT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function IG(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(IT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function DG(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(IT(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Rt=HE.prototype).setTimeout=function(n){this.O=n},Rt.ib=function(n){n=n.target;const e=this.L;e&&3==Zh(n)?e.l():this.La(n)},Rt.La=function(n){try{if(n==this.g)e:{const T=Zh(this.g);var e=this.g.Ea();const N=this.g.aa();if(!(3>T)&&(3!=T||$x||this.g&&(this.h.h||this.g.fa()||YL(this.g)))){this.I||4!=T||7==e||BE(8==e||0>=N?3:2),BT(this);var t=this.g.aa();this.Y=t;t:if(AL(this)){var r=YL(this.g);n="";var i=r.length,a=4==Zh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gm(this),$E(this);var u="";break t}this.h.i=new on.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function yG(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,y=this.g;if((g=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!TT(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Yo(12),Gm(this),$E(this);break e}o0(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pR(this,t)}this.P?(NL(this,T,u),$x&&this.i&&3==T&&(_L(this.S,this.T,"tick",this.hb),this.T.start())):(o0(this.j,this.m,u,null),pR(this,u)),4==T&&Gm(this),this.i&&!this.I&&(4==T?rB(this.l,this):(this.i=!1,jE(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Yo(12)):(this.o=0,Yo(13)),Gm(this),$E(this)}}}catch{}},Rt.hb=function(){if(this.g){var n=Zh(this.g),e=this.g.fa();this.C<e.length&&(BT(this),NL(this,n,e),this.i&&4!=n&&jE(this))}},Rt.cancel=function(){this.I=!0,Gm(this)},Rt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function vG(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(BE(3),Yo(17)),Gm(this),this.o=2,$E(this)):xL(this,this.V-n)};var ML=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wm(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Wm){this.h=void 0!==e?e:n.h,VT(this,n.j),this.s=n.s,this.g=n.g,UT(this,n.m),this.l=n.l,e=n.i;var t=new zE;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),OL(this,t),this.o=n.o}else n&&(t=String(n).match(ML))?(this.h=!!e,VT(this,t[1]||"",!0),this.s=GE(t[2]||""),this.g=GE(t[3]||"",!0),UT(this,t[4]),this.l=GE(t[5]||"",!0),OL(this,t[6]||"",!0),this.o=GE(t[7]||"")):(this.h=!!e,this.i=new zE(null,this.h))}function Yh(n){return new Wm(n)}function VT(n,e,t){n.j=t?GE(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function UT(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OL(n,e,t){e instanceof zE?(n.i=e,function RG(n,e){e&&!n.j&&(pp(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PL(this,r),LL(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=WE(e,NG)),n.i=new zE(e,n.h))}function Xr(n,e,t){n.i.set(e,t)}function HT(n){return Xr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function GE(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function WE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,TG),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function TG(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Wm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(WE(e,kL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(WE(e,kL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(WE(t,"/"==t.charAt(0)?AG:SG,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",WE(t,xG)),n.join("")};var kL=/[#\/\?@]/g,SG=/[#\?:]/g,AG=/[#\?]/g,NG=/[#\?@]/g,xG=/#/g;function zE(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pp(n){n.g||(n.g=new Map,n.h=0,n.i&&function CG(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PL(n,e){pp(n),e=a0(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function FL(n,e){return pp(n),e=a0(n,e),n.g.has(e)}function LL(n,e,t){PL(n,e),0<t.length&&(n.i=null,n.g.set(a0(n,e),Ux(t)),n.h+=t.length)}function a0(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function BL(n){this.l=n||OG,n=on.PerformanceNavigationTiming?0<(n=on.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(on.g&&on.g.Ga&&on.g.Ga()&&on.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Rt=zE.prototype).add=function(n,e){pp(this),this.i=null,n=a0(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Rt.forEach=function(n,e){pp(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Rt.oa=function(){pp(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Rt.W=function(n){pp(this);let e=[];if("string"==typeof n)FL(this,n)&&(e=e.concat(this.g.get(a0(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Rt.set=function(n,e){return pp(this),this.i=null,FL(this,n=a0(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Rt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=a;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var OG=10;function VL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function UL(n){return n.h?1:n.g?n.g.size:0}function gR(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mR(n,e){n.g?n.g.add(e):n.h=e}function HL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function jL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ux(n.i)}function _R(){}function kG(){this.g=new _R}function PG(n,e,t){const r=t||"";try{RL(n,function(i,a){let u=i;kE(i)&&(u=rR(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function jT(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function KE(n){this.l=n.ac||null,this.j=n.jb||!1}function $T(n,e){Ds.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=yR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}BL.prototype.cancel=function(){if(this.i=jL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},_R.prototype.stringify=function(n){return on.JSON.stringify(n,void 0)},_R.prototype.parse=function(n){return on.JSON.parse(n,void 0)},ro(KE,lR),KE.prototype.g=function(){return new $T(this.l,this.j)},KE.prototype.i=function(n){return function(){return n}}({}),ro($T,Ds);var yR=0;function $L(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function qE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,YE(n)}function YE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Rt=$T.prototype).open=function(n,e){if(this.readyState!=yR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,YE(this)},Rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||on).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qE(this)),this.readyState=yR},Rt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,YE(this)),this.g&&(this.readyState=3,YE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof on.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$L(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Rt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qE(this):YE(this),3==this.readyState&&$L(this)}},Rt.Va=function(n){this.g&&(this.response=this.responseText=n,qE(this))},Rt.Ua=function(n){this.g&&(this.response=n,qE(this))},Rt.ga=function(){this.g&&qE(this)},Rt.setRequestHeader=function(n,e){this.v.append(n,e)},Rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($T.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var LG=on.JSON.parse;function mi(n){Ds.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GL,this.K=this.L=!1}ro(mi,Ds);var GL="",BG=/^https?$/i,VG=["POST","PUT"];function WL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zL(n),GT(n)}function zL(n){n.D||(n.D=!0,io(n,"complete"),io(n,"error"))}function KL(n){if(n.h&&typeof Bx<"u"&&(!n.C[1]||4!=Zh(n)||2!=n.aa()))if(n.v&&4==Zh(n))aR(n.Ha,0,n);else if(io(n,"readystatechange"),4==Zh(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var i=String(n.H).match(ML)[1]||null;if(!i&&on.self&&on.self.location){var a=on.self.location.protocol;i=a.substr(0,a.length-1)}r=!BG.test(i?i.toLowerCase():"")}t=r}if(t)io(n,"complete"),io(n,"success");else{n.m=6;try{var u=2<Zh(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",zL(n)}}finally{GT(n)}}}function GT(n,e){if(n.g){qL(n);const t=n.g,r=n.C[0]?DT:null;n.g=null,n.C=null,e||io(n,"ready");try{t.onreadystatechange=r}catch{}}}function qL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(on.clearTimeout(n.A),n.A=null)}function Zh(n){return n.g?n.g.readyState:0}function YL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case GL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ZL(n){let e="";return qx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function vR(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ZL(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Xr(n,e,t))}function ZE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function QL(n){this.Ca=0,this.i=[],this.j=new OT,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ZE("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ZE("baseRetryDelayMs",5e3,n),this.bb=ZE("retryDelaySeedMs",1e4,n),this.$a=ZE("forwardChannelMaxRetries",2,n),this.ta=ZE("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new BL(n&&n.concurrentRequestLimit),this.Fa=new kG,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function bR(n){if(JL(n),3==n.G){var e=n.U++,t=Yh(n.F);Xr(t,"SID",n.I),Xr(t,"RID",e),Xr(t,"TYPE","terminate"),QE(n,t),(e=new HE(n,n.j,e,void 0)).K=2,e.v=HT(Yh(t)),t=!1,on.navigator&&on.navigator.sendBeacon&&(t=on.navigator.sendBeacon(e.v.toString(),"")),!t&&on.Image&&((new Image).src=e.v,t=!0),t||(e.g=aB(e.l,null),e.g.da(e.v)),e.F=Date.now(),jE(e)}sB(n)}function WT(n){n.g&&(ER(n),n.g.cancel(),n.g=null)}function JL(n){WT(n),n.u&&(on.clearTimeout(n.u),n.u=null),KT(n),n.h.cancel(),n.m&&("number"==typeof n.m&&on.clearTimeout(n.m),n.m=null)}function zT(n){VL(n.h)||n.m||(n.m=!0,fL(n.Ja,n),n.C=0)}function XL(n,e){var t;t=e?e.m:n.U++;const r=Yh(n.F);Xr(r,"SID",n.I),Xr(r,"RID",t),Xr(r,"AID",n.T),QE(n,r),n.o&&n.s&&vR(r,n.o,n.s),t=new HE(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=eB(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),mR(n.h,t),fR(t,r,e)}function QE(n,e){n.ia&&qx(n.ia,function(t,r){Xr(e,r,t)}),n.l&&RL({},function(t,r){Xr(e,r,t)})}function eB(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Do(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let g=!0;for(let y=0;y<t;y++){let b=i[y].h;const T=i[y].g;if(b-=a,0>b)a=Math.max(0,i[y].h-100),g=!1;else try{PG(T,u,"req"+b+"_")}catch{r&&r(T)}}if(g){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function tB(n){n.g||n.u||(n.Z=1,fL(n.Ia,n),n.A=0)}function wR(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=VE(Do(n.Ia,n),iB(n,n.A)),n.A++,0))}function ER(n){null!=n.B&&(on.clearTimeout(n.B),n.B=null)}function nB(n){n.g=new HE(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Yh(n.sa);Xr(e,"RID","rpc"),Xr(e,"SID",n.I),Xr(e,"CI",n.L?"0":"1"),Xr(e,"AID",n.T),Xr(e,"TYPE","xmlhttp"),QE(n,e),n.o&&n.s&&vR(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=HT(Yh(e)),t.s=null,t.P=!0,SL(t,n)}function KT(n){null!=n.v&&(on.clearTimeout(n.v),n.v=null)}function rB(n,e){var t=null;if(n.g==e){KT(n),ER(n),n.g=null;var r=2}else{if(!gR(n.h,e))return;t=e.D,HL(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;io(r=kT(),new EL(r,t,e,i)),zT(n)}else tB(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function HG(n,e){return!(UL(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=VE(Do(n.Ja,n,e),iB(n,n.C)),n.C++,0)))}(n,e)||2==r&&wR(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:zm(n,5);break;case 4:zm(n,10);break;case 3:zm(n,6);break;default:zm(n,2)}}function iB(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function zm(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Do(n.kb,n);t||(t=new Wm("//www.google.com/images/cleardot.gif"),on.location&&"http"==on.location.protocol||VT(t,"https"),HT(t)),function FG(n,e){const t=new OT;if(on.Image){const r=new Image;r.onload=CT(jT,t,r,"TestLoadImage: loaded",!0,e),r.onerror=CT(jT,t,r,"TestLoadImage: error",!1,e),r.onabort=CT(jT,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=CT(jT,t,r,"TestLoadImage: timeout",!1,e),on.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Yo(2);n.G=0,n.l&&n.l.va(e),sB(n),JL(n)}function sB(n){if(n.G=0,n.la=[],n.l){const e=jL(n.h);(0!=e.length||0!=n.i.length)&&(JF(n.la,e),JF(n.la,n.i),n.h.i.length=0,Ux(n.i),n.i.length=0),n.l.ua()}}function oB(n,e,t){var r=t instanceof Wm?Yh(t):new Wm(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),UT(r,r.m);else{var i=on.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Wm(null,void 0);r&&VT(a,r),e&&(a.g=e),i&&UT(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Xr(r,t,e),Xr(r,"VER",n.ma),QE(n,r),r}function aB(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mi(t&&n.Da&&!n.ra?new KE({jb:!0}):n.ra)).Ka(n.H),e}function lB(){}function qT(){if(s0&&!(10<=Number(iG)))throw Error("Environmental error: no available transport.")}function ml(n,e){Ds.call(this),this.g=new QL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!TT(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!TT(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new l0(this)}function uB(n){uR.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function cB(){cR.call(this),this.status=1}function l0(n){this.g=n}(Rt=mi.prototype).Ka=function(n){this.L=n},Rt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():dR.g(),this.C=function IL(n){return n.h||(n.h=n.i())}(this.u?this.u:dR),this.g.onreadystatechange=Do(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void WL(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=on.FormData&&n instanceof on.FormData,!(0<=QF(VG,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,u]of t)this.g.setRequestHeader(a,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qL(this),0<this.B&&((this.K=function UG(n){return s0&&function rG(){return function X$(n){var e=nG;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=XF(String(AT)).split("."),t=XF("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Hx(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Hx(0==i[2].length,0==a[2].length)||Hx(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Do(this.qa,this)):this.A=aR(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){WL(this,a)}},Rt.qa=function(){typeof Bx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,io(this,"timeout"),this.abort(8))},Rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,io(this,"complete"),io(this,"abort"),GT(this))},Rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),GT(this,!0)),mi.X.M.call(this)},Rt.Ha=function(){this.s||(this.F||this.v||this.l?KL(this):this.fb())},Rt.fb=function(){KL(this)},Rt.aa=function(){try{return 2<Zh(this)?this.g.status:-1}catch{return-1}},Rt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Rt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),LG(e)}},Rt.Ea=function(){return this.m},Rt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Rt=QL.prototype).ma=8,Rt.G=1,Rt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new HE(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=iL(a),oL(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=eB(this,i,e),Xr(t=Yh(this.F),"RID",n),Xr(t,"CVER",22),this.D&&Xr(t,"X-HTTP-Session-Id",this.D),QE(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(ZL(a)))+"&"+e:this.o&&vR(t,this.o,a)),mR(this.h,i),this.Ya&&Xr(t,"TYPE","init"),this.O?(Xr(t,"$req",e),Xr(t,"SID","null"),i.Z=!0,fR(i,t,null)):fR(i,t,e),this.G=2}}else 3==this.G&&(n?XL(this,n):0==this.i.length||VL(this.h)||XL(this))},Rt.Ia=function(){if(this.u=null,nB(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=VE(Do(this.eb,this),n)}},Rt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Yo(10),WT(this),nB(this))},Rt.cb=function(){null!=this.v&&(this.v=null,WT(this),wR(this),Yo(19))},Rt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Yo(2)):(this.j.info("Failed to ping google.com"),Yo(1))},(Rt=lB.prototype).xa=function(){},Rt.wa=function(){},Rt.va=function(){},Rt.ua=function(){},Rt.Ra=function(){},qT.prototype.g=function(n,e){return new ml(n,e)},ro(ml,Ds),ml.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Yo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=oB(n,null,n.V),zT(n)},ml.prototype.close=function(){bR(this.g)},ml.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=rR(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&zT(e)},ml.prototype.M=function(){this.g.l=null,delete this.j,bR(this.g),delete this.g,ml.X.M.call(this)},ro(uB,uR),ro(cB,cR),ro(l0,lB),l0.prototype.xa=function(){io(this.g,"a")},l0.prototype.wa=function(n){io(this.g,new uB(n))},l0.prototype.va=function(n){io(this.g,new cB(n))},l0.prototype.ua=function(){io(this.g,"b")},qT.prototype.createWebChannel=qT.prototype.g,ml.prototype.send=ml.prototype.u,ml.prototype.open=ml.prototype.m,ml.prototype.close=ml.prototype.close,PT.NO_ERROR=0,PT.TIMEOUT=8,PT.HTTP_ERROR=6,DL.COMPLETE="complete",CL.EventType=UE,UE.OPEN="a",UE.CLOSE="b",UE.ERROR="c",UE.MESSAGE="d",Ds.prototype.listen=Ds.prototype.N,mi.prototype.listenOnce=mi.prototype.O,mi.prototype.getLastError=mi.prototype.Oa,mi.prototype.getLastErrorCode=mi.prototype.Ea,mi.prototype.getStatus=mi.prototype.aa,mi.prototype.getResponseJson=mi.prototype.Sa,mi.prototype.getResponseText=mi.prototype.fa,mi.prototype.send=mi.prototype.da,mi.prototype.setWithCredentials=mi.prototype.Ka;var jG=qh.createWebChannelTransport=function(){return new qT},$G=qh.getStatEventTarget=function(){return kT()},DR=qh.ErrorCode=PT,GG=qh.EventType=DL,WG=qh.Event=$m,dB=qh.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},zG=qh.FetchXmlHttpFactory=KE,YT=qh.WebChannel=CL,KG=qh.XhrIo=mi;const hB="@firebase/firestore";class Is{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Is.UNAUTHENTICATED=new Is(null),Is.GOOGLE_CREDENTIALS=new Is("google-credentials-uid"),Is.FIRST_PARTY=new Is("first-party-uid"),Is.MOCK_USER=new Is("mock-user");let u0="9.12.1";const gp=new wo.Yd("@firebase/firestore");function IR(){return gp.logLevel}function Qe(n,...e){if(gp.logLevel<=wo.in.DEBUG){const t=e.map(CR);gp.debug(`Firestore (${u0}): ${n}`,...t)}}function Ai(n,...e){if(gp.logLevel<=wo.in.ERROR){const t=e.map(CR);gp.error(`Firestore (${u0}): ${n}`,...t)}}function Km(n,...e){if(gp.logLevel<=wo.in.WARN){const t=e.map(CR);gp.warn(`Firestore (${u0}): ${n}`,...t)}}function CR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Nt(n="Unexpected state"){const e=`FIRESTORE (${u0}) INTERNAL ASSERTION FAILED: `+n;throw Ai(e),new Error(e)}function Yt(n,e){n||Nt()}function ft(n,e){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends ee.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class as{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class fB{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Is.UNAUTHENTICATED))}shutdown(){}}class QG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JG{constructor(e){this.t=e,this.currentUser=Is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let u=new as;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new as,e.enqueueRetryable(()=>a(this.currentUser))};const g=()=>{const b=u;e.enqueueRetryable((0,se.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},y=b=>{Qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new as)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt("string"==typeof r.accessToken),new fB(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yt(null===e||"string"==typeof e),new Is(e)}}class XG{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Is.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Yt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class eW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new XG(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tW{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.A;return this.A=a.token,Qe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Yt("string"==typeof t.token),this.A=t.token,new pB(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gB{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nW(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function an(n,e){return n<e?-1:n>e?1:0}function c0(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mB(n){return n+"\0"}class ei{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $e(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ei.fromMillis(Date.now())}static fromDate(e){return ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ei(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?an(this.nanoseconds,e.nanoseconds):an(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zt(e)}static min(){return new Zt(new ei(0,0))}static max(){return new Zt(new ei(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class JE{constructor(e,t,r){void 0===t?t=0:t>e.length&&Nt(),void 0===r?r=e.length-t:r>e.length-t&&Nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===JE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof JE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vn extends JE{construct(e,t,r){return new Vn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $e(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Vn(t)}static emptyPath(){return new Vn([])}}const rW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends JE{construct(e,t,r){return new _i(e,t,r)}static isValidIdentifier(e){return rW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new $e(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const g=e[i];if("\\"===g){if(i+1===e.length)throw new $e(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new $e(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===g?(u=!u,i++):"."!==g||u?(r+=g,i++):(a(),i++)}if(a(),u)throw new $e(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class ct{constructor(e){this.path=e}static fromPath(e){return new ct(Vn.fromString(e))}static fromName(e){return new ct(Vn.fromString(e).popFirst(5))}static empty(){return new ct(Vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new Vn(e.slice()))}}class ZT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function TR(n){return n.fields.find(e=>2===e.kind)}function qm(n){return n.fields.filter(e=>2!==e.kind)}ZT.UNKNOWN_ID=-1;class QT{constructor(e,t){this.fieldPath=e,this.kind=t}}class XE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new XE(0,_l.min())}}function _B(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Zt.fromTimestamp(1e9===r?new ei(t+1,0):new ei(t,r));return new _l(i,ct.empty(),e)}function yB(n){return new _l(n.readTime,n.key,-1)}class _l{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _l(Zt.min(),ct.empty(),-1)}static max(){return new _l(Zt.max(),ct.empty(),-1)}}function SR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ct.comparator(n.documentKey,e.documentKey),0!==t?t:an(n.largestBatchId,e.largestBatchId))}const vB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function mp(n){return AR.apply(this,arguments)}function AR(){return AR=(0,se.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==vB)throw n;Qe("LocalStore","Unexpectedly lost primary lease")}),AR.apply(this,arguments)}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,a=0,u=!1;e.forEach(g=>{++i,g.next(()=>{++a,u&&a===i&&t()},y=>r(y))}),u=!0,a===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ye((r,i)=>{const a=e.length,u=new Array(a);let g=0;for(let y=0;y<a;y++){const b=y;t(e[b]).next(T=>{u[b]=T,++g,g===a&&r(u)},T=>i(T))}})}static doWhile(e,t){return new ye((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class JT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new as,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new eD(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=NR(r.target.error);this.P.reject(new eD(e,i))}}static open(e,t,r,i){try{return new JT(t,e.transaction(i,r))}catch(a){throw new eD(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aW(t)}}class ac{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ac.D((0,ee.z$)())&&Ai("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Qe("SimpleDb","Removing database:",e),Ym(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,ee.hl)())return!1;if(ac.N())return!0;const e=(0,ee.z$)(),t=ac.D(e),r=0<t&&t<10,i=ac.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,se.Z)(function*(){return t.db||(Qe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new eD(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const g=u.target.error;i("VersionError"===g.name?new $e(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new $e(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new eD(e,g))},a.onupgradeneeded=u=>{Qe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Qe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,se.Z)(function*(){const u="readonly"===t;let g=0;for(;;){++g;try{a.db=yield a.F(e);const y=JT.open(a.db,e,u?"readonly":"readwrite",r),b=i(y).next(T=>(y.V(),T)).catch(T=>(y.abort(T),ye.reject(T))).toPromise();return b.catch(()=>{}),yield y.v,b}catch(y){const b=y,T="FirebaseError"!==b.name&&g<3;if(Qe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),a.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class oW{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Ym(this.U.delete())}}class eD extends $e{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _p(n){return"IndexedDbTransactionError"===n.name}class aW{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Qe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ym(r)}add(e){return Qe("SimpleDb","ADD",this.store.name,e,e),Ym(this.store.add(e))}get(e){return Ym(this.store.get(e)).next(t=>(void 0===t&&(t=null),Qe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Qe("SimpleDb","DELETE",this.store.name,e),Ym(this.store.delete(e))}count(){return Qe("SimpleDb","COUNT",this.store.name),Ym(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(u,g)=>{a.push(g)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ye((a,u)=>{i.onerror=g=>{u(g.target.error)},i.onsuccess=g=>{a(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ye((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){Qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,u,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=a=>{const u=NR(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(g=>{g?u.continue():r()}):r()}})}H(e,t){const r=[];return new ye((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const g=u.target.result;if(!g)return void i();const y=new oW(g),b=t(g.primaryKey,g.value,y);if(b instanceof ye){const T=b.catch(N=>(y.done(),ye.reject(N)));r.push(T)}y.isDone?i():null===y.G?g.continue():g.continue(y.G)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ym(n){return new ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=NR(r.target.error);t(i)}})}let wB=!1;function NR(n){const e=ac.D((0,ee.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new $e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return wB||(wB=!0,setTimeout(()=>{throw r},0)),r}}return n}class lW{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,se.Z)(function*(){t.task=null;try{Qe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){_p(r)?Qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield mp(r)}yield t.nt(6e4)}))}}class uW{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ye.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Qe("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(g=>{i-=g,r.add(u)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,a)).next(g=>(Qe("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=yB(a);SR(u,r)>0&&(r=u)}),new _l(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Na{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function EB(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Na.at=-1;class yi{constructor(e,t){this.comparator=e,this.root=t||so.EMPTY}insert(e,t){return new yi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,so.BLACK,null,null))}remove(e){return new yi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,so.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new XT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new XT(this.root,e,this.comparator,!1)}getReverseIterator(){return new XT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new XT(this.root,e,this.comparator,!0)}}class XT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class so{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??so.RED,this.left=i??so.EMPTY,this.right=a??so.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new so(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return so.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return so.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,so.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,so.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nt();const e=this.left.check();if(e!==this.right.check())throw Nt();return e+(this.isRed()?0:1)}}so.EMPTY=null,so.RED=!0,so.BLACK=!1,so.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt()}get value(){throw Nt()}get color(){throw Nt()}get left(){throw Nt()}get right(){throw Nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new so(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pr{constructor(e){this.comparator=e,this.data=new yi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IB(this.data.getIterator())}getIteratorFrom(e){return new IB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pr(this.comparator);return t.data=e,t}}class IB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function d0(n){return n.hasNext()?n.getNext():void 0}class yl{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new yl([])}unionWith(e){let t=new pr(_i.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new yl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return c0(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ls{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ls(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ls(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return an(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ls.EMPTY_BYTE_STRING=new ls("");const dW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yp(n){if(Yt(!!n),"string"==typeof n){let e=0;const t=dW.exec(n);if(Yt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vi(n.seconds),nanos:vi(n.nanos)}}function vi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qm(n){return"string"==typeof n?ls.fromBase64String(n):ls.fromUint8Array(n)}function xR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function CB(n){const e=n.mapValue.fields.__previous_value__;return xR(e)?CB(e):e}function tD(n){const e=yp(n.mapValue.fields.__local_write_time__.timestampValue);return new ei(e.seconds,e.nanos)}class hW{constructor(e,t,r,i,a,u,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=g,this.useFetchStreams=y}}class vp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vp&&e.projectId===this.projectId&&e.database===this.database}}function nD(n){return null==n}function rD(n){return 0===n&&1/n==-1/0}function TB(n){return"number"==typeof n&&Number.isInteger(n)&&!rD(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const bp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eS={nullValue:"NULL_VALUE"};function Jm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xR(n)?4:xB(n)?9007199254740991:10:Nt()}function pd(n,e){if(n===e)return!0;const t=Jm(n);if(t!==Jm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tD(n).isEqual(tD(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=yp(r.timestampValue),u=yp(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Qm(n.bytesValue).isEqual(Qm(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vi(r.geoPointValue.latitude)===vi(i.geoPointValue.latitude)&&vi(r.geoPointValue.longitude)===vi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vi(r.integerValue)===vi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vi(r.doubleValue),u=vi(i.doubleValue);return a===u?rD(a)===rD(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return c0(n.arrayValue.values||[],e.arrayValue.values||[],pd);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(EB(a)!==EB(u))return!1;for(const g in a)if(a.hasOwnProperty(g)&&(void 0===u[g]||!pd(a[g],u[g])))return!1;return!0}(n,e);default:return Nt()}var i}function iD(n,e){return void 0!==(n.values||[]).find(t=>pd(t,e))}function wp(n,e){if(n===e)return 0;const t=Jm(n),r=Jm(e);if(t!==r)return an(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return an(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=vi(i.integerValue||i.doubleValue),g=vi(a.integerValue||a.doubleValue);return u<g?-1:u>g?1:u===g?0:isNaN(u)?isNaN(g)?0:-1:1}(n,e);case 3:return SB(n.timestampValue,e.timestampValue);case 4:return SB(tD(n),tD(e));case 5:return an(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Qm(i),g=Qm(a);return u.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),g=a.split("/");for(let y=0;y<u.length&&y<g.length;y++){const b=an(u[y],g[y]);if(0!==b)return b}return an(u.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=an(vi(i.latitude),vi(a.latitude));return 0!==u?u:an(vi(i.longitude),vi(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],g=a.values||[];for(let y=0;y<u.length&&y<g.length;++y){const b=wp(u[y],g[y]);if(b)return b}return an(u.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===bp.mapValue&&a===bp.mapValue)return 0;if(i===bp.mapValue)return 1;if(a===bp.mapValue)return-1;const u=i.fields||{},g=Object.keys(u),y=a.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let T=0;T<g.length&&T<b.length;++T){const N=an(g[T],b[T]);if(0!==N)return N;const k=wp(u[g[T]],y[b[T]]);if(0!==k)return k}return an(g.length,b.length)}(n.mapValue,e.mapValue);default:throw Nt()}}function SB(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return an(n,e);const t=yp(n),r=yp(e),i=an(t.seconds,r.seconds);return 0!==i?i:an(t.nanos,r.nanos)}function h0(n){return RR(n)}function RR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yp(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qm(n.bytesValue).toBase64():"referenceValue"in n?ct.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=RR(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const g of i)u?u=!1:a+=",",a+=`${g}:${RR(r.fields[g])}`;return a+"}"}(n.mapValue):Nt();var e}function Xm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function MR(n){return!!n&&"integerValue"in n}function sD(n){return!!n&&"arrayValue"in n}function AB(n){return!!n&&"nullValue"in n}function NB(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tS(n){return!!n&&"mapValue"in n}function oD(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oD(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oD(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xB(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fW(n){return"nullValue"in n?eS:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Xm(vp.empty(),ct.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Nt()}function pW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Xm(vp.empty(),ct.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?bp:Nt()}function RB(n,e){const t=wp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function MB(n,e){const t=wp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class oo{constructor(e){this.value=e}static empty(){return new oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tS(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oD(t)}setAll(e){let t=_i.emptyPath(),r={},i=[];e.forEach((u,g)=>{if(!t.isImmediateParentOf(g)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=g.popLast()}u?r[g.lastSegment()]=oD(u):i.push(g.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());tS(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tS(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zm(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new oo(oD(this.value))}}function OB(n){const e=[];return Zm(n.fields,(t,r)=>{const i=new _i([t]);if(tS(r)){const a=OB(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new yl(e)}class Mr{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Mr(e,0,Zt.min(),Zt.min(),oo.empty(),0)}static newFoundDocument(e,t,r){return new Mr(e,1,t,Zt.min(),r,0)}static newNoDocument(e,t){return new Mr(e,2,t,Zt.min(),oo.empty(),0)}static newUnknownDocument(e,t){return new Mr(e,3,t,Zt.min(),oo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class gW{constructor(e,t=null,r=[],i=[],a=null,u=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=g,this.ht=null}}function kB(n,e=null,t=[],r=[],i=null,a=null,u=null){return new gW(n,e,t,r,i,a,u)}function e_(n){const e=ft(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+h0(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),nD(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>h0(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>h0(r)).join(",")),e.ht=t}return e.ht}function aD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!IW(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!pd(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VB(n.startAt,e.startAt)&&VB(n.endAt,e.endAt)}function nS(n){return ct.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rS(n,e){return n.filters.filter(t=>t instanceof ao&&t.field.isEqual(e))}function PB(n,e,t){let r=eS,i=!0;for(const a of rS(n,e)){let u=eS,g=!0;switch(a.op){case"<":case"<=":u=fW(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,g=!1;break;case"!=":case"not-in":u=eS}RB({value:r,inclusive:i},{value:u,inclusive:g})<0&&(r=u,i=g)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];RB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function FB(n,e,t){let r=bp,i=!0;for(const a of rS(n,e)){let u=bp,g=!0;switch(a.op){case">=":case">":u=pW(a.value),g=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,g=!1;break;case"!=":case"not-in":u=bp}MB({value:r,inclusive:i},{value:u,inclusive:g})>0&&(r=u,i=g)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];MB({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class ao extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new _W(e,t,r):"array-contains"===t?new bW(e,r):"in"===t?new wW(e,r):"not-in"===t?new EW(e,r):"array-contains-any"===t?new DW(e,r):new ao(e,t,r)}static lt(e,t,r){return"in"===t?new yW(e,r):new vW(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(wp(t,this.value)):null!==t&&Jm(this.value)===Jm(t)&&this.ft(wp(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _W extends ao{constructor(e,t,r){super(e,t,r),this.key=ct.fromName(r.referenceValue)}matches(e){const t=ct.comparator(e.key,this.key);return this.ft(t)}}class yW extends ao{constructor(e,t){super(e,"in",t),this.keys=LB(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vW extends ao{constructor(e,t){super(e,"not-in",t),this.keys=LB(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LB(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ct.fromName(r.referenceValue))}class bW extends ao{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sD(t)&&iD(t.arrayValue,this.value)}}class wW extends ao{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&iD(this.value.arrayValue,t)}}class EW extends ao{constructor(e,t){super(e,"not-in",t)}matches(e){if(iD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!iD(this.value.arrayValue,t)}}class DW extends ao{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>iD(this.value.arrayValue,r))}}class Ep{constructor(e,t){this.position=e,this.inclusive=t}}class f0{constructor(e,t="asc"){this.field=e,this.dir=t}}function IW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function BB(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?ct.comparator(ct.fromName(u.referenceValue),t.key):wp(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function VB(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pd(n.position[t],e.position[t]))return!1;return!0}class Qh{constructor(e,t=null,r=[],i=[],a=null,u="F",g=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=g,this.endAt=y,this._t=null,this.wt=null}}function UB(n,e,t,r,i,a,u,g){return new Qh(n,e,t,r,i,a,u,g)}function p0(n){return new Qh(n)}function HB(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function OR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function kR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function PR(n){return null!==n.collectionGroup}function g0(n){const e=ft(n);if(null===e._t){e._t=[];const t=kR(e),r=OR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new f0(t)),e._t.push(new f0(_i.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new f0(_i.keyField(),a))}}}return e._t}function Zo(n){const e=ft(n);if(!e.wt)if("F"===e.limitType)e.wt=kB(e.path,e.collectionGroup,g0(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of g0(e))t.push(new f0(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ep(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ep(e.startAt.position,e.startAt.inclusive):null;e.wt=kB(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function iS(n,e,t){return new Qh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lD(n,e){return aD(Zo(n),Zo(e))&&n.limitType===e.limitType}function jB(n){return`${e_(Zo(n))}|lt:${n.limitType}`}function FR(n){return`Query(target=${function mW(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${h0(r.value)}`;var r}).join(", ")}]`),nD(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>h0(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>h0(t)).join(",")),`Target(${e})`}(Zo(n))}; limitType=${n.limitType})`}function LR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ct.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const g=BB(i,a,u);return i.inclusive?g<=0:g<0}(t.startAt,g0(t),r)||t.endAt&&!function(i,a,u){const g=BB(i,a,u);return i.inclusive?g>=0:g>0}(t.endAt,g0(t),r)));var t,r}function $B(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GB(n){return(e,t)=>{let r=!1;for(const i of g0(n)){const a=CW(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function CW(n,e,t){const r=n.field.isKeyField()?ct.comparator(e.key,t.key):function(i,a,u){const g=a.data.field(i),y=u.data.field(i);return null!==g&&null!==y?wp(g,y):Nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Nt()}}function WB(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rD(e)?"-0":e}}function zB(n){return{integerValue:""+n}}function KB(n,e){return TB(e)?zB(e):WB(n,e)}class sS{constructor(){this._=void 0}}function TW(n,e,t){return n instanceof m0?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof t_?YB(n,e):n instanceof n_?ZB(n,e):function(r,i){const a=qB(r,i),u=QB(a)+QB(r.yt);return MR(a)&&MR(r.yt)?zB(u):WB(r.It,u)}(n,e)}function SW(n,e,t){return n instanceof t_?YB(n,e):n instanceof n_?ZB(n,e):t}function qB(n,e){return n instanceof _0?MR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class m0 extends sS{}class t_ extends sS{constructor(e){super(),this.elements=e}}function YB(n,e){const t=JB(e);for(const r of n.elements)t.some(i=>pd(i,r))||t.push(r);return{arrayValue:{values:t}}}class n_ extends sS{constructor(e){super(),this.elements=e}}function ZB(n,e){let t=JB(e);for(const r of n.elements)t=t.filter(i=>!pd(i,r));return{arrayValue:{values:t}}}class _0 extends sS{constructor(e,t){super(),this.It=e,this.yt=t}}function QB(n){return vi(n.integerValue||n.doubleValue)}function JB(n){return sD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uD{constructor(e,t){this.field=e,this.transform=t}}class NW{constructor(e,t){this.version=e,this.transformResults=t}}class ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class aS{}function XB(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new v0(n.key,ti.none()):new y0(n.key,n.data,ti.none());{const t=n.data,r=oo.empty();let i=new pr(_i.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new Jh(n.key,r,new yl(i.toArray()),ti.none())}}function xW(n,e,t){n instanceof y0?function(r,i,a){const u=r.value.clone(),g=n2(r.fieldTransforms,i,a.transformResults);u.setAll(g),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Jh?function(r,i,a){if(!oS(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=n2(r.fieldTransforms,i,a.transformResults),g=i.data;g.setAll(t2(r)),g.setAll(u),i.convertToFoundDocument(a.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function cD(n,e,t,r){return n instanceof y0?function(i,a,u,g){if(!oS(i.precondition,a))return u;const y=i.value.clone(),b=r2(i.fieldTransforms,g,a);return y.setAll(b),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Jh?function(i,a,u,g){if(!oS(i.precondition,a))return u;const y=r2(i.fieldTransforms,g,a),b=a.data;return b.setAll(t2(i)),b.setAll(y),a.convertToFoundDocument(a.version,b).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(u=t,oS(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function RW(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=qB(r.transform,i||null);null!=a&&(null===t&&(t=oo.empty()),t.set(r.field,a))}return t||null}function e2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&c0(t,r,(i,a)=>function AW(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof t_&&r instanceof t_||t instanceof n_&&r instanceof n_?c0(t.elements,r.elements,pd):t instanceof _0&&r instanceof _0?pd(t.yt,r.yt):t instanceof m0&&r instanceof m0);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class y0 extends aS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jh extends aS{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function t2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function n2(n,e,t){const r=new Map;Yt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,g=e.data.field(a.field);r.set(a.field,SW(u,g,t[i]))}return r}function r2(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,TW(a,u,e))}return r}class v0 extends aS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BR extends aS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MW{constructor(e){this.count=e}}var $i,Un;function s2(n){switch(n){default:return Nt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function o2(n){if(void 0===n)return Ai("GRPC error has no .code"),be.UNKNOWN;switch(n){case $i.OK:return be.OK;case $i.CANCELLED:return be.CANCELLED;case $i.UNKNOWN:return be.UNKNOWN;case $i.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case $i.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case $i.INTERNAL:return be.INTERNAL;case $i.UNAVAILABLE:return be.UNAVAILABLE;case $i.UNAUTHENTICATED:return be.UNAUTHENTICATED;case $i.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case $i.NOT_FOUND:return be.NOT_FOUND;case $i.ALREADY_EXISTS:return be.ALREADY_EXISTS;case $i.PERMISSION_DENIED:return be.PERMISSION_DENIED;case $i.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case $i.ABORTED:return be.ABORTED;case $i.OUT_OF_RANGE:return be.OUT_OF_RANGE;case $i.UNIMPLEMENTED:return be.UNIMPLEMENTED;case $i.DATA_LOSS:return be.DATA_LOSS;default:return Nt()}}(Un=$i||($i={}))[Un.OK=0]="OK",Un[Un.CANCELLED=1]="CANCELLED",Un[Un.UNKNOWN=2]="UNKNOWN",Un[Un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Un[Un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Un[Un.NOT_FOUND=5]="NOT_FOUND",Un[Un.ALREADY_EXISTS=6]="ALREADY_EXISTS",Un[Un.PERMISSION_DENIED=7]="PERMISSION_DENIED",Un[Un.UNAUTHENTICATED=16]="UNAUTHENTICATED",Un[Un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Un[Un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Un[Un.ABORTED=10]="ABORTED",Un[Un.OUT_OF_RANGE=11]="OUT_OF_RANGE",Un[Un.UNIMPLEMENTED=12]="UNIMPLEMENTED",Un[Un.INTERNAL=13]="INTERNAL",Un[Un.UNAVAILABLE=14]="UNAVAILABLE",Un[Un.DATA_LOSS=15]="DATA_LOSS";class Dp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zm(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return DB(this.inner)}size(){return this.innerSize}}const OW=new yi(ct.comparator);function xa(){return OW}const a2=new yi(ct.comparator);function dD(...n){let e=a2;for(const t of n)e=e.insert(t.key,t);return e}function l2(n){let e=a2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gd(){return hD()}function u2(){return hD()}function hD(){return new Dp(n=>n.toString(),(n,e)=>n.isEqual(e))}const kW=new yi(ct.comparator),PW=new pr(ct.comparator);function pn(...n){let e=PW;for(const t of n)e=e.add(t);return e}const FW=new pr(an);function lS(){return FW}class fD{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,pD.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fD(Zt.min(),i,lS(),xa(),pn())}}class pD{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pD(r,t,pn(),pn(),pn())}}class uS{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class c2{constructor(e,t){this.targetId=e,this.At=t}}class d2{constructor(e,t,r=ls.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class h2{constructor(){this.Rt=0,this.bt=p2(),this.Pt=ls.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=pn(),t=pn(),r=pn();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Nt()}}),new pD(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=p2()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class LW{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=xa(),this.qt=f2(),this.Kt=new pr(an)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(nS(a))if(0===r){const u=new ct(a.path);this.jt(t,u,Mr.newNoDocument(u,Zt.min()))}else Yt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,u)=>{const g=this.Xt(u);if(g){if(a.current&&nS(g.target)){const y=new ct(g.target.path);null!==this.Ut.get(y)||this.ee(u,y)||this.jt(u,y,Mr.newNoDocument(y,e))}a.Dt&&(t.set(u,a.xt()),a.Nt())}});let r=pn();this.qt.forEach((a,u)=>{let g=!0;u.forEachWhile(y=>{const b=this.Xt(y);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(a))}),this.Ut.forEach((a,u)=>u.setReadTime(e));const i=new fD(e,t,this.Kt,this.Ut,r);return this.Ut=xa(),this.qt=f2(),this.Kt=new pr(an),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new h2,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new pr(an),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Qe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new h2),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function f2(){return new yi(ct.comparator)}function p2(){return new yi(ct.comparator)}const BW={asc:"ASCENDING",desc:"DESCENDING"},VW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class UW{constructor(e,t){this.databaseId=e,this.gt=t}}function gD(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g2(n,e){return n.gt?e.toBase64():e.toUint8Array()}function HW(n,e){return gD(n,e.toTimestamp())}function Cs(n){return Yt(!!n),Zt.fromTimestamp(function(e){const t=yp(e);return new ei(t.seconds,t.nanos)}(n))}function VR(n,e){return(t=n,new Vn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function m2(n){const e=Vn.fromString(n);return Yt(I2(e)),e}function mD(n,e){return VR(n.databaseId,e.path)}function md(n,e){const t=m2(e);if(t.get(1)!==n.databaseId.projectId)throw new $e(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $e(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ct(y2(t))}function UR(n,e){return VR(n.databaseId,e)}function _2(n){const e=m2(n);return 4===e.length?Vn.emptyPath():y2(e)}function _D(n){return new Vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function y2(n){return Yt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function v2(n,e,t){return{name:mD(n,e),fields:t.value.mapValue.fields}}function b2(n,e,t){const r=md(n,e.name),i=Cs(e.updateTime),a=new oo({mapValue:{fields:e.fields}}),u=Mr.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function yD(n,e){let t;if(e instanceof y0)t={update:v2(n,e.key,e.value)};else if(e instanceof v0)t={delete:mD(n,e.key)};else if(e instanceof Jh)t={update:v2(n,e.key,e.data),updateMask:ZW(e.fieldMask)};else{if(!(e instanceof BR))return Nt();t={verify:mD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof m0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof t_)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof n_)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof _0)return{fieldPath:a.field.canonicalString(),increment:u.yt};throw Nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:HW(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Nt()),t;var i}function HR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ti.updateTime(Cs(i.updateTime)):void 0!==i.exists?ti.exists(i.exists):ti.none():ti.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let g=null;"setToServerValue"in u?(Yt("REQUEST_TIME"===u.setToServerValue),g=new m0):"appendMissingElements"in u?g=new t_(u.appendMissingElements.values||[]):"removeAllFromArray"in u?g=new n_(u.removeAllFromArray.values||[]):"increment"in u?g=new _0(a,u.increment):Nt();const y=_i.fromServerFormat(u.fieldPath);return new uD(y,g)}(n,i)):[];var i;if(e.update){const i=md(n,e.update.name),a=new oo({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new yl((e.updateMask.fieldPaths||[]).map(b=>_i.fromServerFormat(b)));return new Jh(i,a,u,t,r)}return new y0(i,a,t,r)}if(e.delete){const i=md(n,e.delete);return new v0(i,t)}if(e.verify){const i=md(n,e.verify);return new BR(i,t)}return Nt()}function w2(n,e){return{documents:[UR(n,e.path)]}}function jR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=UR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=UR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(T=>function(N){if("=="===N.op){if(NB(N.value))return{unaryFilter:{field:b0(N.field),op:"IS_NAN"}};if(AB(N.value))return{unaryFilter:{field:b0(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(NB(N.value))return{unaryFilter:{field:b0(N.field),op:"IS_NOT_NAN"}};if(AB(N.value))return{unaryFilter:{field:b0(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:b0(N.field),op:KW(N.op),value:N.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(b=>{return{field:b0((T=b).field),direction:zW(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(b=e.limit,n.gt||nD(b)?b:{value:b});var b,g,y;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function E2(n){let e=_2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Yt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=D2(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(T=>{return new f0(w0((N=T).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(T){let N;return N="object"==typeof T?T.value:T,nD(N)?null:N}(t.limit));let y=null;var T;t.startAt&&(y=new Ep((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new Ep(T.values||[],!T.before)}(t.endAt)),UB(e,i,u,a,g,"F",y,b)}function D2(n){return n?void 0!==n.unaryFilter?[YW(n)]:void 0!==n.fieldFilter?[qW(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>D2(e)).reduce((e,t)=>e.concat(t)):Nt():[]}function zW(n){return BW[n]}function KW(n){return VW[n]}function b0(n){return{fieldPath:n.canonicalString()}}function w0(n){return _i.fromServerFormat(n.fieldPath)}function qW(n){return ao.create(w0(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function YW(n){switch(n.unaryFilter.op){case"IS_NAN":const e=w0(n.unaryFilter.field);return ao.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=w0(n.unaryFilter.field);return ao.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=w0(n.unaryFilter.field);return ao.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=w0(n.unaryFilter.field);return ao.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nt()}}function ZW(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function I2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Qo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C2(e)),e=QW(n.get(t),e);return C2(e)}function QW(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function C2(n){return n+"\x01\x01"}function _d(n){const e=n.length;if(Yt(e>=2),2===e)return Yt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Vn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&Nt(),n.charAt(u+1)){case"\x01":const g=n.substring(a,u);let y;0===i.length?y=g:(i+=g,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:Nt()}a=u+2}return new Vn(r)}const T2=["userId","batchId"];function cS(n,e){return[n,Qo(e)]}function S2(n,e,t){return[n,Qo(e),t]}const JW={},XW=["prefixPath","collectionGroup","readTime","documentId"],e3=["prefixPath","collectionGroup","documentId"],t3=["collectionGroup","readTime","prefixPath","documentId"],n3=["canonicalId","targetId"],r3=["targetId","path"],s3=["path","targetId"],o3=["collectionId","parent"],a3=["indexId","uid"],l3=["uid","sequenceNumber"],u3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],c3=["indexId","uid","orderedDocumentKey"],d3=["userId","collectionPath","documentId"],h3=["userId","collectionPath","largestBatchId"],f3=["userId","collectionGroup","largestBatchId"],A2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],p3=[...A2,"documentOverlays"],N2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x2=N2,g3=[...x2,"indexConfiguration","indexState","indexEntries"];class $R extends bB{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ts(n,e){const t=ft(n);return ac.M(t.ie,e)}class GR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&xW(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cD(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cD(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=u2();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let g=this.applyToLocalView(u,a.mutatedFields);g=t.has(i.key)?null:g;const y=XB(u,g);null!==y&&r.set(i.key,y),u.isValidDocument()||u.convertToNoDocument(Zt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pn())}isEqual(e){return this.batchId===e.batchId&&c0(this.mutations,e.mutations,(t,r)=>e2(t,r))&&c0(this.baseMutations,e.baseMutations,(t,r)=>e2(t,r))}}class WR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Yt(e.mutations.length===r.length);let i=kW;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new WR(e,t,r,i)}}class zR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ip{constructor(e,t,r,i,a=Zt.min(),u=Zt.min(),g=ls.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=g}withSequenceNumber(e){return new Ip(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ip(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ip(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class R2{constructor(e){this.re=e}}function M2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:mD(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:gD(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:r_(e.version)};else{if(!e.isUnknownDocument())return Nt();r.unknownDocument={path:t.path.toArray(),version:r_(e.version)}}var i,a;return r}function dS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function r_(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function i_(n){const e=new ei(n.seconds,n.nanoseconds);return Zt.fromTimestamp(e)}function s_(n,e){const t=(e.baseMutations||[]).map(a=>HR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>HR(n.re,a)),i=ei.fromMillis(e.localWriteTimeMs);return new GR(e.batchId,i,t,r)}function vD(n){const e=i_(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?i_(n.lastLimboFreeSnapshotVersion):Zt.min();let r;var i;return void 0!==n.query.documents?(Yt(1===(i=n.query).documents.length),r=Zo(p0(_2(i.documents[0])))):r=Zo(E2(n.query)),new Ip(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ls.fromBase64String(n.resumeToken))}function O2(n,e){const t=r_(e.snapshotVersion),r=r_(e.lastLimboFreeSnapshotVersion);let i;i=nS(e.target)?w2(n.re,e.target):jR(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:e_(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KR(n){const e=E2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iS(e,e.limit,"L"):e}function qR(n,e){return new zR(e.largestBatchId,HR(n.re,e.overlayMutation))}function k2(n,e){const t=e.path.lastSegment();return[n,Qo(e.path.popLast()),t]}function P2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:r_(r.readTime),documentKey:Qo(r.documentKey.path),largestBatchId:r.largestBatchId}}class _3{getBundleMetadata(e,t){return F2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:i_(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return F2(e).put({bundleId:(r=t).id,createTime:r_(Cs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return L2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:KR(i.bundledQuery),readTime:i_(i.readTime)};var i})}saveNamedQuery(e,t){return L2(e).put({name:(r=t).name,readTime:r_(Cs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function F2(n){return Ts(n,"bundles")}function L2(n){return Ts(n,"namedQueries")}class hS{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new hS(e,t.uid||"")}getOverlay(e,t){return bD(e).get(k2(this.userId,t)).next(r=>r?qR(this.It,r):null)}getOverlays(e,t){const r=gd();return ye.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const g=new zR(t,u);i.push(this.ue(e,g))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Qo(u.getCollectionPath())));const a=[];return i.forEach(u=>{const g=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(bD(e).Y("collectionPathOverlayIndex",g))}),ye.waitFor(a)}getOverlaysForCollection(e,t,r){const i=gd(),a=Qo(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bD(e).W("collectionPathOverlayIndex",u).next(g=>{for(const y of g){const b=qR(this.It,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=gd();let u;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bD(e).Z({index:"collectionGroupOverlayIndex",range:g},(y,b,T)=>{const N=qR(this.It,b);a.size()<i||N.largestBatchId===u?(a.set(N.getKey(),N),u=N.largestBatchId):T.done()}).next(()=>a)}ue(e,t){return bD(e).put(function(r,i,a){const[u,g,y]=k2(i,a.mutation.key);return{userId:i,collectionPath:g,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:yD(r.re,a.mutation)}}(this.It,this.userId,t))}}function bD(n){return Ts(n,"documentOverlays")}class o_{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(vi(e.integerValue));else if("doubleValue"in e){const r=vi(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),rD(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Qm(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?xB(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Nt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),ct.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function y3(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function B2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=y3(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}o_.Te=new o_;class v3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=B2(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=B2(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class b3{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class w3{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class wD{constructor(){this.Be=new v3,this.Le=new b3(this.Be),this.Ue=new w3(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class a_{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new a_(this.indexId,this.documentKey,this.arrayValue,r)}}function l_(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=V2(n.arrayValue,e.arrayValue),0!==t?t:(t=V2(n.directionalValue,e.directionalValue),0!==t?t:ct.comparator(n.documentKey,e.documentKey)))}function V2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class E3{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=TR(e);if(void 0!==t&&!this.ze(t))return!1;const r=qm(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class D3{constructor(){this.Ye=new YR}addToCollectionParentIndex(e,t){return this.Ye.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(_l.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(_l.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class YR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pr(Vn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pr(Vn.comparator)).toArray()}}const fS=new Uint8Array(0);class I3{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new YR,this.Ze=new Dp(r=>e_(r),(r,i)=>aD(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Qo(i)};return U2(e).put(a)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mB(t),""],!1,!0);return U2(e).W(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(_d(u.parent))}return r})}addFieldIndex(e,t){const r=pS(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=DD(e);return a.next(g=>{u.put(P2(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=pS(e),i=DD(e),a=ED(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ED(e);let i=!0;const a=new Map;return ye.forEach(this.tn(t),u=>this.en(e,u).next(g=>{i&&(i=!!g),a.set(u,g)})).next(()=>{if(i){let u=pn();const g=[];return ye.forEach(a,(y,b)=>{var T;Qe("IndexedDbIndexManager",`Using index ${T=y,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(dt=>`${dt.fieldPath}:${dt.kind}`).join(",")}`} to execute ${e_(t)}`);const N=function(dt,rt){const it=TR(rt);if(void 0===it)return null;for(const pt of rS(dt,it.fieldPath))switch(pt.op){case"array-contains-any":return pt.value.arrayValue.values||[];case"array-contains":return[pt.value]}return null}(b,y),k=function(dt,rt){const it=new Map;for(const pt of qm(rt))for(const sn of rS(dt,pt.fieldPath))switch(sn.op){case"==":case"in":it.set(pt.fieldPath.canonicalString(),sn.value);break;case"not-in":case"!=":return it.set(pt.fieldPath.canonicalString(),sn.value),Array.from(it.values())}return null}(b,y),U=function(dt,rt){const it=[];let pt=!0;for(const sn of qm(rt)){const Hn=0===sn.kind?PB(dt,sn.fieldPath,dt.startAt):FB(dt,sn.fieldPath,dt.startAt);it.push(Hn.value),pt&&(pt=Hn.inclusive)}return new Ep(it,pt)}(b,y),q=function(dt,rt){const it=[];let pt=!0;for(const sn of qm(rt)){const Hn=0===sn.kind?FB(dt,sn.fieldPath,dt.endAt):PB(dt,sn.fieldPath,dt.endAt);it.push(Hn.value),pt&&(pt=Hn.inclusive)}return new Ep(it,pt)}(b,y),ae=this.nn(y,b,U),me=this.nn(y,b,q),nt=this.sn(y,b,k),ot=this.rn(y.indexId,N,ae,U.inclusive,me,q.inclusive,nt);return ye.forEach(ot,dt=>r.J(dt,t.limit).next(rt=>{rt.forEach(it=>{const pt=ct.fromSegments(it.documentKey);u.has(pt)||(u=u.add(pt),g.push(pt))})}))}).next(()=>g)}return ye.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,u,g){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),b=y/(null!=t?t.length:1),T=[];for(let N=0;N<y;++N){const k=t?this.on(t[N/b]):fS,U=this.un(e,k,r[N%b],i),q=this.cn(e,k,a[N%b],u),ae=g.map(me=>this.un(e,k,me,!0));T.push(...this.createRange(U,q,ae))}return T}un(e,t,r,i){const a=new a_(e,ct.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new a_(e,ct.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new E3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const g of a)r.We(g)&&(!u||g.fields.length>u.fields.length)&&(u=g);return u})}getIndexType(e,t){let r=2;return ye.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let g=new pr(_i.comparator),y=!1;for(const b of u.filters){const T=b;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?y=!0:g=g.add(T.field))}for(const b of u.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new wD;for(const i of qm(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.qe(i.kind);o_.Te.ce(a,u)}return r.$e()}on(e){const t=new wD;return o_.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new wD;return o_.Te.ce(Xm(this.databaseId,t),r.qe(function(i){const a=qm(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new wD);let a=0;for(const u of qm(e)){const g=r[a++];for(const y of i)if(this.ln(t,u.fieldPath)&&sD(g))i=this.fn(i,u,g);else{const b=y.qe(u.kind);o_.Te.ce(g,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const g of i){const y=new wD;y.seed(g.$e()),o_.Te.ce(u,y.qe(t.kind)),a.push(y)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof ao&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pS(e),i=DD(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const u=[];return ye.forEach(a,g=>i.get([g.indexId,this.uid]).next(y=>{u.push(function(b,T){const N=T?new XE(T.sequenceNumber,new _l(i_(T.readTime),new ct(_d(T.documentKey)),T.largestBatchId)):XE.empty(),k=b.fields.map(([U,q])=>new QT(_i.fromServerFormat(U),q));return new ZT(b.indexId,b.collectionGroup,k,N)}(g,y))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:an(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=pS(e),a=DD(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ye.forEach(g,y=>a.put(P2(y.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?ye.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(g=>(r.set(i.collectionGroup,g),ye.forEach(g,y=>this.wn(e,i,y).next(b=>{const T=this.mn(a,y);return b.isEqual(T)?ye.resolve():this.gn(e,a,y,b,T)}))))})}yn(e,t,r,i){return ED(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return ED(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=ED(e);let a=new pr(l_);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,g)=>{a=a.add(new a_(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>a)}mn(e,t){let r=new pr(l_);const i=this.an(t,e);if(null==i)return r;const a=TR(t);if(null!=a){const u=e.data.field(a.fieldPath);if(sD(u))for(const g of u.arrayValue.values||[])r=r.add(new a_(t.indexId,e.key,this.on(g),i))}else r=r.add(new a_(t.indexId,e.key,fS,i));return r}gn(e,t,r,i,a){Qe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(g,y,b,T,N){const k=g.getIterator(),U=y.getIterator();let q=d0(k),ae=d0(U);for(;q||ae;){let me=!1,nt=!1;if(q&&ae){const ot=b(q,ae);ot<0?nt=!0:ot>0&&(me=!0)}else null!=q?nt=!0:me=!0;me?(T(ae),ae=d0(U)):nt?(N(q),q=d0(k)):(q=d0(k),ae=d0(U))}}(i,a,l_,g=>{u.push(this.yn(e,t,r,g))},g=>{u.push(this.pn(e,t,r,g))}),ye.waitFor(u)}_n(e){let t=1;return DD(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,g)=>l_(u,g)).filter((u,g,y)=>!g||0!==l_(u,y[g-1]));const i=[];i.push(e);for(const u of r){const g=l_(u,e),y=l_(u,t);if(0===g)i[0]=e.Ke();else if(g>0&&y<0)i.push(u),i.push(u.Ke());else if(y>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,fS,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,fS,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(H2)}getMinOffset(e,t){return ye.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||Nt())).next(H2)}}function U2(n){return Ts(n,"collectionParents")}function ED(n){return Ts(n,"indexEntries")}function pS(n){return Ts(n,"indexConfiguration")}function DD(n){return Ts(n,"indexState")}function H2(n){Yt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;SR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _l(e.readTime,e.documentKey,t)}const j2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ra{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ra(e,Ra.DEFAULT_COLLECTION_PERCENTILE,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let g=0;const y=r.Z({range:u},(T,N,k)=>(g++,k.delete()));a.push(y.next(()=>{Yt(1===g)}));const b=[];for(const T of t.mutations){const N=S2(e,T.key.path,t.batchId);a.push(i.delete(N)),b.push(T.key)}return ye.waitFor(a).next(()=>b)}function gS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Nt();e=n.noDocument}return JSON.stringify(e).length}Ra.DEFAULT_COLLECTION_PERCENTILE=10,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ra.DEFAULT=new Ra(41943040,Ra.DEFAULT_COLLECTION_PERCENTILE,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ra.DISABLED=new Ra(-1,0,0);class mS{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Yt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new mS(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cp(e).Z({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=E0(e),u=Cp(e);return u.add({}).next(g=>{Yt("number"==typeof g);const y=new GR(g,t,r,i),b=function(k,U,q){const ae=q.baseMutations.map(nt=>yD(k.re,nt)),me=q.mutations.map(nt=>yD(k.re,nt));return{userId:U,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:ae,mutations:me}}(this.It,this.userId,y),T=[];let N=new pr((k,U)=>an(k.canonicalString(),U.canonicalString()));for(const k of i){const U=S2(this.userId,k.key.path,g);N=N.add(k.key.path.popLast()),T.push(u.put(b)),T.push(a.put(U,JW))}return N.forEach(k=>{T.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.In[g]=y.keys()}),ye.waitFor(T).next(()=>y)})}lookupMutationBatch(e,t){return Cp(e).get(t).next(r=>r?(Yt(r.userId===this.userId),s_(this.It,r)):null)}Tn(e,t){return this.In[t]?ye.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Cp(e).Z({index:"userMutationsIndex",range:i},(u,g,y)=>{g.userId===this.userId&&(Yt(g.batchId>=r),a=s_(this.It,g)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Cp(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cp(e).W("userMutationsIndex",t).next(r=>r.map(i=>s_(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=cS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return E0(e).Z({range:i},(u,g,y)=>{const[b,T,N]=u,k=_d(T);if(b===this.userId&&t.path.isEqual(k))return Cp(e).get(N).next(U=>{if(!U)throw Nt();Yt(U.userId===this.userId),a.push(s_(this.It,U))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pr(an);const i=[];return t.forEach(a=>{const u=cS(this.userId,a.path),g=IDBKeyRange.lowerBound(u),y=E0(e).Z({range:g},(b,T,N)=>{const[k,U,q]=b,ae=_d(U);k===this.userId&&a.path.isEqual(ae)?r=r.add(q):N.done()});i.push(y)}),ye.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=cS(this.userId,r),u=IDBKeyRange.lowerBound(a);let g=new pr(an);return E0(e).Z({range:u},(y,b,T)=>{const[N,k,U]=y,q=_d(k);N===this.userId&&r.isPrefixOf(q)?q.length===i&&(g=g.add(U)):T.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Cp(e).get(a).next(u=>{if(null===u)throw Nt();Yt(u.userId===this.userId),r.push(s_(this.It,u))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return $2(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return E0(e).Z({range:r},(a,u,g)=>{if(a[0]===this.userId){const y=_d(a[1]);i.push(y)}else g.done()}).next(()=>{Yt(0===i.length)})})}containsKey(e,t){return G2(e,this.userId,t)}Rn(e){return W2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function G2(n,e,t){const r=cS(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return E0(n).Z({range:a,X:!0},(g,y,b)=>{const[T,N,k]=g;T===e&&N===i&&(u=!0),b.done()}).next(()=>u)}function Cp(n){return Ts(n,"mutations")}function E0(n){return Ts(n,"documentMutations")}function W2(n){return Ts(n,"mutationQueues")}class u_{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new u_(0)}static vn(){return new u_(-1)}}class C3{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new u_(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Zt.fromTimestamp(new ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>D0(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Yt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return D0(e).Z((u,g)=>{const y=vD(g);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>ye.waitFor(a)).next(()=>i)}forEachTarget(e,t){return D0(e).Z((r,i)=>{const a=vD(i);t(a)})}Vn(e){return z2(e).get("targetGlobalKey").next(t=>(Yt(null!==t),t))}Sn(e,t){return z2(e).put("targetGlobalKey",t)}Dn(e,t){return D0(e).put(O2(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=e_(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return D0(e).Z({range:i,index:"queryTargetsIndex"},(u,g,y)=>{const b=vD(g);aD(t,b.target)&&(a=b,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Tp(e);return t.forEach(u=>{const g=Qo(u.path);i.push(a.put({targetId:r,path:g})),i.push(this.referenceDelegate.addReference(e,r,u))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=Tp(e);return ye.forEach(t,a=>{const u=Qo(a.path);return ye.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Tp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tp(e);let a=pn();return i.Z({range:r,X:!0},(u,g,y)=>{const b=_d(u[1]),T=new ct(b);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Qo(t.path),i=IDBKeyRange.bound([r],[mB(r)],!1,!0);let a=0;return Tp(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,g],y,b)=>{0!==u&&(a++,b.done())}).next(()=>a>0)}se(e,t){return D0(e).get(t).next(r=>r?vD(r):null)}}function D0(n){return Ts(n,"targets")}function z2(n){return Ts(n,"targetGlobal")}function Tp(n){return Ts(n,"targetDocuments")}function K2([n,e],[t,r]){const i=an(n,t);return 0===i?an(e,r):i}class T3{constructor(e){this.xn=e,this.buffer=new pr(K2),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();K2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,se.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_p(r)?Qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield mp(r)}yield t.Fn(3e5)}))}}class A3{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(Na.at);const r=new T3(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(j2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j2):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,u,g,y,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),i=this.params.maximumSequenceNumbersToCollect):i=N,u=Date.now(),this.nthSequenceNumber(e,i))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(a=N,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),IR()<=wo.in.DEBUG&&Qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${i} in `+(g-u)+`ms\n\tRemoved ${a} targets in `+(y-g)+`ms\n\tRemoved ${N} documents in `+(b-y)+`ms\nTotal Duration: ${b-T}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:N})))}}class N3{constructor(e,t){this.db=e,this.garbageCollector=new A3(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return _S(e,r)}removeReference(e,t,r){return _S(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _S(e,t)}Gn(e,t){return function(r,i){let a=!1;return W2(r).tt(u=>G2(r,u,i).next(g=>(g&&(a=!0),ye.resolve(!g)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(u,g)=>{if(g<=t){const y=this.Gn(e,u).next(b=>{if(!b)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Zt.min()),Tp(e).delete([0,Qo(u.path)])))});i.push(y)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _S(e,t)}Kn(e,t){const r=Tp(e);let i,a=Na.at;return r.Z({index:"documentTargetsIndex"},([u,g],{path:y,sequenceNumber:b})=>{0===u?(a!==Na.at&&t(new ct(_d(i)),a),a=b,i=y):a=Na.at}).next(()=>{a!==Na.at&&t(new ct(_d(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _S(n,e){return Tp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Qo(e.path),sequenceNumber:r}));var r}class q2{constructor(){this.changes=new Dp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class x3{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return c_(e).put(r)}removeEntry(e,t,r){return c_(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],dS(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Mr.newInvalidDocument(t);return c_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ID(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Mr.newInvalidDocument(t)};return c_(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ID(t))},(i,a)=>{r={document:this.jn(t,a),size:gS(a)}}).next(()=>r)}getEntries(e,t){let r=xa();return this.zn(e,t,(i,a)=>{const u=this.jn(i,a);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=xa(),i=new yi(ct.comparator);return this.zn(e,t,(a,u)=>{const g=this.jn(a,u);r=r.insert(a,g),i=i.insert(a,gS(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ye.resolve();let i=new pr(J2);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(ID(i.first()),ID(i.last())),u=i.getIterator();let g=u.getNext();return c_(e).Z({index:"documentKeyIndex",range:a},(y,b,T)=>{const N=ct.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&J2(g,N)<0;)r(g,null),g=u.getNext();g&&g.isEqual(N)&&(r(g,b),g=u.hasNext()?u.getNext():null),g?T.j(ID(g)):T.done()}).next(()=>{for(;g;)r(g,null),g=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),dS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return c_(e).W(IDBKeyRange.bound(i,a,!0)).next(u=>{let g=xa();for(const y of u){const b=this.jn(ct.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,i){let a=xa();const u=Q2(t,r),g=Q2(t,_l.max());return c_(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,g,!0)},(y,b,T)=>{const N=this.jn(ct.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(N.key,N),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new R3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Z2(e).get("remoteDocumentGlobalKey").next(t=>(Yt(!!t),t))}Qn(e,t){return Z2(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function m3(n,e){let t;if(e.document)t=b2(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ct.fromSegments(e.noDocument.path),i=i_(e.noDocument.readTime);t=Mr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Nt();{const r=ct.fromSegments(e.unknownDocument.path),i=i_(e.unknownDocument.version);t=Mr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ei(r[0],r[1]);return Zt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Zt.min()))return r}return Mr.newInvalidDocument(e)}}function Y2(n){return new x3(n)}class R3 extends q2{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Dp(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new pr((a,u)=>an(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const g=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,g.readTime)),u.isValidDocument()){const y=M2(this.Yn.It,u);i=i.add(a.path.popLast()),r+=gS(y)-g.size,t.push(this.Yn.addEntry(e,a,y))}else if(r-=g.size,this.trackRemovals){const y=M2(this.Yn.It,u.convertToNoDocument(Zt.min()));t.push(this.Yn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,u)=>{this.Xn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function Z2(n){return Ts(n,"remoteDocumentGlobal")}function c_(n){return Ts(n,"remoteDocumentsV14")}function ID(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Q2(n,e){const t=e.documentKey.path.toArray();return[n,dS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function J2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=an(t[a],r[a]),i)return i;return i=an(t.length,r.length),i||(i=an(t[t.length-2],r[r.length-2]),i||an(t[t.length-1],r[r.length-1]))}class M3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class X2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&cD(r.mutation,i,yl.empty(),ei.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pn()){const i=gd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=dD();return a.forEach((g,y)=>{u=u.insert(g,y.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=gd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,g)=>{t.set(u,g)})})}computeViews(e,t,r,i){let a=xa();const u=hD(),g=hD();return t.forEach((y,b)=>{const T=r.get(b.key);i.has(b.key)&&(void 0===T||T.mutation instanceof Jh)?a=a.insert(b.key,b):void 0!==T&&(u.set(b.key,T.mutation.getFieldMask()),cD(T.mutation,b,T.mutation.getFieldMask(),ei.now()))}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((b,T)=>u.set(b,T)),t.forEach((b,T)=>{var N;return g.set(b,new M3(T,null!==(N=u.get(b))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=hD();let i=new yi((u,g)=>u-g),a=pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const g of u)g.keys().forEach(y=>{const b=t.get(y);if(null===b)return;let T=r.get(y)||yl.empty();T=g.applyToLocalView(b,T),r.set(y,T);const N=(i.get(g.batchId)||pn()).add(y);i=i.insert(g.batchId,N)})}).next(()=>{const u=[],g=i.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),b=y.key,T=y.value,N=u2();T.forEach(k=>{if(!a.has(k)){const U=XB(t.get(k),r.get(k));null!==U&&N.set(k,U),a=a.add(k)}}),u.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ye.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ct.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):PR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ye.resolve(gd());let g=-1,y=a;return u.next(b=>ye.forEach(b,(T,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),a.get(T)?ye.resolve():this.getBaseDocument(e,T,N).next(k=>{y=y.insert(T,k)}))).next(()=>this.populateOverlays(e,b,a)).next(()=>this.computeViews(e,y,b,pn())).next(T=>({batchId:g,changes:l2(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ct(t)).next(r=>{let i=dD();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=dD();return this.indexManager.getCollectionParents(e,i).next(u=>ye.forEach(u,g=>{const y=(b=t,T=g.child(i),new Qh(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(b=>{b.forEach((T,N)=>{a=a.insert(T,N)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((g,y)=>{const b=y.getKey();null===i.get(b)&&(i=i.insert(b,Mr.newInvalidDocument(b)))});let u=dD();return i.forEach((g,y)=>{const b=a.get(g);void 0!==b&&cD(b.mutation,y,yl.empty(),ei.now()),LR(t,y)&&(u=u.insert(g,y))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ye.resolve(Mr.newInvalidDocument(t))}}class O3{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ye.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Cs(r.createTime)}),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:KR(r.bundledQuery),readTime:Cs(r.readTime)}),ye.resolve();var r}}class k3{constructor(){this.overlays=new yi(ct.comparator),this.es=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gd();return ye.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=gd(),a=t.length+1,u=new ct(t.child("")),g=this.overlays.getIteratorFrom(u);for(;g.hasNext();){const y=g.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new yi((b,T)=>b-T);const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=a.get(b.largestBatchId);null===T&&(T=gd(),a=a.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const g=gd(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,T)=>g.set(b,T)),!(g.size()>=i)););return ye.resolve(g)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new zR(t,r));let a=this.es.get(t);void 0===a&&(a=pn(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class ZR{constructor(){this.ns=new pr(Ss.ss),this.rs=new pr(Ss.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ss(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ss(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ct(new Vn([])),r=new Ss(t,e),i=new Ss(t,e+1),a=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),a.push(u.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ct(new Vn([])),r=new Ss(t,e),i=new Ss(t,e+1);let a=pn();return this.rs.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ss(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ss{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ct.comparator(e.key,t.key)||an(e._s,t._s)}static os(e,t){return an(e._s,t._s)||ct.comparator(e.key,t.key)}}class P3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new pr(Ss.ss)}checkEmpty(e){return ye.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new GR(a,t,r,i);this.mutationQueue.push(u);for(const g of i)this.gs=this.gs.add(new Ss(g.key,a)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ye.resolve(u)}lookupMutationBatch(e,t){return ye.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ye.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ss(t,0),i=new Ss(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],u=>{const g=this.ys(u._s);a.push(g)}),ye.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pr(an);return t.forEach(i=>{const a=new Ss(i,0),u=new Ss(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,u],g=>{r=r.add(g._s)})}),ye.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ct.isDocumentKey(a)||(a=a.child(""));const u=new Ss(new ct(a),0);let g=new pr(an);return this.gs.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(g=g.add(y._s)),!0)},u),ye.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Yt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ye.forEach(t.mutations,i=>{const a=new Ss(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ss(t,0),i=this.gs.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class F3{constructor(e){this.Es=e,this.docs=new yi(ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():Mr.newInvalidDocument(t))}getEntries(e,t){let r=xa();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Mr.newInvalidDocument(i))}),ye.resolve(r)}getAllFromCollection(e,t,r){let i=xa();const a=new ct(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:g,value:{document:y}}=u.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||SR(yB(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Nt()}As(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new L3(this)}getSize(e){return ye.resolve(this.size)}}class L3 extends q2{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class B3{constructor(e){this.persistence=e,this.Rs=new Dp(t=>e_(t),aD),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ZR,this.targetCount=0,this.vs=u_.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ye.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new u_(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Dn(t),ye.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((u,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,g.targetId)),i++)}),ye.waitFor(a).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),ye.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.Ps.containsKey(t))}}class eV{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Na(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new B3(this),this.indexManager=new D3,this.remoteDocumentCache=new F3(r=>this.referenceDelegate.xs(r)),this.It=new R2(t),this.Ns=new O3(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new P3(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Qe("MemoryPersistence","Starting transaction:",e);const i=new V3(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ye.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class V3 extends bB{constructor(e){super(),this.currentSequenceNumber=e}}class yS{constructor(e){this.persistence=e,this.Fs=new ZR,this.$s=null}static Bs(e){return new yS(e)}get Ls(){if(this.$s)return this.$s;throw Nt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Ls,r=>{const i=ct.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Zt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ye.or([()=>ye.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class U3{constructor(e){this.It=e}$(e,t,r,i){const a=new JT("createOrUpgrade",t);var g;r<1&&i>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T2,{unique:!0}),g.createObjectStore("documentMutations"),tV(e),function(g){g.createObjectStore("remoteDocuments")}(e));let u=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),tV(e)),u=u.next(()=>function(g){const y=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(g,y){return y.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T2,{unique:!0});const T=y.store("mutations"),N=b.map(k=>T.put(k));return ye.waitFor(N)})}(e,a))),u=u.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(a))),r<6&&i>=6&&(u=u.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(a))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(a))),r<11&&i>=11&&(u=u.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(g){const y=g.createObjectStore("documentOverlays",{keyPath:d3});y.createIndex("collectionPathOverlayIndex",h3,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",f3,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(g){const y=g.createObjectStore("remoteDocumentsV14",{keyPath:XW});y.createIndex("documentKeyIndex",e3),y.createIndex("collectionGroupIndex",t3)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:a3}).createIndex("sequenceNumberIndex",l3,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:u3}).createIndex("documentKeyIndex",c3,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=gS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ye.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(g=>ye.forEach(g,y=>{Yt(y.userId===a.userId);const b=s_(this.It,y);return $2(e,a.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((u,g)=>{const y=new Vn(u),b=[0,Qo(y)];a.push(t.get(b).next(T=>T?ye.resolve():t.put({targetId:0,path:Qo(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ye.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:o3});const r=t.store("collectionParents"),i=new YR,a=u=>{if(i.add(u)){const g=u.lastSegment(),y=u.popLast();return r.put({collectionId:g,parent:Qo(y)})}};return t.store("remoteDocuments").Z({X:!0},(u,g)=>{const y=new Vn(u);return a(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,g,y],b)=>{const T=_d(g);return a(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=vD(i),u=O2(this.It,a);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,u)=>{const g=t.store("remoteDocumentsV14"),y=(b=u,b.document?new ct(Vn.fromString(b.document.name).popFirst(5)):b.noDocument?ct.fromSegments(b.noDocument.path):b.unknownDocument?ct.fromSegments(b.unknownDocument.path):Nt()).path.toArray();var b;const T={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(g.put(T))}).next(()=>ye.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Y2(this.It),a=new eV(yS.Bs,this.It.re);return r.W().next(u=>{const g=new Map;return u.forEach(y=>{var b;let T=null!==(b=g.get(y.userId))&&void 0!==b?b:pn();s_(this.It,y).keys().forEach(N=>T=T.add(N)),g.set(y.userId,T)}),ye.forEach(g,(y,b)=>{const T=new Is(b),N=hS.oe(this.It,T),k=a.getIndexManager(T),U=mS.oe(T,this.It,k,a.referenceDelegate);return new X2(i,U,N,k).recalculateAndSaveOverlaysForDocumentKeys(new $R(t,Na.at),y).next()})})}}function tV(n){n.createObjectStore("targetDocuments",{keyPath:r3}).createIndex("documentTargetsIndex",s3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",n3,{unique:!0}),n.createObjectStore("targetGlobal")}const QR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class JR{constructor(e,t,r,i,a,u,g,y,b,T,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=u,this.document=g,this.Js=b,this.Ys=T,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=k=>Promise.resolve(),!JR.C())throw new $e(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N3(this,i),this.ii=t+"main",this.It=new R2(y),this.ri=new ac(this.ii,this.Xs,new U3(this.It)),this.Cs=new C3(this.referenceDelegate,this.It),this.remoteDocumentCache=Y2(this.It),this.Ns=new _3,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&Ai("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $e(be.FAILED_PRECONDITION,QR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Na(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,se.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,se.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,se.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(_p(e))return Qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return CD(e).get("owner").next(t=>ye.resolve(this.mi(t)))}gi(e){return vS(e).delete(this.clientId)}yi(){var e=this;return(0,se.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ts(r,"clientMetadata");return i.W().next(a=>{const u=e.Ii(a,18e5),g=a.filter(y=>-1===u.indexOf(y));return ye.forEach(g,y=>i.delete(y.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ye.resolve(!0):CD(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new $e(be.FAILED_PRECONDITION,QR);return!1}}return!(!this.networkEnabled||!this.inForeground)||vS(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,g=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Qe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,se.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new $R(t,Na.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>vS(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return mS.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I3(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return hS.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Xs)?g3:14===u?x2:13===u?N2:12===u?p3:11===u?A2:void Nt();var u;let g;return this.ri.runTransaction(e,i,a,y=>(g=new $R(y,this.Ss?this.Ss.next():Na.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw Ai(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new $e(be.FAILED_PRECONDITION,vB);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(y=>(g.raiseOnCommittedEvent(),y))}Vi(e){return CD(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $e(be.FAILED_PRECONDITION,QR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return CD(e).put("owner",t)}static C(){return ac.C()}_i(e){const t=CD(e);return t.get("owner").next(r=>this.mi(r)?(Qe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ye.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ai(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ee.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ai("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ai("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function CD(n){return Ts(n,"owner")}function vS(n){return Ts(n,"clientMetadata")}function XR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=pn(),i=pn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new eM(e,t.fromCache,r,i)}}class nV{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(HB(t))return ye.resolve(null);let r=Zo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=iS(t,null,"F"),r=Zo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=pn(...a);return this.Ni.getDocuments(e,u).next(g=>this.indexManager.getMinOffset(e,r).next(y=>{const b=this.Fi(t,g);return this.$i(t,b,u,y.readTime)?this.ki(e,iS(t,null,"F")):this.Bi(e,b,t,y)}))})))}Oi(e,t,r,i){return HB(t)||i.isEqual(Zt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const u=this.Fi(t,a);return this.$i(t,u,r,i)?this.Mi(e,t):(IR()<=wo.in.DEBUG&&Qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),FR(t)),this.Bi(e,u,t,_B(i,-1)))})}Fi(e,t){let r=new pr(GB(e));return t.forEach((i,a)=>{LR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return IR()<=wo.in.DEBUG&&Qe("QueryEngine","Using full collection scan to execute query:",FR(t)),this.Ni.getDocumentsMatchingQuery(e,t,_l.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class H3{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new yi(an),this.qi=new Dp(a=>e_(a),aD),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X2(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function rV(n,e,t,r){return new H3(n,e,t,r)}function iV(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,se.Z)(function*(n,e){const t=ft(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],g=[];let y=pn();for(const b of i){u.push(b.batchId);for(const T of b.mutations)y=y.add(T.key)}for(const b of a){g.push(b.batchId);for(const T of b.mutations)y=y.add(T.key)}return t.localDocuments.getDocuments(r,y).next(b=>({ji:b,removedBatchIds:u,addedBatchIds:g}))})})}),tM.apply(this,arguments)}function j3(n,e){const t=ft(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,g,y,b){const T=y.batch,N=T.keys();let k=ye.resolve();return N.forEach(U=>{k=k.next(()=>b.getEntry(g,U)).next(q=>{const ae=y.docVersions.get(U);Yt(null!==ae),q.version.compareTo(ae)<0&&(T.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),b.addEntry(q)))})}),k.next(()=>u.mutationQueue.removeMutationBatch(g,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let g=pn();for(let y=0;y<u.mutationResults.length;++y)u.mutationResults[y].transformResults.length>0&&(g=g.add(u.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function sV(n){const e=ft(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $3(n,e){const t=ft(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const g=[];e.targetChanges.forEach((T,N)=>{const k=i.get(N);if(!k)return;g.push(t.Cs.removeMatchingKeys(a,T.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(a,T.addedDocuments,N)));let U=k.withSequenceNumber(a.currentSequenceNumber);var q,ae,me;e.targetMismatches.has(N)?U=U.withResumeToken(ls.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(N,U),ae=U,me=T,(0===(q=k).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(a,U))});let y=xa(),b=pn();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),g.push(oV(a,u,e.documentUpdates).next(T=>{y=T.Wi,b=T.zi})),!r.isEqual(Zt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(a).next(N=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));g.push(T)}return ye.waitFor(g).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,b)).next(()=>y)}).then(a=>(t.Ui=i,a))}function oV(n,e,t){let r=pn(),i=pn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=xa();return t.forEach((g,y)=>{const b=a.get(g);y.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(g)),y.isNoDocument()&&y.version.isEqual(Zt.min())?(e.removeEntry(g,y.readTime),u=u.insert(g,y)):!b.isValidDocument()||y.version.compareTo(b.version)>0||0===y.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(y),u=u.insert(g,y)):Qe("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",y.version)}),{Wi:u,zi:i}})}function G3(n,e){const t=ft(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function I0(n,e){const t=ft(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ye.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new Ip(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function C0(n,e,t){return nM.apply(this,arguments)}function nM(){return nM=(0,se.Z)(function*(n,e,t){const r=ft(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!_p(u))throw u;Qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),nM.apply(this,arguments)}function bS(n,e,t){const r=ft(n);let i=Zt.min(),a=pn();return r.persistence.runTransaction("Execute query","readonly",u=>function(g,y,b){const T=ft(g),N=T.qi.get(b);return void 0!==N?ye.resolve(T.Ui.get(N)):T.Cs.getTargetData(y,b)}(r,u,Zo(e)).next(g=>{if(g)return i=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,g.targetId).next(y=>{a=y})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Zt.min(),t?a:pn())).next(g=>(uV(r,$B(e),g),{documents:g,Hi:a})))}function aV(n,e){const t=ft(n),r=ft(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(u=>u?u.target:null))}function lV(n,e){const t=ft(n),r=t.Ki.get(e)||Zt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,_B(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(uV(t,e,i),i))}function uV(n,e,t){let r=n.Ki.get(e)||Zt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function rM(){return rM=(0,se.Z)(function*(n,e,t,r){const i=ft(n);let a=pn(),u=xa();for(const b of t){const T=e.Ji(b.metadata.name);b.document&&(a=a.add(T));const N=e.Yi(b);N.setReadTime(e.Xi(b.metadata.readTime)),u=u.insert(T,N)}const g=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield I0(i,(b=r,Zo(p0(Vn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>oV(b,g,u).next(T=>(g.apply(b),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.Cs.addMatchingKeys(b,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,T.Wi,T.zi)).next(()=>T.Wi)))}),rM.apply(this,arguments)}function z3(n,e){return iM.apply(this,arguments)}function iM(){return iM=(0,se.Z)(function*(n,e,t=pn()){const r=yield I0(n,Zo(KR(e.bundledQuery))),i=ft(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Cs(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(a,e);const g=r.withResumeToken(ls.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(g.targetId,g),i.Cs.updateTargetData(a,g).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),iM.apply(this,arguments)}function cV(n,e){return`firestore_clients_${n}_${e}`}function dV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sM(n,e){return`firestore_targets_${n}_${e}`}class wS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new $e(i.error.code,i.error.message))),u?new wS(e,t,i.state,a):(Ai("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TD{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new $e(r.error.code,r.error.message))),a?new TD(e,r.state,i):(Ai("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ES{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=lS();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=TB(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new ES(e,a):(Ai("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class oM{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new oM(t.clientId,t.onlineState):(Ai("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aM{constructor(){this.activeTargetIds=lS()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lM{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new yi(an),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=cV(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new aM),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,se.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(cV(e.persistenceKey,i));if(a){const u=ES.Zi(i,a);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(sM(this.persistenceKey,e));if(r){const i=TD.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Qe("SharedClientState","READ",e,t),t}setItem(e,t){Qe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Ai("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,se.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let u=Na.at;if(null!=a)try{const g=JSON.parse(a);Yt("number"==typeof g),u=g}catch(g){Ai("SharedClientState","Failed to read sequence number from WebStorage",g)}return u}(r.newValue);i!==Na.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new wS(this.currentUser,e,t,r),a=dV(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=dV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=sM(this.persistenceKey,e),a=new TD(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ES.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return wS.Zi(new Is(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return TD.Zi(i,t)}yr(e){return oM.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),u=[],g=[];return a.forEach(y=>{i.has(y)||u.push(y)}),i.forEach(y=>{a.has(y)||g.push(y)}),this.syncEngine.Br(u,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=lS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class hV{constructor(){this.Lr=new aM,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new aM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class K3{qr(e){}shutdown(){}}class fV{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const q3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Y3{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Z3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const u=this.ho(e,t);Qe("RestConnection","Sending: ",u,r);const g={};return this.lo(g,i,a),this.fo(e,u,g,r).then(y=>(Qe("RestConnection","Received: ",y),y),y=>{throw Km("RestConnection",`${e} failed with error: `,y,"url: ",u,"request:",r),y})}_o(e,t,r,i,a,u){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+u0,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${q3[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,u)=>{const g=new KG;g.setWithCredentials(!0),g.listenOnce(GG.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case DR.NO_ERROR:const b=g.getResponseJson();Qe("Connection","XHR received:",JSON.stringify(b)),a(b);break;case DR.TIMEOUT:Qe("Connection",'RPC "'+e+'" timed out'),u(new $e(be.DEADLINE_EXCEEDED,"Request time out"));break;case DR.HTTP_ERROR:const T=g.getStatus();if(Qe("Connection",'RPC "'+e+'" failed with status:',T,"response text:",g.getResponseText()),T>0){const N=g.getResponseJson().error;if(N&&N.status&&N.message){const k=function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(q)>=0?q:be.UNKNOWN}(N.status);u(new $e(k,N.message))}else u(new $e(be.UNKNOWN,"Server responded with status "+g.getStatus()))}else u(new $e(be.UNAVAILABLE,"Connection failed."));break;default:Nt()}}finally{Qe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);g.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=jG(),u=$G(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new zG({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const y=i.join("");Qe("Connection","Creating WebChannel: "+y,g);const b=a.createWebChannel(y,g);let T=!1,N=!1;const k=new Y3({Hr:q=>{N?Qe("Connection","Not sending because WebChannel is closed:",q):(T||(Qe("Connection","Opening WebChannel transport."),b.open(),T=!0),Qe("Connection","WebChannel sending:",q),b.send(q))},Jr:()=>b.close()}),U=(q,ae,me)=>{q.listen(ae,nt=>{try{me(nt)}catch(ot){setTimeout(()=>{throw ot},0)}})};return U(b,YT.EventType.OPEN,()=>{N||Qe("Connection","WebChannel transport opened.")}),U(b,YT.EventType.CLOSE,()=>{N||(N=!0,Qe("Connection","WebChannel transport closed"),k.io())}),U(b,YT.EventType.ERROR,q=>{N||(N=!0,Km("Connection","WebChannel transport errored:",q),k.io(new $e(be.UNAVAILABLE,"The operation could not be completed")))}),U(b,YT.EventType.MESSAGE,q=>{var ae;if(!N){const me=q.data[0];Yt(!!me);const nt=me,ot=nt.error||(null===(ae=nt[0])||void 0===ae?void 0:ae.error);if(ot){Qe("Connection","WebChannel received error:",ot);const dt=ot.status;let rt=function(pt){const sn=$i[pt];if(void 0!==sn)return o2(sn)}(dt),it=ot.message;void 0===rt&&(rt=be.INTERNAL,it="Unknown error status: "+dt+" with message "+ot.message),N=!0,k.io(new $e(rt,it)),b.close()}else Qe("Connection","WebChannel received:",me),k.ro(me)}}),U(u,WG.STAT_EVENT,q=>{q.stat===dB.PROXY?Qe("Connection","Detected buffering proxy"):q.stat===dB.NOPROXY&&Qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.so()},0),k}}function pV(){return typeof window<"u"?window:null}function DS(){return typeof document<"u"?document:null}function SD(n){return new UW(n,!0)}class uM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class gV{constructor(e,t,r,i,a,u,g,y){this.Hs=e,this.vo=r,this.Vo=i,this.So=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new uM(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,se.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,se.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,se.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(Ai(t.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new $e(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.No.Ro((0,se.Z)(function*(){e.state=0,e.start()}))}jo(e){return Qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q3 extends gV{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function $W(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:Nt(),i=e.targetChange.targetIds||[],a=function(y,b){return y.gt?(Yt(void 0===b||"string"==typeof b),ls.fromBase64String(b||"")):(Yt(void 0===b||b instanceof Uint8Array),ls.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,g=u&&function(y){const b=void 0===y.code?be.UNKNOWN:o2(y.code);return new $e(b,y.message||"")}(u);t=new d2(r,i,a,g||null)}else if("documentChange"in e){const r=e.documentChange,i=md(n,r.document.name),a=Cs(r.document.updateTime),u=new oo({mapValue:{fields:r.document.fields}}),g=Mr.newFoundDocument(i,a,u);t=new uS(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,i=md(n,r.document),a=r.readTime?Cs(r.readTime):Zt.min(),u=Mr.newNoDocument(i,a);t=new uS([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=md(n,r.document);t=new uS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Nt();{const r=e.filter,a=new MW(r.count||0);t=new c2(r.targetId,a)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Zt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Zt.min():a.readTime?Cs(a.readTime):Zt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=_D(this.It),t.addTarget=function(i,a){let u;const g=a.target;return u=nS(g)?{documents:w2(i,g)}:{query:jR(i,g)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=g2(i,a.resumeToken):a.snapshotVersion.compareTo(Zt.min())>0&&(u.readTime=gD(i,a.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function WW(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=_D(this.It),t.removeTarget=e,this.Lo(t)}}class J3 extends gV{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function GW(n,e){return n&&n.length>0?(Yt(void 0!==e),n.map(t=>function(r,i){let a=Cs(r.updateTime?r.updateTime:i);return a.isEqual(Zt.min())&&(a=Cs(i)),new NW(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Cs(e.commitTime);return this.listener.tu(r,t)}return Yt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=_D(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yD(this.It,r))};this.Lo(t)}}class X3 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=i,this.su=!1}iu(){if(this.su)throw new $e(be.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $e(be.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.So._o(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $e(be.UNKNOWN,a.toString())})}terminate(){this.su=!0}}class t8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ai(t),this.uu=!1):Qe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class n8{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.qr(g=>{r.enqueueAndForget((0,se.Z)(function*(){var y;Xh(u)&&(Qe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,se.Z)(function*(b){const T=ft(b);T.wu.add(4),yield T0(T),T.yu.set("Unknown"),T.wu.delete(4),yield AD(T)}),function(b){return y.apply(this,arguments)})(u))}))}),this.yu=new t8(r,i)}}function AD(n){return dM.apply(this,arguments)}function dM(){return dM=(0,se.Z)(function*(n){if(Xh(n))for(const e of n.mu)yield e(!0)}),dM.apply(this,arguments)}function T0(n){return hM.apply(this,arguments)}function hM(){return hM=(0,se.Z)(function*(n){for(const e of n.mu)yield e(!1)}),hM.apply(this,arguments)}function IS(n,e){const t=ft(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),gM(t)?pM(t):A0(t).Oo()&&fM(t,e))}function ND(n,e){const t=ft(n),r=A0(t);t._u.delete(e),r.Oo()&&mV(t,e),0===t._u.size&&(r.Oo()?r.$o():Xh(t)&&t.yu.set("Unknown"))}function fM(n,e){n.pu.Mt(e.targetId),A0(n).Ho(e)}function mV(n,e){n.pu.Mt(e),A0(n).Jo(e)}function pM(n){n.pu=new LW({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),A0(n).start(),n.yu.cu()}function gM(n){return Xh(n)&&!A0(n).ko()&&n._u.size>0}function Xh(n){return 0===ft(n).wu.size}function _V(n){n.pu=void 0}function r8(n){return mM.apply(this,arguments)}function mM(){return mM=(0,se.Z)(function*(n){n._u.forEach((e,t)=>{fM(n,e)})}),mM.apply(this,arguments)}function i8(n,e){return _M.apply(this,arguments)}function _M(){return _M=(0,se.Z)(function*(n,e){_V(n),gM(n)?(n.yu.lu(e),pM(n)):n.yu.set("Unknown")}),_M.apply(this,arguments)}function s8(n,e,t){return yM.apply(this,arguments)}function yM(){return yM=(0,se.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof d2&&2===e.state&&e.cause)try{yield(r=(0,se.Z)(function*(i,a){const u=a.cause;for(const g of a.targetIds)i._u.has(g)&&(yield i.remoteSyncer.rejectListen(g,u),i._u.delete(g),i.pu.removeTarget(g))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield CS(n,r)}else if(e instanceof uS?n.pu.Gt(e):e instanceof c2?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Zt.min()))try{const r=yield sV(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.pu.te(a);return u.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=i._u.get(y);b&&i._u.set(y,b.withResumeToken(g.resumeToken,a))}}),u.targetMismatches.forEach(g=>{const y=i._u.get(g);if(!y)return;i._u.set(g,y.withResumeToken(ls.EMPTY_BYTE_STRING,y.snapshotVersion)),mV(i,g);const b=new Ip(y.target,g,1,y.sequenceNumber);fM(i,b)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Qe("RemoteStore","Failed to raise snapshot:",r),yield CS(n,r)}var r}),yM.apply(this,arguments)}function CS(n,e,t){return vM.apply(this,arguments)}function vM(){return vM=(0,se.Z)(function*(n,e,t){if(!_p(e))throw e;n.wu.add(1),yield T0(n),n.yu.set("Offline"),t||(t=()=>sV(n.localStore)),n.asyncQueue.enqueueRetryable((0,se.Z)(function*(){Qe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield AD(n)}))}),vM.apply(this,arguments)}function yV(n,e){return e().catch(t=>CS(n,t,e))}function S0(n){return bM.apply(this,arguments)}function bM(){return bM=(0,se.Z)(function*(n){const e=ft(n),t=Sp(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;o8(e);)try{const i=yield G3(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,a8(e,i)}catch(i){yield CS(e,i)}vV(e)&&bV(e)}),bM.apply(this,arguments)}function o8(n){return Xh(n)&&n.du.length<10}function a8(n,e){n.du.push(e);const t=Sp(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function vV(n){return Xh(n)&&!Sp(n).ko()&&n.du.length>0}function bV(n){Sp(n).start()}function l8(n){return wM.apply(this,arguments)}function wM(){return wM=(0,se.Z)(function*(n){Sp(n).nu()}),wM.apply(this,arguments)}function u8(n){return EM.apply(this,arguments)}function EM(){return EM=(0,se.Z)(function*(n){const e=Sp(n);for(const t of n.du)e.Zo(t.mutations)}),EM.apply(this,arguments)}function c8(n,e,t){return DM.apply(this,arguments)}function DM(){return DM=(0,se.Z)(function*(n,e,t){const r=n.du.shift(),i=WR.from(r,e,t);yield yV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield S0(n)}),DM.apply(this,arguments)}function d8(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,se.Z)(function*(n,e){var t;e&&Sp(n).Xo&&(yield(t=(0,se.Z)(function*(r,i){if(s2(a=i.code)&&a!==be.ABORTED){const u=r.du.shift();Sp(r).Fo(),yield yV(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield S0(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),vV(n)&&bV(n)}),IM.apply(this,arguments)}function wV(n,e){return CM.apply(this,arguments)}function CM(){return CM=(0,se.Z)(function*(n,e){const t=ft(n);t.asyncQueue.verifyOperationInProgress(),Qe("RemoteStore","RemoteStore received new credentials");const r=Xh(t);t.wu.add(3),yield T0(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield AD(t)}),CM.apply(this,arguments)}function TM(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,se.Z)(function*(n,e){const t=ft(n);e?(t.wu.delete(2),yield AD(t)):e||(t.wu.add(2),yield T0(t),t.yu.set("Unknown"))}),SM.apply(this,arguments)}function A0(n){return n.Iu||(n.Iu=function(e,t,r){const i=ft(e);return i.iu(),new Q3(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:r8.bind(null,n),Zr:i8.bind(null,n),zo:s8.bind(null,n)}),n.mu.push(function(){var e=(0,se.Z)(function*(t){t?(n.Iu.Fo(),gM(n)?pM(n):n.yu.set("Unknown")):(yield n.Iu.stop(),_V(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Sp(n){return n.Tu||(n.Tu=function(e,t,r){const i=ft(e);return i.iu(),new J3(t,i.So,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:l8.bind(null,n),Zr:d8.bind(null,n),eu:u8.bind(null,n),tu:c8.bind(null,n)}),n.mu.push(function(){var e=(0,se.Z)(function*(t){t?(n.Tu.Fo(),yield S0(n)):(yield n.Tu.stop(),n.du.length>0&&(Qe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class AM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,g=new AM(e,t,u,i,a);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $e(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function N0(n,e){if(Ai("AsyncQueue",`${e}: ${n}`),_p(n))return new $e(be.UNAVAILABLE,`${e}: ${n}`);throw n}class x0{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ct.comparator(t.key,r.key):(t,r)=>ct.comparator(t.key,r.key),this.keyedMap=dD(),this.sortedSet=new yi(this.comparator)}static emptySet(e){return new x0(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof x0)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new x0;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class EV{constructor(){this.Eu=new yi(ct.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class R0{constructor(e,t,r,i,a,u,g,y,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach(g=>{u.push({type:0,doc:g})}),new R0(e,t,x0.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lD(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class h8{constructor(){this.Ru=void 0,this.listeners=[]}}class f8{constructor(){this.queries=new Dp(e=>jB(e),lD),this.onlineState="Unknown",this.bu=new Set}}function NM(n,e){return xM.apply(this,arguments)}function xM(){return xM=(0,se.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new h8),i)try{a.Ru=yield t.onListen(r)}catch(u){const g=N0(u,`Initialization of query '${FR(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.vu(a.Ru)&&OM(t)}),xM.apply(this,arguments)}function RM(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,se.Z)(function*(n,e){const t=ft(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),MM.apply(this,arguments)}function p8(n,e){const t=ft(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const g of u.listeners)g.vu(i)&&(r=!0);u.Ru=i}}r&&OM(t)}function g8(n,e,t){const r=ft(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function OM(n){n.bu.forEach(e=>{e.next()})}class kM{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new R0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=R0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class m8{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class DV{constructor(e){this.It=e}Ji(e){return md(this.It,e)}Yi(e){return e.metadata.exists?b2(this.It,e.document,!1):Mr.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Cs(e)}}class _8{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=IV(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Vn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new DV(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const g=(t.get(u)||pn()).add(a);t.set(u,g)}}return t}complete(){var e=this;return(0,se.Z)(function*(){const t=yield function W3(n,e,t,r){return rM.apply(this,arguments)}(e.localStore,new DV(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield z3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function IV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class CV{constructor(e){this.key=e}}class TV{constructor(e){this.key=e}}class SV{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=pn(),this.mutatedKeys=pn(),this.Gu=GB(e),this.Qu=new x0(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new EV,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,g=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,N)=>{const k=i.get(T),U=LR(this.query,N)?N:null,q=!!k&&this.mutatedKeys.has(k.key),ae=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let me=!1;k&&U?k.data.isEqual(U.data)?q!==ae&&(r.track({type:3,doc:U}),me=!0):this.Hu(k,U)||(r.track({type:2,doc:U}),me=!0,(y&&this.Gu(U,y)>0||b&&this.Gu(U,b)<0)&&(g=!0)):!k&&U?(r.track({type:0,doc:U}),me=!0):k&&!U&&(r.track({type:1,doc:k}),me=!0,(y||b)&&(g=!0)),me&&(U?(u=u.add(U),a=ae?a.add(T):a.delete(T)):(u=u.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const T="F"===this.query.limitType?u.last():u.first();u=u.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Qu:u,zu:r,$i:g,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((b,T)=>function(N,k){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt()}};return U(N)-U(k)}(b.type,T.type)||this.Gu(b.doc,T.doc)),this.Ju(r);const u=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,y=g!==this.qu;return this.qu=g,0!==a.length||y?{snapshot:new R0(this.query,e.Qu,i,a,e.mutatedKeys,0===g,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new EV,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=pn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new TV(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new CV(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=pn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return R0.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class y8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class v8{constructor(e){this.key=e,this.nc=!1}}class b8{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Dp(g=>jB(g),lD),this.rc=new Map,this.oc=new Set,this.uc=new yi(ct.comparator),this.cc=new Map,this.ac=new ZR,this.hc={},this.lc=new Map,this.fc=u_.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function w8(n,e){return PM.apply(this,arguments)}function PM(){return PM=(0,se.Z)(function*(n,e){const t=iO(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const u=yield I0(t.localStore,Zo(e));t.isPrimaryClient&&IS(t.remoteStore,u);const g=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield FM(t,e,r,"current"===g,u.resumeToken)}return i}),PM.apply(this,arguments)}function FM(n,e,t,r,i){return LM.apply(this,arguments)}function LM(){return LM=(0,se.Z)(function*(n,e,t,r,i){n._c=(N,k,U)=>{return(q=(0,se.Z)(function*(ae,me,nt,ot){let dt=me.view.Wu(nt);dt.$i&&(dt=yield bS(ae.localStore,me.query,!1).then(({documents:pt})=>me.view.Wu(pt,dt)));const rt=ot&&ot.targetChanges.get(me.targetId),it=me.view.applyChanges(dt,ae.isPrimaryClient,rt);return KM(ae,me.targetId,it.Xu),it.snapshot}),function(ae,me,nt,ot){return q.apply(this,arguments)})(n,N,k,U);var q};const a=yield bS(n.localStore,e,!0),u=new SV(e,a.Hi),g=u.Wu(a.documents),y=pD.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=u.applyChanges(g,n.isPrimaryClient,y);KM(n,t,b.Xu);const T=new y8(e,t,u);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),LM.apply(this,arguments)}function E8(n,e){return BM.apply(this,arguments)}function BM(){return BM=(0,se.Z)(function*(n,e){const t=ft(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!lD(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield C0(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ND(t.remoteStore,r.targetId),M0(t,r.targetId)}).catch(mp))):(M0(t,r.targetId),yield C0(t.localStore,r.targetId,!0))}),BM.apply(this,arguments)}function VM(){return VM=(0,se.Z)(function*(n,e,t){const r=sO(n);try{const i=yield function(a,u){const g=ft(a),y=ei.now(),b=u.reduce((k,U)=>k.add(U.key),pn());let T,N;return g.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=xa(),q=pn();return g.Gi.getEntries(k,b).next(ae=>{U=ae,U.forEach((me,nt)=>{nt.isValidDocument()||(q=q.add(me))})}).next(()=>g.localDocuments.getOverlayedDocuments(k,U)).next(ae=>{T=ae;const me=[];for(const nt of u){const ot=RW(nt,T.get(nt.key).overlayedDocument);null!=ot&&me.push(new Jh(nt.key,ot,OB(ot.value.mapValue),ti.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,me,u)}).next(ae=>{N=ae;const me=ae.applyToLocalDocumentSet(T,q);return g.documentOverlayCache.saveOverlays(k,ae.batchId,me)})}).then(()=>({batchId:N.batchId,changes:l2(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,g){let y=a.hc[a.currentUser.toKey()];y||(y=new yi(an)),y=y.insert(u,g),a.hc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield ef(r,i.changes),yield S0(r.remoteStore)}catch(i){const a=N0(i,"Failed to persist write");t.reject(a)}}),VM.apply(this,arguments)}function AV(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,se.Z)(function*(n,e){const t=ft(n);try{const r=yield $3(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.cc.get(a);u&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Yt(u.nc):i.removedDocuments.size>0&&(Yt(u.nc),u.nc=!1))}),yield ef(t,r,e)}catch(r){yield mp(r)}}),UM.apply(this,arguments)}function NV(n,e,t){const r=ft(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,u)=>{const g=u.view.Pu(e);g.snapshot&&i.push(g.snapshot)}),function(a,u){const g=ft(a);g.onlineState=u;let y=!1;g.queries.forEach((b,T)=>{for(const N of T.listeners)N.Pu(u)&&(y=!0)}),y&&OM(g)}(r.eventManager,e),i.length&&r.sc.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function I8(n,e,t){return HM.apply(this,arguments)}function HM(){return HM=(0,se.Z)(function*(n,e,t){const r=ft(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let u=new yi(ct.comparator);u=u.insert(a,Mr.newNoDocument(a,Zt.min()));const g=pn().add(a),y=new fD(Zt.min(),new Map,new pr(an),u,g);yield AV(r,y),r.uc=r.uc.remove(a),r.cc.delete(e),qM(r)}else yield C0(r.localStore,e,!1).then(()=>M0(r,e,t)).catch(mp)}),HM.apply(this,arguments)}function C8(n,e){return jM.apply(this,arguments)}function jM(){return jM=(0,se.Z)(function*(n,e){const t=ft(n),r=e.batch.batchId;try{const i=yield j3(t.localStore,e);zM(t,r,null),WM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ef(t,i)}catch(i){yield mp(i)}}),jM.apply(this,arguments)}function T8(n,e,t){return $M.apply(this,arguments)}function $M(){return $M=(0,se.Z)(function*(n,e,t){const r=ft(n);try{const i=yield function(a,u){const g=ft(a);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return g.mutationQueue.lookupMutationBatch(y,u).next(T=>(Yt(null!==T),b=T.keys(),g.mutationQueue.removeMutationBatch(y,T))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,u)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b)).next(()=>g.localDocuments.getDocuments(y,b))})}(r.localStore,e);zM(r,e,t),WM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ef(r,i)}catch(i){yield mp(i)}}),$M.apply(this,arguments)}function GM(){return GM=(0,se.Z)(function*(n,e){const t=ft(n);Xh(t.remoteStore)||Qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=ft(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>u.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=N0(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),GM.apply(this,arguments)}function WM(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function zM(n,e,t){const r=ft(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function M0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||xV(n,r)})}function xV(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(ND(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),qM(n))}function KM(n,e,t){for(const r of t)r instanceof CV?(n.ac.addReference(r.key,e),A8(n,r)):r instanceof TV?(Qe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||xV(n,r.key)):Nt()}function A8(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Qe("SyncEngine","New document in limbo: "+t),n.oc.add(r),qM(n))}function qM(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ct(Vn.fromString(e)),r=n.fc.next();n.cc.set(r,new v8(t)),n.uc=n.uc.insert(t,r),IS(n.remoteStore,new Ip(Zo(p0(t.path)),r,2,Na.at))}}function ef(n,e,t){return YM.apply(this,arguments)}function YM(){return YM=(0,se.Z)(function*(n,e,t){const r=ft(n),i=[],a=[],u=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,y)=>{u.push(r._c(y,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const T=eM.Ci(y.targetId,b);a.push(T)}}))}),yield Promise.all(u),r.sc.zo(i),yield(g=(0,se.Z)(function*(y,b){const T=ft(y);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ye.forEach(b,k=>ye.forEach(k.Si,U=>T.persistence.referenceDelegate.addReference(N,k.targetId,U)).next(()=>ye.forEach(k.Di,U=>T.persistence.referenceDelegate.removeReference(N,k.targetId,U)))))}catch(N){if(!_p(N))throw N;Qe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const k=N.targetId;if(!N.fromCache){const U=T.Ui.get(k),ae=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ui=T.Ui.insert(k,ae)}}}),function(y,b){return g.apply(this,arguments)})(r.localStore,a))}),YM.apply(this,arguments)}function N8(n,e){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,se.Z)(function*(n,e){const t=ft(n);if(!t.currentUser.isEqual(e)){Qe("SyncEngine","User change. New user:",e.toKey());const r=yield iV(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(g=>{g.reject(new $e(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ef(t,r.ji)}var i}),ZM.apply(this,arguments)}function x8(n,e){const t=ft(n),r=t.cc.get(e);if(r&&r.nc)return pn().add(r.key);{let i=pn();const a=t.rc.get(e);if(!a)return i;for(const u of a){const g=t.ic.get(u);i=i.unionWith(g.view.ju)}return i}}function R8(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,se.Z)(function*(n,e){const t=ft(n),r=yield bS(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&KM(t,e.targetId,i.Xu),i}),QM.apply(this,arguments)}function M8(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,se.Z)(function*(n,e){const t=ft(n);return lV(t.localStore,e).then(r=>ef(t,r))}),JM.apply(this,arguments)}function O8(n,e,t,r){return XM.apply(this,arguments)}function XM(){return XM=(0,se.Z)(function*(n,e,t,r){const i=ft(n),a=yield function(u,g){const y=ft(u),b=ft(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Tn(T,g).next(N=>N?y.localDocuments.getDocuments(T,N):ye.resolve(null)))}(i.localStore,e);var g;null!==a?("pending"===t?yield S0(i.remoteStore):"acknowledged"===t||"rejected"===t?(zM(i,e,r||null),WM(i,e),g=e,ft(ft(i.localStore).mutationQueue).An(g)):Nt(),yield ef(i,a)):Qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),XM.apply(this,arguments)}function eO(){return eO=(0,se.Z)(function*(n,e){const t=ft(n);if(iO(t),sO(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield RV(t,r.toArray());t.dc=!0,yield TM(t.remoteStore,!0);for(const a of i)IS(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(M0(t,u),C0(t.localStore,u,!0))),ND(t.remoteStore,u)}),yield i,yield RV(t,r),function(a){const u=ft(a);u.cc.forEach((g,y)=>{ND(u.remoteStore,y)}),u.ac.fs(),u.cc=new Map,u.uc=new yi(ct.comparator)}(t),t.dc=!1,yield TM(t.remoteStore,!1)}}),eO.apply(this,arguments)}function RV(n,e,t){return tO.apply(this,arguments)}function tO(){return tO=(0,se.Z)(function*(n,e,t){const r=ft(n),i=[],a=[];for(const u of e){let g;const y=r.rc.get(u);if(y&&0!==y.length){g=yield I0(r.localStore,Zo(y[0]));for(const b of y){const T=r.ic.get(b),N=yield R8(r,T);N.snapshot&&a.push(N.snapshot)}}else{const b=yield aV(r.localStore,u);g=yield I0(r.localStore,b),yield FM(r,MV(b),u,!1,g.resumeToken)}i.push(g)}return r.sc.zo(a),i}),tO.apply(this,arguments)}function MV(n){return UB(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function P8(n){const e=ft(n);return ft(ft(e.localStore).persistence).vi()}function F8(n,e,t,r){return nO.apply(this,arguments)}function nO(){return nO=(0,se.Z)(function*(n,e,t,r){const i=ft(n);if(i.dc)return void Qe("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield lV(i.localStore,$B(a[0])),g=fD.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ls.EMPTY_BYTE_STRING);yield ef(i,u,g);break}case"rejected":yield C0(i.localStore,e,!0),M0(i,e,r);break;default:Nt()}}),nO.apply(this,arguments)}function L8(n,e,t){return rO.apply(this,arguments)}function rO(){return rO=(0,se.Z)(function*(n,e,t){const r=iO(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Qe("SyncEngine","Adding an already active target "+i);continue}const a=yield aV(r.localStore,i),u=yield I0(r.localStore,a);yield FM(r,MV(a),u.targetId,!1,u.resumeToken),IS(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield C0(r.localStore,i,!1).then(()=>{ND(r.remoteStore,i),M0(r,i)}).catch(mp))}}),rO.apply(this,arguments)}function iO(n){const e=ft(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I8.bind(null,e),e.sc.zo=p8.bind(null,e.eventManager),e.sc.wc=g8.bind(null,e.eventManager),e}function sO(n){const e=ft(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T8.bind(null,e),e}class OV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,se.Z)(function*(){t.It=SD(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return rV(this.persistence,new nV,e.initialUser,this.It)}yc(e){return new eV(yS.Bs,this.It)}gc(e){return new hV}terminate(){var e=this;return(0,se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kV extends OV{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,se.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield sO(r.Ac.syncEngine),yield S0(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return rV(this.persistence,new nV,e.initialUser,this.It)}Tc(e,t){return new S3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new uW(t,this.persistence);return new lW(e.asyncQueue,r)}yc(e){const t=XR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ra.withCacheSize(this.cacheSizeBytes):Ra.DEFAULT;return new JR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pV(),DS(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hV}}class V8 extends kV{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,se.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof lM&&(r.sharedClientState.syncEngine={Fr:O8.bind(null,i),$r:F8.bind(null,i),Br:L8.bind(null,i),vi:P8.bind(null,i),Mr:M8.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,se.Z)(function*(u){yield function k8(n,e){return eO.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}gc(e){const t=pV();if(!lM.C(t))throw new $e(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oO{initialize(e,t){var r=this;return(0,se.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>NV(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=N8.bind(null,r.syncEngine),yield TM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new f8}createDatastore(e){const t=SD(e.databaseInfo.databaseId),r=new Z3(e.databaseInfo);return new X3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=g=>NV(this.syncEngine,g,0),u=fV.C()?new fV:new K3,new n8(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,g,y,b){const T=new b8(r,i,a,u,g,y);return b&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,se.Z)(function*(t){const r=ft(t);Qe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield T0(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aO(n,e,t){if(!t)throw new $e(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PV(n,e,t,r){if(!0===e&&!0===r)throw new $e(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FV(n){if(!ct.isDocumentKey(n))throw new $e(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LV(n){if(ct.isDocumentKey(n))throw new $e(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Nt()}function An(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $e(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=TS(n);throw new $e(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function BV(n,e){if(e<=0)throw new $e(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const VV=new Map;class UV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new $e(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $e(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xD{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $e(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $e(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ZG;switch(t.type){case"gapi":return new eW(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new $e(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=VV.get(e);t&&(Qe("ComponentProvider","Removing Datastore"),VV.delete(e),t.terminate())}(this),Promise.resolve()}}function HV(n,e,t,r={}){var i;const a=(n=An(n,xD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Km("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,g;if("string"==typeof r.mockUserToken)u=r.mockUserToken,g=Is.MOCK_USER;else{u=(0,ee.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new $e(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Is(y)}n._authCredentials=new QG(new fB(u,g))}}class zr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zr(this.firestore,e,this._key)}}class Co{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Co(this.firestore,e,this._query)}}class yd extends Co{constructor(e,t,r){super(e,t,p0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zr(this.firestore,null,new ct(e))}withConverter(e){return new yd(this.firestore,e,this._path)}}function jV(n,e,...t){if(n=(0,ee.m9)(n),aO("collection","path",e),n instanceof xD){const r=Vn.fromString(e,...t);return LV(r),new yd(n,null,r)}{if(!(n instanceof zr||n instanceof yd))throw new $e(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vn.fromString(e,...t));return LV(r),new yd(n.firestore,null,r)}}function SS(n,e,...t){if(n=(0,ee.m9)(n),1===arguments.length&&(e=gB.R()),aO("doc","path",e),n instanceof xD){const r=Vn.fromString(e,...t);return FV(r),new zr(n,null,new ct(r))}{if(!(n instanceof zr||n instanceof yd))throw new $e(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vn.fromString(e,...t));return FV(r),new zr(n.firestore,n instanceof yd?n.converter:null,new ct(r))}}function $V(n,e){return n=(0,ee.m9)(n),e=(0,ee.m9)(e),(n instanceof zr||n instanceof yd)&&(e instanceof zr||e instanceof yd)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lO(n,e){return n=(0,ee.m9)(n),e=(0,ee.m9)(e),n instanceof Co&&e instanceof Co&&n.firestore===e.firestore&&lD(n._query,e._query)&&n.converter===e.converter}function GV(n,e=10240){let t=0;return{read:()=>(0,se.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class AS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class H8{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new as,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,se.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,se.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,se.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new m8(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,se.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,se.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class G8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new $e(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,se.Z)(function*(a,u){const g=ft(a),y=_D(g.It)+"/documents",b={documents:u.map(U=>mD(g.It,U))},T=yield g._o("BatchGetDocuments",y,b,u.length),N=new Map;T.forEach(U=>{const q=function jW(n,e){return"found"in e?function(t,r){Yt(!!r.found);const i=md(t,r.found.name),a=Cs(r.found.updateTime),u=new oo({mapValue:{fields:r.found.fields}});return Mr.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Yt(!!r.missing),Yt(!!r.readTime);const i=md(t,r.missing),a=Cs(r.readTime);return Mr.newNoDocument(i,a)}(n,e):Nt()}(g.It,U);N.set(q.key.toString(),q)});const k=[];return u.forEach(U=>{const q=N.get(U.toString());Yt(!!q),k.push(q)}),k}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new v0(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ct.fromPath(i);e.mutations.push(new BR(a,e.precondition(a)))}),yield(r=(0,se.Z)(function*(i,a){const u=ft(i),g=_D(u.It)+"/documents",y={writes:a.map(b=>yD(u.It,b))};yield u.ao("Commit",g,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Nt();t=Zt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $e(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zt.min())?ti.exists(!1):ti.updateTime(t):ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zt.min()))throw new $e(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ti.updateTime(t)}return ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class W8{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.No=new uM(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,se.Z)(function*(){const t=new G8(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!nD(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!s2(t)}return!1}}class z8{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Is.UNAUTHENTICATED,this.clientId=gB.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,se.Z)(function*(g){Qe("FirestoreClient","Received user=",g.uid),yield a.authCredentialListener(g),a.user=g});return function(g){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Qe("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $e(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=N0(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function WV(n,e){return uO.apply(this,arguments)}function uO(){return uO=(0,se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Qe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,se.Z)(function*(a){r.isEqual(a)||(yield iV(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),uO.apply(this,arguments)}function zV(n,e){return cO.apply(this,arguments)}function cO(){return cO=(0,se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield dO(n);Qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>wV(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>wV(e.remoteStore,a)),n.onlineComponents=e}),cO.apply(this,arguments)}function dO(n){return hO.apply(this,arguments)}function hO(){return hO=(0,se.Z)(function*(n){return n.offlineComponents||(Qe("FirestoreClient","Using default OfflineComponentProvider"),yield WV(n,new OV)),n.offlineComponents}),hO.apply(this,arguments)}function NS(n){return fO.apply(this,arguments)}function fO(){return fO=(0,se.Z)(function*(n){return n.onlineComponents||(Qe("FirestoreClient","Using default OnlineComponentProvider"),yield zV(n,new oO)),n.onlineComponents}),fO.apply(this,arguments)}function KV(n){return dO(n).then(e=>e.persistence)}function xS(n){return dO(n).then(e=>e.localStore)}function pO(n){return NS(n).then(e=>e.remoteStore)}function gO(n){return NS(n).then(e=>e.syncEngine)}function O0(n){return mO.apply(this,arguments)}function mO(){return mO=(0,se.Z)(function*(n){const e=yield NS(n),t=e.eventManager;return t.onListen=w8.bind(null,e.syncEngine),t.onUnlisten=E8.bind(null,e.syncEngine),t}),mO.apply(this,arguments)}function YV(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(i,a,u,g,y){const b=new AS({next:N=>{a.enqueueAndForget(()=>RM(i,T));const k=N.docs.has(u);!k&&N.fromCache?y.reject(new $e(be.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&N.fromCache&&g&&"server"===g.source?y.reject(new $e(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(N)},error:N=>y.reject(N)}),T=new kM(p0(u.path),b,{includeMetadataChanges:!0,ku:!0});return NM(i,T)}(yield O0(n),n.asyncQueue,e,t,r)})),r.promise}function ZV(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function(i,a,u,g,y){const b=new AS({next:N=>{a.enqueueAndForget(()=>RM(i,T)),N.fromCache&&"server"===g.source?y.reject(new $e(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),T=new kM(u,b,{includeMetadataChanges:!0,ku:!0});return NM(i,T)}(yield O0(n),n.asyncQueue,e,t,r)})),r.promise}class ez{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new uM(this,"async_queue_retry"),this.Wc=()=>{const t=DS();t&&Qe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=DS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=DS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new as;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,se.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!_p(t))throw t;Qe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Ai("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=AM.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&Nt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,se.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function _O(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class tz{constructor(){this._progressObserver={},this._taskCompletionResolver=new as,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kr extends xD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ez,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||QV(this),this._firestoreClient.terminate()}}function rz(n,e){const t="object"==typeof n?n:(0,rn.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,rn._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,ee.P0)("firestore");a&&HV(i,...a)}return i}function Ni(n){return n._firestoreClient||QV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function QV(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hW(n._databaseId,a,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var a,g;n._firestoreClient=new z8(n._authCredentials,n._appCheckCredentials,n._queue,r)}function JV(n,e,t){const r=new as;return n.asyncQueue.enqueue((0,se.Z)(function*(){try{yield WV(n,t),yield zV(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===be.FAILED_PRECONDITION||u.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;Km("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function XV(n){if(n._initialized||n._terminated)throw new $e(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vd(ls.fromBase64String(e))}catch(t){throw new $e(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vd(ls.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $e(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class d_{constructor(e){this._methodName=e}}class RS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return an(this._lat,e._lat)||an(this._long,e._long)}}const hz=/^__.*__$/;class fz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Jh(e,this.data,this.fieldMask,t,this.fieldTransforms):new y0(e,this.data,t,this.fieldTransforms)}}class eU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Jh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt()}}class MS{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new MS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return PS(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(tU(this.sa)&&hz.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class pz{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||SD(e)}da(e,t,r,i=!1){return new MS({sa:e,methodName:t,fa:r,path:_i.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function h_(n){const e=n._freezeSettings(),t=SD(n._databaseId);return new pz(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OS(n,e,t,r,i,a={}){const u=n.da(a.merge||a.mergeFields?2:0,e,t,i);wO("Data must be an object, but it was:",u,r);const g=iU(r,u);let y,b;if(a.merge)y=new yl(u.fieldMask),b=u.fieldTransforms;else if(a.mergeFields){const T=[];for(const N of a.mergeFields){const k=EO(e,N,t);if(!u.contains(k))throw new $e(be.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);oU(T,k)||T.push(k)}y=new yl(T),b=u.fieldTransforms.filter(N=>y.covers(N.field))}else y=null,b=u.fieldTransforms;return new fz(new oo(g),y,b)}class RD extends d_{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof RD}}function nU(n,e,t){return new MS({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class yO extends d_{_toFieldTransform(e){return new uD(e.path,new m0)}isEqual(e){return e instanceof yO}}class gz extends d_{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nU(this,e,!0),r=this._a.map(a=>f_(a,t)),i=new t_(r);return new uD(e.path,i)}isEqual(e){return this===e}}class mz extends d_{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nU(this,e,!0),r=this._a.map(a=>f_(a,t)),i=new n_(r);return new uD(e.path,i)}isEqual(e){return this===e}}class _z extends d_{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new _0(e.It,KB(e.It,this.wa));return new uD(e.path,t)}isEqual(e){return this===e}}function vO(n,e,t,r){const i=n.da(1,e,t);wO("Data must be an object, but it was:",i,r);const a=[],u=oo.empty();Zm(r,(y,b)=>{const T=kS(e,y,t);b=(0,ee.m9)(b);const N=i.ca(T);if(b instanceof RD)a.push(T);else{const k=f_(b,N);null!=k&&(a.push(T),u.set(T,k))}});const g=new yl(a);return new eU(u,g,i.fieldTransforms)}function bO(n,e,t,r,i,a){const u=n.da(1,e,t),g=[EO(e,r,t)],y=[i];if(a.length%2!=0)throw new $e(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)g.push(EO(e,a[k])),y.push(a[k+1]);const b=[],T=oo.empty();for(let k=g.length-1;k>=0;--k)if(!oU(b,g[k])){const U=g[k];let q=y[k];q=(0,ee.m9)(q);const ae=u.ca(U);if(q instanceof RD)b.push(U);else{const me=f_(q,ae);null!=me&&(b.push(U),T.set(U,me))}}const N=new yl(b);return new eU(T,N,u.fieldTransforms)}function rU(n,e,t,r=!1){return f_(t,n.da(r?4:3,e))}function f_(n,e){if(sU(n=(0,ee.m9)(n)))return wO("Unsupported field value:",e,n),iU(n,e);if(n instanceof d_)return function(t,r){if(!tU(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let g=f_(u,r.aa(a));null==g&&(g={nullValue:"NULL_VALUE"}),i.push(g),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ee.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return KB(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ei.fromDate(t);return{timestampValue:gD(r.It,i)}}if(t instanceof ei){const i=new ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gD(r.It,i)}}if(t instanceof RS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vd)return{bytesValue:g2(r.It,t._byteString)};if(t instanceof zr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:VR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${TS(t)}`)}(n,e)}function iU(n,e){const t={};return DB(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zm(n,(r,i)=>{const a=f_(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function sU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ei||n instanceof RS||n instanceof vd||n instanceof zr||n instanceof d_)}function wO(n,e,t){if(!sU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=TS(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function EO(n,e,t){if((e=(0,ee.m9)(e))instanceof tf)return e._internalPath;if("string"==typeof e)return kS(n,e);throw PS("Field path arguments must be of type string or ",n,!1,void 0,t)}const yz=new RegExp("[~\\*/\\[\\]]");function kS(n,e,t){if(e.search(yz)>=0)throw PS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tf(...e.split("."))._internalPath}catch{throw PS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function PS(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(a||u)&&(y+=" (found",a&&(y+=` in field ${r}`),u&&(y+=` in document ${i}`),y+=")"),new $e(be.INVALID_ARGUMENT,g+n+y)}function oU(n,e){return n.some(t=>t.isEqual(e))}class MD{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vz extends MD{data(){return super.data()}}function FS(n,e){return"string"==typeof e?kS(n,e):e instanceof tf?e._internalPath:e._delegate._internalPath}function aU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new $e(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OD{}function Ap(n,...e){for(const t of e)n=t._apply(n);return n}class bz extends OD{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=h_(e.firestore),r=function(i,a,u,g,y,b,T){let N;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new $e(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){fU(T,b);const U=[];for(const q of T)U.push(hU(g,i,q));N={arrayValue:{values:U}}}else N=hU(g,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||fU(T,b),N=rU(u,"where",T,"in"===b||"not-in"===b);const k=ao.create(y,b,N);return function(U,q){if(q.dt()){const me=kR(U);if(null!==me&&!me.isEqual(q.field))throw new $e(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${me.toString()}' and '${q.field.toString()}'`);const nt=OR(U);null!==nt&&pU(0,q.field,nt)}const ae=function(me,nt){for(const ot of me.filters)if(nt.indexOf(ot.op)>=0)return ot.op;return null}(U,function(me){switch(me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==ae)throw new $e(be.INVALID_ARGUMENT,ae===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${ae.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Co(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Qh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Ez extends OD{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new $e(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new $e(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new f0(i,a);return function(g,y){if(null===OR(g)){const b=kR(g);null!==b&&pU(0,b,y.field)}}(r,u),u}(e._query,this.ma,this.pa);return new Co(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Qh(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lU extends OD{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Co(e.firestore,e.converter,iS(e._query,this.Ia,this.Ta))}}class uU extends OD{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=dU(e,this.type,this.Ea,this.Aa);return new Co(e.firestore,e.converter,(i=t,new Qh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class cU extends OD{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=dU(e,this.type,this.Ea,this.Aa);return new Co(e.firestore,e.converter,(i=t,new Qh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function dU(n,e,t,r){if(t[0]=(0,ee.m9)(t[0]),t[0]instanceof MD)return function(i,a,u,g,y){if(!g)throw new $e(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const b=[];for(const T of g0(i))if(T.field.isKeyField())b.push(Xm(a,g.key));else{const N=g.data.field(T.field);if(xR(N))throw new $e(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const k=T.field.canonicalString();throw new $e(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}b.push(N)}return new Ep(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=h_(n.firestore);return function(a,u,g,y,b,T){const N=a.explicitOrderBy;if(b.length>N.length)throw new $e(be.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let U=0;U<b.length;U++){const q=b[U];if(N[U].field.isKeyField()){if("string"!=typeof q)throw new $e(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof q}`);if(!PR(a)&&-1!==q.indexOf("/"))throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${q}' contains a slash.`);const ae=a.path.child(Vn.fromString(q));if(!ct.isDocumentKey(ae))throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const me=new ct(ae);k.push(Xm(u,me))}else{const ae=rU(g,y,q);k.push(ae)}}return new Ep(k,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function hU(n,e,t){if("string"==typeof(t=(0,ee.m9)(t))){if(""===t)throw new $e(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PR(e)&&-1!==t.indexOf("/"))throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Vn.fromString(t));if(!ct.isDocumentKey(r))throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xm(n,new ct(r))}if(t instanceof zr)return Xm(n,t._key);throw new $e(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TS(t)}.`)}function fU(n,e){if(!Array.isArray(n)||0===n.length)throw new $e(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new $e(be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pU(n,e,t){if(!t.isEqual(e))throw new $e(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class DO{convertValue(e,t="none"){switch(Jm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nt()}}convertObject(e,t){const r={};return Zm(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new RS(vi(e.latitude),vi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=CB(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tD(e));default:return null}}convertTimestamp(e){const t=yp(e);return new ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Vn.fromString(e);Yt(I2(r));const i=new vp(r.get(1),r.get(3)),a=new ct(r.popFirst(5));return i.isEqual(t)||Ai(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function LS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xz extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new vd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}class p_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nf extends MD{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class kD extends nf{data(e={}){return super.data(e)}}class Np{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new p_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kD(this._firestore,this._userDataWriter,r.key,r,new p_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new kD(r._firestore,r._userDataWriter,u.doc.key,u.doc,new p_(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const g=new kD(r._firestore,r._userDataWriter,u.doc.key,u.doc,new p_(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==u.type&&(y=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),b=a.indexOf(u.doc.key)),{type:Rz(u.type),doc:g,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Rz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt()}}function gU(n,e){return n instanceof nf&&e instanceof nf?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Np&&e instanceof Np&&n._firestore===e._firestore&&lO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class xp extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new vd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zr(this.firestore,null,t)}}function mU(n,e,t){n=An(n,zr);const r=An(n.firestore,Kr),i=LS(n.converter,e,t);return k0(r,[OS(h_(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ti.none())])}function _U(n,e,t,...r){n=An(n,zr);const i=An(n.firestore,Kr),a=h_(i);let u;return u="string"==typeof(e=(0,ee.m9)(e))||e instanceof tf?bO(a,"updateDoc",n._key,e,t,r):vO(a,"updateDoc",n._key,e),k0(i,[u.toMutation(n._key,ti.exists(!0))])}function yU(n,...e){var t,r,i;n=(0,ee.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||_O(e[u])||(a=e[u],u++);const g={includeMetadataChanges:a.includeMetadataChanges};if(_O(e[u])){const N=e[u];e[u]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[u+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[u+2]=null===(i=N.complete)||void 0===i?void 0:i.bind(N)}let y,b,T;if(n instanceof zr)b=An(n.firestore,Kr),T=p0(n._key.path),y={next:N=>{e[u]&&e[u](IO(b,n,N))},error:e[u+1],complete:e[u+2]};else{const N=An(n,Co);b=An(N.firestore,Kr),T=N._query;const k=new xp(b);y={next:U=>{e[u]&&e[u](new Np(b,k,N,U))},error:e[u+1],complete:e[u+2]},aU(n._query)}return function(N,k,U,q){const ae=new AS(q),me=new kM(k,ae,U);return N.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return NM(yield O0(N),me)})),()=>{ae.bc(),N.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return RM(yield O0(N),me)}))}}(Ni(b),T,g,y)}function k0(n,e){return function(t,r){const i=new as;return t.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function D8(n,e,t){return VM.apply(this,arguments)}(yield gO(t),r,i)})),i.promise}(Ni(n),e)}function IO(n,e,t){const r=t.docs.get(e._key),i=new xp(n);return new nf(n,i,e._key,r,new p_(t.hasPendingWrites,t.fromCache),e.converter)}const Hz={maxAttempts:5};class vU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=h_(e)}set(e,t,r){this._verifyNotCommitted();const i=Rp(e,this._firestore),a=LS(i.converter,t,r),u=OS(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ti.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Rp(e,this._firestore);let u;return u="string"==typeof(t=(0,ee.m9)(t))||t instanceof tf?bO(this._dataReader,"WriteBatch.update",a._key,t,r,i):vO(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rp(e,this._firestore);return this._mutations=this._mutations.concat(new v0(t._key,ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rp(n,e){if((n=(0,ee.m9)(n)).firestore!==e)throw new $e(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class jz extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=h_(e)}get(e){const t=Rp(e,this._firestore),r=new xz(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Nt();const a=i[0];if(a.isFoundDocument())return new MD(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new MD(this._firestore,r,t._key,null,t.converter);throw Nt()})}set(e,t,r){const i=Rp(e,this._firestore),a=LS(i.converter,t,r),u=OS(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Rp(e,this._firestore);let u;return u="string"==typeof(t=(0,ee.m9)(t))||t instanceof tf?bO(this._dataReader,"Transaction.update",a._key,t,r,i):vO(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Rp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Rp(e,this._firestore),r=new xp(this._firestore);return super.get(e).then(i=>new nf(this._firestore,r,t._key,i._document,new p_(!1,!1),t.converter))}}function CO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wU(){if(typeof Uint8Array>"u")throw new $e("unimplemented","Uint8Arrays are not available in this environment.")}function EU(){if(!function cW(){return typeof atob<"u"}())throw new $e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){u0=rn.SDK_VERSION,(0,rn._registerComponent)(new bo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new Kr(new JG(t.getProvider("auth-internal")),new tW(t.getProvider("app-check-internal")),function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new $e(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vp(g.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(hB,"3.7.1",n),(0,rn.registerVersion)(hB,"3.7.1","esm2017")}();class PD{constructor(e){this._delegate=e}static fromBase64String(e){return EU(),new PD(vd.fromBase64String(e))}static fromUint8Array(e){return wU(),new PD(vd.fromUint8Array(e))}toBase64(){return EU(),this._delegate.toBase64()}toUint8Array(){return wU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TO(n){return function Qz(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Jz{enableIndexedDbPersistence(e,t){return function iz(n,e){XV(n=An(n,Kr));const t=Ni(n),r=n._freezeSettings(),i=new oO;return JV(t,i,new kV(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sz(n){XV(n=An(n,Kr));const e=Ni(n),t=n._freezeSettings(),r=new oO;return JV(e,r,new V8(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oz(n){if(n._initialized&&!n._terminated)throw new $e(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new as;return n._queue.enqueueAndForgetEvenWhileRestricted((0,se.Z)(function*(){try{yield(t=(0,se.Z)(function*(r){if(!ac.C())return Promise.resolve();const i=r+"main";yield ac.delete(i)}),function(r){return t.apply(this,arguments)})(XR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class DU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Km("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){HV(this._delegate,e,t,r)}enableNetwork(){return function lz(n){return function K8(n){return n.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield KV(n),t=yield pO(n);return e.setNetworkEnabled(!0),function(r){const i=ft(r);return i.wu.delete(0),AD(i)}(t)}))}(Ni(n=An(n,Kr)))}(this._delegate)}disableNetwork(){return function uz(n){return function q8(n){return n.asyncQueue.enqueue((0,se.Z)(function*(){const e=yield KV(n),t=yield pO(n);return e.setNetworkEnabled(!1),(r=(0,se.Z)(function*(i){const a=ft(i);a.wu.add(0),yield T0(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ni(n=An(n,Kr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function az(n){return function(e){const t=new as;return e.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return function S8(n,e){return GM.apply(this,arguments)}(yield gO(e),t)})),t.promise}(Ni(n=An(n,Kr)))}(this._delegate)}onSnapshotsInSync(e){return function Uz(n,e){return function Q8(n,e){const t=new AS(e);return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return r=yield O0(n),i=t,ft(r).bu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return r=yield O0(n),i=t,void ft(r).bu.delete(i);var r,i}))}}(Ni(n=An(n,Kr)),_O(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new P0(this,jV(this._delegate,e))}catch(t){throw Jo(t,"collection()","Firestore.collection()")}}doc(e){try{return new au(this,SS(this._delegate,e))}catch(t){throw Jo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xo(this,function U8(n,e){if(n=An(n,xD),aO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $e(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Co(n,null,(t=e,new Qh(Vn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Jo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $z(n,e,t){n=An(n,Kr);const r=Object.assign(Object.assign({},Hz),t);return function(i){if(i.maxAttempts<1)throw new $e(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,u){const g=new as;return i.asyncQueue.enqueueAndForget((0,se.Z)(function*(){const y=yield function qV(n){return NS(n).then(e=>e.datastore)}(i);new W8(i.asyncQueue,y,u,a,g).run()})),g.promise}(Ni(n),i=>e(new jz(n,i)),r)}(this._delegate,t=>e(new IU(this,t)))}batch(){return Ni(this._delegate),new CU(new vU(this._delegate,e=>k0(this._delegate,e)))}loadBundle(e){return function cz(n,e){const t=Ni(n=An(n,Kr)),r=new tz;return function J8(n,e,t,r){const i=function(a,u){let g;return g="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,b){if(y instanceof Uint8Array)return GV(y,b);if(y instanceof ArrayBuffer)return GV(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new H8(y,u);var y}(t,SD(e));n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){!function B8(n,e,t){const r=ft(n);var i;(i=(0,se.Z)(function*(a,u,g){try{const y=yield u.getMetadata();if(yield function(k,U){const q=ft(k),ae=Cs(U.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",me=>q.Ns.getBundleMetadata(me,U.id)).then(me=>!!me&&me.createTime.compareTo(ae)>=0)}(a.localStore,y))return yield u.close(),g._completeWith({taskState:"Success",documentsLoaded:(k=y).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);g._updateProgress(IV(y));const b=new _8(y,a.localStore,u.It);let T=yield u.mc();for(;T;){const k=yield b.Fu(T);k&&g._updateProgress(k),T=yield u.mc()}const N=yield b.complete();return yield ef(a,N.Lu,void 0),yield function(k,U){const q=ft(k);return q.persistence.runTransaction("Save bundle","readwrite",ae=>q.Ns.saveBundleMetadata(ae,U))}(a.localStore,y),g._completeWith(N.progress),Promise.resolve(N.Bu)}catch(y){return Km("SyncEngine",`Loading bundle failed with ${y}`),g._failWith(y),Promise.resolve(new Set)}var k}),function(a,u,g){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield gO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function dz(n,e){return function X8(n,e){return n.asyncQueue.enqueue((0,se.Z)(function*(){return function(t,r){const i=ft(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield xS(n),e)}))}(Ni(n=An(n,Kr)),e).then(t=>t?new Co(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xo(this,t):null)}}class BS extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new PD(new vd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return au.forKey(t,this.firestore,null)}}class IU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new BS(e)}get(e){const t=m_(e);return this._delegate.get(t).then(r=>new FD(this._firestore,new nf(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=m_(e);return r?(CO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=m_(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=m_(e);return this._delegate.delete(t),this}}class CU{constructor(e){this._delegate=e}set(e,t,r){const i=m_(e);return r?(CO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=m_(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=m_(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class g_{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new LD(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=g_.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new g_(e,new BS(e),t),i.set(t,a)),a}}g_.INSTANCES=new WeakMap;class au{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new $e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new au(t,new zr(t._delegate,r,new ct(e)))}static forKey(e,t,r){return new au(t,new zr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new P0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new P0(this.firestore,jV(this._delegate,e))}catch(t){throw Jo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ee.m9)(e))instanceof zr&&$V(this._delegate,e)}set(e,t){t=CO("DocumentReference.set",t);try{return t?mU(this._delegate,e,t):mU(this._delegate,e)}catch(r){throw Jo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_U(this._delegate,e):_U(this._delegate,e,t,...r)}catch(i){throw Jo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Bz(n){return k0(An(n.firestore,Kr),[new v0(n._key,ti.none())])}(this._delegate)}onSnapshot(...e){const t=TU(e),r=SU(e,i=>new FD(this.firestore,new nf(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return yU(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Oz(n){n=An(n,zr);const e=An(n.firestore,Kr),t=Ni(e),r=new xp(e);return function Y8(n,e){const t=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(r=(0,se.Z)(function*(i,a,u){try{const g=yield function(y,b){const T=ft(y);return T.persistence.runTransaction("read document","readonly",N=>T.localDocuments.getDocument(N,b))}(i,a);g.isFoundDocument()?u.resolve(g):g.isNoDocument()?u.resolve(null):u.reject(new $e(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const y=N0(g,`Failed to get document '${a} from cache`);u.reject(y)}}),function(i,a,u){return r.apply(this,arguments)})(yield xS(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nf(e,r,n._key,i,new p_(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function kz(n){n=An(n,zr);const e=An(n.firestore,Kr);return YV(Ni(e),n._key,{source:"server"}).then(t=>IO(e,n,t))}(this._delegate):function Mz(n){n=An(n,zr);const e=An(n.firestore,Kr);return YV(Ni(e),n._key).then(t=>IO(e,n,t))}(this._delegate),t.then(r=>new FD(this.firestore,new nf(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new au(this.firestore,this._delegate.withConverter(e?g_.getInstance(this.firestore,e):null))}}function Jo(n,e,t){return n.message=n.message.replace(e,t),n}function TU(n){for(const e of n)if("object"==typeof e&&!TO(e))return e;return{}}function SU(n,e){var t,r;let i;return i=TO(n[0])?n[0]:TO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class FD{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new au(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gU(this._delegate,e._delegate)}}class LD extends FD{data(e){const t=this._delegate.data(e);return function YG(n,e){n||Nt()}(void 0!==t),t}}class Xo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new BS(e)}where(e,t,r){try{return new Xo(this.firestore,Ap(this._delegate,function wz(n,e,t){const r=e,i=FS("where",n);return new bz(i,r,t)}(e,t,r)))}catch(i){throw Jo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xo(this.firestore,Ap(this._delegate,function Dz(n,e="asc"){const t=e,r=FS("orderBy",n);return new Ez(r,t)}(e,t)))}catch(r){throw Jo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xo(this.firestore,Ap(this._delegate,function Iz(n){return BV("limit",n),new lU("limit",n,"F")}(e)))}catch(t){throw Jo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xo(this.firestore,Ap(this._delegate,function Cz(n){return BV("limitToLast",n),new lU("limitToLast",n,"L")}(e)))}catch(t){throw Jo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xo(this.firestore,Ap(this._delegate,function Tz(...n){return new uU("startAt",n,!0)}(...e)))}catch(t){throw Jo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xo(this.firestore,Ap(this._delegate,function Sz(...n){return new uU("startAfter",n,!1)}(...e)))}catch(t){throw Jo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xo(this.firestore,Ap(this._delegate,function Az(...n){return new cU("endBefore",n,!1)}(...e)))}catch(t){throw Jo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xo(this.firestore,Ap(this._delegate,function Nz(...n){return new cU("endAt",n,!0)}(...e)))}catch(t){throw Jo(t,"endAt()","Query.endAt()")}}isEqual(e){return lO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Fz(n){n=An(n,Co);const e=An(n.firestore,Kr),t=Ni(e),r=new xp(e);return function Z8(n,e){const t=new as;return n.asyncQueue.enqueueAndForget((0,se.Z)(function*(){return(r=(0,se.Z)(function*(i,a,u){try{const g=yield bS(i,a,!0),y=new SV(a,g.Hi),b=y.Wu(g.documents),T=y.applyChanges(b,!1);u.resolve(T.snapshot)}catch(g){const y=N0(g,`Failed to execute query '${a} against cache`);u.reject(y)}}),function(i,a,u){return r.apply(this,arguments)})(yield xS(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Np(e,r,n,i))}(this._delegate):"server"===e?.source?function Lz(n){n=An(n,Co);const e=An(n.firestore,Kr),t=Ni(e),r=new xp(e);return ZV(t,n._query,{source:"server"}).then(i=>new Np(e,r,n,i))}(this._delegate):function Pz(n){n=An(n,Co);const e=An(n.firestore,Kr),t=Ni(e),r=new xp(e);return aU(n._query),ZV(t,n._query).then(i=>new Np(e,r,n,i))}(this._delegate),t.then(r=>new SO(this.firestore,new Np(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=TU(e),r=SU(e,i=>new SO(this.firestore,new Np(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return yU(this._delegate,t,r)}withConverter(e){return new Xo(this.firestore,this._delegate.withConverter(e?g_.getInstance(this.firestore,e):null))}}class e6{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new LD(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new LD(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new e6(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new LD(this._firestore,r))})}isEqual(e){return gU(this._delegate,e._delegate)}}class P0 extends Xo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new au(this.firestore,e):null}doc(e){try{return new au(this.firestore,void 0===e?SS(this._delegate):SS(this._delegate,e))}catch(t){throw Jo(t,"doc()","CollectionReference.doc()")}}add(e){return function Vz(n,e){const t=An(n.firestore,Kr),r=SS(n),i=LS(n.converter,e);return k0(t,[OS(h_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ti.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new au(this.firestore,t))}isEqual(e){return $V(this._delegate,e._delegate)}withConverter(e){return new P0(this.firestore,this._delegate.withConverter(e?g_.getInstance(this.firestore,e):null))}}function m_(n){return An(n,zr)}class AO{constructor(...e){this._delegate=new tf(...e)}static documentId(){return new AO(_i.keyField().canonicalString())}isEqual(e){return(e=(0,ee.m9)(e))instanceof tf&&this._delegate._internalPath.isEqual(e._internalPath)}}class __{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Wz(){return new yO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new __(e)}static delete(){const e=function Gz(){return new RD("deleteField")}();return e._methodName="FieldValue.delete",new __(e)}static arrayUnion(...e){const t=function zz(...n){return new gz("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new __(t)}static arrayRemove(...e){const t=function Kz(...n){return new mz("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new __(t)}static increment(e){const t=function qz(n){return new _z("increment",n)}(e);return t._methodName="FieldValue.increment",new __(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const t6={Firestore:DU,GeoPoint:RS,Timestamp:ei,Blob:PD,Transaction:IU,WriteBatch:CU,DocumentReference:au,DocumentSnapshot:FD,Query:Xo,QueryDocumentSnapshot:LD,QuerySnapshot:SO,CollectionReference:P0,FieldPath:AO,FieldValue:__,setLogLevel:function Xz(n){!function qG(n){gp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function r6(n){(function n6(n,e){n.INTERNAL.registerComponent(new bo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},t6)))})(n,(e,t)=>new DU(e,t,new Jz)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(G$.Z);var NO=G(6451);class i6 extends zn.x{constructor(e=1/0,t=1/0,r=Hl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let g=0;for(let y=1;y<r.length&&r[y]<=u;y+=2)g=y;g&&r.splice(0,g+1)}}}var s6=G(3099);function AU(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,s6.B)({connector:()=>new i6(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const NU=(0,G(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function a6(n){return(0,ai.e)((e,t)=>{let r=!1;e.subscribe((0,hn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function l6(n=u6){return(0,ai.e)((e,t)=>{let r=!1;e.subscribe((0,hn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function u6(){return new NU}function xU(n,e){return(0,yr.m)(e)?Ar(()=>n,e):Ar(()=>n)}class y_{constructor(e){return e}}class VS{constructor(){return(0,rn.getApps)()}}const xO=new h.OlP("angularfire2._apps"),h6={provide:y_,useFactory:function d6(n){return n&&1===n.length?n[0]:new y_((0,rn.getApp)())},deps:[[new h.FiY,xO]]},f6={provide:VS,deps:[[new h.FiY,xO]]};function p6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new y_(r)}}let g6=(()=>{class n{constructor(t){(0,rn.registerVersion)("angularfire",Ie.full,"core"),(0,rn.registerVersion)("angularfire",Ie.full,"app"),(0,rn.registerVersion)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[h6,f6]}),n})();function m6(n,...e){return{ngModule:g6,providers:[{provide:xO,useFactory:p6(n),multi:!0,deps:[h.R0b,h.zs3,hd,...e]}]}}const _6=ET(rn.initializeApp,!0),RU=new Map,y6={activated:!1,tokenObservers:[]},v6={initialized:!1,enabled:!1};function As(n){return RU.get(n)||y6}function lu(n,e){RU.set(n,e)}function US(){return v6}class I6{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,se.Z)(function*(){t.stop();try{t.pending=new ee.BH,yield function C6(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ee.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ea=new ee.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function OU(n){if(!As(n).activated)throw ea.create("use-before-activation",{appName:n.name})}function OO(n,e){return kO.apply(this,arguments)}function kO(){return kO=(0,se.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const U=yield u.getHeartbeatsHeader();U&&(a["X-Firebase-Client"]=U)}const g={method:"POST",body:JSON.stringify(e),headers:a};let y,b;try{y=yield fetch(n,g)}catch(U){throw ea.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==y.status)throw ea.create("fetch-status-error",{httpStatus:y.status});try{b=yield y.json()}catch(U){throw ea.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const T=b.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw ea.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const N=1e3*Number(T[1]),k=Date.now();return{token:b.token,expireTimeMillis:k+N,issuedAtTimeMillis:k}}),kO.apply(this,arguments)}function N6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const BD="firebase-app-check-store";let $S=null;function PU(){return $S||($S=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ea.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(BD,{keyPath:"compositeKey"})}}catch(r){e(ea.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),$S)}function PO(){return PO=(0,se.Z)(function*(n,e){const r=(yield PU()).transaction(BD,"readwrite"),a=r.objectStore(BD).put({compositeKey:n,value:e});return new Promise((u,g)=>{a.onsuccess=y=>{u()},r.onerror=y=>{var b;g(ea.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),PO.apply(this,arguments)}const VD=new wo.Yd("@firebase/app-check");function BO(n,e){return(0,ee.hl)()?function O6(n,e){return function FU(n,e){return PO.apply(this,arguments)}(function BU(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{VD.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VU(){return US().enabled}function UU(){return UO.apply(this,arguments)}function UO(){return UO=(0,se.Z)(function*(){const n=US();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),UO.apply(this,arguments)}const V6={error:"UNKNOWN_ERROR"};function U6(n){return ee.US.encodeString(JSON.stringify(n),!1)}function GS(n){return HO.apply(this,arguments)}function HO(){return HO=(0,se.Z)(function*(n,e=!1){const t=n.app;OU(t);const r=As(t);let a,i=r.token;if(i&&!F0(i)&&(lu(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(F0(y)?i=y:yield BO(t,void 0))}if(!e&&i&&F0(i))return{token:i.token};let g,u=!1;if(VU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=OO(N6(t,yield UU()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const y=yield r.exchangeTokenPromise;return yield BO(t,y),lu(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?VD.warn(y.message):VD.error(y),a=y}return i?a?g=F0(i)?{token:i.token,internalError:a}:$U(a):(g={token:i.token},lu(t,Object.assign(Object.assign({},r),{token:i})),yield BO(t,i)):g=$U(a),u&&jU(t,g),g}),HO.apply(this,arguments)}function $O(n,e){const t=As(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),lu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function HU(n){const{app:e}=n,t=As(e);let r=t.tokenRefresher;r||(r=function H6(n){const{app:e}=n;return new I6((0,se.Z)(function*(){let r;if(r=As(e).token?yield GS(n,!0):yield GS(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=As(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),lu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function jU(n,e){const t=As(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function F0(n){return n.expireTimeMillis-Date.now()>0}function $U(n){return{token:U6(V6),error:n}}class j6{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=As(this.app);for(const t of e)$O(this.app,t.next);return Promise.resolve()}}const QU="app-check-internal";!function nK(){(0,rn._registerComponent)(new bo.wA("app-check",n=>function $6(n,e){return new j6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QU).initialize()})),(0,rn._registerComponent)(new bo.wA(QU,n=>function G6(n){return{getToken:e=>GS(n,e),addTokenListener:e=>function jO(n,e,t,r){const{app:i}=n,a=As(i),u={next:t,error:r,type:e};if(lu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&F0(a.token)){const g=a.token;Promise.resolve().then(()=>{t({token:g.token}),HU(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>HU(n))}(n,"INTERNAL",e),removeTokenListener:e=>$O(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rn.registerVersion)("@firebase/app-check","0.5.15")}();class L0{constructor(){return hp("app-check")}}typeof window<"u"&&window,G(127);const XU=new h.OlP("angularfire2.auth.use-emulator"),eH=new h.OlP("angularfire2.auth.settings"),tH=new h.OlP("angularfire2.auth.tenant-id"),nH=new h.OlP("angularfire2.auth.langugage-code"),rH=new h.OlP("angularfire2.auth.use-device-language"),iH=new h.OlP("angularfire.auth.persistence"),sH=(n,e,t,r,i,a,u,g)=>(0,oc.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),u)for(const[b,T]of Object.entries(u))y.settings[b]=T;return g&&y.setPersistence(g),y},[t,r,i,a,u,g]);let oH=(()=>{class n{constructor(t,r,i,a,u,g,y,b,T,N,k,U){const q=new zn.x,ae=Kn(void 0).pipe((0,ue.Q)(u.outsideAngular),Ar(()=>a.runOutsideAngular(()=>Promise.resolve().then(G.bind(G,5881)))),(0,En.U)(()=>(0,oc.on)(t,a,r)),(0,En.U)(me=>sH(me,a,g,b,T,N,y,k)),AU({bufferSize:1,refCount:!1}));if(gr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Kn(null);else{ae.pipe(function c6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?lr((i,a)=>n(i,a,r)):Bo.y,jr(1),t?a6(e):l6(()=>new NU))}()).subscribe();const nt=ae.pipe(Ar(rt=>rt.getRedirectResult().then(it=>it,()=>null)),gl,AU({bufferSize:1,refCount:!1})),ot=ae.pipe(Ar(rt=>new _r.y(it=>({unsubscribe:a.runOutsideAngular(()=>rt.onAuthStateChanged(pt=>it.next(pt),pt=>it.error(pt),()=>it.complete()))})))),dt=ae.pipe(Ar(rt=>new _r.y(it=>({unsubscribe:a.runOutsideAngular(()=>rt.onIdTokenChanged(pt=>it.next(pt),pt=>it.error(pt),()=>it.complete()))}))));this.authState=nt.pipe(xU(ot),(0,J.R)(u.outsideAngular),(0,ue.Q)(u.insideAngular)),this.user=nt.pipe(xU(dt),(0,J.R)(u.outsideAngular),(0,ue.Q)(u.insideAngular)),this.idToken=this.user.pipe(Ar(rt=>rt?(0,Br.D)(rt.getIdToken()):Kn(null))),this.idTokenResult=this.user.pipe(Ar(rt=>rt?(0,Br.D)(rt.getIdTokenResult()):Kn(null))),this.credential=(0,NO.T)(nt,q,this.authState.pipe(lr(rt=>!rt))).pipe((0,En.U)(rt=>rt?.user?rt:null),(0,J.R)(u.outsideAngular),(0,ue.Q)(u.insideAngular))}return(0,oc.pX)(this,ae,a,{spy:{apply:(me,nt,ot)=>{(me.startsWith("signIn")||me.startsWith("createUser"))&&ot.then(dt=>q.next(dt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oc.Dh),h.LFG(oc.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hd),h.LFG(XU,8),h.LFG(eH,8),h.LFG(tH,8),h.LFG(nH,8),h.LFG(rH,8),h.LFG(iH,8),h.LFG(L0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function aH(n,e){return function lK(n,e=Lo){return new _r.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function qO(n,e){return aH(n,e).pipe((0,En.U)(t=>({payload:t,type:"query"})))}function zS(n,e){return qO(n,e).pipe(Gl(void 0),Fx(),(0,En.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,g)=>{const y=i.find(T=>T.doc.ref.isEqual(u.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(u.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(u.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:u}})}),a}))}function lH(n,e,t){return zS(n,t).pipe(Lx((r,i)=>function cK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function dK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function Lu(n,e=Bo.y){return n=n??Bu,(0,ai.e)((t,r)=>{let i,a=!0;t.subscribe((0,hn.x)(r,u=>{const g=e(u);(a||!n(i,g))&&(a=!1,i=g,r.next(u))}))})}(),(0,En.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function YO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uH(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cH{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,En.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Gl(void 0),Fx(),lr(([r,i])=>i.length>0||!r),(0,En.U)(([r,i])=>i),gl)}auditTrail(e){return this.stateChanges(e).pipe(Lx((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uH(e);return lH(this.query,t,this.afs.schedulers.outsideAngular).pipe(gl)}valueChanges(e={}){return qO(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gl)}get(e){return(0,Br.D)(this.query.get(e)).pipe(gl)}add(e){return this.ref.add(e)}doc(e){return new dH(this.ref.doc(e),this.afs)}}class dH{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=hH(r,t);return new cH(i,a,this.afs)}snapshotChanges(){return function uK(n,e){return aH(n,e).pipe(Gl(void 0),Fx(),(0,En.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gl)}valueChanges(e={}){return this.snapshotChanges().pipe((0,En.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Br.D)(this.ref.get(e)).pipe(gl)}}class hK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zS(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),lr(t=>t.length>0),gl):zS(this.query,this.afs.schedulers.outsideAngular).pipe(gl)}auditTrail(e){return this.stateChanges(e).pipe(Lx((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uH(e);return lH(this.query,t,this.afs.schedulers.outsideAngular).pipe(gl)}valueChanges(e={}){return qO(this.query,this.afs.schedulers.outsideAngular).pipe((0,En.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),gl)}get(e){return(0,Br.D)(this.query.get(e)).pipe(gl)}}const fK=new h.OlP("angularfire2.enableFirestorePersistence"),pK=new h.OlP("angularfire2.firestore.persistenceSettings"),gK=new h.OlP("angularfire2.firestore.settings"),mK=new h.OlP("angularfire2.firestore.use-emulator");function hH(n,e=(t=>t)){return{query:e(n),ref:n}}let _K=(()=>{class n{constructor(t,r,i,a,u,g,y,b,T,N,k,U,q,ae,me,nt,ot){this.schedulers=y;const dt=(0,oc.on)(t,g,r),rt=T;N&&sH(dt,g,k,q,ae,me,U,nt),[this.firestore,this.persistenceEnabled$]=(0,oc.cc)(`${dt.name}.firestore`,"AngularFirestore",dt.name,()=>{const it=g.runOutsideAngular(()=>dt.firestore());if(a&&it.settings(a),rt&&it.useEmulator(...rt),i&&!gr(u)){const pt=()=>{try{return(0,Br.D)(it.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(sn){return typeof console<"u"&&console.warn(sn),Kn(!1)}};return[it,g.runOutsideAngular(pt)]}return[it,Kn(!1)]},[a,rt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=hH(i,r),g=this.schedulers.ngZone.run(()=>a);return new cH(g,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new hK(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new dH(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oc.Dh),h.LFG(oc.xv,8),h.LFG(fK,8),h.LFG(gK,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hd),h.LFG(pK,8),h.LFG(mK,8),h.LFG(oH,8),h.LFG(XU,8),h.LFG(eH,8),h.LFG(tH,8),h.LFG(nH,8),h.LFG(rH,8),h.LFG(iH,8),h.LFG(L0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fH=(()=>{class n{constructor(t){this.angularFirestore=t}insertRecord(t){return new Promise((r,i)=>{this.angularFirestore.collection("usage-logs").add(t).then(a=>{console.log(a)},a=>i(a))})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_K))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yK=(()=>{class n{constructor(t,r){this.modalService=t,this.firestoreService=r}ngOnInit(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth}resizeWindow(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth}ngOnChanges(t){t.sentence.currentValue&&(this.sentence=t.sentence.currentValue),console.log("changes",t)}onClickSend(){this.firestoreService.insertRecord({screenHeight:this.windowHeight,screenWidth:this.windowWidth}),console.log("Data sent")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vw),h.Y36(fH))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-result"]],hostBindings:function(t,r){1&t&&h.NdJ("resize",function(a){return r.resizeWindow(a)},!1,h.Jf7)},inputs:{sentence:"sentence"},features:[h.TTD],decls:5,vars:1,consts:[[1,"container-result"],[1,"row"],[1,"col-9"],[1,"title"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),h._uU(4),h.qZA()()()()),2&t&&(h.xp6(4),h.Oqu(r.sentence?r.sentence:""))},styles:[".container-result[_ngcontent-%COMP%]{height:100vh;width:100vw;padding:20px}.title[_ngcontent-%COMP%]{font-size:1rem;word-wrap:break-word}.button-send[_ngcontent-%COMP%]{width:70px;height:40px}"]}),n})();var vK=G(7489);let bK=(()=>{class n{constructor(){}getKeyMap(){return[{key:[1],value:"A"},{key:[1,2],value:"B"},{key:[1,4],value:"C"},{key:[1,4,5],value:"D"},{key:[1,5],value:"E"},{key:[1,2,4],value:"F"},{key:[1,2,4,5],value:"G"},{key:[1,2,5],value:"H"},{key:[2,4],value:"I"},{key:[2,4,5],value:"J"},{key:[1,3],value:"K"},{key:[1,2,3],value:"L"},{key:[1,3,4],value:"M"},{key:[1,3,4,5],value:"N"},{key:[1,3,5],value:"O"},{key:[1,2,3,4],value:"P"},{key:[1,2,3,4,5],value:"Q"},{key:[1,2,3,5],value:"R"},{key:[2,3,4],value:"S"},{key:[2,3,4,5],value:"T"},{key:[1,3,6],value:"U"},{key:[1,2,3,6],value:"V"},{key:[2,4,5,6],value:"W"},{key:[1,3,4,6],value:"X"},{key:[1,3,4,5,6],value:"Y"},{key:[1,3,5,6],value:"Z"}]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wK=(()=>{class n{constructor(t){this.keyMapService=t}getTouchIdList(t){const r=[];for(const i of t)i.target.id&&(window.navigator.vibrate(100),r.push(parseInt(i.target.id[1])));return console.log("getTouchIdList"),console.log("getTouchIdList",r),console.log("getTouchIdList sorted",r.sort()),r.sort()}detectLetter(t){const r=this.getTouchIdList(t),i=this.keyMapService.getKeyMap();let a="";return i.forEach(u=>{vK.isEqual(u.key,r)&&(a=u.value)}),console.log("detectLetter"),console.log("detectLetter",a),a}fetchTouchCoordinates(t){const r=[];for(let i=0;i<t.length;i++){const{clientX:a,clientY:u}=t[i];r.push({x:a,y:u,touchId:crypto.randomUUID()})}return console.log("fetchTouchCoordinates"),console.log("fetchTouchCoordinates",r),r}fetchSwipeTouchCoordinates(t){const r=[];for(let i=0;i<t.length;i++){const{x:a,y:u}=t[i].value;r.push({x:a,y:u})}return console.log("fetchSwipeTouchCoordinates"),console.log("fetchSwipeTouchCoordinates",r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bK))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EK=(()=>{class n{constructor(){this.validTime=100,this.thresholdAngleValue=100}detectSwipeDown(t){if(t.length<2)return!1;const r=t[0],i=t[t.length-1],a=i.timeStamp-r.timeStamp<=this.validTime,u=i.value.y>r.value.y,g=Math.abs(i.value.x-r.value.x)<=this.thresholdAngleValue;return a&&u&&g}detectSwipeUp(t){if(t.length<2)return!1;const r=t[0],i=t[t.length-1],a=i.timeStamp-r.timeStamp<=this.validTime,u=i.value.y<r.value.y,g=Math.abs(i.value.x-r.value.x)<=this.thresholdAngleValue;return a&&u&&g}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),DK=(()=>{class n{constructor(t,r,i){this.fetchResultService=t,this.swipeDetectorService=r,this.firestoreService=i,this.outputSentenceChangeEvent=new h.vpe,this.touches=[],this.swipeTouches=[],this.result=[],this.sentence=""}ngOnInit(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth}resizeWindow(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth}onTouchStart(t){t.preventDefault(),this.touches=t.touches;let[r,i,a]=this.getSessionAndDT();const u={dateTime:i,DTinMilliseconds:a,sessionId:r,eventType:"touchstart",screenHeight:this.windowHeight,screenWidth:this.windowWidth,touches:this.fetchResultService.fetchTouchCoordinates(this.touches)};this.result.push(u),this.firestoreService.insertRecord(u);for(const b of this.touches)if(b.target.id){var g="assets/keyboard/icons-button/p"+parseInt(b.target.id[1])+".png";document.getElementById("i"+parseInt(b.target.id[1])).setAttribute("src",g)}let y=document.getElementById("showInput");y.textContent="",y.style.display="none",y.classList.remove("animatee")}onSwipe(t){t.preventDefault();const{touches:r,timeStamp:i}=t;this.swipeTouches.push({value:{x:r[0].clientX,y:r[0].clientY},timeStamp:i})}onTouchEnd(){const t=this.fetchResultService.detectLetter(this.touches);let r=document.getElementById("showInput");r.textContent=t,r.style.transform="rotate(90deg)",r.style.display="block",setTimeout(function(){r.classList.add("animatee")},300);for(const N of this.touches)if(N.target.id){var i="assets/keyboard/icons-button/"+parseInt(N.target.id[1])+".png";document.getElementById("i"+parseInt(N.target.id[1])).setAttribute("src",i)}t&&(this.addLetter(t),this.voiceContent(t)),this.swipeDetectorService.detectSwipeDown(this.swipeTouches)&&this.addSpace(),this.swipeDetectorService.detectSwipeUp(this.swipeTouches)&&this.removeLetter(),this.unsetTouches(),this.outputSentenceChangeEvent.emit(this.sentence),console.log("result:",this.result);let[g,y,b]=this.getSessionAndDT();const T={dateTime:y,DTinMilliseconds:b,sessionId:g,eventType:"touchend"};this.result.push(T),this.firestoreService.insertRecord(T)}addLetter(t){const r=this.fetchResultService.fetchTouchCoordinates(this.touches);this.setResult(r,"ADD "+t,"static"),this.sentence+=t}removeLetter(){const t=this.sentence[this.sentence.length-1],r=this.fetchResultService.fetchSwipeTouchCoordinates(this.swipeTouches);this.setResult(r,"DELETE "+t,"swipe"),this.sentence=this.sentence.slice(0,-1)}addSpace(){const t=this.fetchResultService.fetchSwipeTouchCoordinates(this.swipeTouches);this.setResult(t,"ADD SPACE","swipe"),this.sentence+=" "}getSessionAndDT(){var t=sessionStorage.getItem("sessionId");if(null===t){console.log("no session value found");var r=crypto.randomUUID();sessionStorage.setItem("sessionId",r),console.log("session value set to",r)}else console.log("found session value",t);var i=new Date;return[sessionStorage.getItem("sessionId"),$t(i,"yyyy-MM-dd HH:mm:ss","en-US","EST"),i.getTime()]}setResult(t,r,i){let[a,u,g]=this.getSessionAndDT();const y={touches:t,value:r,touchType:i,screenHeight:this.windowHeight,screenWidth:this.windowWidth,dateTime:u,DTinMilliseconds:g,sessionId:a,eventType:"setResult",previousSentence:this.sentence};this.result.push(y),this.firestoreService.insertRecord(y),console.log("Data sent to Firebase",y)}unsetTouches(){this.touches=[],this.swipeTouches=[]}voiceContent(t){if("speechSynthesis"in window){var r=new SpeechSynthesisUtterance;window.speechSynthesis.speak(r)}else alert("Sorry, your browser doesn't support text to speech!")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wK),h.Y36(EK),h.Y36(fH))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-keyboard"]],hostBindings:function(t,r){1&t&&h.NdJ("resize",function(a){return r.resizeWindow(a)},!1,h.Jf7)},outputs:{outputSentenceChangeEvent:"outputSentenceChangeEvent"},decls:16,vars:0,consts:[[1,"container-keyboard",3,"touchstart","touchend","touchmove"],[1,"d-flex","flex-row","justify-content-around"],["id","d6",1,"container-button"],["id","i6","src","assets/keyboard/icons-button/6.png","alt","6",1,"icon-button"],["id","d5",1,"container-button"],["id","i5","src","assets/keyboard/icons-button/5.png","alt","5",1,"icon-button"],["id","d4",1,"container-button"],["id","i4","src","assets/keyboard/icons-button/4.png","alt","4",1,"icon-button"],["id","d3",1,"container-button"],["id","i3","src","assets/keyboard/icons-button/3.png","alt","3",1,"icon-button"],["id","d2",1,"container-button"],["id","i2","src","assets/keyboard/icons-button/2.png","alt","2",1,"icon-button"],["id","d1",1,"container-button"],["id","i1","src","assets/keyboard/icons-button/1.png","alt","1",1,"icon-button"],["id","showInput","role","textbox","aria-label","just typed letter",1,"showInput"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.NdJ("touchstart",function(a){return r.onTouchStart(a)})("touchend",function(){return r.onTouchEnd()})("touchmove",function(a){return r.onSwipe(a)}),h.TgZ(1,"div",1)(2,"div",2),h._UZ(3,"img",3),h.qZA(),h.TgZ(4,"div",4),h._UZ(5,"img",5),h.qZA(),h.TgZ(6,"div",6),h._UZ(7,"img",7),h.qZA()(),h.TgZ(8,"div",1)(9,"div",8),h._UZ(10,"img",9),h.qZA(),h.TgZ(11,"div",10),h._UZ(12,"img",11),h.qZA(),h.TgZ(13,"div",12),h._UZ(14,"img",13),h.qZA()(),h._UZ(15,"div",14),h.qZA())},styles:[".container-keyboard[_ngcontent-%COMP%]{height:100vh;width:100vw}.container-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:44vh;width:33vw;margin:3px}.icon-button[_ngcontent-%COMP%]{height:100px;width:100px}",".showInput[_ngcontent-%COMP%] {\n        position:absolute;\n        height:100px;\n        width:100px;\n        border: none;\n        left: 40%;\n        top: 50%;\n        font-size:70px;\n        text-align: center;\n        z-index: 100;\n        display:none;\n        background: rgba(255, 255, 255, 1);\n    }\n    .animatee[_ngcontent-%COMP%] {\n       opacity: 0 !important;\n       transition: opacity 1.60s ease 0s;\n     }"]}),n})(),IK=(()=>{class n{constructor(){this.sentence=""}setOutputSentenceChangeEvent(t){this.sentence=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:1,consts:[[1,"container-app"],[1,"result"],[3,"sentence"],[1,"keyboard"],[3,"outputSentenceChangeEvent"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"section",1),h._UZ(2,"app-result",2),h.qZA(),h.TgZ(3,"section",3)(4,"app-keyboard",4),h.NdJ("outputSentenceChangeEvent",function(a){return r.setOutputSentenceChangeEvent(a)}),h.qZA()()()),2&t&&(h.xp6(2),h.Q6J("sentence",r.sentence))},dependencies:[yK,DK],styles:[".container-app[_ngcontent-%COMP%]{display:block;overflow:hidden;height:100vh;width:100vw}.result[_ngcontent-%COMP%]{height:10vh;width:100vw;border-bottom:black 2px solid}.keyboard[_ngcontent-%COMP%]{height:90vh;width:100vw}"]}),n})();function pH(n){return new _r.y(e=>{(0,Qi.Xf)(n()).subscribe(e)})}class SK extends _r.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ai.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Gd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Gd.w0.EMPTY)}return e}refCount(){return function TK(){return(0,ai.e)((n,e)=>{let t=null;n._refCount++;const r=(0,hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}()(this)}}const NK={connector:()=>new zn.x};function gH(n,e=NK){const{connector:t}=e;return(0,ai.e)((r,i)=>{const a=t();(0,Qi.Xf)(n(function AK(n){return new _r.y(e=>n.subscribe(e))}(a))).subscribe(i),i.add(r.subscribe(a))})}const UD="Service workers are disabled or not supported by this browser";class KS{constructor(e){if(this.serviceWorker=e,e){const r=nr(e,"controllerchange").pipe((0,En.U)(()=>e.controller)),a=Hs(pH(()=>Kn(e.controller)),r);this.worker=a.pipe(lr(T=>!!T)),this.registration=this.worker.pipe(Ar(()=>e.getRegistration()));const b=nr(e,"message").pipe((0,En.U)(T=>T.data)).pipe(lr(T=>T&&T.type)).pipe(function RK(n){return n?e=>gH(n)(e):e=>function xK(n,e){const t=(0,yr.m)(n)?n:()=>n;return(0,yr.m)(e)?gH(e,{connector:t}):r=>new SK(r,t)}(new zn.x)(e)}());b.connect(),this.events=b}else this.worker=this.events=this.registration=function MK(n){return pH(()=>function CK(n,e){const t=(0,yr.m)(n)?n:()=>n,r=i=>i.error(t());return new _r.y(e?i=>e.schedule(r,0,i):r)}(new Error(n)))}(UD)}postMessage(e,t){return this.worker.pipe(jr(1),Vu(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),a=this.postMessage(e,t);return Promise.all([a,i]).then(([,u])=>u)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(lr(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(jr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(lr(t=>t.nonce===e),jr(1),(0,En.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let OK=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new zn.x,!t.isEnabled)return this.messages=Ur,this.notificationClicks=Ur,void(this.subscription=Ur);this.messages=this.sw.eventsOfType("PUSH").pipe((0,En.U)(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,En.U)(i=>i.data)),this.pushManager=this.sw.registration.pipe((0,En.U)(i=>i.pushManager));const r=this.pushManager.pipe(Ar(i=>i.getSubscription()));this.subscription=(0,NO.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(UD));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let u=0;u<i.length;u++)a[u]=i.charCodeAt(u);return r.applicationServerKey=a,this.pushManager.pipe(Ar(u=>u.subscribe(r)),jr(1)).toPromise().then(u=>(this.subscriptionChanges.next(u),u))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(jr(1),Ar(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(UD))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(KS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),kK=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Ur,this.available=Ur,this.activated=Ur,void(this.unrecoverable=Ur);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(lr(r=>"VERSION_READY"===r.type),(0,En.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(UD));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(UD));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(KS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ZO{}const mH=new h.OlP("NGSW_REGISTER_SCRIPT");function PK(n,e,t,r){return()=>{if(!Ri(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[u,...g]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(u){case"registerImmediately":i=Kn(null);break;case"registerWithDelay":i=_H(+g[0]||0);break;case"registerWhenStable":i=g[0]?(0,NO.T)(yH(n),_H(+g[0])):yH(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(h.R0b).runOutsideAngular(()=>i.pipe(jr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(u=>console.error("Service worker registration failed with:",u))))}}function _H(n){return Kn(null).pipe(ag(n))}function yH(n){return n.get(h.z2F).isStable.pipe(lr(t=>t))}function FK(n,e){return new KS(Ri(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let LK=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:mH,useValue:t},{provide:ZO,useValue:r},{provide:KS,useFactory:FK,deps:[ZO,h.Lbi]},{provide:h.ip1,useFactory:PK,deps:[h.zs3,mH,ZO,h.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[OK,kK]}),n})();const qS={firebase:{projectId:"adv-proj-braille-keyboard",appId:"1:815783736710:web:ff369c31332cd28174a807",storageBucket:"adv-proj-braille-keyboard.appspot.com",locationId:"us-central",apiKey:"AIzaSyAaNLvSc7clF6hj-69Uk6hggHUDHpDGdGA",authDomain:"adv-proj-braille-keyboard.firebaseapp.com",messagingSenderId:"815783736710"},production:!0};var BK=G(7573);class QO{constructor(e){return e}}class JO{constructor(){return hp("auth")}}const XO=new h.OlP("angularfire2.auth-instances");function UK(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new QO(r)}}const HK={provide:JO,deps:[[new h.FiY,XO]]},jK={provide:QO,useFactory:function VK(n,e){const t=dp("auth",n,e);return t&&new QO(t)},deps:[[new h.FiY,XO],y_]};let $K=(()=>{class n{constructor(){(0,rn.registerVersion)("angularfire",Ie.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[jK,HK]}),n})();function GK(n,...e){return{ngModule:$K,providers:[{provide:XO,useFactory:UK(n),multi:!0,deps:[h.R0b,h.zs3,hd,VS,[new h.FiY,L0],...e]}]}}const WK=ET(BK.n,!0),bH="@firebase/database";let ek="";class KK{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ee.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ee.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class qK{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ee.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const EH=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KK(e)}}catch{}return new qK},v_=EH("localStorage"),tk=EH("sessionStorage"),B0=new wo.Yd("@firebase/database"),DH=function(){let n=1;return function(){return n++}}(),IH=function(n){const e=(0,ee.dS)(n),t=new ee.gQ;t.update(e);const r=t.digest();return ee.US.encodeByteArray(r)},HD=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=HD.apply(null,r):e+="object"==typeof r?(0,ee.Wl)(r):r,e+=" "}return e};let b_=null,CH=!0;const Ns=function(...n){if(!0===CH&&(CH=!1,null===b_&&!0===tk.get("logging_enabled")&&function(n,e){(0,ee.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(B0.logLevel=wo.in.VERBOSE,b_=B0.log.bind(B0),e&&tk.set("logging_enabled",!0)):"function"==typeof n?b_=n:(b_=null,tk.remove("logging_enabled"))}(!0)),b_){const e=HD.apply(null,n);b_(e)}},jD=function(n){return function(...e){Ns(n,...e)}},nk=function(...n){const e="FIREBASE INTERNAL ERROR: "+HD(...n);B0.error(e)},bd=function(...n){const e=`FIREBASE FATAL ERROR: ${HD(...n)}`;throw B0.error(e),new Error(e)},To=function(...n){const e="FIREBASE WARNING: "+HD(...n);B0.warn(e)},YS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},rf="[MIN_NAME]",wd="[MAX_NAME]",w_=function(n,e){if(n===e)return 0;if(n===rf||e===wd)return-1;if(e===rf||n===wd)return 1;{const t=ZS(n),r=ZS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},QK=function(n,e){return n===e?0:n<e?-1:1},$D=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ee.Wl)(e))},rk=function(n){if("object"!=typeof n||null===n)return(0,ee.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,ee.Wl)(e[r]),t+=":",t+=rk(n[e[r]]);return t+="}",t},SH=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function xs(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const AH=function(n){(0,ee.hu)(!YS(n),"Invalid JSON number");const r=1023;let i,a,u,g,y;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(g=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=g+r,u=Math.round(n*Math.pow(2,52-g)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const b=[];for(y=52;y;y-=1)b.push(u%2?1:0),u=Math.floor(u/2);for(y=11;y;y-=1)b.push(a%2?1:0),a=Math.floor(a/2);b.push(i?1:0),b.reverse();const T=b.join("");let N="";for(y=0;y<64;y+=8){let k=parseInt(T.substr(y,8),2).toString(16);1===k.length&&(k="0"+k),N+=k}return N.toLowerCase()},t4=new RegExp("^-?(0*)\\d{1,10}$"),ZS=function(n){if(t4.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},V0=function(n){try{n()}catch(e){setTimeout(()=>{throw To("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},GD=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class r4{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){To(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class i4{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ns("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',To(e)}}let WD=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const kH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LH="websocket",BH="long_polling";class ok{constructor(e,t,r,i,a=!1,u="",g=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=v_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&v_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function VH(n,e,t){let r;if((0,ee.hu)("string"==typeof e,"typeof type must == string"),(0,ee.hu)("object"==typeof t,"typeof params must == object"),e===LH)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==BH)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function s4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return xs(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class o4{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ee.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ee.p$)(this.counters_)}}const ak={},lk={};function uk(n){const e=n.toString();return ak[e]||(ak[e]=new o4),ak[e]}class l4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&V0(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Mp{constructor(e,t,r,i,a,u,g){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jD(e),this.stats_=uk(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),VH(t,BH,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new l4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ee.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ck((...a)=>{const[u,g,y,b,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=g,this.password=y;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,g]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,g)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&kH.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mp.forceAllow_=!0}static forceDisallow(){Mp.forceDisallow_=!0}static isAvailable(){return!((0,ee.Yr)()||!Mp.forceAllow_&&(Mp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ee.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,ee.h$)(t),i=SH(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ee.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ee.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ck{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ee.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=DH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ck.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(g){Ns("frame writing exception"),g.stack&&Ns(g.stack),Ns(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ns("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,ee.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ns("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let JS=null;typeof MozWebSocket<"u"?JS=MozWebSocket:typeof WebSocket<"u"&&(JS=WebSocket);let U0=(()=>{class n{constructor(t,r,i,a,u,g,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jD(this.connId),this.stats_=uk(r),this.connURL=n.connectionURL_(r,g,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const g={v:"5"};return!(0,ee.Yr)()&&typeof location<"u"&&location.hostname&&kH.test(location.hostname)&&(g.r="f"),r&&(g.s=r),i&&(g.ls=i),a&&(g.ac=a),u&&(g.p=u),VH(t,LH,g)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,v_.set("previous_websocket_failure",!0);try{let i;if((0,ee.Yr)()){i={headers:{"User-Agent":`Firebase/5/${ek}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,g=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;g&&(i.proxy={origin:g})}this.mySock=new JS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==JS&&!n.forceDisallow_}static previouslyFailed(){return v_.isInMemoryStorage||!0===v_.get("previous_websocket_failure")}markConnectionHealthy(){v_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,ee.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ee.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,ee.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=SH(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),zH=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Mp,U0]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=U0&&U0.isAvailable();let i=r&&!U0.previouslyFailed();if(t.webSocketOnly&&(r||To("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[U0];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class XH{constructor(e,t,r,i,a,u,g,y,b,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=g,this.onDisconnect_=y,this.onKill_=b,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jD("c:"+this.id+":"),this.transportManager_=new zH(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=GD(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=$D("t",e),r=$D("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=$D("t",e),r=$D("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=$D("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?nk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&To("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),GD(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):GD(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(v_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ej{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class tj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ee.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,ee.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class XS extends tj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ee.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new XS}getInitialEvent(e){return(0,ee.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ir{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function qn(){return new ir("")}function Dn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Op(n){return n.pieces_.length-n.pieceNum_}function wr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ir(n.pieces_,e)}function hk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function zD(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ij(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ir(e,0)}function ni(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ir)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ir(t,0)}function In(n){return n.pieceNum_>=n.pieces_.length}function ta(n,e){const t=Dn(n),r=Dn(e);if(null===t)return e;if(t===r)return ta(wr(n),wr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function fk(n,e){if(Op(n)!==Op(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function uu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Op(n)>Op(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class R4{constructor(e,t){this.errorPrefix_=t,this.parts_=zD(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ee.ug)(this.parts_[r]);sj(this)}}function sj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+E_(n))}function E_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pk extends tj{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pk}getInitialEvent(e){return(0,ee.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const KD=1e3;let tA,D_=(()=>{class n extends ej{constructor(t,r,i,a,u,g,y,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=g,this.appCheckTokenProvider_=y,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=jD("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=KD,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,ee.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&XS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,ee.Wl)(u)),(0,ee.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new ee.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:g=>{const y=g.d;"ok"===g.s?r.resolve(y):r.reject(y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+u),this.listens.has(g)||this.listens.set(g,new Map),(0,ee.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ee.hu)(!this.listens.get(g).has(u),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(g).set(u,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,y=>{const b=y.d,T=y.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,ee.r3)(t,"w")){const i=(0,ee.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();To(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ee.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,ee.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,g=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,ee.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,g=>{a&&setTimeout(()=>{a(g.s,g.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const g={p:r,d:i};void 0!==u&&(g.h=u),this.outstandingPuts_.push({action:t,request:g,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ee.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):nk("Unrecognized action received from server: "+(0,ee.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ee.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=KD,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=KD,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=KD),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,se.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,g=t.lastSessionId;let y=!1,b=null;const T=function(){b?b.close():(y=!0,a())};t.realtime_={close:T,sendRequest:function(U){(0,ee.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(U)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);y?Ns("getToken() completed but was canceled"):(Ns("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,b=new XH(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ae=>{To(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(U){t.log_("Failed to get token: "+U),y||(t.repoInfo_.nodeAdmin&&To(U),T())}}})()}interrupt(t){Ns("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ns("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ee.xb)(this.interruptReasons_)&&(this.reconnectDelay_=KD,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>rk(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new ir(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ns("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ns("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,ee.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ek.replace(/\./g,"-")]=1,(0,ee.uI)()?t["framework.cordova"]=1:(0,ee.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=XS.getInstance().currentlyOnline();return(0,ee.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tn(e,t)}}class eA{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Tn(rf,e),i=new Tn(rf,t);return 0!==this.compare(r,i)}minPost(){return Tn.MIN}}class lj extends eA{static get __EMPTY_NODE(){return tA}static set __EMPTY_NODE(e){tA=e}compare(e,t){return w_(e.name,t.name)}isDefinedOn(e){throw(0,ee.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tn.MIN}maxPost(){return new Tn(wd,tA)}makePost(e,t){return(0,ee.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tn(e,tA)}toString(){return".key"}}const Ed=new lj;class nA{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let mk,lc=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Ma.EMPTY_NODE,this.right=u??Ma.EMPTY_NODE}copy(t,r,i,a,u){return new n(t??this.key,r??this.value,i??this.color,a??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ma.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ma.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ma{constructor(e,t=Ma.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ma(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,lc.BLACK,null,null))}remove(e){return new Ma(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lc.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nA(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nA(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nA(this.root_,null,this.comparator_,!0,e)}}function V4(n,e){return w_(n.name,e.name)}function gk(n,e){return w_(n,e)}Ma.EMPTY_NODE=new class B4{copy(e,t,r,i,a){return this}insert(e,t,r){return new lc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const uj=function(n){return"number"==typeof n?"number:"+AH(n):"string:"+n},cj=function(n){if(n.isLeafNode()){const e=n.val();(0,ee.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ee.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ee.hu)(n===mk||n.isEmpty(),"priority of unexpected type.");(0,ee.hu)(n===mk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dj,hj,fj,H0=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,ee.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),cj(this.priorityNode_)}static set __childrenNodeConstructor(t){dj=t}static get __childrenNodeConstructor(){return dj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return In(t)?this:".priority"===Dn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Dn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,ee.hu)(".priority"!==i||1===Op(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(wr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+uj(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?AH(this.value_):this.value_,this.lazyHash_=IH(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ee.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,ee.hu)(a>=0,"Unknown leaf type: "+r),(0,ee.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Or=new class $4 extends eA{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?w_(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tn.MIN}maxPost(){return new Tn(wd,new H0("[PRIORITY-POST]",fj))}makePost(e,t){const r=hj(e);return new Tn(t,new H0("[PRIORITY-POST]",r))}toString(){return".priority"}},G4=Math.log(2);class W4{constructor(e){this.count=parseInt(Math.log(e+1)/G4,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rA=function(n,e,t,r){n.sort(e);const i=function(y,b){const T=b-y;let N,k;if(0===T)return null;if(1===T)return N=n[y],k=t?t(N):N,new lc(k,N.node,lc.BLACK,null,null);{const U=parseInt(T/2,10)+y,q=i(y,U),ae=i(U+1,b);return N=n[U],k=t?t(N):N,new lc(k,N.node,lc.BLACK,q,ae)}},g=function(y){let b=null,T=null,N=n.length;const k=function(q,ae){const me=N-q,nt=N;N-=q;const ot=i(me+1,nt),dt=n[me],rt=t?t(dt):dt;U(new lc(rt,dt.node,ae,null,ot))},U=function(q){b?(b.left=q,b=q):(T=q,b=q)};for(let q=0;q<y.count;++q){const ae=y.nextBitIsOne(),me=Math.pow(2,y.count-(q+1));ae?k(me,lc.BLACK):(k(me,lc.BLACK),k(me,lc.RED))}return T}(new W4(n.length));return new Ma(r||e,g)};let _k;const j0={};class sf{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ee.hu)(j0&&Or,"ChildrenNode.ts has not been loaded"),_k=_k||new sf({".priority":j0},{".priority":Or}),_k}get(e){const t=(0,ee.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ma?t:null}hasIndex(e){return(0,ee.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ee.hu)(e!==Ed,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Tn.Wrap);let g,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();g=i?rA(r,e.getCompare()):j0;const y=e.toString(),b=Object.assign({},this.indexSet_);b[y]=e;const T=Object.assign({},this.indexes_);return T[y]=g,new sf(T,b)}addToIndexes(e,t){const r=(0,ee.UI)(this.indexes_,(i,a)=>{const u=(0,ee.DV)(this.indexSet_,a);if((0,ee.hu)(u,"Missing index implementation for "+a),i===j0){if(u.isDefinedOn(e.node)){const g=[],y=t.getIterator(Tn.Wrap);let b=y.getNext();for(;b;)b.name!==e.name&&g.push(b),b=y.getNext();return g.push(e),rA(g,u.getCompare())}return j0}{const g=t.get(e.name);let y=i;return g&&(y=y.remove(new Tn(e.name,g))),y.insert(e,e.node)}});return new sf(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,ee.UI)(this.indexes_,i=>{if(i===j0)return i;{const a=t.get(e.name);return a?i.remove(new Tn(e.name,a)):i}});return new sf(r,this.indexSet_)}}let qD,fn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&cj(this.priorityNode_),this.children_.isEmpty()&&(0,ee.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qD||(qD=new n(new Ma(gk),null,sf.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qD}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?qD:r}}getChild(t){const r=Dn(t);return null===r?this:this.getImmediateChild(r).getChild(wr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,ee.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Tn(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const g=a.isEmpty()?qD:this.priorityNode_;return new n(a,g,u)}}updateChild(t,r){const i=Dn(t);if(null===i)return r;{(0,ee.hu)(".priority"!==Dn(t)||1===Op(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(wr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Or,(g,y)=>{r[g]=y.val(t),i++,u&&n.INTEGER_REGEXP_.test(g)?a=Math.max(a,Number(g)):u=!1}),!t&&u&&a<2*i){const g=[];for(const y in r)g[y]=r[y];return g}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+uj(this.getPriority().val())+":"),this.forEachChild(Or,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":IH(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new Tn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Tn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Tn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Tn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Tn.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===YD?-1:0}withIndex(t){if(t===Ed||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ed||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Or),a=r.getIterator(Or);let u=i.getNext(),g=a.getNext();for(;u&&g;){if(u.name!==g.name||!u.node.equals(g.node))return!1;u=i.getNext(),g=a.getNext()}return null===u&&null===g}return!1}return!1}}resolveIndex_(t){return t===Ed?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const YD=new class z4 extends fn{constructor(){super(new Ma(gk),fn.EMPTY_NODE,sf.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return fn.EMPTY_NODE}isEmpty(){return!1}};function li(n,e=null){if(null===n)return fn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ee.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new H0(n,li(e));if(n instanceof Array){let t=fn.EMPTY_NODE;return xs(n,(r,i)=>{if((0,ee.r3)(n,r)&&"."!==r.substring(0,1)){const a=li(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(li(e))}{const t=[];let r=!1;if(xs(n,(u,g)=>{if("."!==u.substring(0,1)){const y=li(g);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Tn(u,y)))}}),0===t.length)return fn.EMPTY_NODE;const a=rA(t,V4,u=>u.name,gk);if(r){const u=rA(t,Or.getCompare());return new fn(a,li(e),new sf({".priority":u},{".priority":Or}))}return new fn(a,li(e),sf.Default)}}Object.defineProperties(Tn,{MIN:{value:new Tn(rf,fn.EMPTY_NODE)},MAX:{value:new Tn(wd,YD)}}),lj.__EMPTY_NODE=fn.EMPTY_NODE,H0.__childrenNodeConstructor=fn,function U4(n){mk=n}(YD),function j4(n){fj=n}(YD),function H4(n){hj=n}(li);class yk extends eA{constructor(e){super(),this.indexPath_=e,(0,ee.hu)(!In(e)&&".priority"!==Dn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?w_(e.name,t.name):a}makePost(e,t){const r=li(e),i=fn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Tn(t,i)}maxPost(){const e=fn.EMPTY_NODE.updateChild(this.indexPath_,YD);return new Tn(wd,e)}toString(){return zD(this.indexPath_,0).join("/")}}const vk=new class q4 extends eA{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?w_(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tn.MIN}maxPost(){return Tn.MAX}makePost(e,t){const r=li(e);return new Tn(t,r)}toString(){return".value"}};function QD(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ek{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Or}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ee.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Or}copy(){const e=new Ek;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vj(n){const e={};if(n.isDefault())return e;let t;return n.index_===Or?t="$priority":n.index_===vk?t="$value":n.index_===Ed?t="$key":((0,ee.hu)(n.index_ instanceof yk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ee.Wl)(t),n.startSet_&&(e.startAt=(0,ee.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,ee.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,ee.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,ee.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function bj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Or&&(e.i=n.index_.toString()),e}class sA extends ej{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=jD("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ee.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=sA.getListenId_(e,r),g={};this.listens_[u]=g;const y=vj(e._queryParams);this.restRequest_(a+".json",y,(b,T)=>{let N=T;if(404===b&&(N=null,b=null),null===b&&this.onDataUpdate_(a,N,!1,r),(0,ee.DV)(this.listens_,u)===g){let k;k=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(k,null)}})}unlisten(e,t){const r=sA.getListenId_(e,t);delete this.listens_[r]}get(e){const t=vj(e._queryParams),r=e._path.toString(),i=new ee.BH;return this.restRequest_(r+".json",t,(a,u)=>{let g=u;404===a&&(g=null,a=null),null===a?(this.onDataUpdate_(r,g,!1,null),i.resolve(g)):i.reject(new Error(g))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ee.xO)(t);this.log_("Sending REST request for "+u);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(r&&4===g.readyState){this.log_("REST Response for "+u+" received. status:",g.status,"response:",g.responseText);let y=null;if(g.status>=200&&g.status<300){try{y=(0,ee.cI)(g.responseText)}catch{To("Failed to parse JSON response for "+u+": "+g.responseText)}r(null,y)}else 401!==g.status&&404!==g.status&&To("Got unsuccessful REST response for "+u+" Status: "+g.status),r(g.status);r=null}},g.open("GET",u,!0),g.send()})}}class rq{constructor(){this.rootNode_=fn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function oA(){return{value:null,children:new Map}}function W0(n,e,t){if(In(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Dn(e);n.children.has(r)||n.children.set(r,oA()),W0(n.children.get(r),e=wr(e),t)}}function Tk(n,e,t){null!==n.value?t(e,n.value):function iq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Tk(i,new ir(e.toString()+"/"+r),t)})}class sq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xs(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class lq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sq(e);const r=1e4+2e4*Math.random();GD(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xs(e,(i,a)=>{a>0&&(0,ee.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),GD(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var cu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(cu||(cu={})),cu))();function Nk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aA{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=cu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(In(this.path)){if(null!=this.affectedTree.value)return(0,ee.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ir(e));return new aA(qn(),t,this.revert)}}return(0,ee.hu)(Dn(this.path)===e,"operationForChild called for unrelated child."),new aA(wr(this.path),this.affectedTree,this.revert)}}class I_{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=cu.OVERWRITE}operationForChild(e){return In(this.path)?new I_(this.source,qn(),this.snap.getImmediateChild(e)):new I_(this.source,wr(this.path),this.snap)}}class z0{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=cu.MERGE}operationForChild(e){if(In(this.path)){const t=this.children.subtree(new ir(e));return t.isEmpty()?null:t.value?new I_(this.source,qn(),t.value):new z0(this.source,qn(),t)}return(0,ee.hu)(Dn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new z0(this.source,wr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(In(e))return this.isFullyInitialized()&&!this.filtered_;const t=Dn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function eI(n,e,t,r,i,a){const u=r.filter(g=>g.type===t);u.sort((g,y)=>function hq(n,e,t){if(null==e.childName||null==t.childName)throw(0,ee.g5)("Should only compare child_ events.");const r=new Tn(e.childName,e.snapshotNode),i=new Tn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,g,y)),u.forEach(g=>{const y=function dq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,g,a);i.forEach(b=>{b.respondsTo(g.type)&&e.push(b.createEvent(y,n.query_))})})}function lA(n,e){return{eventCache:n,serverCache:e}}function tI(n,e,t,r){return lA(new kp(e,t,r),n.serverCache)}function Ej(n,e,t,r){return lA(n.eventCache,new kp(e,t,r))}function uA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function C_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xk;class kr{constructor(e,t=(()=>(xk||(xk=new Ma(QK)),xk))()){this.value=e,this.children=t}static fromObject(e){let t=new kr(null);return xs(e,(r,i)=>{t=t.set(new ir(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:qn(),value:this.value};if(In(e))return null;{const r=Dn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(wr(e),t);return null!=a?{path:ni(new ir(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(In(e))return this;{const t=Dn(e),r=this.children.get(t);return null!==r?r.subtree(wr(e)):new kr(null)}}set(e,t){if(In(e))return new kr(t,this.children);{const r=Dn(e),a=(this.children.get(r)||new kr(null)).set(wr(e),t),u=this.children.insert(r,a);return new kr(this.value,u)}}remove(e){if(In(e))return this.children.isEmpty()?new kr(null):new kr(null,this.children);{const t=Dn(e),r=this.children.get(t);if(r){const i=r.remove(wr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new kr(null):new kr(this.value,a)}return this}}get(e){if(In(e))return this.value;{const t=Dn(e),r=this.children.get(t);return r?r.get(wr(e)):null}}setTree(e,t){if(In(e))return t;{const r=Dn(e),a=(this.children.get(r)||new kr(null)).setTree(wr(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new kr(this.value,u)}}fold(e){return this.fold_(qn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(ni(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,qn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(In(e))return null;{const a=Dn(e),u=this.children.get(a);return u?u.findOnPath_(wr(e),ni(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,qn(),t)}foreachOnPath_(e,t,r){if(In(e))return this;{this.value&&r(t,this.value);const i=Dn(e),a=this.children.get(i);return a?a.foreachOnPath_(wr(e),ni(t,i),r):new kr(null)}}foreach(e){this.foreach_(qn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ni(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class uc{constructor(e){this.writeTree_=e}static empty(){return new uc(new kr(null))}}function nI(n,e,t){if(In(e))return new uc(new kr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=ta(i,e);return a=a.updateChild(u,t),new uc(n.writeTree_.set(i,a))}{const i=new kr(t),a=n.writeTree_.setTree(e,i);return new uc(a)}}}function Rk(n,e,t){let r=n;return xs(t,(i,a)=>{r=nI(r,ni(e,i),a)}),r}function Dj(n,e){if(In(e))return uc.empty();{const t=n.writeTree_.setTree(e,new kr(null));return new uc(t)}}function Mk(n,e){return null!=T_(n,e)}function T_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ta(t.path,e)):null}function Ij(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Or,(r,i)=>{e.push(new Tn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Tn(r,i.value))}),e}function Pp(n,e){if(In(e))return n;{const t=T_(n,e);return new uc(null!=t?new kr(t):n.writeTree_.subtree(e))}}function Ok(n){return n.writeTree_.isEmpty()}function K0(n,e){return Cj(qn(),n.writeTree_,e)}function Cj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,ee.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Cj(ni(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ni(n,".priority"),r)),t}}function cA(n,e){return xj(e,n)}function yq(n,e){if(n.snap)return uu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&uu(ni(n.path,t),e))return!0;return!1}function bq(n){return n.visible}function Tj(n,e,t){let r=uc.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let g;if(a.snap)uu(t,u)?(g=ta(t,u),r=nI(r,g,a.snap)):uu(u,t)&&(g=ta(u,t),r=nI(r,qn(),a.snap.getChild(g)));else{if(!a.children)throw(0,ee.g5)("WriteRecord should have .snap or .children");if(uu(t,u))g=ta(t,u),r=Rk(r,g,a.children);else if(uu(u,t))if(g=ta(u,t),In(g))r=Rk(r,qn(),a.children);else{const y=(0,ee.DV)(a.children,Dn(g));if(y){const b=y.getChild(wr(g));r=nI(r,qn(),b)}}}}}return r}function Sj(n,e,t,r,i){if(r||i){const a=Pp(n.visibleWrites,e);return!i&&Ok(a)?t:i||null!=t||Mk(a,qn())?K0(Tj(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(uu(b.path,e)||uu(e,b.path))},e),t||fn.EMPTY_NODE):null}{const a=T_(n.visibleWrites,e);if(null!=a)return a;{const u=Pp(n.visibleWrites,e);return Ok(u)?t:null!=t||Mk(u,qn())?K0(u,t||fn.EMPTY_NODE):null}}}function dA(n,e,t,r){return Sj(n.writeTree,n.treePath,e,t,r)}function kk(n,e){return function wq(n,e,t){let r=fn.EMPTY_NODE;const i=T_(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Or,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Pp(n.visibleWrites,e);return t.forEachChild(Or,(u,g)=>{const y=K0(Pp(a,new ir(u)),g);r=r.updateImmediateChild(u,y)}),Ij(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return Ij(Pp(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function Aj(n,e,t,r){return function Eq(n,e,t,r,i){(0,ee.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=ni(e,t);if(Mk(n.visibleWrites,a))return null;{const u=Pp(n.visibleWrites,a);return Ok(u)?i.getChild(t):K0(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function hA(n,e){return function Iq(n,e){return T_(n.visibleWrites,e)}(n.writeTree,ni(n.treePath,e))}function Pk(n,e,t){return function Dq(n,e,t,r){const i=ni(e,t),a=T_(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?K0(Pp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Nj(n,e){return xj(ni(n.treePath,e),n.writeTree)}function xj(n,e){return{treePath:n,writeTree:e}}class Aq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,ee.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ee.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,QD(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,function ZD(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,function G0(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,ee.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,QD(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Rj=new class Nq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Fk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new kp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:C_(this.viewCache_),a=function Sq(n,e,t,r,i,a){return function Cq(n,e,t,r,i,a,u){let g;const y=Pp(n.visibleWrites,e),b=T_(y,qn());if(null!=b)g=b;else{if(null==t)return[];g=K0(y,t)}if(g=g.withIndex(u),g.isEmpty()||g.isLeafNode())return[];{const T=[],N=u.getCompare(),k=a?g.getReverseIteratorFrom(r,u):g.getIteratorFrom(r,u);let U=k.getNext();for(;U&&T.length<i;)0!==N(U,r)&&T.push(U),U=k.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function Mj(n,e,t,r,i,a){const u=e.eventCache;if(null!=hA(r,t))return e;{let g,y;if(In(t))if((0,ee.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=C_(e),N=kk(r,b instanceof fn?b:fn.EMPTY_NODE);g=n.filter.updateFullNode(e.eventCache.getNode(),N,a)}else{const b=dA(r,C_(e));g=n.filter.updateFullNode(e.eventCache.getNode(),b,a)}else{const b=Dn(t);if(".priority"===b){(0,ee.hu)(1===Op(t),"Can't have a priority with additional path components");const T=u.getNode();y=e.serverCache.getNode();const N=Aj(r,t,T,y);g=null!=N?n.filter.updatePriority(T,N):u.getNode()}else{const T=wr(t);let N;if(u.isCompleteForChild(b)){y=e.serverCache.getNode();const k=Aj(r,t,u.getNode(),y);N=null!=k?u.getNode().getImmediateChild(b).updateChild(T,k):u.getNode().getImmediateChild(b)}else N=Pk(r,b,e.serverCache);g=null!=N?n.filter.updateChild(u.getNode(),b,N,T,i,a):u.getNode()}}return tI(e,g,u.isFullyInitialized()||In(t),n.filter.filtersNodes())}}function fA(n,e,t,r,i,a,u,g){const y=e.serverCache;let b;const T=u?n.filter:n.filter.getIndexedFilter();if(In(t))b=T.updateFullNode(y.getNode(),r,null);else if(T.filtersNodes()&&!y.isFiltered()){const U=y.getNode().updateChild(t,r);b=T.updateFullNode(y.getNode(),U,null)}else{const U=Dn(t);if(!y.isCompleteForPath(t)&&Op(t)>1)return e;const q=wr(t),me=y.getNode().getImmediateChild(U).updateChild(q,r);b=".priority"===U?T.updatePriority(y.getNode(),me):T.updateChild(y.getNode(),U,me,q,Rj,null)}const N=Ej(e,b,y.isFullyInitialized()||In(t),T.filtersNodes());return Mj(n,N,t,i,new Fk(i,N,a),g)}function Lk(n,e,t,r,i,a,u){const g=e.eventCache;let y,b;const T=new Fk(i,e,a);if(In(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,u),y=tI(e,b,!0,n.filter.filtersNodes());else{const N=Dn(t);if(".priority"===N)b=n.filter.updatePriority(e.eventCache.getNode(),r),y=tI(e,b,g.isFullyInitialized(),g.isFiltered());else{const k=wr(t),U=g.getNode().getImmediateChild(N);let q;if(In(k))q=r;else{const ae=T.getCompleteChild(N);q=null!=ae?".priority"===hk(k)&&ae.getChild(ij(k)).isEmpty()?ae:ae.updateChild(k,r):fn.EMPTY_NODE}y=U.equals(q)?e:tI(e,n.filter.updateChild(g.getNode(),N,q,k,T,u),g.isFullyInitialized(),n.filter.filtersNodes())}}return y}function Oj(n,e){return n.eventCache.isCompleteForChild(e)}function kj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bk(n,e,t,r,i,a,u,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,y=e;b=In(t)?r:new kr(null).setTree(t,r);const T=e.serverCache.getNode();return b.children.inorderTraversal((N,k)=>{if(T.hasChild(N)){const q=kj(0,e.serverCache.getNode().getImmediateChild(N),k);y=fA(n,y,new ir(N),q,i,a,u,g)}}),b.children.inorderTraversal((N,k)=>{const U=!e.serverCache.isCompleteForChild(N)&&null===k.value;if(!T.hasChild(N)&&!U){const ae=kj(0,e.serverCache.getNode().getImmediateChild(N),k);y=fA(n,y,new ir(N),ae,i,a,u,g)}}),y}function Hq(n,e){const t=C_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!In(e)&&!t.getImmediateChild(Dn(e)).isEmpty())?t.getChild(e):null}function Lj(n,e,t,r){e.type===cu.MERGE&&null!==e.source.queryId&&((0,ee.hu)(C_(n.viewCache_),"We should always have a full cache before handling merges"),(0,ee.hu)(uA(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Mq(n,e,t,r,i){const a=new Aq;let u,g;if(t.type===cu.OVERWRITE){const b=t;b.source.fromUser?u=Lk(n,e,b.path,b.snap,r,i,a):((0,ee.hu)(b.source.fromServer,"Unknown source."),g=b.source.tagged||e.serverCache.isFiltered()&&!In(b.path),u=fA(n,e,b.path,b.snap,r,i,g,a))}else if(t.type===cu.MERGE){const b=t;b.source.fromUser?u=function kq(n,e,t,r,i,a,u){let g=e;return r.foreach((y,b)=>{const T=ni(t,y);Oj(e,Dn(T))&&(g=Lk(n,g,T,b,i,a,u))}),r.foreach((y,b)=>{const T=ni(t,y);Oj(e,Dn(T))||(g=Lk(n,g,T,b,i,a,u))}),g}(n,e,b.path,b.children,r,i,a):((0,ee.hu)(b.source.fromServer,"Unknown source."),g=b.source.tagged||e.serverCache.isFiltered(),u=Bk(n,e,b.path,b.children,r,i,g,a))}else if(t.type===cu.ACK_USER_WRITE){const b=t;u=b.revert?function Lq(n,e,t,r,i,a){let u;if(null!=hA(r,t))return e;{const g=new Fk(r,e,i),y=e.eventCache.getNode();let b;if(In(t)||".priority"===Dn(t)){let T;if(e.serverCache.isFullyInitialized())T=dA(r,C_(e));else{const N=e.serverCache.getNode();(0,ee.hu)(N instanceof fn,"serverChildren would be complete if leaf node"),T=kk(r,N)}b=n.filter.updateFullNode(y,T,a)}else{const T=Dn(t);let N=Pk(r,T,e.serverCache);null==N&&e.serverCache.isCompleteForChild(T)&&(N=y.getImmediateChild(T)),b=null!=N?n.filter.updateChild(y,T,N,wr(t),g,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(y,T,fn.EMPTY_NODE,wr(t),g,a):y,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=dA(r,C_(e)),u.isLeafNode()&&(b=n.filter.updateFullNode(b,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=hA(r,qn()),tI(e,b,u,n.filter.filtersNodes())}}(n,e,b.path,r,i,a):function Pq(n,e,t,r,i,a,u){if(null!=hA(i,t))return e;const g=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(In(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return fA(n,e,t,y.getNode().getChild(t),i,a,g,u);if(In(t)){let b=new kr(null);return y.getNode().forEachChild(Ed,(T,N)=>{b=b.set(new ir(T),N)}),Bk(n,e,t,b,i,a,g,u)}return e}{let b=new kr(null);return r.foreach((T,N)=>{const k=ni(t,T);y.isCompleteForPath(k)&&(b=b.set(T,y.getNode().getChild(k)))}),Bk(n,e,t,b,i,a,g,u)}}(n,e,b.path,b.affectedTree,r,i,a)}else{if(t.type!==cu.LISTEN_COMPLETE)throw(0,ee.g5)("Unknown operation type: "+t.type);u=function Fq(n,e,t,r,i){const a=e.serverCache;return Mj(n,Ej(e,a.getNode(),a.isFullyInitialized()||In(t),a.isFiltered()),t,r,Rj,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function Oq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=uA(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(function yj(n){return{type:"value",snapshotNode:n}}(uA(e)))}}(e,u,y),{viewCache:u,changes:y}}(n.processor_,i,e,t,r);return function Rq(n,e){(0,ee.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ee.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,ee.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,function Bj(n,e,t,r){return function cq(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function Z4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),eI(n,i,"child_removed",e,r,t),eI(n,i,"child_added",e,r,t),eI(n,i,"child_moved",a,r,t),eI(n,i,"child_changed",e,r,t),eI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,a.changes,a.viewCache.eventCache.getNode(),null)}let pA,mA;function Vk(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,ee.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Lj(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(Lj(u,e,t,r));return a}}function Fp(n,e){let t=null;for(const r of n.views.values())t=t||Hq(r,e);return t}class Gj{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kr(null),this.pendingWriteTree_=function Tq(){return{visibleWrites:uc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Uk(n,e,t,r,i){return function pq(n,e,t,r,i){(0,ee.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=nI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?q0(n,new I_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Bp(n,e,t=!1){const r=function mq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function _q(n,e){const t=n.allWrites.findIndex(g=>g.writeId===e);(0,ee.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const g=n.allWrites[u];g.visible&&(u>=t&&yq(g,r.path)?i=!1:uu(r.path,g.path)&&(a=!0)),u--}return!!i&&(a?(function vq(n){n.visibleWrites=Tj(n.allWrites,bq,qn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Dj(n.visibleWrites,r.path):xs(r.children,y=>{n.visibleWrites=Dj(n.visibleWrites,ni(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new kr(null);return null!=r.snap?a=a.set(qn(),!0):xs(r.children,u=>{a=a.set(new ir(u),!0)}),q0(n,new aA(r.path,a,t))}return[]}function rI(n,e,t){return q0(n,new I_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yA(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,g)=>{const b=Fp(g,ta(u,e));if(b)return b});return Sj(i,e,a,t,!0)}function q0(n,e){return zj(e,n.syncPointTree_,null,cA(n.pendingWriteTree_,qn()))}function zj(n,e,t,r){if(In(n.path))return Kj(n,e,t,r);{const i=e.get(qn());null==t&&null!=i&&(t=Fp(i,qn()));let a=[];const u=Dn(n.path),g=n.operationForChild(u),y=e.children.get(u);if(y&&g){const b=t?t.getImmediateChild(u):null,T=Nj(r,u);a=a.concat(zj(g,y,b,T))}return i&&(a=a.concat(Vk(i,n,r,t))),a}}function Kj(n,e,t,r){const i=e.get(qn());null==t&&null!=i&&(t=Fp(i,qn()));let a=[];return e.children.inorderTraversal((u,g)=>{const y=t?t.getImmediateChild(u):null,b=Nj(r,u),T=n.operationForChild(u);T&&(a=a.concat(Kj(T,g,y,b)))}),i&&(a=a.concat(Vk(i,n,r,t))),a}function jk(n,e){return n.tagToQueryMap.get(e)}function $k(n){const e=n.indexOf("$");return(0,ee.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ir(n.substr(0,e))}}function Gk(n,e,t){const r=n.syncPointTree_.get(e);return(0,ee.hu)(r,"Missing sync point for query tag that we're tracking"),Vk(r,t,cA(n.pendingWriteTree_,e),null)}class Wk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Wk(t)}node(){return this.node_}}class zk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ni(this.path_,e);return new zk(this.syncTree_,t)}node(){return yA(this.syncTree_,this.path_)}}const Yj=function(n,e,t){return n&&"object"==typeof n?((0,ee.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?u5(n[".sv"],e,t):"object"==typeof n[".sv"]?c5(n[".sv"],e):void(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},u5=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ee.hu)(!1,"Unexpected server value: "+n)},c5=function(n,e,t){n.hasOwnProperty("increment")||(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ee.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,ee.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},Kk=function(n,e,t){return qk(n,new Wk(e),t)};function qk(n,e,t){const r=n.getPriority().val(),i=Yj(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,g=Yj(u.getValue(),e,t);return g!==u.getValue()||i!==u.getPriority().val()?new H0(g,li(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new H0(i))),u.forEachChild(Or,(g,y)=>{const b=qk(y,e.getImmediateChild(g),t);b!==y&&(a=a.updateImmediateChild(g,b))}),a}}class Yk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function bA(n,e){let t=e instanceof ir?e:new ir(e),r=n,i=Dn(t);for(;null!==i;){const a=(0,ee.DV)(r.node.children,i)||{children:{},childCount:0};r=new Yk(i,r,a),t=wr(t),i=Dn(t)}return r}function S_(n){return n.node.value}function Zk(n,e){n.node.value=e,Qk(n)}function Qj(n){return n.node.childCount>0}function wA(n,e){xs(n.node.children,(t,r)=>{e(new Yk(t,n,r))})}function Jj(n,e,t,r){t&&!r&&e(n),wA(n,i=>{Jj(i,e,!0,r)}),t&&r&&e(n)}function oI(n){return new ir(null===n.parent?n.name:oI(n.parent)+"/"+n.name)}function Qk(n){null!==n.parent&&function f5(n,e,t){const r=function d5(n){return void 0===S_(n)&&!Qj(n)}(t),i=(0,ee.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Qk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Qk(n))}(n.parent,n.name,n)}const p5=/[\[\].#$\/\u0000-\u001F\u007F]/,g5=/[\[\].#$\u0000-\u001F\u007F]/,Jk=10485760,EA=function(n){return"string"==typeof n&&0!==n.length&&!p5.test(n)},lI=function(n,e,t){const r=t instanceof ir?new R4(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+E_(r));if("function"==typeof e)throw new Error(n+"contains a function "+E_(r)+" with contents = "+e.toString());if(YS(e))throw new Error(n+"contains "+e.toString()+" "+E_(r));if("string"==typeof e&&e.length>Jk/3&&(0,ee.ug)(e)>Jk)throw new Error(n+"contains a string greater than "+Jk+" utf8 bytes "+E_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(xs(e,(u,g)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!EA(u)))throw new Error(n+" contains an invalid key ("+u+") "+E_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function M4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ee.ug)(e),sj(n)})(r,u),lI(n,g,r),function O4(n){const e=n.parts_.pop();n.byteLength_-=(0,ee.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+E_(r)+" in addition to actual children.")}},t$=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!EA(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!g5.test(n)}(n)}(t))throw new Error((0,ee.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class v5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vl(n,e,t){(function DA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!fk(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function r$(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(b5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>uu(r,e)||uu(e,r))}function b5(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();b_&&Ns("event: "+t.toString()),V0(r)}}}class E5{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new v5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oA(),this.transactionQueueTree_=new Yk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function s$(n){const t=n.infoData_.getNode(new ir(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function cI(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:s$(n)})}function o$(n,e,t,r,i){n.dataUpdateCount++;const a=new ir(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const y=(0,ee.UI)(t,b=>li(b));u=function n5(n,e,t,r){const i=jk(n,r);if(i){const a=$k(i),u=a.path,g=a.queryId,y=ta(u,e),b=kr.fromObject(t);return Gk(n,u,new z0(Nk(g),y,b))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=li(t);u=function Wj(n,e,t,r){const i=jk(n,r);if(null!=i){const a=$k(i),u=a.path,g=a.queryId,y=ta(u,e);return Gk(n,u,new I_(Nk(g),y,t))}return[]}(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,ee.UI)(t,b=>li(b));u=function Xq(n,e,t){const r=kr.fromObject(t);return q0(n,new z0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=li(t);u=rI(n.serverSyncTree_,a,y)}let g=a;u.length>0&&(g=Z0(n,a)),vl(n.eventQueue_,g,u)}function a$(n,e){tP(n,"connected",e),!1===e&&function S5(n){Y0(n,"onDisconnectEvents");const e=cI(n),t=oA();Tk(n.onDisconnect_,qn(),(i,a)=>{const u=function(n,e,t,r){return qk(e,new zk(t,n),r)}(i,a,n.serverSyncTree_,e);W0(t,i,u)});let r=[];Tk(t,qn(),(i,a)=>{r=r.concat(rI(n.serverSyncTree_,i,a));const u=function sP(n,e){const t=oI(c$(n,e)),r=bA(n.transactionQueueTree_,e);return function h5(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{oP(n,i)}),oP(n,r),Jj(r,i=>{oP(n,i)}),t}(n,i);Z0(n,u)}),n.onDisconnect_=oA(),vl(n.eventQueue_,qn(),r)}(n)}function tP(n,e,t){const r=new ir("/.info/"+e),i=li(t);n.infoData_.updateSnapshot(r,i);const a=rI(n.infoSyncTree_,r,i);vl(n.eventQueue_,r,a)}function IA(n){return n.nextWriteId_++}function Y0(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ns(t,...e)}function iP(n,e,t){return yA(n.serverSyncTree_,e,t)||fn.EMPTY_NODE}function CA(n,e=n.transactionQueueTree_){if(e||TA(n,e),S_(e)){const t=d$(n,e);(0,ee.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function k5(n,e,t){const r=t.map(b=>b.currentWriteId),i=iP(n,e,r);let a=i;const u=i.hash();for(let b=0;b<t.length;b++){const T=t[b];(0,ee.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const N=ta(e,T.path);a=a.updateChild(N,T.currentOutputSnapshotRaw)}const g=a.val(!0),y=e;n.server_.put(y.toString(),g,b=>{Y0(n,"transaction put response",{path:y.toString(),status:b});let T=[];if("ok"===b){const N=[];for(let k=0;k<t.length;k++)t[k].status=2,T=T.concat(Bp(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&N.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();TA(n,bA(n.transactionQueueTree_,e)),CA(n,n.transactionQueueTree_),vl(n.eventQueue_,e,T);for(let k=0;k<N.length;k++)V0(N[k])}else{if("datastale"===b)for(let N=0;N<t.length;N++)t[N].status=3===t[N].status?4:0;else{To("transaction at "+y.toString()+" failed: "+b);for(let N=0;N<t.length;N++)t[N].status=4,t[N].abortReason=b}Z0(n,e)}},u)}(n,oI(e),t)}else Qj(e)&&wA(e,t=>{CA(n,t)})}function Z0(n,e){const t=c$(n,e),r=oI(t);return function P5(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const y=e[g],b=ta(t,y.path);let N,T=!1;if((0,ee.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)T=!0,N=y.abortReason,i=i.concat(Bp(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)T=!0,N="maxretry",i=i.concat(Bp(n.serverSyncTree_,y.currentWriteId,!0));else{const k=iP(n,y.path,u);y.currentInputSnapshot=k;const U=e[g].update(k.val());if(void 0!==U){lI("transaction failed: Data returned ",U,y.path);let q=li(U);"object"==typeof U&&null!=U&&(0,ee.r3)(U,".priority")||(q=q.updatePriority(k.getPriority()));const me=y.currentWriteId,nt=cI(n),ot=Kk(q,k,nt);y.currentOutputSnapshotRaw=q,y.currentOutputSnapshotResolved=ot,y.currentWriteId=IA(n),u.splice(u.indexOf(me),1),i=i.concat(Uk(n.serverSyncTree_,y.path,ot,y.currentWriteId,y.applyLocally)),i=i.concat(Bp(n.serverSyncTree_,me,!0))}else T=!0,N="nodata",i=i.concat(Bp(n.serverSyncTree_,y.currentWriteId,!0))}vl(n.eventQueue_,t,i),i=[],T&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&r.push("nodata"===N?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(N),!1,null)))}TA(n,n.transactionQueueTree_);for(let g=0;g<r.length;g++)V0(r[g]);CA(n,n.transactionQueueTree_)}(n,d$(n,t),r),r}function c$(n,e){let t,r=n.transactionQueueTree_;for(t=Dn(e);null!==t&&void 0===S_(r);)r=bA(r,t),t=Dn(e=wr(e));return r}function d$(n,e){const t=[];return h$(n,e,t),t.sort((r,i)=>r.order-i.order),t}function h$(n,e,t){const r=S_(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wA(e,i=>{h$(n,i,t)})}function TA(n,e){const t=S_(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Zk(e,t.length>0?t:void 0)}wA(e,r=>{TA(n,r)})}function oP(n,e){const t=S_(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,ee.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,ee.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Bp(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Zk(e,void 0):t.length=a+1,vl(n.eventQueue_,oI(e),i);for(let u=0;u<r.length;u++)V0(r[u])}}const aP=function(n,e){const t=B5(n),r=t.namespace;return"firebase.com"===t.domain&&bd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&bd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&To("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ok(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new ir(t.pathString)}},B5=function(n){let e="",t="",r="",i="",a="",u=!0,g="https",y=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(g=n.substring(0,b-1),n=n.substring(b+2));let T=n.indexOf("/");-1===T&&(T=n.length);let N=n.indexOf("?");-1===N&&(N=n.length),e=n.substring(0,Math.min(T,N)),T<N&&(i=function F5(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,N)));const k=function L5(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):To(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,N)));b=e.indexOf(":"),b>=0?(u="https"===g||"wss"===g,y=parseInt(e.substring(b+1),10)):b=e.length;const U=e.slice(0,b);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:u,scheme:g,pathString:i,namespace:a}};class bl{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return In(this._path)?null:hk(this._path)}get ref(){return new cc(this._repo,this._path)}get _queryIdentifier(){const e=bj(this._queryParams),t=rk(e);return"{}"===t?"default":t}get _queryObject(){return bj(this._queryParams)}isEqual(e){if(!((e=(0,ee.m9)(e))instanceof bl))return!1;const t=this._repo===e._repo,r=fk(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function N4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class cc extends bl{constructor(e,t){super(e,t,new Ek,!1)}get parent(){const e=ij(this._path);return null===e?null:new cc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function Gq(n){(0,ee.hu)(!pA,"__referenceConstructor has already been defined"),pA=n})(cc),function Yq(n){(0,ee.hu)(!mA,"__referenceConstructor has already been defined"),mA=n}(cc);const uP={};class rY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function D5(n,e,t){if(n.stats_=uk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sA(n.repoInfo_,(r,i,a,u)=>{o$(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>a$(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ee.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new D_(n.repoInfo_,e,(r,i,a,u)=>{o$(n,r,i,a,u)},r=>{a$(n,r)},r=>{!function I5(n,e){xs(e,(t,r)=>{tP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function a4(n,e){const t=n.toString();return lk[t]||(lk[t]=e()),lk[t]}(n.repoInfo_,()=>new lq(n.stats_,n.server_)),n.infoData_=new rq,n.infoSyncTree_=new Gj({startListening:(r,i,a,u)=>{let g=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(g=rI(n.infoSyncTree_,r._path,y),setTimeout(()=>{u("ok")},0)),g},stopListening:()=>{}}),tP(n,"connected",!1),n.serverSyncTree_=new Gj({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(g,y)=>{const b=u(g,y);vl(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cc(this._repo,qn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function eY(n,e){const t=uP[e];(!t||t[n.key]!==n)&&bd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function u$(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&bd("Cannot call "+e+" on a deleted database.")}}function iY(n=(0,rn.getApp)(),e){const t=(0,rn._getProvider)(n,"database").getImmediate({identifier:e}),r=(0,ee.P0)("database");return r&&function sY(n,e,t,r={}){(n=(0,ee.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&bd("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&bd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new WD(WD.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,ee.Sg)(r.mockUserToken,n.app.options.projectId);a=new WD(u)}!function J5(n,e,t,r){n.repoInfo_=new ok(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r),t}D_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},D_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function oY(n){(function zK(n){ek=n})(rn.SDK_VERSION),(0,rn._registerComponent)(new bo.wA("database",(e,{instanceIdentifier:t})=>function X5(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||bd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ns("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,b,u=aP(a,i),g=u.repoInfo;typeof process<"u"&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(y=!0,a=`http://${b}?ns=${g.namespace}`,u=aP(a,i),g=u.repoInfo):y=!u.repoInfo.secure;const T=i&&y?new WD(WD.OWNER):new i4(n.name,n.options,e);t$("Invalid Firebase Database URL",u),In(u.path)||bd("Database URL must point to the root of a Firebase Database (not including a child path).");const N=function tY(n,e,t,r){let i=uP[e.name];i||(i={},uP[e.name]=i);let a=i[n.toURLString()];return a&&bd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new E5(n,!1,t,r),i[n.toURLString()]=a,a}(g,n,T,new r4(n.name,t));return new rY(N,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,rn.registerVersion)(bH,"0.13.9",n),(0,rn.registerVersion)(bH,"0.13.9","esm2017")}();class cP{constructor(e){return e}}const b$="database",dP=new h.OlP("angularfire2.database-instances");function dY(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cP(r)}}const hY={provide:class uY{constructor(){return hp(b$)}},deps:[[new h.FiY,dP]]},fY={provide:cP,useFactory:function cY(n,e){const t=dp(b$,n,e);return t&&new cP(t)},deps:[[new h.FiY,dP],y_]};let pY=(()=>{class n{constructor(){(0,rn.registerVersion)("angularfire",Ie.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[fY,hY]}),n})();function gY(n,...e){return{ngModule:pY,providers:[{provide:dP,useFactory:dY(n),multi:!0,deps:[h.R0b,h.zs3,hd,VS,[new h.FiY,JO],[new h.FiY,L0],...e]}]}}const mY=ET(iY,!0);class hP{constructor(e){return e}}const w$="firestore",fP=new h.OlP("angularfire2.firestore-instances");function vY(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new hP(r)}}const bY={provide:class _Y{constructor(){return hp(w$)}},deps:[[new h.FiY,fP]]},wY={provide:hP,useFactory:function yY(n,e){const t=dp(w$,n,e);return t&&new hP(t)},deps:[[new h.FiY,fP],y_]};let EY=(()=>{class n{constructor(){(0,rn.registerVersion)("angularfire",Ie.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[wY,bY]}),n})();function DY(n,...e){return{ngModule:EY,providers:[{provide:fP,useFactory:vY(n),multi:!0,deps:[h.R0b,h.zs3,hd,VS,[new h.FiY,JO],[new h.FiY,L0],...e]}]}}const IY=ET(rz,!0);let CY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[IK]}),n.\u0275inj=h.cJS({providers:[{provide:oc.Dh,useValue:qS.firebase}],imports:[qa,LK.register("ngsw-worker.js",{enabled:qS.production,registrationStrategy:"registerWhenStable:30000"}),PN,m6(()=>_6(qS.firebase)),GK(()=>WK()),gY(()=>mY()),DY(()=>IY())]}),n})();qS.production&&(0,h.G48)(),fa().bootstrapModule(CY).catch(n=>console.error(n))},127:(St,Ve,G)=>{"use strict";G.d(Ve,{Z:()=>h.Z});var h=G(3942);h.Z.registerVersion("firebase","9.12.1","app-compat")},5881:(St,Ve,G)=>{"use strict";G.r(Ve);var h=G(5861),R=G(3942),$=G(7573),we=G(2090),We=(G(9681),G(1877),G(4859));function ke(){return window}function Z(){return(Z=(0,h.Z)(function*(W,P,j){var ce;const{BuildInfo:Ue}=ke();(0,$.aq)(P.sessionId,"AuthEvent did not contain a session ID");const vt=yield Ce(P.sessionId),bt={};return(0,$.ar)()?bt.ibi=Ue.packageName:(0,$.as)()?bt.apn=Ue.packageName:(0,$.at)(W,"operation-not-supported-in-this-environment"),Ue.displayName&&(bt.appDisplayName=Ue.displayName),bt.sessionId=vt,(0,$.au)(W,j,P.type,void 0,null!==(ce=P.eventId)&&void 0!==ce?ce:void 0,bt)})).apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(W){const{BuildInfo:P}=ke(),j={};(0,$.ar)()?j.iosBundleId=P.packageName:(0,$.as)()?j.androidPackageName=P.packageName:(0,$.at)(W,"operation-not-supported-in-this-environment"),yield(0,$.av)(W,j)})).apply(this,arguments)}function Je(){return(Je=(0,h.Z)(function*(W,P,j){const{cordova:ce}=ke();let Ue=()=>{};try{yield new Promise((vt,bt)=>{let Me=null;function Ke(){var Jt;vt();const xn=null===(Jt=ce.plugins.browsertab)||void 0===Jt?void 0:Jt.close;"function"==typeof xn&&xn(),"function"==typeof j?.close&&j.close()}function zt(){Me||(Me=window.setTimeout(()=>{bt((0,$.aw)(W,"redirect-cancelled-by-user"))},2e3))}function Nn(){"visible"===document?.visibilityState&&zt()}P.addPassiveListener(Ke),document.addEventListener("resume",zt,!1),(0,$.as)()&&document.addEventListener("visibilitychange",Nn,!1),Ue=()=>{P.removePassiveListener(Ke),document.removeEventListener("resume",zt,!1),document.removeEventListener("visibilitychange",Nn,!1),Me&&window.clearTimeout(Me)}})}finally{Ue()}})).apply(this,arguments)}function Ce(W){return at.apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(W){const P=ut(W),j=yield crypto.subtle.digest("SHA-256",P);return Array.from(new Uint8Array(j)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ut(W){if((0,$.aq)(/[0-9a-zA-Z]+/.test(W),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(W);const P=new ArrayBuffer(W.length),j=new Uint8Array(P);for(let ce=0;ce<W.length;ce++)j[ce]=W.charCodeAt(ce);return j}class Ne extends $.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(P=>{this.resolveInialized=P})}addPassiveListener(P){this.passiveListeners.add(P)}removePassiveListener(P){this.passiveListeners.delete(P)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(P){return this.resolveInialized(),this.passiveListeners.forEach(j=>j(P)),super.onEvent(P)}initialized(){var P=this;return(0,h.Z)(function*(){yield P.initPromise})()}}function he(W){return ge.apply(this,arguments)}function ge(){return(ge=(0,h.Z)(function*(W){const P=yield ie()._get(ve(W));return P&&(yield ie()._remove(ve(W))),P})).apply(this,arguments)}function re(){const W=[],P="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let j=0;j<20;j++){const ce=Math.floor(Math.random()*P.length);W.push(P.charAt(ce))}return W.join("")}function ie(){return(0,$.ay)($.b)}function ve(W){return(0,$.az)("authEvent",W.config.apiKey,W.name)}function He(W){if(!W?.includes("?"))return{};const[P,...j]=W.split("?");return(0,we.zd)(j.join("?"))}function et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,$.aw)("no-auth-event")}}function tn(){var W;return(null===(W=self?.location)||void 0===W?void 0:W.protocol)||null}function Pr(W=(0,we.z$)()){return!("file:"!==tn()&&"ionic:"!==tn()&&"capacitor:"!==tn()||!W.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rs(){try{const W=self.localStorage,P=$.aI();if(W)return W.setItem(P,"1"),W.removeItem(P),!function ds(W=(0,we.z$)()){return function ra(){return(0,we.w1)()&&11===document?.documentMode}()||function Qn(W=(0,we.z$)()){return/Edge\/\d+/.test(W)}(W)}()||(0,we.hl)()}catch{return Jn()&&(0,we.hl)()}return!1}function Jn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fr(){return(function Qt(){return"http:"===tn()||"https:"===tn()}()||(0,we.ru)()||Pr())&&!function Gi(){return(0,we.b$)()||(0,we.UG)()}()&&Rs()&&!Jn()}function So(){return Pr()&&typeof document<"u"}function yt(){return(yt=(0,h.Z)(function*(){return!!So()&&new Promise(W=>{const P=setTimeout(()=>{W(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(P),W(!0)})})})).apply(this,arguments)}const cr={LOCAL:"local",NONE:"none",SESSION:"session"},mn=$.ax,ii="persistence";function Xn(W){return jn.apply(this,arguments)}function jn(){return(jn=(0,h.Z)(function*(W){yield W._initializationPromise;const P=Tt(),j=$.az(ii,W.config.apiKey,W.name);P&&P.setItem(j,W._getPersistence())})).apply(this,arguments)}function Tt(){var W;try{return(null===(W=function ri(){return typeof window<"u"?window:null}())||void 0===W?void 0:W.sessionStorage)||null}catch{return null}}const It=$.ax;class $t{constructor(){this.browserResolver=$.ay($.k),this.cordovaResolver=$.ay(class Cn{constructor(){this._redirectPersistence=$.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=$.aB,this._overrideRedirectResult=$.aC}_initialize(P){var j=this;return(0,h.Z)(function*(){const ce=P._key();let Ue=j.eventManagers.get(ce);return Ue||(Ue=new Ne(P),j.eventManagers.set(ce,Ue),j.attachCallbackListeners(P,Ue)),Ue})()}_openPopup(P){(0,$.at)(P,"operation-not-supported-in-this-environment")}_openRedirect(P,j,ce,Ue){var vt=this;return(0,h.Z)(function*(){!function pe(W){var P,j,ce,Ue,vt,bt,Me,Ke,zt,Nn;const Jt=ke();(0,$.ax)("function"==typeof(null===(P=Jt?.universalLinks)||void 0===P?void 0:P.subscribe),W,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,$.ax)(typeof(null===(j=Jt?.BuildInfo)||void 0===j?void 0:j.packageName)<"u",W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,$.ax)("function"==typeof(null===(vt=null===(Ue=null===(ce=Jt?.cordova)||void 0===ce?void 0:ce.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===vt?void 0:vt.openUrl),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,$.ax)("function"==typeof(null===(Ke=null===(Me=null===(bt=Jt?.cordova)||void 0===bt?void 0:bt.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===Ke?void 0:Ke.isAvailable),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,$.ax)("function"==typeof(null===(Nn=null===(zt=Jt?.cordova)||void 0===zt?void 0:zt.InAppBrowser)||void 0===Nn?void 0:Nn.open),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(P);const bt=yield vt._initialize(P);yield bt.initialized(),bt.resetRedirect(),(0,$.aD)(),yield vt._originValidation(P);const Me=function De(W,P,j=null){return{type:P,eventId:j,urlResponse:null,sessionId:re(),postBody:null,tenantId:W.tenantId,error:(0,$.aw)(W,"no-auth-event")}}(P,ce,Ue);yield function tt(W,P){return ie()._set(ve(W),P)}(P,Me);const Ke=yield function X(W,P,j){return Z.apply(this,arguments)}(P,Me,j),zt=yield function Ge(W){const{cordova:P}=ke();return new Promise(j=>{P.plugins.browsertab.isAvailable(ce=>{let Ue=null;ce?P.plugins.browsertab.openUrl(W):Ue=P.InAppBrowser.open(W,(0,$.ap)()?"_blank":"_system","location=yes"),j(Ue)})})}(Ke);return function ze(W,P,j){return Je.apply(this,arguments)}(P,bt,zt)})()}_isIframeWebStorageSupported(P,j){throw new Error("Method not implemented.")}_originValidation(P){const j=P._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function de(W){return Xe.apply(this,arguments)}(P)),this.originValidationPromises[j]}attachCallbackListeners(P,j){const{universalLinks:ce,handleOpenURL:Ue,BuildInfo:vt}=ke(),bt=setTimeout((0,h.Z)(function*(){yield he(P),j.onEvent(et())}),500),Me=function(){var Nn=(0,h.Z)(function*(Jt){clearTimeout(bt);const xn=yield he(P);let Ms=null;xn&&Jt?.url&&(Ms=function Te(W,P){var j,ce;const Ue=function qe(W){const P=He(W),j=P.link?decodeURIComponent(P.link):void 0,ce=He(j).link,Ue=P.deep_link_id?decodeURIComponent(P.deep_link_id):void 0;return He(Ue).link||Ue||ce||j||W}(P);if(Ue.includes("/__/auth/callback")){const vt=He(Ue),bt=vt.firebaseError?function fe(W){try{return JSON.parse(W)}catch{return null}}(decodeURIComponent(vt.firebaseError)):null,Me=null===(ce=null===(j=bt?.code)||void 0===j?void 0:j.split("auth/"))||void 0===ce?void 0:ce[1],Ke=Me?(0,$.aw)(Me):null;return Ke?{type:W.type,eventId:W.eventId,tenantId:W.tenantId,error:Ke,urlResponse:null,sessionId:null,postBody:null}:{type:W.type,eventId:W.eventId,tenantId:W.tenantId,sessionId:W.sessionId,urlResponse:Ue,postBody:null}}return null}(xn,Jt.url)),j.onEvent(Ms||et())});return function(xn){return Nn.apply(this,arguments)}}();typeof ce<"u"&&"function"==typeof ce.subscribe&&ce.subscribe(null,Me);const Ke=Ue,zt=`${vt.packageName.toLowerCase()}://`;ke().handleOpenURL=function(){var Nn=(0,h.Z)(function*(Jt){if(Jt.toLowerCase().startsWith(zt)&&Me({url:Jt}),"function"==typeof Ke)try{Ke(Jt)}catch(xn){console.error(xn)}});return function(Jt){return Nn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=$.a,this._completeRedirectFn=$.aB,this._overrideRedirectResult=$.aC}_initialize(P){var j=this;return(0,h.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._initialize(P)})()}_openPopup(P,j,ce,Ue){var vt=this;return(0,h.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup(P,j,ce,Ue)})()}_openRedirect(P,j,ce,Ue){var vt=this;return(0,h.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect(P,j,ce,Ue)})()}_isIframeWebStorageSupported(P,j){this.assertedUnderlyingResolver._isIframeWebStorageSupported(P,j)}_originValidation(P){return this.assertedUnderlyingResolver._originValidation(P)}get _shouldInitProactively(){return So()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var P=this;return(0,h.Z)(function*(){if(P.underlyingResolver)return;const j=yield function ui(){return yt.apply(this,arguments)}();P.underlyingResolver=j?P.cordovaResolver:P.browserResolver})()}}function bi(W){return W.unwrap()}function ci(W){return di(W)}function di(W){const{_tokenResponse:P}=W instanceof we.ZR?W.customData:W;if(!P)return null;if(!(W instanceof we.ZR)&&"temporaryProof"in P&&"phoneNumber"in P)return $.P.credentialFromResult(W);const j=P.providerId;if(!j||j===$.o.PASSWORD)return null;let ce;switch(j){case $.o.GOOGLE:ce=$.Q;break;case $.o.FACEBOOK:ce=$.N;break;case $.o.GITHUB:ce=$.T;break;case $.o.TWITTER:ce=$.W;break;default:const{oauthIdToken:Ue,oauthAccessToken:vt,oauthTokenSecret:bt,pendingToken:Me,nonce:Ke}=P;return vt||bt||Ue||Me?Me?j.startsWith("saml.")?$.aL._create(j,Me):$.J._fromParams({providerId:j,signInMethod:j,pendingToken:Me,idToken:Ue,accessToken:vt}):new $.U(j).credential({idToken:Ue,accessToken:vt,rawNonce:Ke}):null}return W instanceof we.ZR?ce.credentialFromError(W):ce.credentialFromResult(W)}function Wt(W,P){return P.catch(j=>{throw j instanceof we.ZR&&function Vt(W,P){var j,ce;const Ue=null===(j=P.customData)||void 0===j?void 0:j._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ce=P)||void 0===ce?void 0:ce.code))P.resolver=new hi(W,$.an(W,P));else if(Ue){const vt=di(P),bt=P;vt&&(bt.credential=vt,bt.tenantId=Ue.tenantId||void 0,bt.email=Ue.email||void 0,bt.phoneNumber=Ue.phoneNumber||void 0)}}(W,j),j}).then(j=>{const Ue=j.user;return{operationType:j.operationType,credential:ci(j),additionalUserInfo:$.al(j),user:dr.getOrCreate(Ue)}})}function Wi(W,P){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(W,P){const j=yield P;return{verificationId:j.verificationId,confirm:ce=>Wt(W,j.confirm(ce))}})).apply(this,arguments)}class hi{constructor(P,j){this.resolver=j,this.auth=function Dr(W){return W.wrapped()}(P)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(P){return Wt(bi(this.auth),this.resolver.resolveSignIn(P))}}class dr{constructor(P){this._delegate=P,this.multiFactor=$.ao(P)}static getOrCreate(P){return dr.USER_MAP.has(P)||dr.USER_MAP.set(P,new dr(P)),dr.USER_MAP.get(P)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(P){return this._delegate.getIdTokenResult(P)}getIdToken(P){return this._delegate.getIdToken(P)}linkAndRetrieveDataWithCredential(P){return this.linkWithCredential(P)}linkWithCredential(P){var j=this;return(0,h.Z)(function*(){return Wt(j.auth,$.Z(j._delegate,P))})()}linkWithPhoneNumber(P,j){var ce=this;return(0,h.Z)(function*(){return Wi(ce.auth,$.l(ce._delegate,P,j))})()}linkWithPopup(P){var j=this;return(0,h.Z)(function*(){return Wt(j.auth,$.d(j._delegate,P,$t))})()}linkWithRedirect(P){var j=this;return(0,h.Z)(function*(){return yield Xn($.aE(j.auth)),$.g(j._delegate,P,$t)})()}reauthenticateAndRetrieveDataWithCredential(P){return this.reauthenticateWithCredential(P)}reauthenticateWithCredential(P){var j=this;return(0,h.Z)(function*(){return Wt(j.auth,$._(j._delegate,P))})()}reauthenticateWithPhoneNumber(P,j){return Wi(this.auth,$.r(this._delegate,P,j))}reauthenticateWithPopup(P){return Wt(this.auth,$.e(this._delegate,P,$t))}reauthenticateWithRedirect(P){var j=this;return(0,h.Z)(function*(){return yield Xn($.aE(j.auth)),$.h(j._delegate,P,$t)})()}sendEmailVerification(P){return $.ab(this._delegate,P)}unlink(P){var j=this;return(0,h.Z)(function*(){return yield $.ak(j._delegate,P),j})()}updateEmail(P){return $.ag(this._delegate,P)}updatePassword(P){return $.ah(this._delegate,P)}updatePhoneNumber(P){return $.u(this._delegate,P)}updateProfile(P){return $.af(this._delegate,P)}verifyBeforeUpdateEmail(P,j){return $.ac(this._delegate,P,j)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}dr.USER_MAP=new WeakMap;const gt=$.ax;let Re=(()=>{class W{constructor(j,ce){if(this.app=j,ce.isInitialized())return this._delegate=ce.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=j.options;gt(Ue,"invalid-api-key",{appName:j.name}),gt(Ue,"invalid-api-key",{appName:j.name});const vt=typeof window<"u"?$t:void 0;this._delegate=ce.initialize({options:{persistence:Mt(Ue,j.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap($.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?dr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(j){this._delegate.languageCode=j}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(j){this._delegate.tenantId=j}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(j,ce){$.G(this._delegate,j,ce)}applyActionCode(j){return $.a2(this._delegate,j)}checkActionCode(j){return $.a3(this._delegate,j)}confirmPasswordReset(j,ce){return $.a1(this._delegate,j,ce)}createUserWithEmailAndPassword(j,ce){var Ue=this;return(0,h.Z)(function*(){return Wt(Ue._delegate,$.a5(Ue._delegate,j,ce))})()}fetchProvidersForEmail(j){return this.fetchSignInMethodsForEmail(j)}fetchSignInMethodsForEmail(j){return $.aa(this._delegate,j)}isSignInWithEmailLink(j){return $.a8(this._delegate,j)}getRedirectResult(){var j=this;return(0,h.Z)(function*(){gt(Fr(),j._delegate,"operation-not-supported-in-this-environment");const ce=yield $.j(j._delegate,$t);return ce?Wt(j._delegate,Promise.resolve(ce)):{credential:null,user:null}})()}addFrameworkForLogging(j){!function Pn(W,P){(0,$.aE)(W)._logFramework(P)}(this._delegate,j)}onAuthStateChanged(j,ce,Ue){const{next:vt,error:bt,complete:Me}=mt(j,ce,Ue);return this._delegate.onAuthStateChanged(vt,bt,Me)}onIdTokenChanged(j,ce,Ue){const{next:vt,error:bt,complete:Me}=mt(j,ce,Ue);return this._delegate.onIdTokenChanged(vt,bt,Me)}sendSignInLinkToEmail(j,ce){return $.a7(this._delegate,j,ce)}sendPasswordResetEmail(j,ce){return $.a0(this._delegate,j,ce||void 0)}setPersistence(j){var ce=this;return(0,h.Z)(function*(){let Ue;switch(function ia(W,P){mn(Object.values(cr).includes(P),W,"invalid-persistence-type"),(0,we.b$)()?mn(P!==cr.SESSION,W,"unsupported-persistence-type"):(0,we.UG)()?mn(P===cr.NONE,W,"unsupported-persistence-type"):Jn()?mn(P===cr.NONE||P===cr.LOCAL&&(0,we.hl)(),W,"unsupported-persistence-type"):mn(P===cr.NONE||Rs(),W,"unsupported-persistence-type")}(ce._delegate,j),j){case cr.SESSION:Ue=$.a;break;case cr.LOCAL:Ue=(yield $.ay($.i)._isAvailable())?$.i:$.b;break;case cr.NONE:Ue=$.L;break;default:return $.at("argument-error",{appName:ce._delegate.name})}return ce._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(j){return this.signInWithCredential(j)}signInAnonymously(){return Wt(this._delegate,$.X(this._delegate))}signInWithCredential(j){return Wt(this._delegate,$.Y(this._delegate,j))}signInWithCustomToken(j){return Wt(this._delegate,$.$(this._delegate,j))}signInWithEmailAndPassword(j,ce){return Wt(this._delegate,$.a6(this._delegate,j,ce))}signInWithEmailLink(j,ce){return Wt(this._delegate,$.a9(this._delegate,j,ce))}signInWithPhoneNumber(j,ce){return Wi(this._delegate,$.s(this._delegate,j,ce))}signInWithPopup(j){var ce=this;return(0,h.Z)(function*(){return gt(Fr(),ce._delegate,"operation-not-supported-in-this-environment"),Wt(ce._delegate,$.c(ce._delegate,j,$t))})()}signInWithRedirect(j){var ce=this;return(0,h.Z)(function*(){return gt(Fr(),ce._delegate,"operation-not-supported-in-this-environment"),yield Xn(ce._delegate),$.f(ce._delegate,j,$t)})()}updateCurrentUser(j){return this._delegate.updateCurrentUser(j)}verifyPasswordResetCode(j){return $.a4(this._delegate,j)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return W.Persistence=cr,W})();function mt(W,P,j){let ce=W;"function"!=typeof W&&({next:ce,error:P,complete:j}=W);const Ue=ce;return{next:bt=>Ue(bt&&dr.getOrCreate(bt)),error:P,complete:j}}function Mt(W,P){const j=function $n(W,P){const j=Tt();if(!j)return[];const ce=$.az(ii,W,P);switch(j.getItem(ce)){case cr.NONE:return[$.L];case cr.LOCAL:return[$.i,$.a];case cr.SESSION:return[$.a];default:return[]}}(W,P);if(typeof self<"u"&&!j.includes($.i)&&j.push($.i),typeof window<"u")for(const ce of[$.b,$.a])j.includes(ce)||j.push(ce);return j.includes($.L)||j.push($.L),j}class kt{constructor(){this.providerId="phone",this._delegate=new $.P(bi(R.Z.auth()))}static credential(P,j){return $.P.credential(P,j)}verifyPhoneNumber(P,j){return this._delegate.verifyPhoneNumber(P,j)}unwrap(){return this._delegate}}kt.PHONE_SIGN_IN_METHOD=$.P.PHONE_SIGN_IN_METHOD,kt.PROVIDER_ID=$.P.PROVIDER_ID;const _n=$.ax;class Y{constructor(P,j,ce=R.Z.app()){var Ue;_n(null===(Ue=ce.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:ce.name}),this._delegate=new $.R(P,j,ce.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function te(W){W.INTERNAL.registerComponent(new We.wA("auth-compat",P=>{const j=P.getProvider("app-compat").getImmediate(),ce=P.getProvider("auth");return new Re(j,ce)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$.A.EMAIL_SIGNIN,PASSWORD_RESET:$.A.PASSWORD_RESET,RECOVER_EMAIL:$.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:$.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:$.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:$.A.VERIFY_EMAIL}},EmailAuthProvider:$.M,FacebookAuthProvider:$.N,GithubAuthProvider:$.T,GoogleAuthProvider:$.Q,OAuthProvider:$.U,SAMLAuthProvider:$.V,PhoneAuthProvider:kt,PhoneMultiFactorGenerator:$.m,RecaptchaVerifier:Y,TwitterAuthProvider:$.W,Auth:Re,AuthCredential:$.H,Error:we.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),W.registerVersion("@firebase/auth-compat","0.2.23")}(R.Z)},7489:function(St,Ve,G){var h;St=G.nmd(St),function(){var R,Ae="Expected a function",ke="__lodash_hash_undefined__",X="__lodash_placeholder__",He=1/0,Dt=9007199254740991,et=4294967295,Fn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],dn="[object Arguments]",tn="[object Array]",Pr="[object Boolean]",Gi="[object Date]",Qn="[object Error]",ds="[object Function]",Rs="[object GeneratorFunction]",Jn="[object Map]",Fr="[object Number]",ui="[object Object]",yt="[object Promise]",cr="[object RegExp]",mn="[object Set]",ii="[object String]",ia="[object Symbol]",jn="[object WeakMap]",Tt="[object ArrayBuffer]",It="[object DataView]",$t="[object Float32Array]",bi="[object Float64Array]",Dr="[object Int8Array]",ci="[object Int16Array]",Vt="[object Int32Array]",di="[object Uint8Array]",Wt="[object Uint8ClampedArray]",Wi="[object Uint16Array]",ln="[object Uint32Array]",hi=/\b__p \+= '';/g,dr=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Re=/&(?:amp|lt|gt|quot|#39);/g,mt=/[&<>"']/g,Mt=RegExp(Re.source),kt=RegExp(mt.source),_n=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,z=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,P=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,j=/[\\^$.*+?()[\]{}|]/g,ce=RegExp(j.source),Ue=/^\s+/,vt=/\s/,bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Me=/\{\n\/\* \[wrapped with (.+)\] \*/,Ke=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nn=/[()=,{}\[\]\/\s]/,Jt=/\\(\\)?/g,xn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ms=/\w*$/,Yn=/^[-+]0x[0-9a-f]+$/i,du=/^0b[01]+$/i,hu=/^\[object .+?Constructor\]$/,xt=/^0o[0-7]+$/i,Oa=/^(?:0|[1-9]\d*)$/,ka=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pa=/($^)/,Fa=/['\n\r\u2028\u2029\\]/g,hr="\\ud800-\\udfff",sa="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",fc="\\u2700-\\u27bf",Rn="a-z\\xdf-\\xf6\\xf8-\\xff",zi="A-Z\\xc0-\\xd6\\xd8-\\xde",oa="\\ufe0e\\ufe0f",aa="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$p="["+hr+"]",qr="["+aa+"]",fi="["+sa+"]",la="\\d+",gc="["+fc+"]",Ba="["+Rn+"]",Os="[^"+hr+aa+la+fc+Rn+zi+"]",El="\\ud83c[\\udffb-\\udfff]",mc="[^"+hr+"]",ks="(?:\\ud83c[\\udde6-\\uddff]){2}",Ao="[\\ud800-\\udbff][\\udc00-\\udfff]",si="["+zi+"]",lo="(?:"+Ba+"|"+Os+")",P_="(?:"+si+"|"+Os+")",Cd="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Wp="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Td="(?:"+fi+"|"+El+")?",zp="["+oa+"]?",Sd=zp+Td+"(?:\\u200d(?:"+[mc,ks,Ao].join("|")+")"+zp+Td+")*",Dl="(?:"+[gc,ks,Ao].join("|")+")"+Sd,lf="(?:"+[mc+fi+"?",fi,ks,Ao,$p].join("|")+")",Ad=RegExp("['\u2019]","g"),_c=RegExp(fi,"g"),Kp=RegExp(El+"(?="+El+")|"+lf+Sd,"g"),uf=RegExp([si+"?"+Ba+"+"+Cd+"(?="+[qr,si,"$"].join("|")+")",P_+"+"+Wp+"(?="+[qr,si+lo,"$"].join("|")+")",si+"?"+lo+"+"+Cd,si+"+"+Wp,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",la,Dl].join("|"),"g"),pi=RegExp("[\\u200d"+hr+sa+oa+"]"),Il=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Va=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],cf=-1,Gn={};Gn[$t]=Gn[bi]=Gn[Dr]=Gn[ci]=Gn[Vt]=Gn[di]=Gn[Wt]=Gn[Wi]=Gn[ln]=!0,Gn[dn]=Gn[tn]=Gn[Tt]=Gn[Pr]=Gn[It]=Gn[Gi]=Gn[Qn]=Gn[ds]=Gn[Jn]=Gn[Fr]=Gn[ui]=Gn[cr]=Gn[mn]=Gn[ii]=Gn[jn]=!1;var Ln={};Ln[dn]=Ln[tn]=Ln[Tt]=Ln[It]=Ln[Pr]=Ln[Gi]=Ln[$t]=Ln[bi]=Ln[Dr]=Ln[ci]=Ln[Vt]=Ln[Jn]=Ln[Fr]=Ln[ui]=Ln[cr]=Ln[mn]=Ln[ii]=Ln[ia]=Ln[di]=Ln[Wt]=Ln[Wi]=Ln[ln]=!0,Ln[Qn]=Ln[ds]=Ln[jn]=!1;var Ua={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qp=parseFloat,qi=parseInt,Tl="object"==typeof global&&global&&global.Object===Object&&global,Ri="object"==typeof self&&self&&self.Object===Object&&self,gr=Tl||Ri||Function("return this")(),Yp=Ve&&!Ve.nodeType&&Ve,gu=Yp&&St&&!St.nodeType&&St,sr=gu&&gu.exports===Yp,Nd=sr&&Tl.process,Ps=function(){try{return gu&&gu.require&&gu.require("util").types||Nd&&Nd.binding&&Nd.binding("util")}catch{}}(),Sl=Ps&&Ps.isArrayBuffer,wi=Ps&&Ps.isDate,xd=Ps&&Ps.isMap,Al=Ps&&Ps.isRegExp,No=Ps&&Ps.isSet,Sn=Ps&&Ps.isTypedArray;function Yi(ne,Ee,_e){switch(_e.length){case 0:return ne.call(Ee);case 1:return ne.call(Ee,_e[0]);case 2:return ne.call(Ee,_e[0],_e[1]);case 3:return ne.call(Ee,_e[0],_e[1],_e[2])}return ne.apply(Ee,_e)}function ua(ne,Ee,_e,_t){for(var Pt=-1,wn=null==ne?0:ne.length;++Pt<wn;){var mr=ne[Pt];Ee(_t,mr,_e(mr),ne)}return _t}function ps(ne,Ee){for(var _e=-1,_t=null==ne?0:ne.length;++_e<_t&&!1!==Ee(ne[_e],_e,ne););return ne}function uo(ne,Ee){for(var _e=null==ne?0:ne.length;_e--&&!1!==Ee(ne[_e],_e,ne););return ne}function Nl(ne,Ee){for(var _e=-1,_t=null==ne?0:ne.length;++_e<_t;)if(!Ee(ne[_e],_e,ne))return!1;return!0}function gs(ne,Ee){for(var _e=-1,_t=null==ne?0:ne.length,Pt=0,wn=[];++_e<_t;){var mr=ne[_e];Ee(mr,_e,ne)&&(wn[Pt++]=mr)}return wn}function Ht(ne,Ee){return!(null==ne||!ne.length)&&xo(ne,Ee,0)>-1}function mu(ne,Ee,_e){for(var _t=-1,Pt=null==ne?0:ne.length;++_t<Pt;)if(_e(Ee,ne[_t]))return!0;return!1}function or(ne,Ee){for(var _e=-1,_t=null==ne?0:ne.length,Pt=Array(_t);++_e<_t;)Pt[_e]=Ee(ne[_e],_e,ne);return Pt}function co(ne,Ee){for(var _e=-1,_t=Ee.length,Pt=ne.length;++_e<_t;)ne[Pt+_e]=Ee[_e];return ne}function Rd(ne,Ee,_e,_t){var Pt=-1,wn=null==ne?0:ne.length;for(_t&&wn&&(_e=ne[++Pt]);++Pt<wn;)_e=Ee(_e,ne[Pt],Pt,ne);return _e}function Md(ne,Ee,_e,_t){var Pt=null==ne?0:ne.length;for(_t&&Pt&&(_e=ne[--Pt]);Pt--;)_e=Ee(_e,ne[Pt],Pt,ne);return _e}function Ha(ne,Ee){for(var _e=-1,_t=null==ne?0:ne.length;++_e<_t;)if(Ee(ne[_e],_e,ne))return!0;return!1}var Od=Mi("length");function un(ne,Ee,_e){var _t;return _e(ne,function(Pt,wn,mr){if(Ee(Pt,wn,mr))return _t=wn,!1}),_t}function vc(ne,Ee,_e,_t){for(var Pt=ne.length,wn=_e+(_t?1:-1);_t?wn--:++wn<Pt;)if(Ee(ne[wn],wn,ne))return wn;return-1}function xo(ne,Ee,_e){return Ee==Ee?function pf(ne,Ee,_e){for(var _t=_e-1,Pt=ne.length;++_t<Pt;)if(ne[_t]===Ee)return _t;return-1}(ne,Ee,_e):vc(ne,_u,_e)}function Yr(ne,Ee,_e,_t){for(var Pt=_e-1,wn=ne.length;++Pt<wn;)if(_t(ne[Pt],Ee))return Pt;return-1}function _u(ne){return ne!=ne}function yu(ne,Ee){var _e=null==ne?0:ne.length;return _e?wu(ne,Ee)/_e:NaN}function Mi(ne){return function(Ee){return null==Ee?R:Ee[ne]}}function vu(ne){return function(Ee){return null==ne?R:ne[Ee]}}function bu(ne,Ee,_e,_t,Pt){return Pt(ne,function(wn,mr,Bn){_e=_t?(_t=!1,wn):Ee(_e,wn,mr,Bn)}),_e}function wu(ne,Ee){for(var _e,_t=-1,Pt=ne.length;++_t<Pt;){var wn=Ee(ne[_t]);wn!==R&&(_e=_e===R?wn:_e+wn)}return _e}function hf(ne,Ee){for(var _e=-1,_t=Array(ne);++_e<ne;)_t[_e]=Ee(_e);return _t}function Ir(ne){return ne&&ne.slice(0,tr(ne)+1).replace(Ue,"")}function fr(ne){return function(Ee){return ne(Ee)}}function ja(ne,Ee){return or(Ee,function(_e){return ne[_e]})}function Ro(ne,Ee){return ne.has(Ee)}function Mo(ne,Ee){for(var _e=-1,_t=ne.length;++_e<_t&&xo(Ee,ne[_e],0)>-1;);return _e}function kd(ne,Ee){for(var _e=ne.length;_e--&&xo(Ee,ne[_e],0)>-1;);return _e}function Qp(ne,Ee){for(var _e=ne.length,_t=0;_e--;)ne[_e]===Ee&&++_t;return _t}var ff=vu({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),B_=vu({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function bc(ne){return"\\"+Ua[ne]}function ca(ne){return pi.test(ne)}function Bd(ne){var Ee=-1,_e=Array(ne.size);return ne.forEach(function(_t,Pt){_e[++Ee]=[Pt,_t]}),_e}function Eu(ne,Ee){return function(_e){return ne(Ee(_e))}}function da(ne,Ee){for(var _e=-1,_t=ne.length,Pt=0,wn=[];++_e<_t;){var mr=ne[_e];(mr===Ee||mr===X)&&(ne[_e]=X,wn[Pt++]=_e)}return wn}function Rl(ne){var Ee=-1,_e=Array(ne.size);return ne.forEach(function(_t){_e[++Ee]=_t}),_e}function ms(ne){return ca(ne)?function ar(ne){for(var Ee=Kp.lastIndex=0;Kp.test(ne);)++Ee;return Ee}(ne):Od(ne)}function Fs(ne){return ca(ne)?function Xp(ne){return ne.match(Kp)||[]}(ne):function yc(ne){return ne.split("")}(ne)}function tr(ne){for(var Ee=ne.length;Ee--&&vt.test(ne.charAt(Ee)););return Ee}var Oo=vu({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),wc=function ne(Ee){var c,_e=(Ee=null==Ee?gr:wc.defaults(gr.Object(),Ee,wc.pick(gr,Va))).Array,_t=Ee.Date,Pt=Ee.Error,wn=Ee.Function,mr=Ee.Math,Bn=Ee.Object,Zi=Ee.RegExp,_s=Ee.String,Oi=Ee.TypeError,Ec=_e.prototype,ha=Bn.prototype,$a=Ee["__core-js_shared__"],Ga=wn.prototype.toString,Mn=ha.hasOwnProperty,gf=0,ho=(c=/[^.]+$/.exec($a&&$a.keys&&$a.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"",Ol=ha.toString,Vd=Ga.call(Bn),Iu=gr._,mf=Zi("^"+Ga.call(Mn).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Dc=sr?Ee.Buffer:R,ki=Ee.Symbol,Ic=Ee.Uint8Array,ko=Dc?Dc.allocUnsafe:R,kl=Eu(Bn.getPrototypeOf,Bn),Cu=Bn.create,Wa=ha.propertyIsEnumerable,Cc=Ec.splice,Cr=ki?ki.isConcatSpreadable:R,Pl=ki?ki.iterator:R,oi=ki?ki.toStringTag:R,Tc=function(){try{var c=qu(Bn,"defineProperty");return c({},"",{}),c}catch{}}(),za=Ee.clearTimeout!==gr.clearTimeout&&Ee.clearTimeout,Ud=_t&&_t.now!==gr.Date.now&&_t.now,Sc=Ee.setTimeout!==gr.setTimeout&&Ee.setTimeout,fa=mr.ceil,pa=mr.floor,Ka=Bn.getOwnPropertySymbols,Ac=Dc?Dc.isBuffer:R,qa=Ee.isFinite,Nc=Ec.join,_f=Eu(Bn.keys,Bn),Tr=mr.max,Lr=mr.min,Ya=_t.now,ng=Ee.parseInt,Tu=mr.random,yf=Ec.reverse,Za=qu(Ee,"DataView"),Fl=qu(Ee,"Map"),fo=qu(Ee,"Promise"),Po=qu(Ee,"Set"),Su=qu(Ee,"WeakMap"),ga=qu(Bn,"create"),Qa=Su&&new Su,ys={},Au=Xl(Za),Ll=Xl(Fl),Hd=Xl(fo),vf=Xl(Po),Nu=Xl(Su),xu=ki?ki.prototype:R,xc=xu?xu.valueOf:R,Wn=xu?xu.toString:R;function L(c){if(Nr(c)&&!nn(c)&&!(c instanceof yn)){if(c instanceof po)return c;if(Mn.call(c,"__wrapped__"))return Yu(c)}return new po(c)}var Bl=function(){function c(){}return function(p){if(!br(p))return{};if(Cu)return Cu(p);c.prototype=p;var w=new c;return c.prototype=R,w}}();function bf(){}function po(c,p){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=R}function yn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=et,this.__views__=[]}function Mu(c){var p=-1,w=null==c?0:c.length;for(this.clear();++p<w;){var A=c[p];this.set(A[0],A[1])}}function Br(c){var p=-1,w=null==c?0:c.length;for(this.clear();++p<w;){var A=c[p];this.set(A[0],A[1])}}function yr(c){var p=-1,w=null==c?0:c.length;for(this.clear();++p<w;){var A=c[p];this.set(A[0],A[1])}}function Vr(c){var p=-1,w=null==c?0:c.length;for(this.__data__=new yr;++p<w;)this.add(c[p])}function vs(c){var p=this.__data__=new Br(c);this.size=p.size}function Ou(c,p){var w=nn(c),A=!w&&cl(c),M=!w&&!A&&dl(c),B=!w&&!A&&!M&&Hi(c),K=w||A||M||B,Q=K?hf(c.length,_s):[],oe=Q.length;for(var Oe in c)(p||Mn.call(c,Oe))&&(!K||!("length"==Oe||M&&("offset"==Oe||"parent"==Oe)||B&&("buffer"==Oe||"byteLength"==Oe||"byteOffset"==Oe)||wa(Oe,oe)))&&Q.push(Oe);return Q}function Mc(c){var p=c.length;return p?c[eh(0,p-1)]:R}function Ul(c,p){return Wc(gn(c),Ji(p,0,c.length))}function Hl(c){return Wc(gn(c))}function go(c,p,w){(w!==R&&!Ii(c[p],w)||w===R&&!(p in c))&&Ls(c,p,w)}function mo(c,p,w){var A=c[p];(!Mn.call(c,p)||!Ii(A,w)||w===R&&!(p in c))&&Ls(c,p,w)}function Lo(c,p){for(var w=c.length;w--;)if(Ii(c[w][0],p))return w;return-1}function jl(c,p,w,A){return _o(c,function(M,B,K){p(A,M,w(M),K)}),A}function Oc(c,p){return c&&Uo(p,Ci(p),c)}function Ls(c,p,w){"__proto__"==p&&Tc?Tc(c,p,{configurable:!0,enumerable:!0,value:w,writable:!0}):c[p]=w}function ku(c,p){for(var w=-1,A=p.length,M=_e(A),B=null==c;++w<A;)M[w]=B?R:Ub(c,p[w]);return M}function Ji(c,p,w){return c==c&&(w!==R&&(c=c<=w?c:w),p!==R&&(c=c>=p?c:p)),c}function hn(c,p,w,A,M,B){var K,Q=1&p,oe=2&p,Oe=4&p;if(w&&(K=M?w(c,A,M,B):w(c)),K!==R)return K;if(!br(c))return c;var xe=nn(c);if(xe){if(K=function $c(c){var p=c.length,w=new c.constructor(p);return p&&"string"==typeof c[0]&&Mn.call(c,"index")&&(w.index=c.index,w.input=c.input),w}(c),!Q)return gn(c,K)}else{var je=ts(c),st=je==ds||je==Rs;if(dl(c))return $s(c,Q);if(je==ui||je==dn||st&&!M){if(K=oe||st?{}:$_(c),!Q)return oe?function tb(c,p){return Uo(c,xf(c),p)}(c,function zd(c,p){return c&&Uo(p,Js(p),c)}(K,c)):function gI(c,p){return Uo(c,yg(c),p)}(c,Oc(K,c))}else{if(!Ln[je])return M?c:{};K=function ph(c,p,w){var A=c.constructor;switch(p){case Tt:return zl(c);case Pr:case Gi:return new A(+c);case It:return function fg(c,p){var w=p?zl(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.byteLength)}(c,w);case $t:case bi:case Dr:case ci:case Vt:case di:case Wt:case Wi:case ln:return Bc(c,w);case Jn:return new A;case Fr:case ii:return new A(c);case cr:return function pg(c){var p=new c.constructor(c.source,Ms.exec(c));return p.lastIndex=c.lastIndex,p}(c);case mn:return new A;case ia:return function nh(c){return xc?Bn(xc.call(c)):{}}(c)}}(c,je,Q)}}B||(B=new vs);var wt=B.get(c);if(wt)return wt;B.set(c,K),Fy(c)?c.forEach(function(Bt){K.add(hn(Bt,p,w,Bt,c,B))}):xy(c)&&c.forEach(function(Bt,Gt){K.set(Gt,hn(Bt,p,w,Gt,c,B))});var Lt=xe?R:(Oe?oe?hh:dh:oe?Js:Ci)(c);return ps(Lt||c,function(Bt,Gt){Lt&&(Bt=c[Gt=Bt]),mo(K,Gt,hn(Bt,p,w,Gt,c,B))}),K}function vr(c,p,w){var A=w.length;if(null==c)return!A;for(c=Bn(c);A--;){var M=w[A],K=c[M];if(K===R&&!(M in c)||!(0,p[M])(K))return!1}return!0}function Bs(c,p,w){if("function"!=typeof c)throw new Oi(Ae);return _h(function(){c.apply(R,w)},p)}function Pu(c,p,w,A){var M=-1,B=Ht,K=!0,Q=c.length,oe=[],Oe=p.length;if(!Q)return oe;w&&(p=or(p,fr(w))),A?(B=mu,K=!1):p.length>=200&&(B=Ro,K=!1,p=new Vr(p));e:for(;++M<Q;){var xe=c[M],je=null==w?xe:w(xe);if(xe=A||0!==xe?xe:0,K&&je==je){for(var st=Oe;st--;)if(p[st]===je)continue e;oe.push(xe)}else B(p,je,A)||oe.push(xe)}return oe}L.templateSettings={escape:_n,evaluate:Y,interpolate:z,variable:"",imports:{_:L}},(L.prototype=bf.prototype).constructor=L,(po.prototype=Bl(bf.prototype)).constructor=po,(yn.prototype=Bl(bf.prototype)).constructor=yn,Mu.prototype.clear=function V_(){this.__data__=ga?ga(null):{},this.size=0},Mu.prototype.delete=function Zr(c){var p=this.has(c)&&delete this.__data__[c];return this.size-=p?1:0,p},Mu.prototype.get=function _r(c){var p=this.__data__;if(ga){var w=p[c];return w===ke?R:w}return Mn.call(p,c)?p[c]:R},Mu.prototype.has=function Ja(c){var p=this.__data__;return ga?p[c]!==R:Mn.call(p,c)},Mu.prototype.set=function Fo(c,p){var w=this.__data__;return this.size+=this.has(c)?0:1,w[c]=ga&&p===R?ke:p,this},Br.prototype.clear=function Kn(){this.__data__=[],this.size=0},Br.prototype.delete=function zn(c){var p=this.__data__,w=Lo(p,c);return!(w<0||(w==p.length-1?p.pop():Cc.call(p,w,1),--this.size,0))},Br.prototype.get=function Qi(c){var p=this.__data__,w=Lo(p,c);return w<0?R:p[w][1]},Br.prototype.has=function ma(c){return Lo(this.__data__,c)>-1},Br.prototype.set=function Xa(c,p){var w=this.__data__,A=Lo(w,c);return A<0?(++this.size,w.push([c,p])):w[A][1]=p,this},yr.prototype.clear=function En(){this.size=0,this.__data__={hash:new Mu,map:new(Fl||Br),string:new Mu}},yr.prototype.delete=function rg(c){var p=Af(this,c).delete(c);return this.size-=p?1:0,p},yr.prototype.get=function Vl(c){return Af(this,c).get(c)},yr.prototype.has=function Rc(c){return Af(this,c).has(c)},yr.prototype.set=function wf(c,p){var w=Af(this,c),A=w.size;return w.set(c,p),this.size+=w.size==A?0:1,this},Vr.prototype.add=Vr.prototype.push=function jd(c){return this.__data__.set(c,ke),this},Vr.prototype.has=function nr(c){return this.__data__.has(c)},vs.prototype.clear=function Ef(){this.__data__=new Br,this.size=0},vs.prototype.delete=function ig(c){var p=this.__data__,w=p.delete(c);return this.size=p.size,w},vs.prototype.get=function $d(c){return this.__data__.get(c)},vs.prototype.has=function Gd(c){return this.__data__.has(c)},vs.prototype.set=function Wd(c,p){var w=this.__data__;if(w instanceof Br){var A=w.__data__;if(!Fl||A.length<199)return A.push([c,p]),this.size=++w.size,this;w=this.__data__=new yr(A)}return w.set(c,p),this.size=w.size,this};var _o=nb(Vs),_a=nb(el,!0);function sg(c,p){var w=!0;return _o(c,function(A,M,B){return w=!!p(A,M,B)}),w}function Fu(c,p,w){for(var A=-1,M=c.length;++A<M;){var B=c[A],K=p(B);if(null!=K&&(Q===R?K==K&&!Ui(K):w(K,Q)))var Q=K,oe=B}return oe}function Bo(c,p){var w=[];return _o(c,function(A,M,B){p(A,M,B)&&w.push(A)}),w}function rr(c,p,w,A,M){var B=-1,K=c.length;for(w||(w=mh),M||(M=[]);++B<K;){var Q=c[B];p>0&&w(Q)?p>1?rr(Q,p-1,w,A,M):co(M,Q):A||(M[M.length]=Q)}return M}var $l=rb(),ya=rb(!0);function Vs(c,p){return c&&$l(c,p,Ci)}function el(c,p){return c&&ya(c,p,Ci)}function Us(c,p){return gs(p,function(w){return Qs(c[w])})}function Ur(c,p){for(var w=0,A=(p=vn(p,c)).length;null!=c&&w<A;)c=c[Ws(p[w++])];return w&&w==A?c:R}function qd(c,p,w){var A=p(c);return nn(c)?A:co(A,w(c))}function Hr(c){return null==c?c===R?"[object Undefined]":"[object Null]":oi&&oi in Bn(c)?function j_(c){var p=Mn.call(c,oi),w=c[oi];try{c[oi]=R;var A=!0}catch{}var M=Ol.call(c);return A&&(p?c[oi]=w:delete c[oi]),M}(c):function wg(c){return Ol.call(c)}(c)}function Yd(c,p){return c>p}function tl(c,p){return null!=c&&Mn.call(c,p)}function Hs(c,p){return null!=c&&p in Bn(c)}function ai(c,p,w){for(var A=w?mu:Ht,M=c[0].length,B=c.length,K=B,Q=_e(B),oe=1/0,Oe=[];K--;){var xe=c[K];K&&p&&(xe=or(xe,fr(p))),oe=Lr(xe.length,oe),Q[K]=!w&&(p||M>=120&&xe.length>=120)?new Vr(K&&xe):R}xe=c[0];var je=-1,st=Q[0];e:for(;++je<M&&Oe.length<oe;){var wt=xe[je],Et=p?p(wt):wt;if(wt=w||0!==wt?wt:0,!(st?Ro(st,Et):A(Oe,Et,w))){for(K=B;--K;){var Lt=Q[K];if(!(Lt?Ro(Lt,Et):A(c[K],Et,w)))continue e}st&&st.push(Et),Oe.push(wt)}}return Oe}function lr(c,p,w){var A=null==(c=Y_(c,p=vn(p,c)))?c:c[Ws(ws(p))];return null==A?R:Yi(A,c,w)}function jr(c){return Nr(c)&&Hr(c)==dn}function Bu(c,p,w,A,M){return c===p||(null==c||null==p||!Nr(c)&&!Nr(p)?c!=c&&p!=p:function Ar(c,p,w,A,M,B){var K=nn(c),Q=nn(p),oe=K?tn:ts(c),Oe=Q?tn:ts(p),xe=(oe=oe==dn?ui:oe)==ui,je=(Oe=Oe==dn?ui:Oe)==ui,st=oe==Oe;if(st&&dl(c)){if(!dl(p))return!1;K=!0,xe=!1}if(st&&!xe)return B||(B=new vs),K||Hi(c)?Ku(c,p,w,A,M,B):function Jl(c,p,w,A,M,B,K){switch(w){case It:if(c.byteLength!=p.byteLength||c.byteOffset!=p.byteOffset)return!1;c=c.buffer,p=p.buffer;case Tt:return!(c.byteLength!=p.byteLength||!B(new Ic(c),new Ic(p)));case Pr:case Gi:case Fr:return Ii(+c,+p);case Qn:return c.name==p.name&&c.message==p.message;case cr:case ii:return c==p+"";case Jn:var Q=Bd;case mn:if(Q||(Q=Rl),c.size!=p.size&&!(1&A))return!1;var Oe=K.get(c);if(Oe)return Oe==p;A|=2,K.set(c,p);var xe=Ku(Q(c),Q(p),A,M,B,K);return K.delete(c),xe;case ia:if(xc)return xc.call(c)==xc.call(p)}return!1}(c,p,oe,w,A,M,B);if(!(1&w)){var wt=xe&&Mn.call(c,"__wrapped__"),Et=je&&Mn.call(p,"__wrapped__");if(wt||Et){var Lt=wt?c.value():c,Bt=Et?p.value():p;return B||(B=new vs),M(Lt,Bt,w,A,B)}}return!!st&&(B||(B=new vs),function ol(c,p,w,A,M,B){var K=1&w,Q=dh(c),oe=Q.length;if(oe!=dh(p).length&&!K)return!1;for(var je=oe;je--;){var st=Q[je];if(!(K?st in p:Mn.call(p,st)))return!1}var wt=B.get(c),Et=B.get(p);if(wt&&Et)return wt==p&&Et==c;var Lt=!0;B.set(c,p),B.set(p,c);for(var Bt=K;++je<oe;){var Gt=c[st=Q[je]],bn=p[st];if(A)var Ti=K?A(bn,Gt,st,p,c,B):A(Gt,bn,st,c,p,B);if(!(Ti===R?Gt===bn||M(Gt,bn,w,A,B):Ti)){Lt=!1;break}Bt||(Bt="constructor"==st)}if(Lt&&!Bt){var Gr=c.constructor,Zn=p.constructor;Gr!=Zn&&"constructor"in c&&"constructor"in p&&!("function"==typeof Gr&&Gr instanceof Gr&&"function"==typeof Zn&&Zn instanceof Zn)&&(Lt=!1)}return B.delete(c),B.delete(p),Lt}(c,p,w,A,M,B))}(c,p,w,A,Bu,M))}function Uu(c,p,w,A){var M=w.length,B=M,K=!A;if(null==c)return!B;for(c=Bn(c);M--;){var Q=w[M];if(K&&Q[2]?Q[1]!==c[Q[0]]:!(Q[0]in c))return!1}for(;++M<B;){var oe=(Q=w[M])[0],Oe=c[oe],xe=Q[1];if(K&&Q[2]){if(Oe===R&&!(oe in c))return!1}else{var je=new vs;if(A)var st=A(Oe,xe,oe,c,p,je);if(!(st===R?Bu(xe,Oe,3,A,je):st))return!1}}return!0}function Zd(c){return!(!br(c)||function z_(c){return!!ho&&ho in c}(c))&&(Qs(c)?mf:hu).test(Xl(c))}function kc(c){return"function"==typeof c?c:null==c?eo:"object"==typeof c?nn(c)?Xd(c[0],c[1]):nl(c):cv(c)}function Jd(c){if(!Gc(c))return _f(c);var p=[];for(var w in Bn(c))Mn.call(c,w)&&"constructor"!=w&&p.push(w);return p}function bs(c,p){return c<p}function Xi(c,p){var w=-1,A=Zs(c)?_e(c.length):[];return _o(c,function(M,B,K){A[++w]=p(M,B,K)}),A}function nl(c){var p=Nf(c);return 1==p.length&&p[0][2]?ob(p[0][0],p[0][1]):function(w){return w===c||Uu(w,c,p)}}function Xd(c,p){return Mf(c)&&sb(p)?ob(Ws(c),p):function(w){var A=Ub(w,c);return A===R&&A===p?$y(w,c):Bu(p,A,3)}}function Pc(c,p,w,A,M){c!==p&&$l(p,function(B,K){if(M||(M=new vs),br(B))!function lg(c,p,w,A,M,B,K){var Q=Z_(c,w),oe=Z_(p,w),Oe=K.get(oe);if(Oe)go(c,w,Oe);else{var xe=B?B(Q,oe,w+"",c,p,K):R,je=xe===R;if(je){var st=nn(oe),wt=!st&&dl(oe),Et=!st&&!wt&&Hi(oe);xe=oe,st||wt||Et?nn(Q)?xe=Q:Jr(Q)?xe=gn(Q):wt?(je=!1,xe=$s(oe,!0)):Et?(je=!1,xe=Bc(oe,!0)):xe=[]:xh(oe)||cl(oe)?(xe=Q,cl(Q)?xe=Mh(Q):(!br(Q)||Qs(Q))&&(xe=$_(oe))):je=!1}je&&(K.set(oe,xe),M(xe,oe,A,B,K),K.delete(oe)),go(c,w,xe)}}(c,p,K,w,Pc,A,M);else{var Q=A?A(Z_(c,K),B,K+"",c,p,M):R;Q===R&&(Q=B),go(c,K,Q)}},Js)}function ju(c,p){var w=c.length;if(w)return wa(p+=p<0?w:0,w)?c[p]:R}function Wl(c,p,w){p=p.length?or(p,function(B){return nn(B)?function(K){return Ur(K,1===B.length?B[0]:B)}:B}):[eo];var A=-1;return p=or(p,fr(Ft())),function Zp(ne,Ee){var _e=ne.length;for(ne.sort(Ee);_e--;)ne[_e]=ne[_e].value;return ne}(Xi(c,function(B,K,Q){return{criteria:or(p,function(Oe){return Oe(B)}),index:++A,value:B}}),function(B,K){return function Kl(c,p,w){for(var A=-1,M=c.criteria,B=p.criteria,K=M.length,Q=w.length;++A<K;){var oe=va(M[A],B[A]);if(oe)return A>=Q?oe:oe*("desc"==w[A]?-1:1)}return c.index-p.index}(B,K,w)})}function yo(c,p,w){for(var A=-1,M=p.length,B={};++A<M;){var K=p[A],Q=Ur(c,K);w(Q,K)&&il(B,vn(K,c),Q)}return B}function $r(c,p,w,A){var M=A?Yr:xo,B=-1,K=p.length,Q=c;for(c===p&&(p=gn(p)),w&&(Q=or(c,fr(w)));++B<K;)for(var oe=0,Oe=p[B],xe=w?w(Oe):Oe;(oe=M(Q,xe,oe,A))>-1;)Q!==c&&Cc.call(Q,oe,1),Cc.call(c,oe,1);return c}function js(c,p){for(var w=c?p.length:0,A=w-1;w--;){var M=p[w];if(w==A||M!==B){var B=M;wa(M)?Cc.call(c,M,1):C(c,M)}}return c}function eh(c,p){return c+pa(Tu()*(p-c+1))}function Fc(c,p){var w="";if(!c||p<1||p>Dt)return w;do{p%2&&(w+=c),(p=pa(p/2))&&(c+=c)}while(p);return w}function Xt(c,p){return Eg(q_(c,p,eo),c+"")}function Vo(c){return Mc(Ko(c))}function rl(c,p){var w=Ko(c);return Wc(w,Ji(p,0,w.length))}function il(c,p,w,A){if(!br(c))return c;for(var M=-1,B=(p=vn(p,c)).length,K=B-1,Q=c;null!=Q&&++M<B;){var oe=Ws(p[M]),Oe=w;if("__proto__"===oe||"constructor"===oe||"prototype"===oe)return c;if(M!=K){var xe=Q[oe];(Oe=A?A(xe,oe,Q):R)===R&&(Oe=br(xe)?xe:wa(p[M+1])?[]:{})}mo(Q,oe,Oe),Q=Q[oe]}return c}var Cf=Qa?function(c,p){return Qa.set(c,p),c}:eo,cg=Tc?function(c,p){return Tc(c,"toString",{configurable:!0,enumerable:!1,value:om(p),writable:!0})}:eo;function dg(c){return Wc(Ko(c))}function Pi(c,p,w){var A=-1,M=c.length;p<0&&(p=-p>M?0:M+p),(w=w>M?M:w)<0&&(w+=M),M=p>w?0:w-p>>>0,p>>>=0;for(var B=_e(M);++A<M;)B[A]=c[A+p];return B}function hg(c,p){var w;return _o(c,function(A,M,B){return!(w=p(A,M,B))}),!!w}function sl(c,p,w){var A=0,M=null==c?A:c.length;if("number"==typeof p&&p==p&&M<=2147483647){for(;A<M;){var B=A+M>>>1,K=c[B];null!==K&&!Ui(K)&&(w?K<=p:K<p)?A=B+1:M=B}return M}return Lc(c,p,eo,w)}function Lc(c,p,w,A){var M=0,B=null==c?0:c.length;if(0===B)return 0;for(var K=(p=w(p))!=p,Q=null===p,oe=Ui(p),Oe=p===R;M<B;){var xe=pa((M+B)/2),je=w(c[xe]),st=je!==R,wt=null===je,Et=je==je,Lt=Ui(je);if(K)var Bt=A||Et;else Bt=Oe?Et&&(A||st):Q?Et&&st&&(A||!wt):oe?Et&&st&&!wt&&(A||!Lt):!wt&&!Lt&&(A?je<=p:je<p);Bt?M=xe+1:B=xe}return Lr(B,4294967294)}function th(c,p){for(var w=-1,A=c.length,M=0,B=[];++w<A;){var K=c[w],Q=p?p(K):K;if(!w||!Ii(Q,oe)){var oe=Q;B[M++]=0===K?0:K}}return B}function D(c){return"number"==typeof c?c:Ui(c)?NaN:+c}function _(c){if("string"==typeof c)return c;if(nn(c))return or(c,_)+"";if(Ui(c))return Wn?Wn.call(c):"";var p=c+"";return"0"==p&&1/c==-He?"-0":p}function v(c,p,w){var A=-1,M=Ht,B=c.length,K=!0,Q=[],oe=Q;if(w)K=!1,M=mu;else if(B>=200){var Oe=p?null:mg(c);if(Oe)return Rl(Oe);K=!1,M=Ro,oe=new Vr}else oe=p?[]:Q;e:for(;++A<B;){var xe=c[A],je=p?p(xe):xe;if(xe=w||0!==xe?xe:0,K&&je==je){for(var st=oe.length;st--;)if(oe[st]===je)continue e;p&&oe.push(je),Q.push(xe)}else M(oe,je,w)||(oe!==Q&&oe.push(je),Q.push(xe))}return Q}function C(c,p){return null==(c=Y_(c,p=vn(p,c)))||delete c[Ws(ws(p))]}function O(c,p,w,A){return il(c,p,w(Ur(c,p)),A)}function V(c,p,w,A){for(var M=c.length,B=A?M:-1;(A?B--:++B<M)&&p(c[B],B,c););return w?Pi(c,A?0:B,A?B+1:M):Pi(c,A?B+1:0,A?M:B)}function le(c,p){var w=c;return w instanceof yn&&(w=w.value()),Rd(p,function(A,M){return M.func.apply(M.thisArg,co([A],M.args))},w)}function Se(c,p,w){var A=c.length;if(A<2)return A?v(c[0]):[];for(var M=-1,B=_e(A);++M<A;)for(var K=c[M],Q=-1;++Q<A;)Q!=M&&(B[M]=Pu(B[M]||K,c[Q],p,w));return v(rr(B,1),p,w)}function ht(c,p,w){for(var A=-1,M=c.length,B=p.length,K={};++A<M;)w(K,c[A],A<B?p[A]:R);return K}function At(c){return Jr(c)?c:[]}function qt(c){return"function"==typeof c?c:eo}function vn(c,p){return nn(c)?c:Mf(c,p)?[c]:Ig(On(c))}var es=Xt;function Ei(c,p,w){var A=c.length;return w=w===R?A:w,!p&&w>=A?c:Pi(c,p,w)}var Qr=za||function(c){return gr.clearTimeout(c)};function $s(c,p){if(p)return c.slice();var w=c.length,A=ko?ko(w):new c.constructor(w);return c.copy(A),A}function zl(c){var p=new c.constructor(c.byteLength);return new Ic(p).set(new Ic(c)),p}function Bc(c,p){var w=p?zl(c.buffer):c.buffer;return new c.constructor(w,c.byteOffset,c.length)}function va(c,p){if(c!==p){var w=c!==R,A=null===c,M=c==c,B=Ui(c),K=p!==R,Q=null===p,oe=p==p,Oe=Ui(p);if(!Q&&!Oe&&!B&&c>p||B&&K&&oe&&!Q&&!Oe||A&&K&&oe||!w&&oe||!M)return 1;if(!A&&!B&&!Oe&&c<p||Oe&&w&&M&&!A&&!B||Q&&w&&M||!K&&M||!oe)return-1}return 0}function Gu(c,p,w,A){for(var M=-1,B=c.length,K=w.length,Q=-1,oe=p.length,Oe=Tr(B-K,0),xe=_e(oe+Oe),je=!A;++Q<oe;)xe[Q]=p[Q];for(;++M<K;)(je||M<B)&&(xe[w[M]]=c[M]);for(;Oe--;)xe[Q++]=c[M++];return xe}function Vc(c,p,w,A){for(var M=-1,B=c.length,K=-1,Q=w.length,oe=-1,Oe=p.length,xe=Tr(B-Q,0),je=_e(xe+Oe),st=!A;++M<xe;)je[M]=c[M];for(var wt=M;++oe<Oe;)je[wt+oe]=p[oe];for(;++K<Q;)(st||M<B)&&(je[wt+w[K]]=c[M++]);return je}function gn(c,p){var w=-1,A=c.length;for(p||(p=_e(A));++w<A;)p[w]=c[w];return p}function Uo(c,p,w,A){var M=!w;w||(w={});for(var B=-1,K=p.length;++B<K;){var Q=p[B],oe=A?A(w[Q],c[Q],Q,w,c):R;oe===R&&(oe=c[Q]),M?Ls(w,Q,oe):mo(w,Q,oe)}return w}function Tf(c,p){return function(w,A){var M=nn(w)?ua:jl,B=p?p():{};return M(w,c,Ft(A,2),B)}}function rh(c){return Xt(function(p,w){var A=-1,M=w.length,B=M>1?w[M-1]:R,K=M>2?w[2]:R;for(B=c.length>3&&"function"==typeof B?(M--,B):R,K&&Di(w[0],w[1],K)&&(B=M<3?R:B,M=1),p=Bn(p);++A<M;){var Q=w[A];Q&&c(p,Q,A,B)}return p})}function nb(c,p){return function(w,A){if(null==w)return w;if(!Zs(w))return c(w,A);for(var M=w.length,B=p?M:-1,K=Bn(w);(p?B--:++B<M)&&!1!==A(K[B],B,K););return w}}function rb(c){return function(p,w,A){for(var M=-1,B=Bn(p),K=A(p),Q=K.length;Q--;){var oe=K[c?Q:++M];if(!1===w(B[oe],oe,B))break}return p}}function gg(c){return function(p){var w=ca(p=On(p))?Fs(p):R,A=w?w[0]:p.charAt(0),M=w?Ei(w,1).join(""):p.slice(1);return A[c]()+M}}function ih(c){return function(p){return Rd(ov(Yf(p).replace(Ad,"")),c,"")}}function Sf(c){return function(){var p=arguments;switch(p.length){case 0:return new c;case 1:return new c(p[0]);case 2:return new c(p[0],p[1]);case 3:return new c(p[0],p[1],p[2]);case 4:return new c(p[0],p[1],p[2],p[3]);case 5:return new c(p[0],p[1],p[2],p[3],p[4]);case 6:return new c(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new c(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var w=Bl(c.prototype),A=c.apply(w,p);return br(A)?A:w}}function oh(c){return function(p,w,A){var M=Bn(p);if(!Zs(p)){var B=Ft(w,3);p=Ci(p),w=function(Q){return B(M[Q],Q,M)}}var K=c(p,w,A);return K>-1?M[B?p[K]:K]:R}}function Wu(c){return Gs(function(p){var w=p.length,A=w,M=po.prototype.thru;for(c&&p.reverse();A--;){var B=p[A];if("function"!=typeof B)throw new Oi(Ae);if(M&&!K&&"wrapper"==fh(B))var K=new po([],!0)}for(A=K?A:w;++A<w;){var Q=fh(B=p[A]),oe="wrapper"==Q?jc(B):R;K=oe&&W_(oe[0])&&424==oe[1]&&!oe[4].length&&1==oe[9]?K[fh(oe[0])].apply(K,oe[3]):1==B.length&&W_(B)?K[Q]():K.thru(B)}return function(){var Oe=arguments,xe=Oe[0];if(K&&1==Oe.length&&nn(xe))return K.plant(xe).value();for(var je=0,st=w?p[je].apply(this,Oe):xe;++je<w;)st=p[je].call(this,st);return st}})}function ql(c,p,w,A,M,B,K,Q,oe,Oe){var xe=128&p,je=1&p,st=2&p,wt=24&p,Et=512&p,Lt=st?R:Sf(c);return function Bt(){for(var Gt=arguments.length,bn=_e(Gt),Ti=Gt;Ti--;)bn[Ti]=arguments[Ti];if(wt)var Gr=Ho(Bt),Zn=Qp(bn,Gr);if(A&&(bn=Gu(bn,A,M,wt)),B&&(bn=Vc(bn,B,K,wt)),Gt-=Zn,wt&&Gt<Oe){var ur=da(bn,Gr);return lh(c,p,ql,Bt.placeholder,w,bn,ur,Q,oe,Oe-Gt)}var is=je?w:this,Es=st?is[c]:c;return Gt=bn.length,Q?bn=vI(bn,Q):Et&&Gt>1&&bn.reverse(),xe&&oe<Gt&&(bn.length=oe),this&&this!==gr&&this instanceof Bt&&(Es=Lt||Sf(Es)),Es.apply(is,bn)}}function Yl(c,p){return function(w,A){return function Sr(c,p,w,A){return Vs(c,function(M,B,K){p(A,w(M),B,K)}),A}(w,c,p(A),{})}}function Zl(c,p){return function(w,A){var M;if(w===R&&A===R)return p;if(w!==R&&(M=w),A!==R){if(M===R)return A;"string"==typeof w||"string"==typeof A?(w=_(w),A=_(A)):(w=D(w),A=D(A)),M=c(w,A)}return M}}function Uc(c){return Gs(function(p){return p=or(p,fr(Ft())),Xt(function(w){var A=this;return c(p,function(M){return Yi(M,A,w)})})})}function Hc(c,p){var w=(p=p===R?" ":_(p)).length;if(w<2)return w?Fc(p,c):p;var A=Fc(p,fa(c/ms(p)));return ca(p)?Ei(Fs(A),0,c).join(""):A.slice(0,c)}function H_(c){return function(p,w,A){return A&&"number"!=typeof A&&Di(p,w,A)&&(w=A=R),p=Wo(p),w===R?(w=p,p=0):w=Wo(w),function ug(c,p,w,A){for(var M=-1,B=Tr(fa((p-c)/(w||1)),0),K=_e(B);B--;)K[A?B:++M]=c,c+=w;return K}(p,w,A=A===R?p<w?1:-1:Wo(A),c)}}function zu(c){return function(p,w){return"string"==typeof p&&"string"==typeof w||(p=zo(p),w=zo(w)),c(p,w)}}function lh(c,p,w,A,M,B,K,Q,oe,Oe){var xe=8&p;p|=xe?32:64,4&(p&=~(xe?64:32))||(p&=-4);var Lt=[c,p,M,xe?B:R,xe?K:R,xe?R:B,xe?R:K,Q,oe,Oe],Bt=w.apply(R,Lt);return W_(c)&&Q_(Bt,Lt),Bt.placeholder=A,yh(Bt,c,p)}function uh(c){var p=mr[c];return function(w,A){if(w=zo(w),(A=null==A?0:Lr(cn(A),292))&&qa(w)){var M=(On(w)+"e").split("e");return+((M=(On(p(M[0]+"e"+(+M[1]+A)))+"e").split("e"))[0]+"e"+(+M[1]-A))}return p(w)}}var mg=Po&&1/Rl(new Po([,-0]))[1]==He?function(c){return new Po(c)}:nu;function ba(c){return function(p){var w=ts(p);return w==Jn?Bd(p):w==mn?function Jp(ne){var Ee=-1,_e=Array(ne.size);return ne.forEach(function(_t){_e[++Ee]=[_t,_t]}),_e}(p):function xl(ne,Ee){return or(Ee,function(_e){return[_e,ne[_e]]})}(p,c(p))}}function Ql(c,p,w,A,M,B,K,Q){var oe=2&p;if(!oe&&"function"!=typeof c)throw new Oi(Ae);var Oe=A?A.length:0;if(Oe||(p&=-97,A=M=R),K=K===R?K:Tr(cn(K),0),Q=Q===R?Q:cn(Q),Oe-=M?M.length:0,64&p){var xe=A,je=M;A=M=R}var st=oe?R:jc(c),wt=[c,p,w,A,M,xe,je,B,K,Q];if(st&&function yI(c,p){var w=c[1],A=p[1],M=w|A;if(!(M<131||(128==A&&8==w||128==A&&256==w&&c[7].length<=p[8]||384==A&&p[7].length<=p[8]&&8==w)))return c;1&A&&(c[2]=p[2],M|=1&w?0:4);var Q=p[3];if(Q){var oe=c[3];c[3]=oe?Gu(oe,Q,p[4]):Q,c[4]=oe?da(c[3],X):p[4]}(Q=p[5])&&(c[5]=(oe=c[5])?Vc(oe,Q,p[6]):Q,c[6]=oe?da(c[5],X):p[6]),(Q=p[7])&&(c[7]=Q),128&A&&(c[8]=null==c[8]?p[8]:Lr(c[8],p[8])),null==c[9]&&(c[9]=p[9]),c[0]=p[0],c[1]=M}(wt,st),c=wt[0],p=wt[1],w=wt[2],A=wt[3],M=wt[4],!(Q=wt[9]=wt[9]===R?oe?0:c.length:Tr(wt[9]-Oe,0))&&24&p&&(p&=-25),p&&1!=p)Et=8==p||16==p?function sh(c,p,w){var A=Sf(c);return function M(){for(var B=arguments.length,K=_e(B),Q=B,oe=Ho(M);Q--;)K[Q]=arguments[Q];var Oe=B<3&&K[0]!==oe&&K[B-1]!==oe?[]:da(K,oe);return(B-=Oe.length)<w?lh(c,p,ql,M.placeholder,R,K,Oe,R,R,w-B):Yi(this&&this!==gr&&this instanceof M?A:c,this,K)}}(c,p,Q):32!=p&&33!=p||M.length?ql.apply(R,wt):function ah(c,p,w,A){var M=1&p,B=Sf(c);return function K(){for(var Q=-1,oe=arguments.length,Oe=-1,xe=A.length,je=_e(xe+oe),st=this&&this!==gr&&this instanceof K?B:c;++Oe<xe;)je[Oe]=A[Oe];for(;oe--;)je[Oe++]=arguments[++Q];return Yi(st,M?w:this,je)}}(c,p,w,A);else var Et=function ib(c,p,w){var A=1&p,M=Sf(c);return function B(){return(this&&this!==gr&&this instanceof B?M:c).apply(A?w:this,arguments)}}(c,p,w);return yh((st?Cf:Q_)(Et,wt),c,p)}function _g(c,p,w,A){return c===R||Ii(c,ha[w])&&!Mn.call(A,w)?p:c}function ch(c,p,w,A,M,B){return br(c)&&br(p)&&(B.set(p,c),Pc(c,p,R,ch,B),B.delete(p)),c}function mI(c){return xh(c)?R:c}function Ku(c,p,w,A,M,B){var K=1&w,Q=c.length,oe=p.length;if(Q!=oe&&!(K&&oe>Q))return!1;var Oe=B.get(c),xe=B.get(p);if(Oe&&xe)return Oe==p&&xe==c;var je=-1,st=!0,wt=2&w?new Vr:R;for(B.set(c,p),B.set(p,c);++je<Q;){var Et=c[je],Lt=p[je];if(A)var Bt=K?A(Lt,Et,je,p,c,B):A(Et,Lt,je,c,p,B);if(Bt!==R){if(Bt)continue;st=!1;break}if(wt){if(!Ha(p,function(Gt,bn){if(!Ro(wt,bn)&&(Et===Gt||M(Et,Gt,w,A,B)))return wt.push(bn)})){st=!1;break}}else if(Et!==Lt&&!M(Et,Lt,w,A,B)){st=!1;break}}return B.delete(c),B.delete(p),st}function Gs(c){return Eg(q_(c,R,ty),c+"")}function dh(c){return qd(c,Ci,yg)}function hh(c){return qd(c,Js,xf)}var jc=Qa?function(c){return Qa.get(c)}:nu;function fh(c){for(var p=c.name+"",w=ys[p],A=Mn.call(ys,p)?w.length:0;A--;){var M=w[A],B=M.func;if(null==B||B==c)return M.name}return p}function Ho(c){return(Mn.call(L,"placeholder")?L:c).placeholder}function Ft(){var c=L.iteratee||uv;return c=c===uv?kc:c,arguments.length?c(arguments[0],arguments[1]):c}function Af(c,p){var w=c.__data__;return function G_(c){var p=typeof c;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==c:null===c}(p)?w["string"==typeof p?"string":"hash"]:w.map}function Nf(c){for(var p=Ci(c),w=p.length;w--;){var A=p[w],M=c[A];p[w]=[A,M,sb(M)]}return p}function qu(c,p){var w=function Pd(ne,Ee){return null==ne?R:ne[Ee]}(c,p);return Zd(w)?w:R}var yg=Ka?function(c){return null==c?[]:(c=Bn(c),gs(Ka(c),function(p){return Wa.call(c,p)}))}:ji,xf=Ka?function(c){for(var p=[];c;)co(p,yg(c)),c=kl(c);return p}:ji,ts=Hr;function vg(c,p,w){for(var A=-1,M=(p=vn(p,c)).length,B=!1;++A<M;){var K=Ws(p[A]);if(!(B=null!=c&&w(c,K)))break;c=c[K]}return B||++A!=M?B:!!(M=null==c?0:c.length)&&Gf(M)&&wa(K,M)&&(nn(c)||cl(c))}function $_(c){return"function"!=typeof c.constructor||Gc(c)?{}:Bl(kl(c))}function mh(c){return nn(c)||cl(c)||!!(Cr&&c&&c[Cr])}function wa(c,p){var w=typeof c;return!!(p=p??Dt)&&("number"==w||"symbol"!=w&&Oa.test(c))&&c>-1&&c%1==0&&c<p}function Di(c,p,w){if(!br(w))return!1;var A=typeof p;return!!("number"==A?Zs(w)&&wa(p,w.length):"string"==A&&p in w)&&Ii(w[p],c)}function Mf(c,p){if(nn(c))return!1;var w=typeof c;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=c&&!Ui(c))||W.test(c)||!te.test(c)||null!=p&&c in Bn(p)}function W_(c){var p=fh(c),w=L[p];if("function"!=typeof w||!(p in yn.prototype))return!1;if(c===w)return!0;var A=jc(w);return!!A&&c===A[0]}(Za&&ts(new Za(new ArrayBuffer(1)))!=It||Fl&&ts(new Fl)!=Jn||fo&&ts(fo.resolve())!=yt||Po&&ts(new Po)!=mn||Su&&ts(new Su)!=jn)&&(ts=function(c){var p=Hr(c),w=p==ui?c.constructor:R,A=w?Xl(w):"";if(A)switch(A){case Au:return It;case Ll:return Jn;case Hd:return yt;case vf:return mn;case Nu:return jn}return p});var bg=$a?Qs:td;function Gc(c){var p=c&&c.constructor;return c===("function"==typeof p&&p.prototype||ha)}function sb(c){return c==c&&!br(c)}function ob(c,p){return function(w){return null!=w&&w[c]===p&&(p!==R||c in Bn(w))}}function q_(c,p,w){return p=Tr(p===R?c.length-1:p,0),function(){for(var A=arguments,M=-1,B=Tr(A.length-p,0),K=_e(B);++M<B;)K[M]=A[p+M];M=-1;for(var Q=_e(p+1);++M<p;)Q[M]=A[M];return Q[p]=w(K),Yi(c,this,Q)}}function Y_(c,p){return p.length<2?c:Ur(c,Pi(p,0,-1))}function vI(c,p){for(var w=c.length,A=Lr(p.length,w),M=gn(c);A--;){var B=p[A];c[A]=wa(B,w)?M[B]:R}return c}function Z_(c,p){if(("constructor"!==p||"function"!=typeof c[p])&&"__proto__"!=p)return c[p]}var Q_=Dg(Cf),_h=Sc||function(c,p){return gr.setTimeout(c,p)},Eg=Dg(cg);function yh(c,p,w){var A=p+"";return Eg(c,function gh(c,p){var w=p.length;if(!w)return c;var A=w-1;return p[A]=(w>1?"& ":"")+p[A],p=p.join(w>2?", ":" "),c.replace(bt,"{\n/* [wrapped with "+p+"] */\n")}(A,function Cg(c,p){return ps(Fn,function(w){var A="_."+w[0];p&w[1]&&!Ht(c,A)&&c.push(A)}),c.sort()}(function _I(c){var p=c.match(Me);return p?p[1].split(Ke):[]}(A),w)))}function Dg(c){var p=0,w=0;return function(){var A=Ya(),M=16-(A-w);if(w=A,M>0){if(++p>=800)return arguments[0]}else p=0;return c.apply(R,arguments)}}function Wc(c,p){var w=-1,A=c.length,M=A-1;for(p=p===R?A:p;++w<p;){var B=eh(w,M),K=c[B];c[B]=c[w],c[w]=K}return c.length=p,c}var Ig=function K_(c){var p=Ca(c,function(A){return 500===w.size&&w.clear(),A}),w=p.cache;return p}(function(c){var p=[];return 46===c.charCodeAt(0)&&p.push(""),c.replace(P,function(w,A,M,B){p.push(M?B.replace(Jt,"$1"):A||w)}),p});function Ws(c){if("string"==typeof c||Ui(c))return c;var p=c+"";return"0"==p&&1/c==-He?"-0":p}function Xl(c){if(null!=c){try{return Ga.call(c)}catch{}try{return c+""}catch{}}return""}function Yu(c){if(c instanceof yn)return c.clone();var p=new po(c.__wrapped__,c.__chain__);return p.__actions__=gn(c.__actions__),p.__index__=c.__index__,p.__values__=c.__values__,p}var Of=Xt(function(c,p){return Jr(c)?Pu(c,rr(p,1,Jr,!0)):[]}),cb=Xt(function(c,p){var w=ws(p);return Jr(w)&&(w=R),Jr(c)?Pu(c,rr(p,1,Jr,!0),Ft(w,2)):[]}),Sg=Xt(function(c,p){var w=ws(p);return Jr(w)&&(w=R),Jr(c)?Pu(c,rr(p,1,Jr,!0),R,w):[]});function ey(c,p,w){var A=null==c?0:c.length;if(!A)return-1;var M=null==w?0:cn(w);return M<0&&(M=Tr(A+M,0)),vc(c,Ft(p,3),M)}function vh(c,p,w){var A=null==c?0:c.length;if(!A)return-1;var M=A-1;return w!==R&&(M=cn(w),M=w<0?Tr(A+M,0):Lr(M,A-1)),vc(c,Ft(p,3),M,!0)}function ty(c){return null!=c&&c.length?rr(c,1):[]}function ny(c){return c&&c.length?c[0]:R}var zc=Xt(function(c){var p=or(c,At);return p.length&&p[0]===c[0]?ai(p):[]}),Ng=Xt(function(c){var p=ws(c),w=or(c,At);return p===ws(w)?p=R:w.pop(),w.length&&w[0]===c[0]?ai(w,Ft(p,2)):[]}),Zu=Xt(function(c){var p=ws(c),w=or(c,At);return(p="function"==typeof p?p:R)&&w.pop(),w.length&&w[0]===c[0]?ai(w,R,p):[]});function ws(c){var p=null==c?0:c.length;return p?c[p-1]:R}var mb=Xt(Rg);function Rg(c,p){return c&&c.length&&p&&p.length?$r(c,p):c}var iy=Gs(function(c,p){var w=null==c?0:c.length,A=ku(c,p);return js(c,or(p,function(M){return wa(M,w)?+M:M}).sort(va)),A});function Og(c){return null==c?c:yf.call(c)}var Pf=Xt(function(c){return v(rr(c,1,Jr,!0))}),wI=Xt(function(c){var p=ws(c);return Jr(p)&&(p=R),v(rr(c,1,Jr,!0),Ft(p,2))}),EI=Xt(function(c){var p=ws(c);return p="function"==typeof p?p:R,v(rr(c,1,Jr,!0),R,p)});function wh(c){if(!c||!c.length)return[];var p=0;return c=gs(c,function(w){if(Jr(w))return p=Tr(w.length,p),!0}),hf(p,function(w){return or(c,Mi(w))})}function Bi(c,p){if(!c||!c.length)return[];var w=wh(c);return null==p?w:or(w,function(A){return Yi(p,R,A)})}var Pg=Xt(function(c,p){return Jr(c)?Pu(c,p):[]}),Fg=Xt(function(c){return Se(gs(c,Jr))}),zs=Xt(function(c){var p=ws(c);return Jr(p)&&(p=R),Se(gs(c,Jr),Ft(p,2))}),Ks=Xt(function(c){var p=ws(c);return p="function"==typeof p?p:R,Se(gs(c,Jr),R,p)}),jo=Xt(wh),Eh=Xt(function(c){var p=c.length,w=p>1?c[p-1]:R;return w="function"==typeof w?(c.pop(),w):R,Bi(c,w)});function Ju(c){var p=L(c);return p.__chain__=!0,p}function Ih(c,p){return p(c)}var Ff=Gs(function(c){var p=c.length,w=p?c[0]:0,A=this.__wrapped__,M=function(B){return ku(B,c)};return!(p>1||this.__actions__.length)&&A instanceof yn&&wa(w)?((A=A.slice(w,+w+(p?1:0))).__actions__.push({func:Ih,args:[M],thisArg:R}),new po(A,this.__chain__).thru(function(B){return p&&!B.length&&B.push(R),B})):this.thru(M)}),gy=Tf(function(c,p,w){Mn.call(c,w)?++c[w]:Ls(c,w,1)}),DI=oh(ey),Lf=oh(vh);function ll(c,p){return(nn(c)?ps:_o)(c,Ft(p,3))}function ns(c,p){return(nn(c)?uo:_a)(c,Ft(p,3))}var Bf=Tf(function(c,p,w){Mn.call(c,w)?c[w].push(p):Ls(c,w,[p])}),Da=Xt(function(c,p,w){var A=-1,M="function"==typeof p,B=Zs(c)?_e(c.length):[];return _o(c,function(K){B[++A]=M?Yi(p,K,w):lr(K,p,w)}),B}),Ch=Tf(function(c,p,w){Ls(c,w,p)});function Go(c,p){return(nn(c)?or:Xi)(c,Ft(p,3))}var Uf=Tf(function(c,p,w){c[w?0:1].push(p)},function(){return[[],[]]}),vy=Xt(function(c,p){if(null==c)return[];var w=p.length;return w>1&&Di(c,p[0],p[1])?p=[]:w>2&&Di(p[0],p[1],p[2])&&(p=[p[0]]),Wl(c,rr(p,1),[])}),qc=Ud||function(){return gr.Date.now()};function Ug(c,p,w){return p=w?R:p,Ql(c,128,R,R,R,R,p=c&&null==p?c.length:p)}function Hg(c,p){var w;if("function"!=typeof p)throw new Oi(Ae);return c=cn(c),function(){return--c>0&&(w=p.apply(this,arguments)),c<=1&&(p=R),w}}var jg=Xt(function(c,p,w){var A=1;if(w.length){var M=da(w,Ho(jg));A|=32}return Ql(c,A,p,w,M)}),Vi=Xt(function(c,p,w){var A=3;if(w.length){var M=da(w,Ho(Vi));A|=32}return Ql(p,A,c,w,M)});function by(c,p,w){var A,M,B,K,Q,oe,Oe=0,xe=!1,je=!1,st=!0;if("function"!=typeof c)throw new Oi(Ae);function wt(ur){var is=A,Es=M;return A=M=R,Oe=ur,K=c.apply(Es,is)}function Et(ur){return Oe=ur,Q=_h(Gt,p),xe?wt(ur):K}function Bt(ur){var is=ur-oe;return oe===R||is>=p||is<0||je&&ur-Oe>=B}function Gt(){var ur=qc();if(Bt(ur))return bn(ur);Q=_h(Gt,function Lt(ur){var nd=p-(ur-oe);return je?Lr(nd,B-(ur-Oe)):nd}(ur))}function bn(ur){return Q=R,st&&A?wt(ur):(A=M=R,K)}function Zn(){var ur=qc(),is=Bt(ur);if(A=arguments,M=this,oe=ur,is){if(Q===R)return Et(oe);if(je)return Qr(Q),Q=_h(Gt,p),wt(oe)}return Q===R&&(Q=_h(Gt,p)),K}return p=zo(p)||0,br(w)&&(xe=!!w.leading,B=(je="maxWait"in w)?Tr(zo(w.maxWait)||0,p):B,st="trailing"in w?!!w.trailing:st),Zn.cancel=function Ti(){Q!==R&&Qr(Q),Oe=0,A=oe=M=Q=R},Zn.flush=function Gr(){return Q===R?K:bn(qc())},Zn}var wy=Xt(function(c,p){return Bs(c,1,p)}),Cb=Xt(function(c,p,w){return Bs(c,zo(p)||0,w)});function Ca(c,p){if("function"!=typeof c||null!=p&&"function"!=typeof p)throw new Oi(Ae);var w=function(){var A=arguments,M=p?p.apply(this,A):A[0],B=w.cache;if(B.has(M))return B.get(M);var K=c.apply(this,A);return w.cache=B.set(M,K)||B,K};return w.cache=new(Ca.Cache||yr),w}function Yc(c){if("function"!=typeof c)throw new Oi(Ae);return function(){var p=arguments;switch(p.length){case 0:return!c.call(this);case 1:return!c.call(this,p[0]);case 2:return!c.call(this,p[0],p[1]);case 3:return!c.call(this,p[0],p[1],p[2])}return!c.apply(this,p)}}Ca.Cache=yr;var Dy=es(function(c,p){var w=(p=1==p.length&&nn(p[0])?or(p[0],fr(Ft())):or(rr(p,1),fr(Ft()))).length;return Xt(function(A){for(var M=-1,B=Lr(A.length,w);++M<B;)A[M]=p[M].call(this,A[M]);return Yi(c,this,A)})}),Kt=Xt(function(c,p){var w=da(p,Ho(Kt));return Ql(c,32,R,p,w)}),jf=Xt(function(c,p){var w=da(p,Ho(jf));return Ql(c,64,R,p,w)}),$f=Gs(function(c,p){return Ql(c,256,R,R,R,p)});function Ii(c,p){return c===p||c!=c&&p!=p}var Rb=zu(Yd),Wg=zu(function(c,p){return c>=p}),cl=jr(function(){return arguments}())?jr:function(c){return Nr(c)&&Mn.call(c,"callee")&&!Wa.call(c,"callee")},nn=_e.isArray,CI=Sl?fr(Sl):function Gl(c){return Nr(c)&&Hr(c)==Tt};function Zs(c){return null!=c&&Gf(c.length)&&!Qs(c)}function Jr(c){return Nr(c)&&Zs(c)}var dl=Ac||td,TI=wi?fr(wi):function Lu(c){return Nr(c)&&Hr(c)==Gi};function Qc(c){if(!Nr(c))return!1;var p=Hr(c);return p==Qn||"[object DOMException]"==p||"string"==typeof c.message&&"string"==typeof c.name&&!xh(c)}function Qs(c){if(!br(c))return!1;var p=Hr(c);return p==ds||p==Rs||"[object AsyncFunction]"==p||"[object Proxy]"==p}function Ny(c){return"number"==typeof c&&c==cn(c)}function Gf(c){return"number"==typeof c&&c>-1&&c%1==0&&c<=Dt}function br(c){var p=typeof c;return null!=c&&("object"==p||"function"==p)}function Nr(c){return null!=c&&"object"==typeof c}var xy=xd?fr(xd):function Vu(c){return Nr(c)&&ts(c)==Jn};function qg(c){return"number"==typeof c||Nr(c)&&Hr(c)==Fr}function xh(c){if(!Nr(c)||Hr(c)!=ui)return!1;var p=kl(c);if(null===p)return!0;var w=Mn.call(p,"constructor")&&p.constructor;return"function"==typeof w&&w instanceof w&&Ga.call(w)==Vd}var Py=Al?fr(Al):function U_(c){return Nr(c)&&Hr(c)==cr},Fy=No?fr(No):function Qd(c){return Nr(c)&&ts(c)==mn};function Rh(c){return"string"==typeof c||!nn(c)&&Nr(c)&&Hr(c)==ii}function Ui(c){return"symbol"==typeof c||Nr(c)&&Hr(c)==ia}var Hi=Sn?fr(Sn):function ag(c){return Nr(c)&&Gf(c.length)&&!!Gn[Hr(c)]},hl=zu(bs),Zg=zu(function(c,p){return c<=p});function By(c){if(!c)return[];if(Zs(c))return Rh(c)?Fs(c):gn(c);if(Pl&&c[Pl])return function Ld(ne){for(var Ee,_e=[];!(Ee=ne.next()).done;)_e.push(Ee.value);return _e}(c[Pl]());var p=ts(c);return(p==Jn?Bd:p==mn?Rl:Ko)(c)}function Wo(c){return c?(c=zo(c))===He||c===-He?17976931348623157e292*(c<0?-1:1):c==c?c:0:0===c?c:0}function cn(c){var p=Wo(c),w=p%1;return p==p?w?p-w:p:0}function Qg(c){return c?Ji(cn(c),0,et):0}function zo(c){if("number"==typeof c)return c;if(Ui(c))return NaN;if(br(c)){var p="function"==typeof c.valueOf?c.valueOf():c;c=br(p)?p+"":p}if("string"!=typeof c)return 0===c?c:+c;c=Ir(c);var w=du.test(c);return w||xt.test(c)?qi(c.slice(2),w?2:8):Yn.test(c)?NaN:+c}function Mh(c){return Uo(c,Js(c))}function On(c){return null==c?"":_(c)}var Vy=rh(function(c,p){if(Gc(p)||Zs(p))Uo(p,Ci(p),c);else for(var w in p)Mn.call(p,w)&&mo(c,w,p[w])}),Jg=rh(function(c,p){Uo(p,Js(p),c)}),Uy=rh(function(c,p,w,A){Uo(p,Js(p),c,A)}),xI=rh(function(c,p,w,A){Uo(p,Ci(p),c,A)}),kb=Gs(ku),Fb=Xt(function(c,p){c=Bn(c);var w=-1,A=p.length,M=A>2?p[2]:R;for(M&&Di(p[0],p[1],M)&&(A=1);++w<A;)for(var B=p[w],K=Js(B),Q=-1,oe=K.length;++Q<oe;){var Oe=K[Q],xe=c[Oe];(xe===R||Ii(xe,ha[Oe])&&!Mn.call(c,Oe))&&(c[Oe]=B[Oe])}return c}),Lb=Xt(function(c){return c.push(R,ch),Yi(Wy,R,c)});function Ub(c,p,w){var A=null==c?R:Ur(c,p);return A===R?w:A}function $y(c,p){return null!=c&&vg(c,p,Hs)}var MI=Yl(function(c,p,w){null!=p&&"function"!=typeof p.toString&&(p=Ol.call(p)),c[p]=w},om(eo)),HA=Yl(function(c,p,w){null!=p&&"function"!=typeof p.toString&&(p=Ol.call(p)),Mn.call(c,p)?c[p].push(w):c[p]=[w]},Ft),OI=Xt(lr);function Ci(c){return Zs(c)?Ou(c):Jd(c)}function Js(c){return Zs(c)?Ou(c,!0):function Hu(c){if(!br(c))return function ab(c){var p=[];if(null!=c)for(var w in Bn(c))p.push(w);return p}(c);var p=Gc(c),w=[];for(var A in c)"constructor"==A&&(p||!Mn.call(c,A))||w.push(A);return w}(c)}var Gy=rh(function(c,p,w){Pc(c,p,w)}),Wy=rh(function(c,p,w,A){Pc(c,p,w,A)}),zy=Gs(function(c,p){var w={};if(null==c)return w;var A=!1;p=or(p,function(B){return B=vn(B,c),A||(A=B.length>1),B}),Uo(c,hh(c),w),A&&(w=hn(w,7,mI));for(var M=p.length;M--;)C(w,p[M]);return w}),Ky=Gs(function(c,p){return null==c?{}:function If(c,p){return yo(c,p,function(w,A){return $y(c,A)})}(c,p)});function zf(c,p){if(null==c)return{};var w=or(hh(c),function(A){return[A]});return p=Ft(p),yo(c,w,function(A,M){return p(A,M[0])})}var Yy=ba(Ci),Zy=ba(Js);function Ko(c){return null==c?[]:ja(c,Ci(c))}var Jy=ih(function(c,p,w){return p=p.toLowerCase(),c+(w?nm(p):p)});function nm(c){return sv(On(c).toLowerCase())}function Yf(c){return(c=On(c))&&c.replace(ka,ff).replace(_c,"")}var Gb=ih(function(c,p,w){return c+(w?"-":"")+p.toLowerCase()}),PI=ih(function(c,p,w){return c+(w?" ":"")+p.toLowerCase()}),Wb=gg("toLowerCase"),rv=ih(function(c,p,w){return c+(w?"_":"")+p.toLowerCase()}),jA=ih(function(c,p,w){return c+(w?" ":"")+sv(p)}),Zb=ih(function(c,p,w){return c+(w?" ":"")+p.toUpperCase()}),sv=gg("toUpperCase");function ov(c,p,w){return c=On(c),(p=w?R:p)===R?function Fd(ne){return Il.test(ne)}(c)?function eg(ne){return ne.match(uf)||[]}(c):function Pe(ne){return ne.match(zt)||[]}(c):c.match(p)||[]}var sm=Xt(function(c,p){try{return Yi(c,R,p)}catch(w){return Qc(w)?w:new Pt(w)}}),Qb=Gs(function(c,p){return ps(p,function(w){w=Ws(w),Ls(c,w,jg(c[w],c))}),c});function om(c){return function(){return c}}var $I=Wu(),lv=Wu(!0);function eo(c){return c}function uv(c){return kc("function"==typeof c?c:hn(c,1))}var GI=Xt(function(c,p){return function(w){return lr(w,c,p)}}),Zf=Xt(function(c,p){return function(w){return lr(c,w,p)}});function kh(c,p,w){var A=Ci(p),M=Us(p,A);null==w&&(!br(p)||!M.length&&A.length)&&(w=p,p=c,c=this,M=Us(p,Ci(p)));var B=!(br(w)&&"chain"in w&&!w.chain),K=Qs(c);return ps(M,function(Q){var oe=p[Q];c[Q]=oe,K&&(c.prototype[Q]=function(){var Oe=this.__chain__;if(B||Oe){var xe=c(this.__wrapped__),je=xe.__actions__=gn(this.__actions__);return je.push({func:oe,args:arguments,thisArg:c}),xe.__chain__=Oe,xe}return oe.apply(c,co([this.value()],arguments))})}),c}function nu(){}var Ph=Uc(or),ed=Uc(Nl),um=Uc(Ha);function cv(c){return Mf(c)?Mi(Ws(c)):function $u(c){return function(p){return Ur(p,c)}}(c)}var ew=H_(),cm=H_(!0);function ji(){return[]}function td(){return!1}var rs=Zl(function(c,p){return c+p},0),Bh=uh("ceil"),tw=Zl(function(c,p){return c/p},1),nw=uh("floor"),Vh=Zl(function(c,p){return c*p},1),iw=uh("round"),Jf=Zl(function(c,p){return c-p},0);return L.after=function Sh(c,p){if("function"!=typeof p)throw new Oi(Ae);return c=cn(c),function(){if(--c<1)return p.apply(this,arguments)}},L.ary=Ug,L.assign=Vy,L.assignIn=Jg,L.assignInWith=Uy,L.assignWith=xI,L.at=kb,L.before=Hg,L.bind=jg,L.bindAll=Qb,L.bindKey=Vi,L.castArray=function Zc(){if(!arguments.length)return[];var c=arguments[0];return nn(c)?c:[c]},L.chain=Ju,L.chunk=function lb(c,p,w){p=(w?Di(c,p,w):p===R)?1:Tr(cn(p),0);var A=null==c?0:c.length;if(!A||p<1)return[];for(var M=0,B=0,K=_e(fa(A/p));M<A;)K[B++]=Pi(c,M,M+=p);return K},L.compact=function Tg(c){for(var p=-1,w=null==c?0:c.length,A=0,M=[];++p<w;){var B=c[p];B&&(M[A++]=B)}return M},L.concat=function ub(){var c=arguments.length;if(!c)return[];for(var p=_e(c-1),w=arguments[0],A=c;A--;)p[A-1]=arguments[A];return co(nn(w)?gn(w):[w],rr(p,1))},L.cond=function fl(c){var p=null==c?0:c.length,w=Ft();return c=p?or(c,function(A){if("function"!=typeof A[1])throw new Oi(Ae);return[w(A[0]),A[1]]}):[],Xt(function(A){for(var M=-1;++M<p;){var B=c[M];if(Yi(B[0],this,A))return Yi(B[1],this,A)}})},L.conforms=function av(c){return function Df(c){var p=Ci(c);return function(w){return vr(w,c,p)}}(hn(c,1))},L.constant=om,L.countBy=gy,L.create=function Pb(c,p){var w=Bl(c);return null==p?w:Oc(w,p)},L.curry=function $g(c,p,w){var A=Ql(c,8,R,R,R,R,R,p=w?R:p);return A.placeholder=$g.placeholder,A},L.curryRight=function Ah(c,p,w){var A=Ql(c,16,R,R,R,R,R,p=w?R:p);return A.placeholder=Ah.placeholder,A},L.debounce=by,L.defaults=Fb,L.defaultsDeep=Lb,L.defer=wy,L.delay=Cb,L.difference=Of,L.differenceBy=cb,L.differenceWith=Sg,L.drop=function J_(c,p,w){var A=null==c?0:c.length;return A?Pi(c,(p=w||p===R?1:cn(p))<0?0:p,A):[]},L.dropRight=function db(c,p,w){var A=null==c?0:c.length;return A?Pi(c,0,(p=A-(p=w||p===R?1:cn(p)))<0?0:p):[]},L.dropRightWhile=function kf(c,p){return c&&c.length?V(c,Ft(p,3),!0,!0):[]},L.dropWhile=function hb(c,p){return c&&c.length?V(c,Ft(p,3),!0):[]},L.fill=function X_(c,p,w,A){var M=null==c?0:c.length;return M?(w&&"number"!=typeof w&&Di(c,p,w)&&(w=0,A=M),function Kd(c,p,w,A){var M=c.length;for((w=cn(w))<0&&(w=-w>M?0:M+w),(A=A===R||A>M?M:cn(A))<0&&(A+=M),A=w>A?0:Qg(A);w<A;)c[w++]=p;return c}(c,p,w,A)):[]},L.filter=function Eb(c,p){return(nn(c)?gs:Bo)(c,Ft(p,3))},L.flatMap=function Db(c,p){return rr(Go(c,p),1)},L.flatMapDeep=function _y(c,p){return rr(Go(c,p),He)},L.flatMapDepth=function Ys(c,p,w){return w=w===R?1:cn(w),rr(Go(c,p),w)},L.flatten=ty,L.flattenDeep=function fb(c){return null!=c&&c.length?rr(c,He):[]},L.flattenDepth=function Fi(c,p){return null!=c&&c.length?rr(c,p=p===R?1:cn(p)):[]},L.flip=function Tb(c){return Ql(c,512)},L.flow=$I,L.flowRight=lv,L.fromPairs=function Ag(c){for(var p=-1,w=null==c?0:c.length,A={};++p<w;){var M=c[p];A[M[0]]=M[1]}return A},L.functions=function jy(c){return null==c?[]:Us(c,Ci(c))},L.functionsIn=function VA(c){return null==c?[]:Us(c,Js(c))},L.groupBy=Bf,L.initial=function Li(c){return null!=c&&c.length?Pi(c,0,-1):[]},L.intersection=zc,L.intersectionBy=Ng,L.intersectionWith=Zu,L.invert=MI,L.invertBy=HA,L.invokeMap=Da,L.iteratee=uv,L.keyBy=Ch,L.keys=Ci,L.keysIn=Js,L.map=Go,L.mapKeys=function kI(c,p){var w={};return p=Ft(p,3),Vs(c,function(A,M,B){Ls(w,p(A,M,B),A)}),w},L.mapValues=function eu(c,p){var w={};return p=Ft(p,3),Vs(c,function(A,M,B){Ls(w,M,p(A,M,B))}),w},L.matches=function Jb(c){return nl(hn(c,1))},L.matchesProperty=function am(c,p){return Xd(c,hn(p,1))},L.memoize=Ca,L.merge=Gy,L.mergeWith=Wy,L.method=GI,L.methodOf=Zf,L.mixin=kh,L.negate=Yc,L.nthArg=function ru(c){return c=cn(c),Xt(function(p){return ju(p,c)})},L.omit=zy,L.omitBy=function Xg(c,p){return zf(c,Yc(Ft(p)))},L.once=function Ey(c){return Hg(2,c)},L.orderBy=function Vf(c,p,w,A){return null==c?[]:(nn(p)||(p=null==p?[]:[p]),nn(w=A?R:w)||(w=null==w?[]:[w]),Wl(c,p,w))},L.over=Ph,L.overArgs=Dy,L.overEvery=ed,L.overSome=um,L.partial=Kt,L.partialRight=jf,L.partition=Uf,L.pick=Ky,L.pickBy=zf,L.property=cv,L.propertyOf=function Xb(c){return function(p){return null==c?R:Ur(c,p)}},L.pull=mb,L.pullAll=Rg,L.pullAllBy=function Mg(c,p,w){return c&&c.length&&p&&p.length?$r(c,p,Ft(w,2)):c},L.pullAllWith=function ry(c,p,w){return c&&c.length&&p&&p.length?$r(c,p,R,w):c},L.pullAt=iy,L.range=ew,L.rangeRight=cm,L.rearg=$f,L.reject=function Hf(c,p){return(nn(c)?gs:Bo)(c,Yc(Ft(p,3)))},L.remove=function sy(c,p){var w=[];if(!c||!c.length)return w;var A=-1,M=[],B=c.length;for(p=Ft(p,3);++A<B;){var K=c[A];p(K,A,c)&&(w.push(K),M.push(A))}return js(c,M),w},L.rest=function Iy(c,p){if("function"!=typeof c)throw new Oi(Ae);return Xt(c,p=p===R?p:cn(p))},L.reverse=Og,L.sampleSize=function ul(c,p,w){return p=(w?Di(c,p,w):p===R)?1:cn(p),(nn(c)?Ul:rl)(c,p)},L.set=function tu(c,p,w){return null==c?c:il(c,p,w)},L.setWith=function qy(c,p,w,A){return A="function"==typeof A?A:R,null==c?c:il(c,p,w,A)},L.shuffle=function yy(c){return(nn(c)?Hl:dg)(c)},L.slice=function Qu(c,p,w){var A=null==c?0:c.length;return A?(w&&"number"!=typeof w&&Di(c,p,w)?(p=0,w=A):(p=null==p?0:cn(p),w=w===R?A:cn(w)),Pi(c,p,w)):[]},L.sortBy=vy,L.sortedUniq=function FA(c){return c&&c.length?th(c):[]},L.sortedUniqBy=function Ea(c,p){return c&&c.length?th(c,Ft(p,2)):[]},L.split=function FI(c,p,w){return w&&"number"!=typeof w&&Di(c,p,w)&&(p=w=R),(w=w===R?et:w>>>0)?(c=On(c))&&("string"==typeof p||null!=p&&!Py(p))&&!(p=_(p))&&ca(c)?Ei(Fs(c),0,w):c.split(p,w):[]},L.spread=function Sb(c,p){if("function"!=typeof c)throw new Oi(Ae);return p=null==p?0:Tr(cn(p),0),Xt(function(w){var A=w[p],M=Ei(w,0,p);return A&&co(M,A),Yi(c,this,M)})},L.tail=function kg(c){var p=null==c?0:c.length;return p?Pi(c,1,p):[]},L.take=function ay(c,p,w){return c&&c.length?Pi(c,0,(p=w||p===R?1:cn(p))<0?0:p):[]},L.takeRight=function bb(c,p,w){var A=null==c?0:c.length;return A?Pi(c,(p=A-(p=w||p===R?1:cn(p)))<0?0:p,A):[]},L.takeRightWhile=function wb(c,p){return c&&c.length?V(c,Ft(p,3),!1,!0):[]},L.takeWhile=function bI(c,p){return c&&c.length?V(c,Ft(p,3)):[]},L.tap=function Dh(c,p){return p(c),c},L.throttle=function Ab(c,p,w){var A=!0,M=!0;if("function"!=typeof c)throw new Oi(Ae);return br(w)&&(A="leading"in w?!!w.leading:A,M="trailing"in w?!!w.trailing:M),by(c,p,{leading:A,maxWait:p,trailing:M})},L.thru=Ih,L.toArray=By,L.toPairs=Yy,L.toPairsIn=Zy,L.toPath=function hv(c){return nn(c)?or(c,Ws):Ui(c)?[c]:gn(Ig(On(c)))},L.toPlainObject=Mh,L.transform=function Qy(c,p,w){var A=nn(c),M=A||dl(c)||Hi(c);if(p=Ft(p,4),null==w){var B=c&&c.constructor;w=M?A?new B:[]:br(c)&&Qs(B)?Bl(kl(c)):{}}return(M?ps:Vs)(c,function(K,Q,oe){return p(w,K,Q,oe)}),w},L.unary=function Cy(c){return Ug(c,1)},L.union=Pf,L.unionBy=wI,L.unionWith=EI,L.uniq=function ly(c){return c&&c.length?v(c):[]},L.uniqBy=function uy(c,p){return c&&c.length?v(c,Ft(p,2)):[]},L.uniqWith=function cy(c,p){return p="function"==typeof p?p:R,c&&c.length?v(c,R,p):[]},L.unset=function jb(c,p){return null==c||C(c,p)},L.unzip=wh,L.unzipWith=Bi,L.update=function $b(c,p,w){return null==c?c:O(c,p,qt(w))},L.updateWith=function Kf(c,p,w,A){return A="function"==typeof A?A:R,null==c?c:O(c,p,qt(w),A)},L.values=Ko,L.valuesIn=function em(c){return null==c?[]:ja(c,Js(c))},L.without=Pg,L.words=ov,L.wrap=function Nb(c,p){return Kt(qt(p),c)},L.xor=Fg,L.xorBy=zs,L.xorWith=Ks,L.zip=jo,L.zipObject=function qs(c,p){return ht(c||[],p||[],mo)},L.zipObjectDeep=function Lg(c,p){return ht(c||[],p||[],il)},L.zipWith=Eh,L.entries=Yy,L.entriesIn=Zy,L.extend=Jg,L.extendWith=Uy,kh(L,L),L.add=rs,L.attempt=sm,L.camelCase=Jy,L.capitalize=nm,L.ceil=Bh,L.clamp=function Xc(c,p,w){return w===R&&(w=p,p=R),w!==R&&(w=(w=zo(w))==w?w:0),p!==R&&(p=(p=zo(p))==p?p:0),Ji(zo(c),p,w)},L.clone=function xb(c){return hn(c,4)},L.cloneDeep=function II(c){return hn(c,5)},L.cloneDeepWith=function Ty(c,p){return hn(c,5,p="function"==typeof p?p:R)},L.cloneWith=function Gg(c,p){return hn(c,4,p="function"==typeof p?p:R)},L.conformsTo=function Sy(c,p){return null==p||vr(c,p,Ci(p))},L.deburr=Yf,L.defaultTo=function jI(c,p){return null==c||c!=c?p:c},L.divide=tw,L.endsWith=function Oh(c,p,w){c=On(c),p=_(p);var A=c.length,M=w=w===R?A:Ji(cn(w),0,A);return(w-=p.length)>=0&&c.slice(w,M)==p},L.eq=Ii,L.escape=function Xy(c){return(c=On(c))&&kt.test(c)?c.replace(mt,B_):c},L.escapeRegExp=function rm(c){return(c=On(c))&&ce.test(c)?c.replace(j,"\\$&"):c},L.every=function my(c,p,w){var A=nn(c)?Nl:sg;return w&&Di(c,p,w)&&(p=R),A(c,Ft(p,3))},L.find=DI,L.findIndex=ey,L.findKey=function LA(c,p){return un(c,Ft(p,3),Vs)},L.findLast=Lf,L.findLastIndex=vh,L.findLastKey=function RI(c,p){return un(c,Ft(p,3),el)},L.floor=nw,L.forEach=ll,L.forEachRight=ns,L.forIn=function BA(c,p){return null==c?c:$l(c,Ft(p,3),Js)},L.forInRight=function Bb(c,p){return null==c?c:ya(c,Ft(p,3),Js)},L.forOwn=function Hy(c,p){return c&&Vs(c,Ft(p,3))},L.forOwnRight=function Vb(c,p){return c&&el(c,Ft(p,3))},L.get=Ub,L.gt=Rb,L.gte=Wg,L.has=function UA(c,p){return null!=c&&vg(c,p,tl)},L.hasIn=$y,L.head=ny,L.identity=eo,L.includes=function $o(c,p,w,A){c=Zs(c)?c:Ko(c),w=w&&!A?cn(w):0;var M=c.length;return w<0&&(w=Tr(M+w,0)),Rh(c)?w<=M&&c.indexOf(p,w)>-1:!!M&&xo(c,p,w)>-1},L.indexOf=function bh(c,p,w){var A=null==c?0:c.length;if(!A)return-1;var M=null==w?0:cn(w);return M<0&&(M=Tr(A+M,0)),xo(c,p,M)},L.inRange=function tm(c,p,w){return p=Wo(p),w===R?(w=p,p=0):w=Wo(w),function og(c,p,w){return c>=Lr(p,w)&&c<Tr(p,w)}(c=zo(c),p,w)},L.invoke=OI,L.isArguments=cl,L.isArray=nn,L.isArrayBuffer=CI,L.isArrayLike=Zs,L.isArrayLikeObject=Jr,L.isBoolean=function Mb(c){return!0===c||!1===c||Nr(c)&&Hr(c)==Pr},L.isBuffer=dl,L.isDate=TI,L.isElement=function SI(c){return Nr(c)&&1===c.nodeType&&!xh(c)},L.isEmpty=function Nh(c){if(null==c)return!0;if(Zs(c)&&(nn(c)||"string"==typeof c||"function"==typeof c.splice||dl(c)||Hi(c)||cl(c)))return!c.length;var p=ts(c);if(p==Jn||p==mn)return!c.size;if(Gc(c))return!Jd(c).length;for(var w in c)if(Mn.call(c,w))return!1;return!0},L.isEqual=function Ay(c,p){return Bu(c,p)},L.isEqualWith=function zg(c,p,w){var A=(w="function"==typeof w?w:R)?w(c,p):R;return A===R?Bu(c,p,R,w):!!A},L.isError=Qc,L.isFinite=function AI(c){return"number"==typeof c&&qa(c)},L.isFunction=Qs,L.isInteger=Ny,L.isLength=Gf,L.isMap=xy,L.isMatch=function Ry(c,p){return c===p||Uu(c,p,Nf(p))},L.isMatchWith=function My(c,p,w){return w="function"==typeof w?w:R,Uu(c,p,Nf(p),w)},L.isNaN=function Oy(c){return qg(c)&&c!=+c},L.isNative=function ky(c){if(bg(c))throw new Pt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Zd(c)},L.isNil=function NI(c){return null==c},L.isNull=function Kg(c){return null===c},L.isNumber=qg,L.isObject=br,L.isObjectLike=Nr,L.isPlainObject=xh,L.isRegExp=Py,L.isSafeInteger=function Jc(c){return Ny(c)&&c>=-Dt&&c<=Dt},L.isSet=Fy,L.isString=Rh,L.isSymbol=Ui,L.isTypedArray=Hi,L.isUndefined=function Ly(c){return c===R},L.isWeakMap=function Ob(c){return Nr(c)&&ts(c)==jn},L.isWeakSet=function Yg(c){return Nr(c)&&"[object WeakSet]"==Hr(c)},L.join=function pb(c,p){return null==c?"":Nc.call(c,p)},L.kebabCase=Gb,L.last=ws,L.lastIndexOf=function gb(c,p,w){var A=null==c?0:c.length;if(!A)return-1;var M=A;return w!==R&&(M=(M=cn(w))<0?Tr(A+M,0):Lr(M,A-1)),p==p?function Ml(ne,Ee,_e){for(var _t=_e+1;_t--;)if(ne[_t]===Ee)return _t;return _t}(c,p,M):vc(c,_u,M,!0)},L.lowerCase=PI,L.lowerFirst=Wb,L.lt=hl,L.lte=Zg,L.max=function Qf(c){return c&&c.length?Fu(c,eo,Yd):R},L.maxBy=function WI(c,p){return c&&c.length?Fu(c,Ft(p,2),Yd):R},L.mean=function rw(c){return yu(c,eo)},L.meanBy=function fm(c,p){return yu(c,Ft(p,2))},L.min=function fv(c){return c&&c.length?Fu(c,eo,bs):R},L.minBy=function pm(c,p){return c&&c.length?Fu(c,Ft(p,2),bs):R},L.stubArray=ji,L.stubFalse=td,L.stubObject=function dm(){return{}},L.stubString=function Fh(){return""},L.stubTrue=function dv(){return!0},L.multiply=Vh,L.nth=function xg(c,p){return c&&c.length?ju(c,cn(p)):R},L.noConflict=function lm(){return gr._===this&&(gr._=Iu),this},L.noop=nu,L.now=qc,L.pad=function ev(c,p,w){c=On(c);var A=(p=cn(p))?ms(c):0;if(!p||A>=p)return c;var M=(p-A)/2;return Hc(pa(M),w)+c+Hc(fa(M),w)},L.padEnd=function zb(c,p,w){c=On(c);var A=(p=cn(p))?ms(c):0;return p&&A<p?c+Hc(p-A,w):c},L.padStart=function tv(c,p,w){c=On(c);var A=(p=cn(p))?ms(c):0;return p&&A<p?Hc(p-A,w)+c:c},L.parseInt=function nv(c,p,w){return w||null==p?p=0:p&&(p=+p),ng(On(c).replace(Ue,""),p||0)},L.random=function qf(c,p,w){if(w&&"boolean"!=typeof w&&Di(c,p,w)&&(p=w=R),w===R&&("boolean"==typeof p?(w=p,p=R):"boolean"==typeof c&&(w=c,c=R)),c===R&&p===R?(c=0,p=1):(c=Wo(c),p===R?(p=c,c=0):p=Wo(p)),c>p){var A=c;c=p,p=A}if(w||c%1||p%1){var M=Tu();return Lr(c+M*(p-c+qp("1e-"+((M+"").length-1))),p)}return eh(c,p)},L.reduce=function Ia(c,p,w){var A=nn(c)?Rd:bu,M=arguments.length<3;return A(c,Ft(p,4),w,M,_o)},L.reduceRight=function Vg(c,p,w){var A=nn(c)?Md:bu,M=arguments.length<3;return A(c,Ft(p,4),w,M,_a)},L.repeat=function Kb(c,p,w){return p=(w?Di(c,p,w):p===R)?1:cn(p),Fc(On(c),p)},L.replace=function Xs(){var c=arguments,p=On(c[0]);return c.length<3?p:p.replace(c[1],c[2])},L.result=function Hb(c,p,w){var A=-1,M=(p=vn(p,c)).length;for(M||(M=1,c=R);++A<M;){var B=null==c?R:c[Ws(p[A])];B===R&&(A=M,B=w),c=Qs(B)?B.call(c):B}return c},L.round=iw,L.runInContext=ne,L.sample=function Ib(c){return(nn(c)?Mc:Vo)(c)},L.size=function vo(c){if(null==c)return 0;if(Zs(c))return Rh(c)?ms(c):c.length;var p=ts(c);return p==Jn||p==mn?c.size:Jd(c).length},L.snakeCase=rv,L.some=function Th(c,p,w){var A=nn(c)?Ha:hg;return w&&Di(c,p,w)&&(p=R),A(c,Ft(p,3))},L.sortedIndex=function al(c,p){return sl(c,p)},L.sortedIndexBy=function oy(c,p,w){return Lc(c,p,Ft(w,2))},L.sortedIndexOf=function _b(c,p){var w=null==c?0:c.length;if(w){var A=sl(c,p);if(A<w&&Ii(c[A],p))return A}return-1},L.sortedLastIndex=function yb(c,p){return sl(c,p,!0)},L.sortedLastIndexBy=function PA(c,p,w){return Lc(c,p,Ft(w,2),!0)},L.sortedLastIndexOf=function vb(c,p){if(null!=c&&c.length){var A=sl(c,p,!0)-1;if(Ii(c[A],p))return A}return-1},L.startCase=jA,L.startsWith=function LI(c,p,w){return c=On(c),w=null==w?0:Ji(cn(w),0,c.length),p=_(p),c.slice(w,w+p.length)==p},L.subtract=Jf,L.sum=function pv(c){return c&&c.length?wu(c,eo):0},L.sumBy=function zI(c,p){return c&&c.length?wu(c,Ft(p,2)):0},L.template=function im(c,p,w){var A=L.templateSettings;w&&Di(c,p,w)&&(p=R),c=On(c),p=Uy({},p,A,_g);var Q,oe,M=Uy({},p.imports,A.imports,_g),B=Ci(M),K=ja(M,B),Oe=0,xe=p.interpolate||Pa,je="__p += '",st=Zi((p.escape||Pa).source+"|"+xe.source+"|"+(xe===z?xn:Pa).source+"|"+(p.evaluate||Pa).source+"|$","g"),wt="//# sourceURL="+(Mn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++cf+"]")+"\n";c.replace(st,function(Bt,Gt,bn,Ti,Gr,Zn){return bn||(bn=Ti),je+=c.slice(Oe,Zn).replace(Fa,bc),Gt&&(Q=!0,je+="' +\n__e("+Gt+") +\n'"),Gr&&(oe=!0,je+="';\n"+Gr+";\n__p += '"),bn&&(je+="' +\n((__t = ("+bn+")) == null ? '' : __t) +\n'"),Oe=Zn+Bt.length,Bt}),je+="';\n";var Et=Mn.call(p,"variable")&&p.variable;if(Et){if(Nn.test(Et))throw new Pt("Invalid `variable` option passed into `_.template`")}else je="with (obj) {\n"+je+"\n}\n";je=(oe?je.replace(hi,""):je).replace(dr,"$1").replace(gt,"$1;"),je="function("+(Et||"obj")+") {\n"+(Et?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(oe?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+je+"return __p\n}";var Lt=sm(function(){return wn(B,wt+"return "+je).apply(R,K)});if(Lt.source=je,Qc(Lt))throw Lt;return Lt},L.times=function hm(c,p){if((c=cn(c))<1||c>Dt)return[];var w=et,A=Lr(c,et);p=Ft(p),c-=et;for(var M=hf(A,p);++w<c;)p(w);return M},L.toFinite=Wo,L.toInteger=cn,L.toLength=Qg,L.toLower=function qb(c){return On(c).toLowerCase()},L.toNumber=zo,L.toSafeInteger=function Wf(c){return c?Ji(cn(c),-Dt,Dt):0===c?c:0},L.toString=On,L.toUpper=function BI(c){return On(c).toUpperCase()},L.trim=function VI(c,p,w){if((c=On(c))&&(w||p===R))return Ir(c);if(!c||!(p=_(p)))return c;var A=Fs(c),M=Fs(p);return Ei(A,Mo(A,M),kd(A,M)+1).join("")},L.trimEnd=function UI(c,p,w){if((c=On(c))&&(w||p===R))return c.slice(0,tr(c)+1);if(!c||!(p=_(p)))return c;var A=Fs(c);return Ei(A,0,kd(A,Fs(p))+1).join("")},L.trimStart=function Yb(c,p,w){if((c=On(c))&&(w||p===R))return c.replace(Ue,"");if(!c||!(p=_(p)))return c;var A=Fs(c);return Ei(A,Mo(A,Fs(p))).join("")},L.truncate=function HI(c,p){var w=30,A="...";if(br(p)){var M="separator"in p?p.separator:M;w="length"in p?cn(p.length):w,A="omission"in p?_(p.omission):A}var B=(c=On(c)).length;if(ca(c)){var K=Fs(c);B=K.length}if(w>=B)return c;var Q=w-ms(A);if(Q<1)return A;var oe=K?Ei(K,0,Q).join(""):c.slice(0,Q);if(M===R)return oe+A;if(K&&(Q+=oe.length-Q),Py(M)){if(c.slice(Q).search(M)){var Oe,xe=oe;for(M.global||(M=Zi(M.source,On(Ms.exec(M))+"g")),M.lastIndex=0;Oe=M.exec(xe);)var je=Oe.index;oe=oe.slice(0,je===R?Q:je)}}else if(c.indexOf(_(M),Q)!=Q){var st=oe.lastIndexOf(M);st>-1&&(oe=oe.slice(0,st))}return oe+A},L.unescape=function iv(c){return(c=On(c))&&Mt.test(c)?c.replace(Re,Oo):c},L.uniqueId=function Lh(c){var p=++gf;return On(c)+p},L.upperCase=Zb,L.upperFirst=sv,L.each=ll,L.eachRight=ns,L.first=ny,kh(L,function(){var c={};return Vs(L,function(p,w){Mn.call(L.prototype,w)||(c[w]=p)}),c}(),{chain:!1}),L.VERSION="4.17.21",ps(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){L[c].placeholder=L}),ps(["drop","take"],function(c,p){yn.prototype[c]=function(w){w=w===R?1:Tr(cn(w),0);var A=this.__filtered__&&!p?new yn(this):this.clone();return A.__filtered__?A.__takeCount__=Lr(w,A.__takeCount__):A.__views__.push({size:Lr(w,et),type:c+(A.__dir__<0?"Right":"")}),A},yn.prototype[c+"Right"]=function(w){return this.reverse()[c](w).reverse()}}),ps(["filter","map","takeWhile"],function(c,p){var w=p+1,A=1==w||3==w;yn.prototype[c]=function(M){var B=this.clone();return B.__iteratees__.push({iteratee:Ft(M,3),type:w}),B.__filtered__=B.__filtered__||A,B}}),ps(["head","last"],function(c,p){var w="take"+(p?"Right":"");yn.prototype[c]=function(){return this[w](1).value()[0]}}),ps(["initial","tail"],function(c,p){var w="drop"+(p?"":"Right");yn.prototype[c]=function(){return this.__filtered__?new yn(this):this[w](1)}}),yn.prototype.compact=function(){return this.filter(eo)},yn.prototype.find=function(c){return this.filter(c).head()},yn.prototype.findLast=function(c){return this.reverse().find(c)},yn.prototype.invokeMap=Xt(function(c,p){return"function"==typeof c?new yn(this):this.map(function(w){return lr(w,c,p)})}),yn.prototype.reject=function(c){return this.filter(Yc(Ft(c)))},yn.prototype.slice=function(c,p){c=cn(c);var w=this;return w.__filtered__&&(c>0||p<0)?new yn(w):(c<0?w=w.takeRight(-c):c&&(w=w.drop(c)),p!==R&&(w=(p=cn(p))<0?w.dropRight(-p):w.take(p-c)),w)},yn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},yn.prototype.toArray=function(){return this.take(et)},Vs(yn.prototype,function(c,p){var w=/^(?:filter|find|map|reject)|While$/.test(p),A=/^(?:head|last)$/.test(p),M=L[A?"take"+("last"==p?"Right":""):p],B=A||/^find/.test(p);!M||(L.prototype[p]=function(){var K=this.__wrapped__,Q=A?[1]:arguments,oe=K instanceof yn,Oe=Q[0],xe=oe||nn(K),je=function(Gt){var bn=M.apply(L,co([Gt],Q));return A&&st?bn[0]:bn};xe&&w&&"function"==typeof Oe&&1!=Oe.length&&(oe=xe=!1);var st=this.__chain__,wt=!!this.__actions__.length,Et=B&&!st,Lt=oe&&!wt;if(!B&&xe){K=Lt?K:new yn(this);var Bt=c.apply(K,Q);return Bt.__actions__.push({func:Ih,args:[je],thisArg:R}),new po(Bt,st)}return Et&&Lt?c.apply(this,Q):(Bt=this.thru(je),Et?A?Bt.value()[0]:Bt.value():Bt)})}),ps(["pop","push","shift","sort","splice","unshift"],function(c){var p=Ec[c],w=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",A=/^(?:pop|shift)$/.test(c);L.prototype[c]=function(){var M=arguments;if(A&&!this.__chain__){var B=this.value();return p.apply(nn(B)?B:[],M)}return this[w](function(K){return p.apply(nn(K)?K:[],M)})}}),Vs(yn.prototype,function(c,p){var w=L[p];if(w){var A=w.name+"";Mn.call(ys,A)||(ys[A]=[]),ys[A].push({name:p,func:w})}}),ys[ql(R,2).name]=[{name:"wrapper",func:R}],yn.prototype.clone=function X0(){var c=new yn(this.__wrapped__);return c.__actions__=gn(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=gn(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=gn(this.__views__),c},yn.prototype.reverse=function eb(){if(this.__filtered__){var c=new yn(this);c.__dir__=-1,c.__filtered__=!0}else(c=this.clone()).__dir__*=-1;return c},yn.prototype.value=function Ru(){var c=this.__wrapped__.value(),p=this.__dir__,w=nn(c),A=p<0,M=w?c.length:0,B=function Rf(c,p,w){for(var A=-1,M=w.length;++A<M;){var B=w[A],K=B.size;switch(B.type){case"drop":c+=K;break;case"dropRight":p-=K;break;case"take":p=Lr(p,c+K);break;case"takeRight":c=Tr(c,p-K)}}return{start:c,end:p}}(0,M,this.__views__),K=B.start,Q=B.end,oe=Q-K,Oe=A?Q:K-1,xe=this.__iteratees__,je=xe.length,st=0,wt=Lr(oe,this.__takeCount__);if(!w||!A&&M==oe&&wt==oe)return le(c,this.__actions__);var Et=[];e:for(;oe--&&st<wt;){for(var Lt=-1,Bt=c[Oe+=p];++Lt<je;){var Gt=xe[Lt],Ti=Gt.type,Gr=(0,Gt.iteratee)(Bt);if(2==Ti)Bt=Gr;else if(!Gr){if(1==Ti)continue e;break e}}Et[st++]=Bt}return Et},L.prototype.at=Ff,L.prototype.chain=function Kc(){return Ju(this)},L.prototype.commit=function Bg(){return new po(this.value(),this.__chain__)},L.prototype.next=function dy(){this.__values__===R&&(this.__values__=By(this.value()));var c=this.__index__>=this.__values__.length;return{done:c,value:c?R:this.__values__[this.__index__++]}},L.prototype.plant=function fy(c){for(var p,w=this;w instanceof bf;){var A=Yu(w);A.__index__=0,A.__values__=R,p?M.__wrapped__=A:p=A;var M=A;w=w.__wrapped__}return M.__wrapped__=c,p},L.prototype.reverse=function py(){var c=this.__wrapped__;if(c instanceof yn){var p=c;return this.__actions__.length&&(p=new yn(this)),(p=p.reverse()).__actions__.push({func:Ih,args:[Og],thisArg:R}),new po(p,this.__chain__)}return this.thru(Og)},L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=function Xu(){return le(this.__wrapped__,this.__actions__)},L.prototype.first=L.prototype.head,Pl&&(L.prototype[Pl]=function hy(){return this}),L}();gr._=wc,(h=function(){return wc}.call(Ve,G,Ve,St))!==R&&(St.exports=h)}.call(this)},8306:(St,Ve,G)=>{"use strict";G.d(Ve,{y:()=>X});var h=G(930),R=G(727),$=G(8822),we=G(4671);var We=G(2416),ke=G(576),Ye=G(2806);let X=(()=>{class Ge{constructor(Je){Je&&(this._subscribe=Je)}lift(Je){const pe=new Ge;return pe.source=this,pe.operator=Je,pe}subscribe(Je,pe,Ce){const at=function Xe(Ge){return Ge&&Ge instanceof h.Lv||function de(Ge){return Ge&&(0,ke.m)(Ge.next)&&(0,ke.m)(Ge.error)&&(0,ke.m)(Ge.complete)}(Ge)&&(0,R.Nn)(Ge)}(Je)?Je:new h.Hp(Je,pe,Ce);return(0,Ye.x)(()=>{const{operator:ut,source:Be}=this;at.add(ut?ut.call(at,Be):Be?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(Je){try{return this._subscribe(Je)}catch(pe){Je.error(pe)}}forEach(Je,pe){return new(pe=Z(pe))((Ce,at)=>{const ut=new h.Hp({next:Be=>{try{Je(Be)}catch(Ne){at(Ne),ut.unsubscribe()}},error:at,complete:Ce});this.subscribe(ut)})}_subscribe(Je){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Je)}[$.L](){return this}pipe(...Je){return function Ae(Ge){return 0===Ge.length?we.y:1===Ge.length?Ge[0]:function(Je){return Ge.reduce((pe,Ce)=>Ce(pe),Je)}}(Je)(this)}toPromise(Je){return new(Je=Z(Je))((pe,Ce)=>{let at;this.subscribe(ut=>at=ut,ut=>Ce(ut),()=>pe(at))})}}return Ge.create=ze=>new Ge(ze),Ge})();function Z(Ge){var ze;return null!==(ze=Ge??We.v.Promise)&&void 0!==ze?ze:Promise}},7579:(St,Ve,G)=>{"use strict";G.d(Ve,{x:()=>We});var h=G(8306),R=G(727);const we=(0,G(3888).d)(Ye=>function(){Ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=G(8737),Ae=G(2806);let We=(()=>{class Ye extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const de=new ke(this,this);return de.operator=Z,de}_throwIfClosed(){if(this.closed)throw new we}next(Z){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const de of this.currentObservers)de.next(Z)}})}error(Z){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:de}=this;for(;de.length;)de.shift().error(Z)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:de,isStopped:Xe,observers:Ge}=this;return de||Xe?R.Lc:(this.currentObservers=null,Ge.push(Z),new R.w0(()=>{this.currentObservers=null,(0,Le.P)(Ge,Z)}))}_checkFinalizedStatuses(Z){const{hasError:de,thrownError:Xe,isStopped:Ge}=this;de?Z.error(Xe):Ge&&Z.complete()}asObservable(){const Z=new h.y;return Z.source=this,Z}}return Ye.create=(X,Z)=>new ke(X,Z),Ye})();class ke extends We{constructor(X,Z){super(),this.destination=X,this.source=Z}next(X){var Z,de;null===(de=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===de||de.call(Z,X)}error(X){var Z,de;null===(de=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===de||de.call(Z,X)}complete(){var X,Z;null===(Z=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===Z||Z.call(X)}_subscribe(X){var Z,de;return null!==(de=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(X))&&void 0!==de?de:R.Lc}}},930:(St,Ve,G)=>{"use strict";G.d(Ve,{Hp:()=>Je,Lv:()=>de});var h=G(576),R=G(727),$=G(2416),we=G(7849),Le=G(5032);const Ae=Ye("C",void 0,void 0);function Ye(Be,Ne,De){return{kind:Be,value:Ne,error:De}}var X=G(3410),Z=G(2806);class de extends R.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,R.Nn)(Ne)&&Ne.add(this)):this.destination=ut}static create(Ne,De,tt){return new Je(Ne,De,tt)}next(Ne){this.isStopped?at(function ke(Be){return Ye("N",Be,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?at(function We(Be){return Ye("E",void 0,Be)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?at(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xe=Function.prototype.bind;function Ge(Be,Ne){return Xe.call(Be,Ne)}class ze{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:De}=this;if(De.next)try{De.next(Ne)}catch(tt){pe(tt)}}error(Ne){const{partialObserver:De}=this;if(De.error)try{De.error(Ne)}catch(tt){pe(tt)}else pe(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(De){pe(De)}}}class Je extends de{constructor(Ne,De,tt){let he;if(super(),(0,h.m)(Ne)||!Ne)he={next:Ne??void 0,error:De??void 0,complete:tt??void 0};else{let ge;this&&$.v.useDeprecatedNextContext?(ge=Object.create(Ne),ge.unsubscribe=()=>this.unsubscribe(),he={next:Ne.next&&Ge(Ne.next,ge),error:Ne.error&&Ge(Ne.error,ge),complete:Ne.complete&&Ge(Ne.complete,ge)}):he=Ne}this.destination=new ze(he)}}function pe(Be){$.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Be):(0,we.h)(Be)}function at(Be,Ne){const{onStoppedNotification:De}=$.v;De&&X.z.setTimeout(()=>De(Be,Ne))}const ut={closed:!0,next:Le.Z,error:function Ce(Be){throw Be},complete:Le.Z}},727:(St,Ve,G)=>{"use strict";G.d(Ve,{Lc:()=>Ae,w0:()=>Le,Nn:()=>We});var h=G(576);const $=(0,G(3888).d)(Ye=>function(Z){Ye(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((de,Xe)=>`${Xe+1}) ${de.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var we=G(8737);class Le{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Ge of Z)Ge.remove(this);else Z.remove(this);const{initialTeardown:de}=this;if((0,h.m)(de))try{de()}catch(Ge){X=Ge instanceof $?Ge.errors:[Ge]}const{_finalizers:Xe}=this;if(Xe){this._finalizers=null;for(const Ge of Xe)try{ke(Ge)}catch(ze){X=X??[],ze instanceof $?X=[...X,...ze.errors]:X.push(ze)}}if(X)throw new $(X)}}add(X){var Z;if(X&&X!==this)if(this.closed)ke(X);else{if(X instanceof Le){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(X)}}_hasParent(X){const{_parentage:Z}=this;return Z===X||Array.isArray(Z)&&Z.includes(X)}_addParent(X){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(X),Z):Z?[Z,X]:X}_removeParent(X){const{_parentage:Z}=this;Z===X?this._parentage=null:Array.isArray(Z)&&(0,we.P)(Z,X)}remove(X){const{_finalizers:Z}=this;Z&&(0,we.P)(Z,X),X instanceof Le&&X._removeParent(this)}}Le.EMPTY=(()=>{const Ye=new Le;return Ye.closed=!0,Ye})();const Ae=Le.EMPTY;function We(Ye){return Ye instanceof Le||Ye&&"closed"in Ye&&(0,h.m)(Ye.remove)&&(0,h.m)(Ye.add)&&(0,h.m)(Ye.unsubscribe)}function ke(Ye){(0,h.m)(Ye)?Ye():Ye.unsubscribe()}},2416:(St,Ve,G)=>{"use strict";G.d(Ve,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(St,Ve,G)=>{"use strict";G.d(Ve,{E:()=>R});const R=new(G(8306).y)(Le=>Le.complete())},8996:(St,Ve,G)=>{"use strict";G.d(Ve,{D:()=>Ne});var h=G(8421),R=G(5363),$=G(9468),Ae=G(8306),ke=G(2202),Ye=G(576),X=G(9672);function de(De,tt){if(!De)throw new Error("Iterable cannot be null");return new Ae.y(he=>{(0,X.f)(he,tt,()=>{const ge=De[Symbol.asyncIterator]();(0,X.f)(he,tt,()=>{ge.next().then(Te=>{Te.done?he.complete():he.next(Te.value)})},0,!0)})})}var Xe=G(3670),Ge=G(8239),ze=G(1144),Je=G(6495),pe=G(2206),Ce=G(4532),at=G(3260);function Ne(De,tt){return tt?function Be(De,tt){if(null!=De){if((0,Xe.c)(De))return function we(De,tt){return(0,h.Xf)(De).pipe((0,$.R)(tt),(0,R.Q)(tt))}(De,tt);if((0,ze.z)(De))return function We(De,tt){return new Ae.y(he=>{let ge=0;return tt.schedule(function(){ge===De.length?he.complete():(he.next(De[ge++]),he.closed||this.schedule())})})}(De,tt);if((0,Ge.t)(De))return function Le(De,tt){return(0,h.Xf)(De).pipe((0,$.R)(tt),(0,R.Q)(tt))}(De,tt);if((0,pe.D)(De))return de(De,tt);if((0,Je.T)(De))return function Z(De,tt){return new Ae.y(he=>{let ge;return(0,X.f)(he,tt,()=>{ge=De[ke.h](),(0,X.f)(he,tt,()=>{let Te,re;try{({value:Te,done:re}=ge.next())}catch(ie){return void he.error(ie)}re?he.complete():he.next(Te)},0,!0)}),()=>(0,Ye.m)(ge?.return)&&ge.return()})}(De,tt);if((0,at.L)(De))return function ut(De,tt){return de((0,at.Q)(De),tt)}(De,tt)}throw(0,Ce.z)(De)}(De,tt):(0,h.Xf)(De)}},8421:(St,Ve,G)=>{"use strict";G.d(Ve,{Xf:()=>Xe});var h=G(655),R=G(1144),$=G(8239),we=G(8306),Le=G(3670),Ae=G(2206),We=G(4532),ke=G(6495),Ye=G(3260),X=G(576),Z=G(7849),de=G(8822);function Xe(Be){if(Be instanceof we.y)return Be;if(null!=Be){if((0,Le.c)(Be))return function Ge(Be){return new we.y(Ne=>{const De=Be[de.L]();if((0,X.m)(De.subscribe))return De.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Be);if((0,R.z)(Be))return function ze(Be){return new we.y(Ne=>{for(let De=0;De<Be.length&&!Ne.closed;De++)Ne.next(Be[De]);Ne.complete()})}(Be);if((0,$.t)(Be))return function Je(Be){return new we.y(Ne=>{Be.then(De=>{Ne.closed||(Ne.next(De),Ne.complete())},De=>Ne.error(De)).then(null,Z.h)})}(Be);if((0,Ae.D)(Be))return Ce(Be);if((0,ke.T)(Be))return function pe(Be){return new we.y(Ne=>{for(const De of Be)if(Ne.next(De),Ne.closed)return;Ne.complete()})}(Be);if((0,Ye.L)(Be))return function at(Be){return Ce((0,Ye.Q)(Be))}(Be)}throw(0,We.z)(Be)}function Ce(Be){return new we.y(Ne=>{(function ut(Be,Ne){var De,tt,he,ge;return(0,h.mG)(this,void 0,void 0,function*(){try{for(De=(0,h.KL)(Be);!(tt=yield De.next()).done;)if(Ne.next(tt.value),Ne.closed)return}catch(Te){he={error:Te}}finally{try{tt&&!tt.done&&(ge=De.return)&&(yield ge.call(De))}finally{if(he)throw he.error}}Ne.complete()})})(Be,Ne).catch(De=>Ne.error(De))})}},6451:(St,Ve,G)=>{"use strict";G.d(Ve,{T:()=>Ae});var h=G(8189),R=G(8421),$=G(515),we=G(3269),Le=G(8996);function Ae(...We){const ke=(0,we.yG)(We),Ye=(0,we._6)(We,1/0),X=We;return X.length?1===X.length?(0,R.Xf)(X[0]):(0,h.J)(Ye)((0,Le.D)(X,ke)):$.E}},5403:(St,Ve,G)=>{"use strict";G.d(Ve,{x:()=>R});var h=G(930);function R(we,Le,Ae,We,ke){return new $(we,Le,Ae,We,ke)}class $ extends h.Lv{constructor(Le,Ae,We,ke,Ye,X){super(Le),this.onFinalize=Ye,this.shouldUnsubscribe=X,this._next=Ae?function(Z){try{Ae(Z)}catch(de){Le.error(de)}}:super._next,this._error=ke?function(Z){try{ke(Z)}catch(de){Le.error(de)}finally{this.unsubscribe()}}:super._error,this._complete=We?function(){try{We()}catch(Z){Le.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(Le=this.onFinalize)||void 0===Le||Le.call(this))}}}},4004:(St,Ve,G)=>{"use strict";G.d(Ve,{U:()=>$});var h=G(4482),R=G(5403);function $(we,Le){return(0,h.e)((Ae,We)=>{let ke=0;Ae.subscribe((0,R.x)(We,Ye=>{We.next(we.call(Le,Ye,ke++))}))})}},8189:(St,Ve,G)=>{"use strict";G.d(Ve,{J:()=>$});var h=G(5577),R=G(4671);function $(we=1/0){return(0,h.z)(R.y,we)}},5577:(St,Ve,G)=>{"use strict";G.d(Ve,{z:()=>ke});var h=G(4004),R=G(8421),$=G(4482),we=G(9672),Le=G(5403),We=G(576);function ke(Ye,X,Z=1/0){return(0,We.m)(X)?ke((de,Xe)=>(0,h.U)((Ge,ze)=>X(de,Ge,Xe,ze))((0,R.Xf)(Ye(de,Xe))),Z):("number"==typeof X&&(Z=X),(0,$.e)((de,Xe)=>function Ae(Ye,X,Z,de,Xe,Ge,ze,Je){const pe=[];let Ce=0,at=0,ut=!1;const Be=()=>{ut&&!pe.length&&!Ce&&X.complete()},Ne=tt=>Ce<de?De(tt):pe.push(tt),De=tt=>{Ge&&X.next(tt),Ce++;let he=!1;(0,R.Xf)(Z(tt,at++)).subscribe((0,Le.x)(X,ge=>{Xe?.(ge),Ge?Ne(ge):X.next(ge)},()=>{he=!0},void 0,()=>{if(he)try{for(Ce--;pe.length&&Ce<de;){const ge=pe.shift();ze?(0,we.f)(X,ze,()=>De(ge)):De(ge)}Be()}catch(ge){X.error(ge)}}))};return Ye.subscribe((0,Le.x)(X,Ne,()=>{ut=!0,Be()})),()=>{Je?.()}}(de,Xe,Ye,Z)))}},5363:(St,Ve,G)=>{"use strict";G.d(Ve,{Q:()=>we});var h=G(9672),R=G(4482),$=G(5403);function we(Le,Ae=0){return(0,R.e)((We,ke)=>{We.subscribe((0,$.x)(ke,Ye=>(0,h.f)(ke,Le,()=>ke.next(Ye),Ae),()=>(0,h.f)(ke,Le,()=>ke.complete(),Ae),Ye=>(0,h.f)(ke,Le,()=>ke.error(Ye),Ae)))})}},3099:(St,Ve,G)=>{"use strict";G.d(Ve,{B:()=>Le});var h=G(8421),R=G(7579),$=G(930),we=G(4482);function Le(We={}){const{connector:ke=(()=>new R.x),resetOnError:Ye=!0,resetOnComplete:X=!0,resetOnRefCountZero:Z=!0}=We;return de=>{let Xe,Ge,ze,Je=0,pe=!1,Ce=!1;const at=()=>{Ge?.unsubscribe(),Ge=void 0},ut=()=>{at(),Xe=ze=void 0,pe=Ce=!1},Be=()=>{const Ne=Xe;ut(),Ne?.unsubscribe()};return(0,we.e)((Ne,De)=>{Je++,!Ce&&!pe&&at();const tt=ze=ze??ke();De.add(()=>{Je--,0===Je&&!Ce&&!pe&&(Ge=Ae(Be,Z))}),tt.subscribe(De),!Xe&&Je>0&&(Xe=new $.Hp({next:he=>tt.next(he),error:he=>{Ce=!0,at(),Ge=Ae(ut,Ye,he),tt.error(he)},complete:()=>{pe=!0,at(),Ge=Ae(ut,X),tt.complete()}}),(0,h.Xf)(Ne).subscribe(Xe))})(de)}}function Ae(We,ke,...Ye){if(!0===ke)return void We();if(!1===ke)return;const X=new $.Hp({next:()=>{X.unsubscribe(),We()}});return ke(...Ye).subscribe(X)}},9468:(St,Ve,G)=>{"use strict";G.d(Ve,{R:()=>R});var h=G(4482);function R($,we=0){return(0,h.e)((Le,Ae)=>{Ae.add($.schedule(()=>Le.subscribe(Ae),we))})}},3410:(St,Ve,G)=>{"use strict";G.d(Ve,{z:()=>h});const h={setTimeout(R,$,...we){const{delegate:Le}=h;return Le?.setTimeout?Le.setTimeout(R,$,...we):setTimeout(R,$,...we)},clearTimeout(R){const{delegate:$}=h;return($?.clearTimeout||clearTimeout)(R)},delegate:void 0}},2202:(St,Ve,G)=>{"use strict";G.d(Ve,{h:()=>R});const R=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(St,Ve,G)=>{"use strict";G.d(Ve,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(St,Ve,G)=>{"use strict";G.d(Ve,{_6:()=>Ae,jO:()=>we,yG:()=>Le});var h=G(576),R=G(3532);function $(We){return We[We.length-1]}function we(We){return(0,h.m)($(We))?We.pop():void 0}function Le(We){return(0,R.K)($(We))?We.pop():void 0}function Ae(We,ke){return"number"==typeof $(We)?We.pop():ke}},8737:(St,Ve,G)=>{"use strict";function h(R,$){if(R){const we=R.indexOf($);0<=we&&R.splice(we,1)}}G.d(Ve,{P:()=>h})},3888:(St,Ve,G)=>{"use strict";function h(R){const we=R(Le=>{Error.call(Le),Le.stack=(new Error).stack});return we.prototype=Object.create(Error.prototype),we.prototype.constructor=we,we}G.d(Ve,{d:()=>h})},2806:(St,Ve,G)=>{"use strict";G.d(Ve,{O:()=>we,x:()=>$});var h=G(2416);let R=null;function $(Le){if(h.v.useDeprecatedSynchronousErrorHandling){const Ae=!R;if(Ae&&(R={errorThrown:!1,error:null}),Le(),Ae){const{errorThrown:We,error:ke}=R;if(R=null,We)throw ke}}else Le()}function we(Le){h.v.useDeprecatedSynchronousErrorHandling&&R&&(R.errorThrown=!0,R.error=Le)}},9672:(St,Ve,G)=>{"use strict";function h(R,$,we,Le=0,Ae=!1){const We=$.schedule(function(){we(),Ae?R.add(this.schedule(null,Le)):this.unsubscribe()},Le);if(R.add(We),!Ae)return We}G.d(Ve,{f:()=>h})},4671:(St,Ve,G)=>{"use strict";function h(R){return R}G.d(Ve,{y:()=>h})},1144:(St,Ve,G)=>{"use strict";G.d(Ve,{z:()=>h});const h=R=>R&&"number"==typeof R.length&&"function"!=typeof R},2206:(St,Ve,G)=>{"use strict";G.d(Ve,{D:()=>R});var h=G(576);function R($){return Symbol.asyncIterator&&(0,h.m)($?.[Symbol.asyncIterator])}},576:(St,Ve,G)=>{"use strict";function h(R){return"function"==typeof R}G.d(Ve,{m:()=>h})},3670:(St,Ve,G)=>{"use strict";G.d(Ve,{c:()=>$});var h=G(8822),R=G(576);function $(we){return(0,R.m)(we[h.L])}},6495:(St,Ve,G)=>{"use strict";G.d(Ve,{T:()=>$});var h=G(2202),R=G(576);function $(we){return(0,R.m)(we?.[h.h])}},8239:(St,Ve,G)=>{"use strict";G.d(Ve,{t:()=>R});var h=G(576);function R($){return(0,h.m)($?.then)}},3260:(St,Ve,G)=>{"use strict";G.d(Ve,{L:()=>we,Q:()=>$});var h=G(655),R=G(576);function $(Le){return(0,h.FC)(this,arguments,function*(){const We=Le.getReader();try{for(;;){const{value:ke,done:Ye}=yield(0,h.qq)(We.read());if(Ye)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ke)}}finally{We.releaseLock()}})}function we(Le){return(0,R.m)(Le?.getReader)}},3532:(St,Ve,G)=>{"use strict";G.d(Ve,{K:()=>R});var h=G(576);function R($){return $&&(0,h.m)($.schedule)}},4482:(St,Ve,G)=>{"use strict";G.d(Ve,{A:()=>R,e:()=>$});var h=G(576);function R(we){return(0,h.m)(we?.lift)}function $(we){return Le=>{if(R(Le))return Le.lift(function(Ae){try{return we(Ae,this)}catch(We){this.error(We)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(St,Ve,G)=>{"use strict";function h(){}G.d(Ve,{Z:()=>h})},7849:(St,Ve,G)=>{"use strict";G.d(Ve,{h:()=>$});var h=G(2416),R=G(3410);function $(we){R.z.setTimeout(()=>{const{onUnhandledError:Le}=h.v;if(!Le)throw we;Le(we)})}},4532:(St,Ve,G)=>{"use strict";function h(R){return new TypeError(`You provided ${null!==R&&"object"==typeof R?"an invalid object":`'${R}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}G.d(Ve,{z:()=>h})},655:(St,Ve,G)=>{"use strict";function we(re,ie){var ve={};for(var fe in re)Object.prototype.hasOwnProperty.call(re,fe)&&ie.indexOf(fe)<0&&(ve[fe]=re[fe]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var qe=0;for(fe=Object.getOwnPropertySymbols(re);qe<fe.length;qe++)ie.indexOf(fe[qe])<0&&Object.prototype.propertyIsEnumerable.call(re,fe[qe])&&(ve[fe[qe]]=re[fe[qe]])}return ve}function ke(re,ie,ve,fe){return new(ve||(ve=Promise))(function(He,Dt){function Cn(Pn){try{et(fe.next(Pn))}catch(Er){Dt(Er)}}function en(Pn){try{et(fe.throw(Pn))}catch(Er){Dt(Er)}}function et(Pn){Pn.done?He(Pn.value):function qe(He){return He instanceof ve?He:new ve(function(Dt){Dt(He)})}(Pn.value).then(Cn,en)}et((fe=fe.apply(re,ie||[])).next())})}function pe(re){return this instanceof pe?(this.v=re,this):new pe(re)}function Ce(re,ie,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,fe=ve.apply(re,ie||[]),He=[];return qe={},Dt("next"),Dt("throw"),Dt("return"),qe[Symbol.asyncIterator]=function(){return this},qe;function Dt(Fn){fe[Fn]&&(qe[Fn]=function(dn){return new Promise(function(tn,Qt){He.push([Fn,dn,tn,Qt])>1||Cn(Fn,dn)})})}function Cn(Fn,dn){try{!function en(Fn){Fn.value instanceof pe?Promise.resolve(Fn.value.v).then(et,Pn):Er(He[0][2],Fn)}(fe[Fn](dn))}catch(tn){Er(He[0][3],tn)}}function et(Fn){Cn("next",Fn)}function Pn(Fn){Cn("throw",Fn)}function Er(Fn,dn){Fn(dn),He.shift(),He.length&&Cn(He[0][0],He[0][1])}}function ut(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,ie=re[Symbol.asyncIterator];return ie?ie.call(re):(re=function de(re){var ie="function"==typeof Symbol&&Symbol.iterator,ve=ie&&re[ie],fe=0;if(ve)return ve.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&fe>=re.length&&(re=void 0),{value:re&&re[fe++],done:!re}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ve={},fe("next"),fe("throw"),fe("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function fe(He){ve[He]=re[He]&&function(Dt){return new Promise(function(Cn,en){!function qe(He,Dt,Cn,en){Promise.resolve(en).then(function(et){He({value:et,done:Cn})},Dt)}(Cn,en,(Dt=re[He](Dt)).done,Dt.value)})}}}G.d(Ve,{FC:()=>Ce,KL:()=>ut,_T:()=>we,mG:()=>ke,qq:()=>pe})},4650:(St,Ve,G)=>{"use strict";G.d(Ve,{$8M:()=>Qa,AFp:()=>$v,AaK:()=>ke,CHM:()=>vc,CRH:()=>Fv,CZH:()=>up,CqO:()=>eN,D6c:()=>yT,EJc:()=>oE,EpF:()=>gi,F$t:()=>a1,F4k:()=>XA,FYo:()=>Di,FiY:()=>rr,G48:()=>os,Gf:()=>vC,GfV:()=>z_,Gpc:()=>Z,Hsn:()=>l1,Ikx:()=>N1,JOm:()=>Ea,Jf7:()=>iy,KtG:()=>xo,LFG:()=>vr,LMc:()=>ZF,Lbi:()=>mx,Lck:()=>Ow,MAs:()=>ZA,MGl:()=>gv,NdJ:()=>t1,OlP:()=>Wn,Oqu:()=>hw,Q6J:()=>sw,QGY:()=>e1,Qsj:()=>Mf,QtT:()=>wo,R0b:()=>Aa,RDi:()=>Jd,Rgc:()=>Wh,SBq:()=>gh,SDv:()=>se,Suo:()=>bC,TTD:()=>Va,TgZ:()=>ow,Tol:()=>uN,Udp:()=>b1,VKq:()=>Uw,W1O:()=>DC,WLB:()=>sC,X6Q:()=>cT,Xpm:()=>Re,Y36:()=>Jc,YNc:()=>YI,Yjl:()=>W,Yz7:()=>dn,ZZ4:()=>e0,_Bn:()=>Q1,_UZ:()=>QI,_c5:()=>_T,_uU:()=>I1,aQg:()=>xE,cJS:()=>Qt,cg1:()=>yw,dDg:()=>gE,dqk:()=>$t,eFA:()=>iT,ekj:()=>w1,eoX:()=>XC,g9A:()=>Wv,h0i:()=>Eo,hGG:()=>n0,hij:()=>yv,iGM:()=>yC,ifc:()=>It,ip1:()=>iE,kEZ:()=>oC,kL8:()=>vw,lG2:()=>te,lri:()=>JC,n5z:()=>fo,oAB:()=>_n,oxw:()=>lw,pQV:()=>bo,q4F:()=>bg,qLn:()=>Yu,qOj:()=>Vh,qZA:()=>aw,rWj:()=>pE,s9C:()=>uw,sBO:()=>Tx,sIi:()=>Q,s_b:()=>Pv,soG:()=>Lm,uIk:()=>bn,vHH:()=>ze,vpe:()=>Ta,wAp:()=>Ut,xp6:()=>jf,z2F:()=>bE,zSh:()=>_g,zs3:()=>Ii});var h=G(7579),R=G(727),$=G(8306),we=G(6451),Le=G(3099);function Ae(s){for(let o in s)if(s[o]===Ae)return o;throw Error("Could not find renamed property on target object.")}function We(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ke(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ke).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function Ye(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const X=Ae({__forward_ref__:Ae});function Z(s){return s.__forward_ref__=Z,s.toString=function(){return ke(this())},s}function de(s){return Xe(s)?s():s}function Xe(s){return"function"==typeof s&&s.hasOwnProperty(X)&&s.__forward_ref__===Z}class ze extends Error{constructor(o,l){super(function Je(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new ze(-201,!1)}function et(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}function dn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Pr(s){return ra(s,Jn)||ra(s,So)}function ra(s,o){return s.hasOwnProperty(o)?s[o]:null}function Rs(s){return s&&(s.hasOwnProperty(Fr)||s.hasOwnProperty(ui))?s[Fr]:null}const Jn=Ae({\u0275prov:Ae}),Fr=Ae({\u0275inj:Ae}),So=Ae({ngInjectableDef:Ae}),ui=Ae({ngInjectorDef:Ae});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let ri;function mn(s){const o=ri;return ri=s,o}function ii(s,o,l){const d=Pr(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&yt.Optional?null:void 0!==o?o:void Ne(ke(s))}function Xn(s){return{toString:s}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),It=(()=>{return(s=It||(It={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",It;var s})();const $t=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ci={},Vt=[],di=Ae({\u0275cmp:Ae}),Wt=Ae({\u0275dir:Ae}),Wi=Ae({\u0275pipe:Ae}),ln=Ae({\u0275mod:Ae}),hi=Ae({\u0275fac:Ae}),dr=Ae({__NG_ELEMENT_ID__:Ae});let gt=0;function Re(s){return Xn(()=>{const l=!0===s.standalone,d={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Vt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||It.Emulated,id:"c"+gt++,styles:s.styles||Vt,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,E=s.features;return f.inputs=z(s.inputs,d),f.outputs=z(s.outputs),E&&E.forEach(I=>I(f)),f.directiveDefs=m?()=>("function"==typeof m?m():m).map(Mt).filter(kt):null,f.pipeDefs=m?()=>("function"==typeof m?m():m).map(ce).filter(kt):null,f})}function Mt(s){return P(s)||j(s)}function kt(s){return null!==s}function _n(s){return Xn(()=>({type:s.type,bootstrap:s.bootstrap||Vt,declarations:s.declarations||Vt,imports:s.imports||Vt,exports:s.exports||Vt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function z(s,o){if(null==s)return ci;const l={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=d,o&&(o[f]=m)}return l}const te=Re;function W(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function P(s){return s[di]||null}function j(s){return s[Wt]||null}function ce(s){return s[Wi]||null}function qr(s){return Array.isArray(s)&&"object"==typeof s[1]}function fi(s){return Array.isArray(s)&&!0===s[1]}function la(s){return 0!=(8&s.flags)}function gc(s){return 2==(2&s.flags)}function Ba(s){return 1==(1&s.flags)}function Os(s){return null!==s.template}function El(s){return 0!=(256&s[2])}function pi(s,o){return s.hasOwnProperty(hi)?s[hi]:null}class Il{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Va(){return cf}function cf(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ln),Gn}function Gn(){const s=Cl(this),o=s?.current;if(o){const l=s.previous;if(l===ci)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Ln(s,o,l,d){const f=Cl(s)||function Ki(s,o){return s[df]=o}(s,{previous:ci,current:null}),m=f.current||(f.current={}),E=f.previous,I=this.declaredInputs[l],S=E[I];m[I]=new Il(S&&S.currentValue,o,E===ci),s[d]=o}Va.ngInherit=!0;const df="__ngSimpleChanges__";function Cl(s){return s[df]||null}function sr(s){for(;Array.isArray(s);)s=s[0];return s}function Sl(s,o){return sr(o[s])}function wi(s,o){return sr(o[s.index])}function Al(s,o){return s.data[o]}function Sn(s,o){const l=o[s];return qr(l)?l:l[0]}function ua(s){return 64==(64&s[2])}function uo(s,o){return null==o?null:s[o]}function Nl(s){s[18]=0}function gs(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const Ht={lFrame:Rl(null),bindingsEnabled:!0};function Ha(){return Ht.bindingsEnabled}function Pe(){return Ht.lFrame.lView}function un(){return Ht.lFrame.tView}function vc(s){return Ht.lFrame.contextLView=s,s[8]}function xo(s){return Ht.lFrame.contextLView=null,s}function Yr(){let s=_u();for(;null!==s&&64===s.type;)s=s.parent;return s}function _u(){return Ht.lFrame.currentTNode}function yu(){const s=Ht.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function Mi(s,o){const l=Ht.lFrame;l.currentTNode=s,l.isParent=o}function vu(){return Ht.lFrame.isParent}function bu(){Ht.lFrame.isParent=!1}function Ir(){const s=Ht.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ro(){return Ht.lFrame.bindingIndex++}function Mo(s){const o=Ht.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Qp(s){Ht.lFrame.inI18n=s}function ff(s,o){const l=Ht.lFrame;l.bindingIndex=l.bindingRootIndex=s,bc(o)}function bc(s){Ht.lFrame.currentDirectiveIndex=s}function ca(){return Ht.lFrame.currentQueryIndex}function Fd(s){Ht.lFrame.currentQueryIndex=s}function Ld(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Bd(s,o,l){if(l&yt.SkipSelf){let f=o,m=s;for(;!(f=f.parent,null!==f||l&yt.Host||(f=Ld(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;o=f,s=m}const d=Ht.lFrame=da();return d.currentTNode=o,d.lView=s,!0}function Eu(s){const o=da(),l=s[1];Ht.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function da(){const s=Ht.lFrame,o=null===s?null:s.child;return null===o?Rl(s):o}function Rl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Jp(){const s=Ht.lFrame;return Ht.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const pf=Jp;function Ml(){const s=Jp();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function tr(){return Ht.lFrame.selectedIndex}function Oo(s){Ht.lFrame.selectedIndex=s}function ar(){const s=Ht.lFrame;return Al(s.tView,s.selectedIndex)}function _e(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:I,ngAfterViewInit:S,ngAfterViewChecked:x,ngOnDestroy:F}=m;E&&(s.contentHooks||(s.contentHooks=[])).push(-l,E),I&&((s.contentHooks||(s.contentHooks=[])).push(l,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,I)),S&&(s.viewHooks||(s.viewHooks=[])).push(-l,S),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=F&&(s.destroyHooks||(s.destroyHooks=[])).push(l,F)}}function _t(s,o,l){mr(s,o,3,l)}function Pt(s,o,l,d){(3&s[2])===l&&mr(s,o,l,d)}function wn(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function mr(s,o,l,d){const m=d??-1,E=o.length-1;let I=0;for(let S=void 0!==d?65535&s[18]:0;S<E;S++)if("number"==typeof o[S+1]){if(I=o[S],null!=d&&I>=d)break}else o[S]<0&&(s[18]+=65536),(I<m||-1==m)&&(Bn(s,l,o,S),s[18]=(4294901760&s[18])+S+2),S++}function Bn(s,o,l,d){const f=l[d]<0,m=l[d+1],I=s[f?-l[d]:l[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(I)}finally{}}}else try{m.call(I)}finally{}}class _s{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function ho(s,o,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const m=l[d++],E=l[d++],I=l[d++];s.setAttribute(o,E,I,m)}else{const m=f,E=l[++d];Vd(m)?s.setProperty(o,m,E):s.setAttribute(o,m,E),d++}}return d}function Ol(s){return 3===s||4===s||6===s}function Vd(s){return 64===s.charCodeAt(0)}function Iu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?l=f:0===l||mf(s,l,f,null,-1===l||2===l?o[++d]:null)}}return s}function mf(s,o,l,d,f){let m=0,E=s.length;if(-1===o)E=-1;else for(;m<s.length;){const I=s[m++];if("number"==typeof I){if(I===o){E=-1;break}if(I>o){E=m-1;break}}}for(;m<s.length;){const I=s[m];if("number"==typeof I)break;if(I===l){if(null===d)return void(null!==f&&(s[m+1]=f));if(d===s[m+1])return void(s[m+2]=f)}m++,null!==d&&m++,null!==f&&m++}-1!==E&&(s.splice(E,0,o),m=E+1),s.splice(m++,0,l),null!==d&&s.splice(m++,0,d),null!==f&&s.splice(m++,0,f)}function Dc(s){return-1!==s}function ki(s){return 32767&s}function ko(s,o){let l=function Ic(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let kl=!0;function Cu(s){const o=kl;return kl=s,o}let Pl=0;const oi={};function za(s,o){const l=Sc(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Ud(d.data,s),Ud(o,null),Ud(d.blueprint,null));const f=fa(s,o),m=s.injectorIndex;if(Dc(f)){const E=ki(f),I=ko(f,o),S=I[1].data;for(let x=0;x<8;x++)o[m+x]=I[E+x]|S[E+x]}return o[m+8]=f,m}function Ud(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Sc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function fa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,f=o;for(;null!==f;){if(d=ga(f),null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function pa(s,o,l){!function Tc(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(dr)&&(d=l[dr]),null==d&&(d=l[dr]=Pl++);const f=255&d;o.data[s+(f>>5)]|=1<<f}(s,o,l)}function Ac(s,o,l){if(l&yt.Optional||void 0!==s)return s;Ne()}function qa(s,o,l,d){if(l&yt.Optional&&void 0===d&&(d=null),0==(l&(yt.Self|yt.Host))){const f=s[9],m=mn(void 0);try{return f?f.get(o,d,l&yt.Optional):ii(o,d,l&yt.Optional)}finally{mn(m)}}return Ac(d,0,l)}function Nc(s,o,l,d=yt.Default,f){if(null!==s){if(1024&o[2]){const E=function Su(s,o,l,d,f){let m=s,E=o;for(;null!==m&&null!==E&&1024&E[2]&&!(256&E[2]);){const I=_f(m,E,l,d|yt.Self,oi);if(I!==oi)return I;let S=m.parent;if(!S){const x=E[21];if(x){const F=x.get(l,oi,d);if(F!==oi)return F}S=ga(E),E=E[15]}m=S}return f}(s,o,l,d,oi);if(E!==oi)return E}const m=_f(s,o,l,d,oi);if(m!==oi)return m}return qa(o,l,d,f)}function _f(s,o,l,d,f){const m=function ng(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(dr)?s[dr]:void 0;return"number"==typeof o?o>=0?255&o:Fl:o}(l);if("function"==typeof m){if(!Bd(o,s,d))return d&yt.Host?Ac(f,0,d):qa(o,l,d,f);try{const E=m(d);if(null!=E||d&yt.Optional)return E;Ne()}finally{pf()}}else if("number"==typeof m){let E=null,I=Sc(s,o),S=-1,x=d&yt.Host?o[16][6]:null;for((-1===I||d&yt.SkipSelf)&&(S=-1===I?fa(s,o):o[I+8],-1!==S&&yf(d,!1)?(E=o[1],I=ki(S),o=ko(S,o)):I=-1);-1!==I;){const F=o[1];if(Tu(m,I,F.data)){const H=Tr(I,o,l,E,d,x);if(H!==oi)return H}S=o[I+8],-1!==S&&yf(d,o[1].data[I+8]===x)&&Tu(m,I,o)?(E=F,I=ki(S),o=ko(S,o)):I=-1}}return f}function Tr(s,o,l,d,f,m){const E=o[1],I=E.data[s+8],F=Lr(I,E,l,null==d?gc(I)&&kl:d!=E&&0!=(3&I.type),f&yt.Host&&m===I);return null!==F?Ya(o,E,F,I):oi}function Lr(s,o,l,d,f){const m=s.providerIndexes,E=o.data,I=1048575&m,S=s.directiveStart,F=m>>20,J=f?I+F:s.directiveEnd;for(let ue=d?I:I+F;ue<J;ue++){const Ie=E[ue];if(ue<S&&l===Ie||ue>=S&&Ie.type===l)return ue}if(f){const ue=E[S];if(ue&&Os(ue)&&ue.type===l)return S}return null}function Ya(s,o,l,d){let f=s[l];const m=o.data;if(function Oi(s){return s instanceof _s}(f)){const E=f;E.resolving&&function at(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ze(-200,`Circular dependency in DI detected for ${s}${l}`)}(function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}(m[l]));const I=Cu(E.canSeeViewProviders);E.resolving=!0;const S=E.injectImpl?mn(E.injectImpl):null;Bd(s,d,yt.Default);try{f=s[l]=E.factory(void 0,m,s,d),o.firstCreatePass&&l>=d.directiveStart&&function Ee(s,o,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:m}=o.type.prototype;if(d){const E=cf(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,E),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,E)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==S&&mn(S),Cu(I),E.resolving=!1,pf()}}return f}function Tu(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function yf(s,o){return!(s&yt.Self||s&yt.Host&&o)}class Za{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Nc(this._tNode,this._lView,o,d,l)}}function Fl(){return new Za(Yr(),Pe())}function fo(s){return Xn(()=>{const o=s.prototype.constructor,l=o[hi]||Po(o),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const m=f[hi]||Po(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Po(s){return Xe(s)?()=>{const o=Po(de(s));return o&&o()}:pi(s)}function ga(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Qa(s){return function Ka(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const m=l[f];if(Ol(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(m===o)return l[f+1];f+=2}}}return null}(Yr(),s)}const Au="__parameters__";function Nu(s,o,l){return Xn(()=>{const d=function vf(s){return function(...l){if(s){const d=s(...l);for(const f in d)this[f]=d[f]}}}(o);function f(...m){if(this instanceof f)return d.apply(this,m),this;const E=new f(...m);return I.annotation=E,I;function I(S,x,F){const H=S.hasOwnProperty(Au)?S[Au]:Object.defineProperty(S,Au,{value:[]})[Au];for(;H.length<=F;)H.push(null);return(H[F]=H[F]||[]).push(E),S}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Wn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=dn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Kn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),Kn(d,o)):o!==s&&o.push(d)}return o}function zn(s,o){s.forEach(l=>Array.isArray(l)?zn(l,o):o(l))}function Qi(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function ma(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Xa(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}function Vr(s,o,l){let d=nr(s,o);return d>=0?s[1|d]=l:(d=~d,function rg(s,o,l,d){let f=s.length;if(f==o)s.push(l,d);else if(1===f)s.push(d,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function jd(s,o){const l=nr(s,o);if(l>=0)return s[1|l]}function nr(s,o){return function Ef(s,o,l){let d=0,f=s.length>>l;for(;f!==d;){const m=d+(f-d>>1),E=s[m<<l];if(o===E)return m<<l;E>o?f=m:d=m+1}return~(f<<l)}(s,o,1)}const mo={},Lo="__NG_DI_FLAG__",jl="ngTempTokenPath",zd=/\n/gm,ku="__source";let Ji;function hn(s){const o=Ji;return Ji=s,o}function Df(s,o=yt.Default){if(void 0===Ji)throw new ze(-203,!1);return null===Ji?ii(s,void 0,o):Ji.get(s,o&yt.Optional?null:void 0,o)}function vr(s,o=yt.Default){return(function cr(){return ri}()||Df)(de(s),o)}function _o(s){const o=[];for(let l=0;l<s.length;l++){const d=de(s[l]);if(Array.isArray(d)){if(0===d.length)throw new ze(900,!1);let f,m=yt.Default;for(let E=0;E<d.length;E++){const I=d[E],S=sg(I);"number"==typeof S?-1===S?f=I.token:m|=S:f=I}o.push(vr(f,m))}else o.push(vr(d))}return o}function _a(s,o){return s[Lo]=o,s.prototype[Lo]=o,s}function sg(s){return s[Lo]}const rr=_a(Nu("Optional"),8),ya=_a(Nu("SkipSelf"),4);let kc,bs;function Jd(s){kc=s}function nl(s){return function Xi(){if(void 0===bs&&(bs=null,$t.trustedTypes))try{bs=$t.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return bs}()?.createHTML(s)||s}function Vo(s){return s instanceof class $r{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?s.changingThisBreaksApplicationSecurity:s}class Lc{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(nl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class th{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=nl(o),l;const d=this.inertDocument.createElement("body");return d.innerHTML=nl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const l=o.attributes;for(let f=l.length-1;0<f;f--){const E=l.item(f).name;("xmlns:ns1"===E||0===E.indexOf("ns1:"))&&o.removeAttribute(E)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const _=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function v(s){return(s=String(s)).match(_)?s:"unsafe:"+s}function C(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function O(...s){const o={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(o[d]=!0);return o}const V=C("area,br,col,hr,img,wbr"),le=C("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Se=C("rp,rt"),vn=O(V,O(le,C("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),O(Se,C("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),O(Se,le)),es=C("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$s=O(es,C("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),C("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));const oh=new Wn("ENVIRONMENT_INITIALIZER"),Wu=new Wn("INJECTOR",-1),ql=new Wn("INJECTOR_DEF_TYPES");class Yl{get(o,l=mo){if(l===mo){const d=new Error(`NullInjectorError: No provider for ${ke(o)}!`);throw d.name="NullInjectorError",d}return l}}function Zl(...s){return{\u0275providers:Uc(0,s)}}function Uc(s,...o){const l=[],d=new Set;let f;return zn(o,m=>{const E=m;ah(E,l,[],d)&&(f||(f=[]),f.push(E))}),void 0!==f&&Hc(f,l),l}function Hc(s,o){for(let l=0;l<s.length;l++){const{providers:f}=s[l];zn(f,m=>{o.push(m)})}}function ah(s,o,l,d){if(!(s=de(s)))return!1;let f=null,m=Rs(s);const E=!m&&P(s);if(m||E){if(E&&!E.standalone)return!1;f=s}else{const S=s.ngModule;if(m=Rs(S),!m)return!1;f=S}const I=d.has(f);if(E){if(I)return!1;if(d.add(f),E.dependencies){const S="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const x of S)ah(x,o,l,d)}}else{if(!m)return!1;{if(null!=m.imports&&!I){let x;d.add(f);try{zn(m.imports,F=>{ah(F,o,l,d)&&(x||(x=[]),x.push(F))})}finally{}void 0!==x&&Hc(x,o)}if(!I){const x=pi(f)||(()=>new f);o.push({provide:f,useFactory:x,deps:Vt},{provide:ql,useValue:f,multi:!0},{provide:oh,useValue:()=>vr(f),multi:!0})}const S=m.providers;null==S||I||zn(S,F=>{o.push(F)})}}return f!==s&&void 0!==s.providers}const zu=Ae({provide:String,useValue:Ae});function lh(s){return null!==s&&"object"==typeof s&&zu in s}function ba(s){return"function"==typeof s}const _g=new Wn("Set Injector scope."),ch={},mI={};let Ku;function Jl(){return void 0===Ku&&(Ku=new Yl),Ku}class ol{}class Gs extends ol{constructor(o,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,j_(o,E=>this.processProvider(E)),this.records.set(Wu,Ho(void 0,this)),f.has("environment")&&this.records.set(ol,Ho(void 0,this));const m=this.records.get(_g);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(ql.multi,Vt,yt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=hn(this),d=mn(void 0);try{return o()}finally{hn(l),mn(d)}}get(o,l=mo,d=yt.Default){this.assertNotDestroyed();const f=hn(this),m=mn(void 0);try{if(!(d&yt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const S=function Nf(s){return"function"==typeof s||"object"==typeof s&&s instanceof Wn}(o)&&Pr(o);I=S&&this.injectableDefInScope(S)?Ho(dh(o),ch):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(d&yt.Self?Jl():this.parent).get(o,l=d&yt.Optional&&l===mo?null:l)}catch(E){if("NullInjectorError"===E.name){if((E[jl]=E[jl]||[]).unshift(ke(o)),f)throw E;return function Fu(s,o,l,d){const f=s[jl];throw o[ku]&&f.unshift(o[ku]),s.message=function Kd(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=ke(o);if(Array.isArray(o))f=o.map(ke).join(" -> ");else if("object"==typeof o){let m=[];for(let E in o)if(o.hasOwnProperty(E)){let I=o[E];m.push(E+":"+("string"==typeof I?JSON.stringify(I):ke(I)))}f=`{${m.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${s.replace(zd,"\n  ")}`}("\n"+s.message,f,l,d),s.ngTokenPath=f,s[jl]=null,s}(E,o,"R3InjectorError",this.source)}throw E}finally{mn(m),hn(f)}}resolveInjectorInitializers(){const o=hn(this),l=mn(void 0);try{const d=this.get(oh.multi,Vt,yt.Self);for(const f of d)f()}finally{hn(o),mn(l)}}toString(){const o=[],l=this.records;for(const d of l.keys())o.push(ke(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ze(205,!1)}processProvider(o){let l=ba(o=de(o))?o:de(o&&o.provide);const d=function jc(s){return lh(s)?Ho(void 0,s.useValue):Ho(fh(s),ch)}(o);if(ba(o)||!0!==o.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=Ho(void 0,ch,!0),f.factory=()=>_o(f.multi),this.records.set(l,f)),l=o,f.multi.push(o)}this.records.set(l,d)}hydrate(o,l){return l.value===ch&&(l.value=mI,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Af(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=de(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function dh(s){const o=Pr(s),l=null!==o?o.factory:pi(s);if(null!==l)return l;if(s instanceof Wn)throw new ze(204,!1);if(s instanceof Function)return function hh(s){const o=s.length;if(o>0)throw Xa(o,"?"),new ze(204,!1);const l=function Qn(s){const o=s&&(s[Jn]||s[So]);if(o){const l=function ds(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new ze(204,!1)}function fh(s,o,l){let d;if(ba(s)){const f=de(s);return pi(f)||dh(f)}if(lh(s))d=()=>de(s.useValue);else if(function mg(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(..._o(s.deps||[]));else if(function uh(s){return!(!s||!s.useExisting)}(s))d=()=>vr(de(s.useExisting));else{const f=de(s&&(s.useClass||s.provide));if(!function Ft(s){return!!s.deps}(s))return pi(f)||dh(f);d=()=>new f(..._o(s.deps))}return d}function Ho(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function qu(s){return!!s.\u0275providers}function j_(s,o){for(const l of s)Array.isArray(l)?j_(l,o):qu(l)?j_(l.\u0275providers,o):o(l)}class xf{}class vg{resolveComponentFactory(o){throw function ts(s){const o=Error(`No component factory found for ${ke(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let $c=(()=>{class s{}return s.NULL=new vg,s})();function $_(){return ph(Yr(),Pe())}function ph(s,o){return new gh(wi(s,o))}let gh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=$_,s})();function mh(s){return s instanceof gh?s.nativeElement:s}class Di{}let Mf=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function G_(){const s=Pe(),l=Sn(Yr().index,s);return(qr(l)?l:s)[11]}(),s})(),W_=(()=>{class s{}return s.\u0275prov=dn({token:s,providedIn:"root",factory:()=>null}),s})();class z_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const bg=new z_("14.2.6"),Gc={};function Cg(s){return s.ngOriginalError}class Yu{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Cg(o);for(;l&&Cg(l);)l=Cg(l);return l||null}}const lb=/^>|^->|<!--|-->|--!>|<!-$/g,Tg=/(<|>)/;const kf=new Map;let hb=0;const bh="__ngContext__";function Li(s,o){qr(o)?(s[bh]=o[20],function ey(s){kf.set(s[20],s)}(o)):s[bh]=o}function iy(s){return s.ownerDocument.defaultView}var Ea=(()=>((Ea=Ea||{})[Ea.Important=1]="Important",Ea[Ea.DashCase=2]="DashCase",Ea))();let kg;function ay(s,o){return kg(s,o)}function Pf(s){const o=s[3];return fi(o)?o[3]:o}function ly(s){return cy(s[13])}function uy(s){return cy(s[4])}function cy(s){for(;null!==s&&!fi(s);)s=s[4];return s}function Bi(s,o,l,d,f){if(null!=d){let m,E=!1;fi(d)?m=d:qr(d)&&(E=!0,d=d[0]);const I=sr(d);0===s&&null!==l?null==f?gy(o,l,I):Xu(o,l,I,f||null,!0):1===s&&null!==l?Xu(o,l,I,f||null,!0):2===s?Vf(o,I,E):3===s&&o.destroyNode(I),null!=m&&function Ib(s,o,l,d,f){const m=l[7];m!==sr(l)&&Bi(o,s,d,m,f);for(let I=10;I<l.length;I++){const S=l[I];Ia(S[1],S,s,o,d,m)}}(o,s,m,l,f)}}function Pg(s,o){return s.createText(o)}function Fg(s,o,l){s.setValue(o,l)}function zs(s,o){return s.createComment(function Of(s){return s.replace(lb,o=>o.replace(Tg,"\u200b$1\u200b"))}(o))}function Ks(s,o,l){return s.createElement(o,l)}function Ih(s,o){const l=s[9],d=l.indexOf(o),f=o[3];512&o[2]&&(o[2]&=-513,gs(f,-1)),l.splice(d,1)}function Ff(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const f=d[17];null!==f&&f!==s&&Ih(f,d),o>0&&(s[l-1][4]=d[4]);const m=ma(s,10+o);!function jo(s,o){Ia(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const E=m[19];null!==E&&E.detachView(m[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function Kc(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&Ia(s,o,l,3,null,null),function Eh(s){let o=s[13];if(!o)return Bg(s[1],s);for(;o;){let l=null;if(qr(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)qr(o)&&Bg(o[1],o),o=o[3];null===o&&(o=s),qr(o)&&Bg(o[1],o),l=o&&o[4]}o=l}}(o)}}function Bg(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function hy(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const f=o[l[d]];if(!(f instanceof _s)){const m=l[d+1];if(Array.isArray(m))for(let E=0;E<m.length;E+=2){const I=f[m[E]],S=m[E+1];try{S.call(I)}finally{}}else try{m.call(f)}finally{}}}}(s,o),function dy(s,o){const l=s.cleanup,d=o[7];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const E=l[m+1],I="function"==typeof E?E(o):sr(o[E]),S=d[f=l[m+2]],x=l[m+3];"boolean"==typeof x?I.removeEventListener(l[m],S,x):x>=0?d[f=x]():d[f=-x].unsubscribe(),m+=2}else{const E=d[f=l[m+1]];l[m].call(E)}if(null!==d){for(let m=f+1;m<d.length;m++)(0,d[m])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&fi(o[3])){l!==o[3]&&Ih(l,o);const d=o[19];null!==d&&d.detachView(s)}!function ty(s){kf.delete(s[20])}(o)}}function fy(s,o,l){return py(s,o.parent,l)}function py(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===It.None||f===It.Emulated)return null}return wi(d,l)}function Xu(s,o,l,d,f){s.insertBefore(o,l,d,f)}function gy(s,o,l){s.appendChild(o,l)}function my(s,o,l,d,f){null!==d?Xu(s,o,l,d,f):gy(s,o,l)}function Lf(s,o){return s.parentNode(o)}function _y(s,o,l){return ll(s,o,l)}function Ys(s,o,l){return 40&s.type?wi(s,l):null}let ns,ll=Ys;function Bf(s,o){ll=s,ns=o}function $o(s,o,l,d){const f=fy(s,d,o),m=o[11],I=_y(d.parent||o[6],d,o);if(null!=f)if(Array.isArray(l))for(let S=0;S<l.length;S++)my(m,f,l[S],I,!1);else my(m,f,l,I,!1);void 0!==ns&&ns(m,d,o,l,f)}function Da(s,o){if(null!==o){const l=o.type;if(3&l)return wi(o,s);if(4&l)return Go(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return Da(s,d);{const f=s[o.index];return fi(f)?Go(-1,f):sr(f)}}if(32&l)return ay(o,s)()||sr(s[o.index]);{const d=Ch(s,o);return null!==d?Array.isArray(d)?d[0]:Da(Pf(s[16]),d):Da(s,o.next)}}return null}function Ch(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Go(s,o){const l=10+s+1;if(l<o.length){const d=o[l],f=d[1].firstChild;if(null!==f)return Da(d,f)}return o[7]}function Vf(s,o,l){const d=Lf(s,o);d&&function Eb(s,o,l,d){s.removeChild(o,l,d)}(s,d,o,l)}function Uf(s,o,l,d,f,m,E){for(;null!=l;){const I=d[l.index],S=l.type;if(E&&0===o&&(I&&Li(sr(I),d),l.flags|=4),64!=(64&l.flags))if(8&S)Uf(s,o,l.child,d,f,m,!1),Bi(o,s,f,I,m);else if(32&S){const x=ay(l,d);let F;for(;F=x();)Bi(o,s,f,F,m);Bi(o,s,f,I,m)}else 16&S?Hf(s,o,d,l,f,m):Bi(o,s,f,I,m);l=E?l.projectionNext:l.next}}function Ia(s,o,l,d,f,m){Uf(l,d,s.firstChild,o,f,m,!1)}function Hf(s,o,l,d,f,m){const E=l[16],S=E[6].projection[d.projection];if(Array.isArray(S))for(let x=0;x<S.length;x++)Bi(o,s,f,S[x],m);else Uf(s,o,S,E[3],f,m,!0)}function yy(s,o,l){s.setAttribute(o,"style",l)}function vo(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function Th(s,o,l){let d=s.length;for(;;){const f=s.indexOf(o,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=o.length;if(f+m===d||s.charCodeAt(f+m)<=32)return f}l=f+1}}const qc="ng-template";function Sh(s,o,l){let d=0;for(;d<s.length;){let f=s[d++];if(l&&"class"===f){if(f=s[d],-1!==Th(f.toLowerCase(),o,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function Ug(s){return 4===s.type&&s.value!==qc}function Hg(s,o,l){return o===(4!==s.type||l?s.value:qc)}function jg(s,o,l){let d=4;const f=s.attrs||[],m=function wy(s){for(let o=0;o<s.length;o++)if(Ol(s[o]))return o;return s.length}(f);let E=!1;for(let I=0;I<o.length;I++){const S=o[I];if("number"!=typeof S){if(!E)if(4&d){if(d=2|1&d,""!==S&&!Hg(s,S,l)||""===S&&1===o.length){if(Vi(d))return!1;E=!0}}else{const x=8&d?S:o[++I];if(8&d&&null!==s.attrs){if(!Sh(s.attrs,x,l)){if(Vi(d))return!1;E=!0}continue}const H=$g(8&d?"class":S,f,Ug(s),l);if(-1===H){if(Vi(d))return!1;E=!0;continue}if(""!==x){let J;J=H>m?"":f[H+1].toLowerCase();const ue=8&d?J:null;if(ue&&-1!==Th(ue,x,0)||2&d&&x!==J){if(Vi(d))return!1;E=!0}}}}else{if(!E&&!Vi(d)&&!Vi(S))return!1;if(E&&Vi(S))continue;E=!1,d=S|1&d}}return Vi(d)||E}function Vi(s){return 0==(1&s)}function $g(s,o,l,d){if(null===o)return-1;let f=0;if(d||!l){let m=!1;for(;f<o.length;){const E=o[f];if(E===s)return f;if(3===E||6===E)m=!0;else{if(1===E||2===E){let I=o[++f];for(;"string"==typeof I;)I=o[++f];continue}if(4===E)break;if(0===E){f+=4;continue}}f+=m?1:2}return-1}return function Cb(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function Ah(s,o,l=!1){for(let d=0;d<o.length;d++)if(jg(s,o[d],l))return!0;return!1}function Tb(s,o){e:for(let l=0;l<o.length;l++){const d=o[l];if(s.length===d.length){for(let f=0;f<s.length;f++)if(s[f]!==d[f])continue e;return!0}}return!1}function Ca(s,o){return s?":not("+o.trim()+")":o}function Yc(s){let o=s[0],l=1,d=2,f="",m=!1;for(;l<s.length;){let E=s[l];if("string"==typeof E)if(2&d){const I=s[++l];f+="["+E+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?f+="."+E:4&d&&(f+=" "+E);else""!==f&&!Vi(E)&&(o+=Ca(m,f),f=""),d=E,m=m||!Vi(d);l++}return""!==f&&(o+=Ca(m,f)),o}const Kt={};function jf(s){$f(un(),Pe(),tr()+s,!1)}function $f(s,o,l,d){if(!d)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&_t(o,m,l)}else{const m=s.preOrderHooks;null!==m&&Pt(o,m,0,l)}Oo(l)}function Ty(s,o=null,l=null,d){const f=Sy(s,o,l,d);return f.resolveInjectorInitializers(),f}function Sy(s,o=null,l=null,d,f=new Set){const m=[l||Vt,Zl(s)];return d=d||("object"==typeof s?void 0:ke(s)),new Gs(m,o||Jl(),d||null,f)}let Ii=(()=>{class s{static create(l,d){if(Array.isArray(l))return Ty({name:""},d,l,"");{const f=l.name??"";return Ty({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=mo,s.NULL=new Yl,s.\u0275prov=dn({token:s,providedIn:"any",factory:()=>vr(Wu)}),s.__NG_ELEMENT_ID__=-1,s})();function Jc(s,o=yt.Default){const l=Pe();return null===l?vr(s,o):Nc(Yr(),l,de(s),o)}function Ui(s,o){return s<<17|o<<2}function Hi(s){return s>>17&32767}function Yg(s){return 2|s}function hl(s){return(131068&s)>>2}function Zg(s,o){return-131069&s|o<<2}function Wo(s){return 1|s}function Qy(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],m=l[d+1];if(-1!==m){const E=s.data[m];Fd(f),E.contentQueries(2,o[m],m)}}}function Kf(s,o,l,d,f,m,E,I,S,x,F){const H=o.blueprint.slice();return H[0]=f,H[2]=76|d,(null!==F||s&&1024&s[2])&&(H[2]|=1024),Nl(H),H[3]=H[15]=s,H[8]=l,H[10]=E||s&&s[10],H[11]=I||s&&s[11],H[12]=S||s&&s[12]||null,H[9]=x||s&&s[9]||null,H[6]=m,H[20]=function X_(){return hb++}(),H[21]=F,H[16]=2==o.type?s[16]:H,H}function Ko(s,o,l,d,f){let m=s.data[o];if(null===m)m=em(s,o,l,d,f),function kd(){return Ht.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=d,m.attrs=f;const E=yu();m.injectorIndex=null===E?-1:E.injectorIndex}return Mi(m,!0),m}function em(s,o,l,d,f){const m=_u(),E=vu(),S=s.data[o]=function zb(s,o,l,d,f,m){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?m:m&&m.parent,l,o,d,f);return null===s.firstChild&&(s.firstChild=S),null!==m&&(E?null==m.child&&null!==S.parent&&(m.child=S):null===m.next&&(m.next=S)),S}function Xc(s,o,l,d){if(0===l)return-1;const f=o.length;for(let m=0;m<l;m++)o.push(d),s.blueprint.push(d),s.data.push(null);return f}function tm(s,o,l){Eu(o);try{const d=s.viewQuery;null!==d&&Ph(1,d,l);const f=s.template;null!==f&&Jy(s,o,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Qy(s,o),s.staticViewQueries&&Ph(2,s.viewQuery,l);const m=s.components;null!==m&&function $b(s,o){for(let l=0;l<o.length;l++)GI(s,o[l])}(o,m)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Ml()}}function qf(s,o,l,d){const f=o[2];if(128!=(128&f)){Eu(o);try{Nl(o),function ja(s){return Ht.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Jy(s,o,l,2,d);const E=3==(3&f);if(E){const x=s.preOrderCheckHooks;null!==x&&_t(o,x,null)}else{const x=s.preOrderHooks;null!==x&&Pt(o,x,0,null),wn(o,0)}if(function uv(s){for(let o=ly(s);null!==o;o=uy(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const f=l[d],m=f[3];0==(512&f[2])&&gs(m,1),f[2]|=512}}}(o),function eo(s){for(let o=ly(s);null!==o;o=uy(o))for(let l=10;l<o.length;l++){const d=o[l],f=d[1];ua(d)&&qf(f,d,f.template,d[8])}}(o),null!==s.contentQueries&&Qy(s,o),E){const x=s.contentCheckHooks;null!==x&&_t(o,x)}else{const x=s.contentHooks;null!==x&&Pt(o,x,1),wn(o,1)}!function Zy(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)Oo(~f);else{const m=f,E=l[++d],I=l[++d];ff(E,m),I(2,o[m])}}}finally{Oo(-1)}}(s,o);const I=s.components;null!==I&&function jb(s,o){for(let l=0;l<o.length;l++)Jb(s,o[l])}(o,I);const S=s.viewQuery;if(null!==S&&Ph(2,S,d),E){const x=s.viewCheckHooks;null!==x&&_t(o,x)}else{const x=s.viewHooks;null!==x&&Pt(o,x,2),wn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,gs(o[3],-1))}finally{Ml()}}}function Jy(s,o,l,d,f){const m=tr(),E=2&d;try{Oo(-1),E&&o.length>22&&$f(s,o,22,!1),l(d,f)}finally{Oo(m)}}function Yf(s,o,l){!Ha()||(function VI(s,o,l,d){const f=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||za(l,o),Li(d,o);const E=l.initialInputs;for(let I=f;I<m;I++){const S=s.data[I],x=Os(S);x&&Qb(o,l,S);const F=Ya(o,s,I,l);Li(F,o),null!==E&&om(0,I-f,F,S,0,E),x&&(Sn(l.index,o)[8]=F)}}(s,o,l,wi(l,o)),128==(128&l.flags)&&function UI(s,o,l){const d=l.directiveStart,f=l.directiveEnd,m=l.index,E=function B_(){return Ht.lFrame.currentDirectiveIndex}();try{Oo(m);for(let I=d;I<f;I++){const S=s.data[I],x=o[I];bc(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Yb(S,x)}}finally{Oo(-1),bc(E)}}(s,o,l))}function Oh(s,o,l=wi){const d=o.localNames;if(null!==d){let f=o.index+1;for(let m=0;m<d.length;m+=2){const E=d[m+1],I=-1===E?l(o,s):s[E];s[f++]=I}}}function Xy(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=rm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function rm(s,o,l,d,f,m,E,I,S,x){const F=22+d,H=F+f,J=function Gb(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Kt);return l}(F,H),ue="function"==typeof x?x():x;return J[1]={type:s,blueprint:J,template:l,queries:null,viewQuery:I,declTNode:o,data:J.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:S,consts:ue,incompleteFirstPass:!1}}function ev(s,o,l,d){const f=um(o);null===l?f.push(d):(f.push(l),s.firstCreatePass&&cv(s).push(d,f.length-1))}function tv(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,f):l[d]=[o,f]}return l}function nv(s,o){const d=o.directiveEnd,f=s.data,m=o.attrs,E=[];let I=null,S=null;for(let x=o.directiveStart;x<d;x++){const F=f[x],H=F.inputs,J=null===m||Ug(o)?null:jI(H,m);E.push(J),I=tv(H,x,I),S=tv(F.outputs,x,S)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=E,o.inputs=I,o.outputs=S}function Xs(s,o,l,d,f,m,E,I){const S=wi(o,l);let F,x=o.inputs;!I&&null!=x&&(F=x[d])?(cm(s,l,F,d,f),gc(o)&&rv(l,o.index)):3&o.type&&(d=function Kb(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=E?E(f,o.value||"",d):f,m.setProperty(S,d,f))}function rv(s,o){const l=Sn(o,s);16&l[2]||(l[2]|=32)}function im(s,o,l,d){let f=!1;if(Ha()){const m=function HI(s,o,l){const d=s.directiveRegistry;let f=null;if(d)for(let m=0;m<d.length;m++){const E=d[m];Ah(l,E.selectors,!1)&&(f||(f=[]),pa(za(l,o),s,E.type),Os(E)?(iv(s,l),f.unshift(E)):f.push(E))}return f}(s,o,l),E=null===d?null:{"":-1};if(null!==m){f=!0,ov(l,s.data.length,m.length);for(let F=0;F<m.length;F++){const H=m[F];H.providersResolver&&H.providersResolver(H)}let I=!1,S=!1,x=Xc(s,o,m.length,null);for(let F=0;F<m.length;F++){const H=m[F];l.mergedAttrs=Iu(l.mergedAttrs,H.hostAttrs),sm(s,l,o,x,H),sv(x,H,E),null!==H.contentQueries&&(l.flags|=8),(null!==H.hostBindings||null!==H.hostAttrs||0!==H.hostVars)&&(l.flags|=128);const J=H.type.prototype;!I&&(J.ngOnChanges||J.ngOnInit||J.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),I=!0),!S&&(J.ngOnChanges||J.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),S=!0),x++}nv(s,l)}E&&function Zb(s,o,l){if(o){const d=s.localNames=[];for(let f=0;f<o.length;f+=2){const m=l[o[f+1]];if(null==m)throw new ze(-301,!1);d.push(o[f],m)}}}(l,d,E)}return l.mergedAttrs=Iu(l.mergedAttrs,l.attrs),f}function qb(s,o,l,d,f,m){const E=m.hostBindings;if(E){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const S=~o.index;(function BI(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(I)!=S&&I.push(S),I.push(d,f,E)}}function Yb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function iv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function sv(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;Os(o)&&(l[""]=s)}}function ov(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function sm(s,o,l,d,f){s.data[d]=f;const m=f.factory||(f.factory=pi(f.type)),E=new _s(m,Os(f),Jc);s.blueprint[d]=E,l[d]=E,qb(s,o,0,d,Xc(s,l,f.hostVars,Kt),f)}function Qb(s,o,l){const d=wi(o,s),f=Xy(l),m=s[10],E=kh(s,Kf(s,f,null,l.onPush?32:16,d,o,m,m.createRenderer(d,l),null,null,null));s[o.index]=E}function av(s,o,l,d,f,m,E){if(null==m)s.removeAttribute(o,f,l);else{const I=null==E?pe(m):E(m,d||"",f);s.setAttribute(o,f,I,l)}}function om(s,o,l,d,f,m){const E=m[o];if(null!==E){const I=d.setInput;for(let S=0;S<E.length;){const x=E[S++],F=E[S++],H=E[S++];null!==I?d.setInput(l,H,x,F):l[F]=H}}}function jI(s,o){let l=null,d=0;for(;d<o.length;){const f=o[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],o[d+1])),d+=2}else d+=2;else d+=4}return l}function lv(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function Jb(s,o){const l=Sn(o,s);if(ua(l)){const d=l[1];48&l[2]?qf(d,l,d.template,l[8]):l[5]>0&&am(l)}}function am(s){for(let d=ly(s);null!==d;d=uy(d))for(let f=10;f<d.length;f++){const m=d[f];if(ua(m))if(512&m[2]){const E=m[1];qf(E,m,E.template,m[8])}else m[5]>0&&am(m)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Sn(l[d],s);ua(f)&&f[5]>0&&am(f)}}function GI(s,o){const l=Sn(o,s),d=l[1];(function Zf(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),tm(d,l,l[8])}function kh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function lm(s){for(;s;){s[2]|=32;const o=Pf(s);if(El(s)&&!o)return s;s=o}return null}function nu(s,o,l,d=!0){const f=o[10];f.begin&&f.begin();try{qf(s,o,s.template,l)}catch(E){throw d&&ew(o,E),E}finally{f.end&&f.end()}}function Ph(s,o,l){Fd(0),o(s,l)}function um(s){return s[7]||(s[7]=[])}function cv(s){return s.cleanup||(s.cleanup=[])}function ew(s,o){const l=s[9],d=l?l.get(Yu,null):null;d&&d.handleError(o)}function cm(s,o,l,d,f){for(let m=0;m<l.length;){const E=l[m++],I=l[m++],S=o[E],x=s.data[E];null!==x.setInput?x.setInput(S,f,d,I):S[I]=f}}function td(s,o,l){let d=l?s.styles:null,f=l?s.classes:null,m=0;if(null!==o)for(let E=0;E<o.length;E++){const I=o[E];"number"==typeof I?m=I:1==m?f=Ye(f,I):2==m&&(d=Ye(d,I+": "+o[++E]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=f:s.classesWithoutHost=f}function dm(s,o,l,d,f=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&d.push(sr(m)),fi(m))for(let I=10;I<m.length;I++){const S=m[I],x=S[1].firstChild;null!==x&&dm(S[1],S,x,d)}const E=l.type;if(8&E)dm(s,o,l.child,d);else if(32&E){const I=ay(l,o);let S;for(;S=I();)d.push(S)}else if(16&E){const I=Ch(o,l);if(Array.isArray(I))d.push(...I);else{const S=Pf(o[16]);dm(S[1],S,I,d,!0)}}l=f?l.projectionNext:l.next}return d}class Fh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return dm(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(fi(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(Ff(o,d),ma(l,d))}this._attachedToViewContainer=!1}Kc(this._lView[1],this._lView)}onDestroy(o){ev(this._lView[1],this._lView,null,o)}markForCheck(){lm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){nu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ze(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lg(s,o){Ia(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ze(902,!1);this._appRef=o}}class dv extends Fh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;nu(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class hm extends $c{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=P(o);return new Bh(l,this.ngModule)}}function hv(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class rs{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,d){const f=this.injector.get(o,Gc,d);return f!==Gc||l===Gc?f:this.parentInjector.get(o,l,d)}}class Bh extends xf{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Ey(s){return s.map(Yc).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return hv(this.componentDef.inputs)}get outputs(){return hv(this.componentDef.outputs)}create(o,l,d,f){let m=(f=f||this.ngModule)instanceof ol?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new rs(o,m):o,I=E.get(Di,null);if(null===I)throw new ze(407,!1);const S=E.get(W_,null),x=I.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",H=d?function Wb(s,o,l){return s.selectRootElement(o,l===It.ShadowDom)}(x,d,this.componentDef.encapsulation):Ks(I.createRenderer(null,this.componentDef),F,function Lh(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(F)),J=this.componentDef.onPush?288:272,ue=rm(0,null,null,1,0,null,null,null,null,null),Ie=Kf(null,ue,null,J,null,null,I,x,S,E,null);let Ze,lt;Eu(Ie);try{const Ct=function rw(s,o,l,d,f,m){const E=l[1];l[22]=s;const S=Ko(E,22,2,"#host",null),x=S.mergedAttrs=o.hostAttrs;null!==x&&(td(S,x,!0),null!==s&&(ho(f,s,x),null!==S.classes&&vo(f,s,S.classes),null!==S.styles&&yy(f,s,S.styles)));const F=d.createRenderer(s,o),H=Kf(l,Xy(o),null,o.onPush?32:16,l[22],S,d,F,m||null,null,null);return E.firstCreatePass&&(pa(za(S,l),E,o.type),iv(E,S),ov(S,l.length,1)),kh(l,H),l[22]=H}(H,this.componentDef,Ie,I,x);if(H)if(d)ho(x,H,["ng-version",bg.full]);else{const{attrs:Ot,classes:Fe}=function Dy(s){const o=[],l=[];let d=1,f=2;for(;d<s.length;){let m=s[d];if("string"==typeof m)2===f?""!==m&&o.push(m,s[++d]):8===f&&l.push(m);else{if(!Vi(f))break;f=m}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ot&&ho(x,H,Ot),Fe&&Fe.length>0&&vo(x,H,Fe.join(" "))}if(lt=Al(ue,22),void 0!==l){const Ot=lt.projection=[];for(let Fe=0;Fe<this.ngContentSelectors.length;Fe++){const jt=l[Fe];Ot.push(null!=jt?Array.from(jt):null)}}Ze=function fm(s,o,l,d){const f=l[1],m=function LI(s,o,l){const d=Yr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),sm(s,d,o,Xc(s,o,1,null),l),nv(s,d));const f=Ya(o,s,d.directiveStart,d);Li(f,o);const m=wi(d,o);return m&&Li(m,o),f}(f,l,o);if(s[8]=l[8]=m,null!==d)for(const I of d)I(m,o);if(o.contentQueries){const I=Yr();o.contentQueries(1,m,I.directiveStart)}const E=Yr();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Oo(E.index),qb(l[1],E,0,E.directiveStart,E.directiveEnd,o),Yb(o,m)),m}(Ct,this.componentDef,Ie,[fv]),tm(ue,Ie,null)}finally{Ml()}return new Qf(this.componentType,Ze,ph(lt,Ie),Ie,lt)}}class Qf extends class yg{}{constructor(o,l,d,f,m){super(),this.location=d,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new dv(f),this.componentType=o}setInput(o,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[o])){const m=this._rootLView;cm(m[1],m,f,o,l),rv(m,this._tNode.index)}}get injector(){return new Za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function fv(){const s=Yr();_e(Pe()[1],s)}function Vh(s){let o=function pm(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let f;if(Os(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ze(903,!1);f=o.\u0275dir}if(f){if(l){d.push(f);const E=s;E.inputs=Jf(s.inputs),E.declaredInputs=Jf(s.declaredInputs),E.outputs=Jf(s.outputs);const I=f.hostBindings;I&&c(s,I);const S=f.viewQuery,x=f.contentQueries;if(S&&pv(s,S),x&&zI(s,x),We(s.inputs,f.inputs),We(s.declaredInputs,f.declaredInputs),We(s.outputs,f.outputs),Os(f)&&f.data.animation){const F=s.data;F.animation=(F.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let E=0;E<m.length;E++){const I=m[E];I&&I.ngInherit&&I(s),I===Vh&&(l=!1)}}o=Object.getPrototypeOf(o)}!function iw(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=o+=f.hostVars,f.hostAttrs=Iu(f.hostAttrs,l=Iu(l,f.hostAttrs))}}(d)}function Jf(s){return s===ci?{}:s===Vt?[]:s}function pv(s,o){const l=s.viewQuery;s.viewQuery=l?(d,f)=>{o(d,f),l(d,f)}:o}function zI(s,o){const l=s.contentQueries;s.contentQueries=l?(d,f,m)=>{o(d,f,m),l(d,f,m)}:o}function c(s,o){const l=s.hostBindings;s.hostBindings=l?(d,f)=>{o(d,f),l(d,f)}:o}let M=null;function B(){if(!M){const s=$t.Symbol;if(s&&s.iterator)M=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(M=d)}}}return M}function Q(s){return!!xe(s)&&(Array.isArray(s)||!(s instanceof Map)&&B()in s)}function xe(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function st(s,o,l){return s[o]=l}function Et(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Lt(s,o,l,d){const f=Et(s,o,l);return Et(s,o+1,d)||f}function bn(s,o,l,d){const f=Pe();return Et(f,Ro(),o)&&(un(),function fl(s,o,l,d,f,m){const E=wi(s,o);av(o[11],E,m,s.value,l,d,f)}(ar(),f,s,o,l,d)),bn}function Gr(s,o,l,d){return Et(s,Ro(),l)?o+pe(l)+d:Kt}function YI(s,o,l,d,f,m,E,I){const S=Pe(),x=un(),F=s+22,H=x.firstCreatePass?function vP(s,o,l,d,f,m,E,I,S){const x=o.consts,F=Ko(o,s,4,E||null,uo(x,I));im(o,l,F,uo(x,S)),_e(o,F);const H=F.tViews=rm(2,F,d,f,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,F),H.queries=o.queries.embeddedTView(F)),F}(F,x,S,o,l,d,f,m,E):x.data[F];Mi(H,!1);const J=S[11].createComment("");$o(x,S,J,H),Li(J,S),kh(S,S[F]=lv(J,S,J,H)),Ba(H)&&Yf(x,S,H),null!=E&&Oh(S,H,I)}function ZA(s){return function No(s,o){return s[o]}(function wu(){return Ht.lFrame.contextLView}(),22+s)}function sw(s,o,l){const d=Pe();return Et(d,Ro(),o)&&Xs(un(),ar(),d,s,o,d[11],l,!1),sw}function ZI(s,o,l,d,f){const E=f?"class":"style";cm(s,l,o.inputs[E],E,d)}function ow(s,o,l,d){const f=Pe(),m=un(),E=22+s,I=f[11],S=f[E]=Ks(I,o,function ne(){return Ht.lFrame.currentNamespace}()),x=m.firstCreatePass?function wP(s,o,l,d,f,m,E){const I=o.consts,x=Ko(o,s,2,f,uo(I,m));return im(o,l,x,uo(I,E)),null!==x.attrs&&td(x,x.attrs,!1),null!==x.mergedAttrs&&td(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(E,m,f,0,o,l,d):m.data[E];Mi(x,!0);const F=x.mergedAttrs;null!==F&&ho(I,S,F);const H=x.classes;null!==H&&vo(I,S,H);const J=x.styles;return null!==J&&yy(I,S,J),64!=(64&x.flags)&&$o(m,f,S,x),0===function co(){return Ht.lFrame.elementDepthCount}()&&Li(S,f),function Rd(){Ht.lFrame.elementDepthCount++}(),Ba(x)&&(Yf(m,f,x),function nm(s,o,l){if(la(o)){const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const E=s.data[m];E.contentQueries&&E.contentQueries(1,l[m],m)}}}(m,x,f)),null!==d&&Oh(f,x),ow}function aw(){let s=Yr();vu()?bu():(s=s.parent,Mi(s,!1));const o=s;!function Md(){Ht.lFrame.elementDepthCount--}();const l=un();return l.firstCreatePass&&(_e(l,s),la(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function $a(s){return 0!=(16&s.flags)}(o)&&ZI(l,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Ga(s){return 0!=(32&s.flags)}(o)&&ZI(l,o,Pe(),o.stylesWithoutHost,!1),aw}function QI(s,o,l,d){return ow(s,o,l,d),aw(),QI}function gi(){return Pe()}function e1(s){return!!s&&"function"==typeof s.then}function XA(s){return!!s&&"function"==typeof s.subscribe}const eN=XA;function t1(s,o,l,d){const f=Pe(),m=un(),E=Yr();return function r1(s,o,l,d,f,m,E,I){const S=Ba(d),F=s.firstCreatePass&&cv(s),H=o[8],J=um(o);let ue=!0;if(3&d.type||I){const lt=wi(d,o),Ct=I?I(lt):lt,Ot=J.length,Fe=I?kn=>I(sr(kn[d.index])):d.index;let jt=null;if(!I&&S&&(jt=function n1(s,o,l,d){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const E=f[m];if(E===l&&f[m+1]===d){const I=o[7],S=f[m+2];return I.length>S?I[S]:null}"string"==typeof E&&(m+=2)}return null}(s,o,f,d.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=m,jt.__ngLastListenerFn__=m,ue=!1;else{m=s1(d,o,H,m,!1);const kn=l.listen(Ct,f,m);J.push(m,kn),F&&F.push(f,Fe,Ot,Ot+1)}}else m=s1(d,o,H,m,!1);const Ie=d.outputs;let Ze;if(ue&&null!==Ie&&(Ze=Ie[f])){const lt=Ze.length;if(lt)for(let Ct=0;Ct<lt;Ct+=2){const Wr=o[Ze[Ct]][Ze[Ct+1]].subscribe(m),cp=J.length;J.push(m,Wr),F&&F.push(f,d.index,cp,-(cp+1))}}}(m,f,f[11],E,s,o,0,d),t1}function i1(s,o,l,d){try{return!1!==l(d)}catch(f){return ew(s,f),!1}}function s1(s,o,l,d,f){return function m(E){if(E===Function)return d;lm(2&s.flags?Sn(s.index,o):o);let S=i1(o,0,d,E),x=m.__ngNextListenerFn__;for(;x;)S=i1(o,0,x,E)&&S,x=x.__ngNextListenerFn__;return f&&!1===S&&(E.preventDefault(),E.returnValue=!1),S}}function lw(s=1){return function ms(s){return(Ht.lFrame.contextLView=function Fs(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ht.lFrame.contextLView))[8]}(s)}function o1(s,o){let l=null;const d=function by(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let f=0;f<o.length;f++){const m=o[f];if("*"!==m){if(null===d?Ah(s,m,!0):Tb(d,m))return f}else l=f}return l}function a1(s){const o=Pe()[16][6];if(!o.projection){const d=o.projection=Xa(s?s.length:1,null),f=d.slice();let m=o.child;for(;null!==m;){const E=s?o1(m,s):0;null!==E&&(f[E]?f[E].projectionNext=m:d[E]=m,f[E]=m),m=m.next}}}function l1(s,o=0,l){const d=Pe(),f=un(),m=Ko(f,22+s,16,null,l||null);null===m.projection&&(m.projection=o),bu(),64!=(64&m.flags)&&function Vg(s,o,l){Hf(o[11],0,o,l,fy(s,l,o),_y(l.parent||o[6],l,o))}(f,d,m)}function uw(s,o,l){return gv(s,"",o,"",l),uw}function gv(s,o,l,d,f){const m=Pe(),E=Gr(m,o,l,d);return E!==Kt&&Xs(un(),ar(),m,s,E,m[11],f,!1),gv}function v1(s,o,l,d,f){const m=s[l+1],E=null===o;let I=d?Hi(m):hl(m),S=!1;for(;0!==I&&(!1===S||E);){const F=s[I+1];DP(s[I],o)&&(S=!0,s[I+1]=d?Wo(F):Yg(F)),I=d?Hi(F):hl(F)}S&&(s[l+1]=d?Yg(m):Wo(m))}function DP(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&nr(s,o)>=0}const Si={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tN(s){return s.substring(Si.key,Si.keyEnd)}function rN(s,o){const l=Si.textEnd;return l===o?-1:(o=Si.keyEnd=function TP(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Si.key=o,l),ym(s,o,l))}function ym(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function b1(s,o,l){return iu(s,o,l,!1),b1}function w1(s,o){return iu(s,o,null,!0),w1}function uN(s){!function su(s,o,l,d){const f=un(),m=Mo(2);f.firstUpdatePass&&dN(f,null,m,d);const E=Pe();if(l!==Kt&&Et(E,m,l)){const I=f.data[tr()];if(dw(I,d)&&!cN(f,m)){let S=d?I.classesWithoutHost:I.stylesWithoutHost;null!==S&&(l=Ye(S,l||"")),ZI(f,I,E,l,d)}else!function hN(s,o,l,d,f,m,E,I){f===Kt&&(f=Vt);let S=0,x=0,F=0<f.length?f[0]:null,H=0<m.length?m[0]:null;for(;null!==F||null!==H;){const J=S<f.length?f[S+1]:void 0,ue=x<m.length?m[x+1]:void 0;let Ze,Ie=null;F===H?(S+=2,x+=2,J!==ue&&(Ie=H,Ze=ue)):null===H||null!==F&&F<H?(S+=2,Ie=F):(x+=2,Ie=H,Ze=ue),null!==Ie&&mv(s,o,l,d,Ie,Ze,E,I),F=S<f.length?f[S]:null,H=x<m.length?m[x]:null}}(f,I,E,E[11],E[m+1],E[m+1]=function cw(s,o,l){if(null==l||""===l)return Vt;const d=[],f=Vo(l);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(d,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(d,m,f[m]);else"string"==typeof f&&o(d,f);return d}(s,o,l),d,m)}}(Vr,tc,s,!0)}function tc(s,o){for(let l=function nN(s){return function sN(s){Si.key=0,Si.keyEnd=0,Si.value=0,Si.valueEnd=0,Si.textEnd=s.length}(s),rN(s,ym(s,0,Si.textEnd))}(o);l>=0;l=rN(o,l))Vr(s,tN(o),!0)}function iu(s,o,l,d){const f=Pe(),m=un(),E=Mo(2);m.firstUpdatePass&&dN(m,s,E,d),o!==Kt&&Et(f,E,o)&&mv(m,m.data[tr()],f,f[11],s,f[E+1]=function _v(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ke(Vo(s)))),s}(o,l),d,E)}function cN(s,o){return o>=s.expandoStartIndex}function dN(s,o,l,d){const f=s.data;if(null===f[l+1]){const m=f[tr()],E=cN(s,l);dw(m,d)&&null===o&&!E&&(o=!1),o=function E1(s,o,l,d){const f=function Pd(s){const o=Ht.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=d?o.residualClasses:o.residualStyles;if(null===f)0===(d?o.classBindings:o.styleBindings)&&(l=Xf(l=vm(null,s,o,l,d),o.attrs,d),m=null);else{const E=o.directiveStylingLast;if(-1===E||s[E]!==f)if(l=vm(f,s,o,l,d),null===m){let S=function NP(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==hl(d))return s[Hi(d)]}(s,o,d);void 0!==S&&Array.isArray(S)&&(S=vm(null,s,o,S[1],d),S=Xf(S,o.attrs,d),function pl(s,o,l,d){s[Hi(l?o.classBindings:o.styleBindings)]=d}(s,o,d,S))}else m=function xr(s,o,l){let d;const f=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<f;m++)d=Xf(d,s[m].hostAttrs,l);return Xf(d,o.attrs,l)}(s,o,d)}return void 0!==m&&(d?o.residualClasses=m:o.residualStyles=m),l}(f,m,o,d),function _1(s,o,l,d,f,m){let E=m?o.classBindings:o.styleBindings,I=Hi(E),S=hl(E);s[d]=l;let F,x=!1;if(Array.isArray(l)){const H=l;F=H[1],(null===F||nr(H,F)>0)&&(x=!0)}else F=l;if(f)if(0!==S){const J=Hi(s[I+1]);s[d+1]=Ui(J,I),0!==J&&(s[J+1]=Zg(s[J+1],d)),s[I+1]=function Ob(s,o){return 131071&s|o<<17}(s[I+1],d)}else s[d+1]=Ui(I,0),0!==I&&(s[I+1]=Zg(s[I+1],d)),I=d;else s[d+1]=Ui(S,0),0===I?I=d:s[S+1]=Zg(s[S+1],d),S=d;x&&(s[d+1]=Yg(s[d+1])),v1(s,F,d,!0),v1(s,F,d,!1),function y1(s,o,l,d,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&nr(m,o)>=0&&(l[d+1]=Wo(l[d+1]))}(o,F,s,d,m),E=Ui(I,S),m?o.classBindings=E:o.styleBindings=E}(f,m,o,l,E,d)}}function vm(s,o,l,d,f){let m=null;const E=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<E&&(m=o[I],d=Xf(d,m.hostAttrs,f),m!==s);)I++;return null!==s&&(l.directiveStylingLast=I),d}function Xf(s,o,l){const d=l?1:2;let f=-1;if(null!==o)for(let m=0;m<o.length;m++){const E=o[m];"number"==typeof E?f=E:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Vr(s,E,!!l||o[++m]))}return void 0===s?null:s}function mv(s,o,l,d,f,m,E,I){if(!(3&o.type))return;const S=s.data,x=S[I+1];rd(function By(s){return 1==(1&s)}(x)?fN(S,o,l,f,hl(x),E):void 0)||(rd(m)||function Ly(s){return 2==(2&s)}(x)&&(m=fN(S,null,l,f,I,E)),function ul(s,o,l,d,f){if(o)f?s.addClass(l,d):s.removeClass(l,d);else{let m=-1===d.indexOf("-")?void 0:Ea.DashCase;null==f?s.removeStyle(l,d,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Ea.Important),s.setStyle(l,d,f,m))}}(d,E,Sl(tr(),l),f,m))}function fN(s,o,l,d,f,m){const E=null===o;let I;for(;f>0;){const S=s[f],x=Array.isArray(S),F=x?S[1]:S,H=null===F;let J=l[f+1];J===Kt&&(J=H?Vt:void 0);let ue=H?jd(J,d):F===d?J:void 0;if(x&&!rd(ue)&&(ue=jd(S,d)),rd(ue)&&(I=ue,E))return I;const Ie=s[f+1];f=E?Hi(Ie):hl(Ie)}if(null!==o){let S=m?o.residualClasses:o.residualStyles;null!=S&&(I=jd(S,d))}return I}function rd(s){return void 0!==s}function dw(s,o){return 0!=(s.flags&(o?16:32))}function I1(s,o=""){const l=Pe(),d=un(),f=s+22,m=d.firstCreatePass?Ko(d,f,1,o,null):d.data[f],E=l[f]=Pg(l[11],o);$o(d,l,E,m),Mi(m,!1)}function hw(s){return yv("",s,""),hw}function yv(s,o,l){const d=Pe(),f=Gr(d,s,o,l);return f!==Kt&&function ji(s,o,l){const d=Sl(o,s);Fg(s[11],d,l)}(d,tr(),f),yv}function N1(s,o,l){const d=Pe();return Et(d,Ro(),o)&&Xs(un(),ar(),d,s,o,d[11],l,!0),N1}const ad=void 0;var Im=["en",[["a","p"],["AM","PM"],ad],[["AM","PM"],ad,ad],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ad,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ad,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ad,"{1} 'at' {0}",ad],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mN(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let tp={};function yw(s){const o=function _N(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=bw(o);if(l)return l;const d=o.split("-")[0];if(l=bw(d),l)return l;if("en"===d)return Im;throw new ze(701,!1)}function vw(s){return yw(s)[Ut.PluralCase]}function bw(s){return s in tp||(tp[s]=$t.ng&&$t.ng.common&&$t.ng.common.locales&&$t.ng.common.locales[s]),tp[s]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const R1=["zero","one","two","few","many"],ld="en-US",vv={marker:"element"},bv={marker:"ICU"};var Rr=(()=>((Rr=Rr||{})[Rr.SHIFT=2]="SHIFT",Rr[Rr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Rr[Rr.COMMENT=2]="COMMENT",Rr))();let yN=ld;function Ew(s){(function en(s,o){null==s&&et(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(yN=s.toLowerCase().replace(/_/g,"-"))}function Dw(s,o,l){const d=o.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?Ys(s,0,l):sr(l[f])}function Iw(s,o,l,d,f){const m=o.insertBeforeIndex;if(Array.isArray(m)){let E=d,I=null;if(3&o.type||(I=E,E=f),null!==E&&0==(2&o.flags))for(let S=1;S<m.length;S++)Xu(s,E,l[m[S]],I,!1)}}function Cw(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const d=s[l];Tw(d)||O1(d,o)&&null===k1(d)&&P1(d,o.index)}}function Tw(s){return!(64&s.type)}function O1(s,o){return Tw(o)||s.index>o.index}function k1(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function P1(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(Bf(Dw,Iw),s.insertBeforeIndex=o)}function wv(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function bN(s,o,l){const d=em(s,l,64,null,null);return Cw(o,d),d}function Ev(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function L1(s){return s>>>17}function B1(s){return(131070&s)>>>1}let Dv=0,Iv=0;function Aw(s,o,l,d){const f=l[11];let E,m=null;for(let I=0;I<o.length;I++){const S=o[I];if("string"==typeof S){const x=o[++I];null===l[x]&&(l[x]=Pg(f,S))}else if("number"==typeof S)switch(1&S){case 0:const x=L1(S);let F,H;if(null===m&&(m=x,E=Lf(f,d)),x===m?(F=d,H=E):(F=null,H=sr(l[x])),null!==H){const Ze=B1(S);Xu(f,H,l[Ze],F,!1);const Ct=wv(s,Ze);if(null!==Ct&&"object"==typeof Ct){const Ot=Ev(Ct,l);null!==Ot&&Aw(s,Ct.create[Ot],l,l[Ct.anchorIdx])}}break;case 1:const ue=o[++I],Ie=o[++I];av(f,Sl(S>>>1,l),null,null,ue,Ie,null)}else switch(S){case bv:const x=o[++I],F=o[++I];null===l[F]&&Li(l[F]=zs(f,x),l);break;case vv:const H=o[++I],J=o[++I];null===l[J]&&Li(l[J]=Ks(f,H,null),l)}}}function EN(s,o,l,d,f){for(let m=0;m<l.length;m++){const E=l[m],I=l[++m];if(E&f){let S="";for(let x=m+1;x<=m+I;x++){const F=l[x];if("string"==typeof F)S+=F;else if("number"==typeof F)if(F<0)S+=pe(o[d-F]);else{const H=F>>>2;switch(3&F){case 1:const J=l[++x],ue=l[++x],Ie=s.data[H];"string"==typeof Ie?av(o[11],o[H],null,Ie,J,S,ue):Xs(s,Ie,o,J,S,o[11],ue,!1);break;case 0:const Ze=o[H];null!==Ze&&Fg(o[11],Ze,S);break;case 2:V1(s,wv(s,H),o,S);break;case 3:DN(s,wv(s,H),d,o)}}}}else{const S=l[m+1];if(S>0&&3==(3&S)){const F=wv(s,S>>>2);o[F.currentCaseLViewIndex]<0&&DN(s,F,d,o)}}m+=I}}function DN(s,o,l,d){let f=d[o.currentCaseLViewIndex];if(null!==f){let m=Dv;f<0&&(f=d[o.currentCaseLViewIndex]=~f,m=-1),EN(s,d,o.update[f],l,m)}}function V1(s,o,l,d){const f=function JP(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const d=function ww(s,o){const l=vw(o)(parseInt(s,10)),d=R1[l];return void 0!==d?d:"other"}(o,function vN(){return yN}());l=s.cases.indexOf(d),-1===l&&"other"!==d&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,d);if(Ev(o,l)!==f&&(IN(s,o,l),l[o.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const E=l[o.anchorIdx];E&&Aw(s,o.create[f],l,E)}}function IN(s,o,l){let d=Ev(o,l);if(null!==d){const f=o.remove[d];for(let m=0;m<f.length;m++){const E=f[m];if(E>0){const I=Sl(E,l);null!==I&&Vf(l[11],I)}else IN(s,wv(s,~E),l)}}}function U1(){const s=[];let l,d,o=-1;function m(I,S){o=0;const x=Ev(I,S);d=null!==x?I.remove[x]:Vt}function E(){if(o<d.length){const I=d[o++];return I>0?l[I]:(s.push(o,d),m(l[1].data[~I],l),E())}return 0===s.length?null:(d=s.pop(),o=s.pop(),E())}return function f(I,S){for(l=S;s.length;)s.pop();return m(I.value,S),E}}const Nw=/\ufffd(\d+):?\d*\ufffd/gi,CN=/\ufffd(\d+)\ufffd/,TN=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,j1=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,eF=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,tF=/\uE500/g;function SN(s,o,l,d,f,m,E){const I=Xc(s,d,1,null);let S=I<<Rr.SHIFT,x=yu();o===x&&(x=null),null===x&&(S|=Rr.APPEND_EAGERLY),E&&(S|=Rr.COMMENT,function bb(s){void 0===kg&&(kg=s())}(U1)),f.push(S,null===m?"":m);const F=em(s,I,E?32:1,null===m?"":m,null);Cw(l,F);const H=F.index;return Mi(F,!1),null!==x&&o!==x&&function F1(s,o){let l=s.insertBeforeIndex;null===l?(Bf(Dw,Iw),l=s.insertBeforeIndex=[null,o]):(function Te(s,o,l){s!=o&&et(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(x,H),F}function $1(s,o,l,d,f,m,E){const I=E.match(Nw),S=SN(s,o,l,m,d,I?null:E,!1);I&&Tv(f,E,S.index,null,0,null)}function Tv(s,o,l,d,f,m){const E=s.length,I=E+1;s.push(null,null);const S=E+2,x=o.split(Nw);let F=0;for(let H=0;H<x.length;H++){const J=x[H];if(1&H){const ue=f+parseInt(J,10);s.push(-1-ue),F|=AN(ue)}else""!==J&&s.push(J)}return s.push(l<<2|(d?1:0)),d&&s.push(d,m),s[E]=F,s[I]=s.length-S,F}function AN(s){return 1<<Math.min(s,31)}function NN(s){let o,m,l="",d=0,f=!1;for(;null!==(o=j1.exec(s));)f?o[0]===`\ufffd/*${m}\ufffd`&&(d=o.index,f=!1):(l+=s.substring(d,o.index+o[0].length),m=o[1],f=!0);return l+=s.slice(d),l}function xN(s,o,l,d,f,m){let E=0;const I={type:f.type,currentCaseLViewIndex:Xc(s,o,1,null),anchorIdx:m,cases:[],create:[],remove:[],update:[]};(function W1(s,o,l){s.push(AN(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,f,m),function qP(s,o,l){const d=s.data[o];null===d?s.data[o]=l:d.value=l}(s,m,I);const S=f.values;for(let x=0;x<S.length;x++){const F=S[x],H=[];for(let J=0;J<F.length;J++){const ue=F[J];if("string"!=typeof ue){const Ie=H.push(ue)-1;F[J]=`\x3c!--\ufffd${Ie}\ufffd--\x3e`}}E=lF(s,I,o,l,d,f.cases[x],F.join(""),H)|E}E&&function cF(s,o,l){s.push(o,1,l<<2|3)}(l,E,m)}function aF(s){const o=[],l=[];let d=1,f=0;const m=xw(s=s.replace(TN,function(E,I,S){return d="select"===S?0:1,f=parseInt(I.slice(1),10),""}));for(let E=0;E<m.length;){let I=m[E++].trim();1===d&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&o.push(I);const S=xw(m[E++]);o.length>l.length&&l.push(S)}return{type:d,mainBinding:f,cases:o,values:l}}function xw(s){if(!s)return[];let o=0;const l=[],d=[],f=/[{}]/g;let m;for(f.lastIndex=0;m=f.exec(s);){const I=m.index;if("}"==m[0]){if(l.pop(),0==l.length){const S=s.substring(o,I);TN.test(S)?d.push(aF(S)):d.push(S),o=I+1}}else{if(0==l.length){const S=s.substring(o,I);d.push(S),o=I+1}l.push("{")}}const E=s.substring(o);return d.push(E),d}function lF(s,o,l,d,f,m,E,I){const S=[],x=[],F=[];o.cases.push(m),o.create.push(S),o.remove.push(x),o.update.push(F);const J=function sl(s){const o=new th(s);return function D(){try{return!!(new window.DOMParser).parseFromString(nl(""),"text/html")}catch{return!1}}()?new Lc(o):o}(function Hu(){return void 0!==kc?kc:typeof document<"u"?document:void 0}()).getInertBodyElement(E),ue=function Gu(s){return"content"in s&&function Vc(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(J)||J;return ue?RN(s,o,l,d,S,x,F,ue,f,I,0):0}function RN(s,o,l,d,f,m,E,I,S,x,F){let H=0,J=I.firstChild;for(;J;){const ue=Xc(s,l,1,null);switch(J.nodeType){case Node.ELEMENT_NODE:const Ie=J,Ze=Ie.tagName.toLowerCase();if(vn.hasOwnProperty(Ze)){z1(f,vv,Ze,S,ue),s.data[ue]=Ze;const Fe=Ie.attributes;for(let jt=0;jt<Fe.length;jt++){const kn=Fe.item(jt),Wr=kn.name.toLowerCase();kn.value.match(Nw)?$s.hasOwnProperty(Wr)&&Tv(E,kn.value,ue,kn.name,0,es[Wr]?v:null):dF(f,ue,kn)}H=RN(s,o,l,d,f,m,E,J,ue,x,F+1)|H,MN(m,ue,F)}break;case Node.TEXT_NODE:const lt=J.textContent||"",Ct=lt.match(Nw);z1(f,null,Ct?"":lt,S,ue),MN(m,ue,F),Ct&&(H=Tv(E,lt,ue,null,0,null)|H);break;case Node.COMMENT_NODE:const Ot=CN.exec(J.textContent||"");if(Ot){const jt=x[parseInt(Ot[1],10)];z1(f,bv,"",S,ue),xN(s,l,d,S,jt,ue),uF(m,ue,F)}}J=J.nextSibling}return H}function MN(s,o,l){0===l&&s.push(o)}function uF(s,o,l){0===l&&(s.push(~o),s.push(o))}function z1(s,o,l,d,f){null!==o&&s.push(o),s.push(l,f,function wN(s,o,l){return s|o<<17|l<<1}(0,d,f))}function dF(s,o,l){s.push(o<<1|1,l.name,l.value)}function q1(s,o,l=-1){const d=un(),f=Pe(),m=22+s,E=uo(d.consts,o),I=yu();d.firstCreatePass&&function rF(s,o,l,d,f,m){const E=yu(),I=[],S=[],x=[[]];f=function oF(s,o){if(function G1(s){return-1===s}(o))return NN(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,d=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return NN(s.substring(l,d))}}(f,m);const F=function nF(s){return s.replace(tF," ")}(f).split(eF);for(let H=0;H<F.length;H++){let J=F[H];if(0==(1&H)){const ue=xw(J);for(let Ie=0;Ie<ue.length;Ie++){let Ze=ue[Ie];if(0==(1&Ie)){const lt=Ze;""!==lt&&$1(s,E,x[0],I,S,l,lt)}else{const lt=Ze;if("object"!=typeof lt)throw new Error(`Unable to parse ICU expression in "${f}" message.`);xN(s,l,S,o,lt,SN(s,E,x[0],l,I,"",!0).index)}}}else{const ue=47===J.charCodeAt(0),Ze=(J.charCodeAt(ue?1:0),22+Number.parseInt(J.substring(ue?2:1)));if(ue)x.shift(),Mi(yu(),!1);else{const lt=bN(s,x[0],Ze);x.unshift([]),Mi(lt,!0)}}}s.data[d]={create:I,update:S}}(d,null===I?0:I.index,f,m,E,l);const S=d.data[m],F=py(d,I===f[6]?null:I,f);(function QP(s,o,l,d){const f=s[11];for(let m=0;m<o.length;m++){const E=o[m++],I=o[m],S=(E&Rr.COMMENT)===Rr.COMMENT,x=(E&Rr.APPEND_EAGERLY)===Rr.APPEND_EAGERLY,F=E>>>Rr.SHIFT;let H=s[F];null===H&&(H=s[F]=S?f.createComment(I):Pg(f,I)),x&&null!==l&&Xu(f,l,H,d,!1)}})(f,S.create,F,I&&8&I.type?f[I.index]:null),Qp(!0)}function se(s,o,l){q1(s,o,l),function Y1(){Qp(!1)}()}function bo(s){return function YP(s){s&&(Dv|=1<<Math.min(Iv,31)),Iv++}(Et(Pe(),Ro(),s)),bo}function wo(s){!function ZP(s,o,l){if(Iv>0){const d=s.data[l];EN(s,o,Array.isArray(d)?d:d.update,function fr(){return Ht.lFrame.bindingIndex}()-Iv-1,Dv)}Dv=0,Iv=0}(un(),Pe(),s+22)}function Cm(s,o,l,d,f){if(s=de(s),Array.isArray(s))for(let m=0;m<s.length;m++)Cm(s[m],o,l,d,f);else{const m=un(),E=Pe();let I=ba(s)?s:de(s.provide),S=fh(s);const x=Yr(),F=1048575&x.providerIndexes,H=x.directiveStart,J=x.providerIndexes>>20;if(ba(s)||!s.multi){const ue=new _s(S,f,Jc),Ie=Av(I,o,f?F:F+J,H);-1===Ie?(pa(za(x,E),m,I),Sv(m,s,o.length),o.push(I),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(ue),E.push(ue)):(l[Ie]=ue,E[Ie]=ue)}else{const ue=Av(I,o,F+J,H),Ie=Av(I,o,F,F+J),Ze=ue>=0&&l[ue],lt=Ie>=0&&l[Ie];if(f&&!lt||!f&&!Ze){pa(za(x,E),m,I);const Ct=function BN(s,o,l,d,f){const m=new _s(s,l,Jc);return m.multi=[],m.index=o,m.componentProviders=0,Rw(m,f,d&&!l),m}(f?LN:FN,l.length,f,d,S);!f&&lt&&(l[Ie].providerFactory=Ct),Sv(m,s,o.length,0),o.push(I),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),l.push(Ct),E.push(Ct)}else Sv(m,s,ue>-1?ue:Ie,Rw(l[f?Ie:ue],S,!f&&d));!f&&d&&lt&&l[Ie].componentProviders++}}}function Sv(s,o,l,d){const f=ba(o),m=function Ql(s){return!!s.useClass}(o);if(f||m){const S=(m?de(o.useClass):o).prototype.ngOnDestroy;if(S){const x=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const F=x.indexOf(l);-1===F?x.push(l,[d,S]):x[F+1].push(d,S)}else x.push(l,S)}}}function Rw(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Av(s,o,l,d){for(let f=l;f<d;f++)if(o[f]===s)return f;return-1}function FN(s,o,l,d){return Mw(this.multi,[])}function LN(s,o,l,d){const f=this.multi;let m;if(this.providerFactory){const E=this.providerFactory.componentProviders,I=Ya(l,l[1],this.providerFactory.index,d);m=I.slice(0,E),Mw(f,m);for(let S=E;S<I.length;S++)m.push(I[S])}else m=[],Mw(f,m);return m}function Mw(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Q1(s,o=[]){return l=>{l.providersResolver=(d,f)=>function Z1(s,o,l){const d=un();if(d.firstCreatePass){const f=Os(s);Cm(l,d.data,d.blueprint,f,!0),Cm(o,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,o)}}class Eo{}function Ow(s,o){return new Nv(s,o??null)}class Nv extends Eo{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hm(this);const d=function vt(s,o){const l=s[ln]||null;if(!l&&!0===o)throw new Error(`Type ${ke(s)} does not have '\u0275mod' property.`);return l}(o);this._bootstrapComponents=function al(s){return s instanceof Function?s():s}(d.bootstrap),this._r3Injector=Sy(o,l,[{provide:Eo,useValue:this},{provide:$c,useValue:this.componentFactoryResolver}],ke(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Tm extends class J1{}{constructor(o){super(),this.moduleType=o}create(o){return new Nv(this.moduleType,o)}}function Uw(s,o,l,d){return function rp(s,o,l,d,f,m){const E=o+l;return Et(s,E,f)?st(s,E+1,m?d.call(m,f):d(f)):Gh(s,E+1)}(Pe(),Ir(),s,o,l,d)}function sC(s,o,l,d,f){return function Mv(s,o,l,d,f,m,E){const I=o+l;return Lt(s,I,f,m)?st(s,I+2,E?d.call(E,f,m):d(f,m)):Gh(s,I+2)}(Pe(),Ir(),s,o,l,d,f)}function oC(s,o,l,d,f,m){return function Ov(s,o,l,d,f,m,E,I){const S=o+l;return function Bt(s,o,l,d,f){const m=Lt(s,o,l,d);return Et(s,o+2,f)||m}(s,S,f,m,E)?st(s,S+3,I?d.call(I,f,m,E):d(f,m,E)):Gh(s,S+3)}(Pe(),Ir(),s,o,l,d,f,m)}function Gh(s,o){const l=s[o];return l===Kt?void 0:l}function Kw(s){return o=>{setTimeout(s,void 0,o)}}const Ta=class zw extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){let f=o,m=l||(()=>null),E=d;if(o&&"object"==typeof o){const S=o;f=S.next?.bind(S),m=S.error?.bind(S),E=S.complete?.bind(S)}this.__isAsync&&(m=Kw(m),f&&(f=Kw(f)),E&&(E=Kw(E)));const I=super.subscribe({next:f,error:m,complete:E});return o instanceof R.w0&&o.add(I),I}};function qw(){return this._results[B()]()}class Yw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=B(),d=Yw.prototype;d[l]||(d[l]=qw)}get changes(){return this._changes||(this._changes=new Ta)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const f=Kn(o);(this._changesDetected=!function Br(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],m=o[d];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wh=(()=>{class s{}return s.__NG_ELEMENT_ID__=Zw,s})();const dC=Wh,ZN=class extends dC{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o,l){const d=this._declarationTContainer.tViews,f=Kf(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[19];return null!==E&&(f[19]=E.createEmbeddedView(d)),tm(d,f,o),new Fh(f)}};function Zw(){return Nm(Yr(),Pe())}function Nm(s,o){return 4&s.type?new ZN(o,s,ph(s,o)):null}let Pv=(()=>{class s{}return s.__NG_ELEMENT_ID__=QN,s})();function QN(){return pC(Yr(),Pe())}const JN=Pv,hC=class extends JN{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return ph(this._hostTNode,this._hostLView)}get injector(){return new Za(this._hostTNode,this._hostLView)}get parentInjector(){const o=fa(this._hostTNode,this._hostLView);if(Dc(o)){const l=ko(o,this._hostLView),d=ki(o);return new Za(l[1].data[d+8],l)}return new Za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=fC(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){let f,m;"number"==typeof d?f=d:null!=d&&(f=d.index,m=d.injector);const E=o.createEmbeddedView(l||{},m);return this.insert(E,f),E}createComponent(o,l,d,f,m){const E=o&&!function Ja(s){return"function"==typeof s}(o);let I;if(E)I=l;else{const H=l||{};I=H.index,d=H.injector,f=H.projectableNodes,m=H.environmentInjector||H.ngModuleRef}const S=E?o:new Bh(P(o)),x=d||this.parentInjector;if(!m&&null==S.ngModule){const J=(E?x:this.parentInjector).get(ol,null);J&&(m=J)}const F=S.create(x,f,void 0,m);return this.insert(F.hostView,I),F}insert(o,l){const d=o._lView,f=d[1];if(function ps(s){return fi(s[3])}(d)){const F=this.indexOf(o);if(-1!==F)this.detach(F);else{const H=d[3],J=new hC(H,H[6],H[3]);J.detach(J.indexOf(o))}}const m=this._adjustIndex(l),E=this._lContainer;!function Ju(s,o,l,d){const f=10+d,m=l.length;d>0&&(l[f-1][4]=o),d<m-10?(o[4]=l[f],Qi(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const E=o[17];null!==E&&l!==E&&function Dh(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(E,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(f,d,E,m);const I=Go(m,E),S=d[11],x=Lf(S,E[7]);return null!==x&&function qs(s,o,l,d,f,m){d[0]=f,d[6]=o,Ia(s,d,l,1,f,m)}(f,E[6],S,d,x,I),o.attachToViewContainerRef(),Qi(xm(E),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=fC(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=Ff(this._lContainer,l);d&&(ma(xm(this._lContainer),l),Kc(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=Ff(this._lContainer,l);return d&&null!=ma(xm(this._lContainer),l)?new Fh(d):null}_adjustIndex(o,l=0){return o??this.length+l}};function fC(s){return s[8]}function xm(s){return s[8]||(s[8]=[])}function pC(s,o){let l;const d=o[s.index];if(fi(d))l=d;else{let f;if(8&s.type)f=sr(d);else{const m=o[11];f=m.createComment("");const E=wi(s,o);Xu(m,Lf(m,E),f,function Db(s,o){return s.nextSibling(o)}(m,E),!1)}o[s.index]=l=lv(d,o,f,s),kh(o,l)}return new hC(l,s,o)}class Jw{constructor(o){this.queryList=o,this.matches=null}clone(){return new Jw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Rm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,f=[];for(let m=0;m<d;m++){const E=l.getByIndex(m);f.push(this.queries[E.indexInDeclarationView].clone())}return new Rm(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==to(o,l).matches&&this.queries[l].setDirty()}}class mC{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class _C{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,m=this.getByIndex(d).embeddedTView(o,f);m&&(m.indexInDeclarationView=d,null!==l?l.push(m):l=[m])}return null!==l?new _C(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Mm{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Mm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const m=d[f];this.matchTNodeWithReadOption(o,l,_F(l,m)),this.matchTNodeWithReadOption(o,l,Lr(l,o,m,!1,!1))}else d===Wh?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Lr(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===gh||f===Pv||f===Wh&&4&l.type)this.addMatch(l.index,-2);else{const m=Lr(l,o,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function _F(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function ex(s,o,l,d){return-1===l?function yF(s,o){return 11&s.type?ph(s,o):4&s.type?Nm(s,o):null}(o,s):-2===l?function Xw(s,o,l){return l===gh?ph(o,s):l===Wh?Nm(o,s):l===Pv?pC(o,s):void 0}(s,o,d):Ya(s,s[1],l,o)}function eE(s,o,l,d){const f=o[19].queries[d];if(null===f.matches){const m=s.data,E=l.matches,I=[];for(let S=0;S<E.length;S+=2){const x=E[S];I.push(x<0?null:ex(o,m[x],E[S+1],l.metadata.read))}f.matches=I}return f.matches}function tE(s,o,l,d){const f=s.queries.getByIndex(l),m=f.matches;if(null!==m){const E=eE(s,o,f,l);for(let I=0;I<m.length;I+=2){const S=m[I];if(S>0)d.push(E[I/2]);else{const x=m[I+1],F=o[-S];for(let H=10;H<F.length;H++){const J=F[H];J[17]===J[3]&&tE(J[1],J,x,d)}if(null!==F[9]){const H=F[9];for(let J=0;J<H.length;J++){const ue=H[J];tE(ue[1],ue,x,d)}}}}}return d}function yC(s){const o=Pe(),l=un(),d=ca();Fd(d+1);const f=to(l,d);if(s.dirty&&function Yi(s){return 4==(4&s[2])}(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?tE(l,o,d,[]):eE(l,o,f,d);s.reset(m,mh),s.notifyOnChanges()}return!0}return!1}function vC(s,o,l){const d=un();d.firstCreatePass&&(nE(d,new mC(s,o,l),-1),2==(2&o)&&(d.staticViewQueries=!0)),EC(d,Pe(),o)}function bC(s,o,l,d){const f=un();if(f.firstCreatePass){const m=Yr();nE(f,new mC(o,l,d),m.index),function tx(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}EC(f,Pe(),l)}function Fv(){return function wC(s,o){return s[19].queries[o].queryList}(Pe(),ca())}function EC(s,o,l){const d=new Yw(4==(4&l));ev(s,o,d,d.destroy),null===o[19]&&(o[19]=new Rm),o[19].queries.push(new Jw(d))}function nE(s,o,l){null===s.queries&&(s.queries=new _C),s.queries.track(new Mm(o,l))}function to(s,o){return s.queries.getByIndex(o)}function DC(s,o){return Nm(s,o)}function lp(...s){}const iE=new Wn("Application Initializer");let up=(()=>{class s{constructor(l){this.appInits=l,this.resolve=lp,this.reject=lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(e1(m))l.push(m);else if(eN(m)){const E=new Promise((I,S)=>{m.subscribe({complete:I,error:S})});l.push(E)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(vr(iE,8))},s.\u0275prov=dn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const $v=new Wn("AppId",{providedIn:"root",factory:function Gv(){return`${Fm()}${Fm()}${Fm()}`}});function Fm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Wv=new Wn("Platform Initializer"),mx=new Wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ss=new Wn("appBootstrapListener"),Lm=new Wn("LocaleId",{providedIn:"root",factory:()=>function Pu(s,o=yt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),vr(s,o)}(Lm,yt.Optional|yt.SkipSelf)||function sE(){return typeof $localize<"u"&&$localize.locale||ld}()}),oE=new Wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),aE=(()=>Promise.resolve(0))();function lE(s){typeof Zone>"u"?aE.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Aa{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ta(!1),this.onMicrotaskEmpty=new Ta(!1),this.onStable=new Ta(!1),this.onError=new Ta(!1),typeof Zone>"u")throw new ze(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function uE(){let s=$t.requestAnimationFrame,o=$t.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function vx(s){const o=()=>{!function yx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call($t,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,dE(s),s.isCheckStableRunning=!0,cE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),dE(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,m,E,I)=>{try{return hE(s),l.invokeTask(f,m,E,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),QC(s)}},onInvoke:(l,d,f,m,E,I,S)=>{try{return hE(s),l.invoke(f,m,E,I,S)}finally{s.shouldCoalesceRunChangeDetection&&o(),QC(s)}},onHasTask:(l,d,f,m)=>{l.hasTask(f,m),d===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,dE(s),cE(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,d,f,m)=>(l.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Aa.isInAngularZone())throw new ze(909,!1)}static assertNotInAngularZone(){if(Aa.isInAngularZone())throw new ze(909,!1)}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,f){const m=this._inner,E=m.scheduleEventTask("NgZoneEvent: "+f,o,ZC,lp,lp);try{return m.runTask(E,l,d)}finally{m.cancelTask(E)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const ZC={};function cE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function dE(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function hE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function QC(s){s._nesting--,cE(s)}class fE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ta,this.onMicrotaskEmpty=new Ta,this.onStable=new Ta,this.onError=new Ta}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,f){return o.apply(l,d)}}const JC=new Wn(""),pE=new Wn("");let _E,gE=(()=>{class s{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_E||(function mE(s){_E=s}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Aa.assertNotInAngularZone(),lE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lE(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==m),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(vr(Aa),vr(XC),vr(pE))},s.\u0275prov=dn({token:s,factory:s.\u0275fac}),s})(),XC=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return _E?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=dn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),ou=null;const yE=new Wn("AllowMultipleToken"),Bm=new Wn("PlatformDestroyListeners");function iT(s,o,l=[]){const d=`Platform: ${o}`,f=new Wn(d);return(m=[])=>{let E=Vm();if(!E||E.injector.get(yE,!1)){const I=[...l,...m,{provide:f,useValue:!0}];s?s(I):function tT(s){if(ou&&!ou.get(yE,!1))throw new ze(400,!1);ou=s;const o=s.get(oT);(function rT(s){const o=s.get(Wv,null);o&&o.forEach(l=>l())})(s)}(function Kv(s=[],o){return Ii.create({name:o,providers:[{provide:_g,useValue:"platform"},{provide:Bm,useValue:new Set([()=>ou=null])},...s]})}(I,d))}return function sT(s){const o=Vm();if(!o)throw new ze(401,!1);return o}()}}function Vm(){return ou?.get(oT)??null}let oT=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const f=function Ex(s,o){let l;return l="noop"===s?new fE:("zone.js"===s?void 0:s)||new Aa(o),l}(d?.ngZone,function wx(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),m=[{provide:Aa,useValue:f}];return f.run(()=>{const E=Ii.create({providers:m,parent:this.injector,name:l.moduleType.name}),I=l.create(E),S=I.injector.get(Yu,null);if(!S)throw new ze(402,!1);return f.runOutsideAngular(()=>{const x=f.onError.subscribe({next:F=>{S.handleError(F)}});I.onDestroy(()=>{zh(this._modules,I),x.unsubscribe()})}),function qv(s,o,l){try{const d=l();return e1(d)?d.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(S,f,()=>{const x=I.injector.get(up);return x.runInitializers(),x.donePromise.then(()=>(Ew(I.injector.get(Lm,ld)||ld),this._moduleDoBootstrap(I),I))})})}bootstrapModule(l,d=[]){const f=Dx({},d);return function vE(s,o,l){const d=new Tm(l);return Promise.resolve(d)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const d=l.injector.get(bE);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new ze(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ze(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(Bm,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(vr(Ii))},s.\u0275prov=dn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Dx(s,o){return Array.isArray(o)?o.reduce(Dx,s):{...s,...o}}let bE=(()=>{class s{constructor(l,d,f){this._zone=l,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new $.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new $.y(I=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Aa.assertNotInAngularZone(),lE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Aa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{S.unsubscribe(),x.unsubscribe()}});this.isStable=(0,we.T)(m,E.pipe((0,Le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const f=l instanceof xf;if(!this._injector.get(up).done)throw!f&&function Ue(s){const o=P(s)||j(s)||ce(s);return null!==o&&o.standalone}(l),new ze(405,false);let E;E=f?l:this._injector.get($c).resolveComponentFactory(l),this.componentTypes.push(E.componentType);const I=function bx(s){return s.isBoundToModule}(E)?void 0:this._injector.get(Eo),x=E.create(Ii.NULL,[],d||E.selector,I),F=x.location.nativeElement,H=x.injector.get(JC,null);return H?.registerApplication(F),x.onDestroy(()=>{this.detachView(x.hostView),zh(this.components,x),H?.unregisterApplication(F)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ze(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;zh(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(ss,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>zh(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ze(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(vr(Aa),vr(ol),vr(Yu))},s.\u0275prov=dn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function zh(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let lT=!0,uT=!1;function cT(){return uT=!0,lT}function os(){if(uT)throw new Error("Cannot enable prod mode after platform setup.");lT=!1}let Tx=(()=>{class s{}return s.__NG_ELEMENT_ID__=wE,s})();function wE(s){return function Sx(s,o,l){if(gc(s)&&!l){const d=Sn(s.index,o);return new Fh(d,d)}return 47&s.type?new Fh(o[16],o):null}(Yr(),Pe(),16==(16&s))}class Jv{constructor(){}supports(o){return Q(o)}create(o){return new CE(o)}}const xx=(s,o)=>o;class CE{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||xx}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,f=0,m=null;for(;l||d;){const E=!d||l&&l.currentIndex<Xv(d,f,m)?l:d,I=Xv(E,f,m),S=E.currentIndex;if(E===d)f--,d=d._nextRemoved;else if(l=l._next,null==E.previousIndex)f++;else{m||(m=[]);const x=I-f,F=S-f;if(x!=F){for(let J=0;J<x;J++){const ue=J<m.length?m[J]:m[J]=0,Ie=ue+J;F<=Ie&&Ie<x&&(m[J]=ue+1)}m[E.previousIndex]=F-x}}I!==S&&o(E,I,S)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Q(o))throw new ze(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,m,E,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)m=o[I],E=this._trackByFn(I,m),null!==l&&Object.is(l.trackById,E)?(d&&(l=this._verifyReinsertion(l,m,E,I)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,E,I),d=!0),l=l._next}else f=0,function Oe(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[B()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,I=>{E=this._trackByFn(f,I),null!==l&&Object.is(l.trackById,E)?(d&&(l=this._verifyReinsertion(l,I,E,f)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,E,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,f){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,f)):o=this._addAfter(new Rx(l,d),m,f),o}_verifyReinsertion(o,l,d,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==m?o=this._reinsertAfter(m,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,m=o._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const f=null===l?this._itHead:l._next;return o._next=f,o._prev=l,null===f?this._itTail=o:f._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new gT),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Rx{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class gT{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new TE,this.map.set(l,d)),d.add(o)}get(o,l){const f=this.map.get(o);return f?f.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xv(s,o,l){const d=s.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+o+f}class mT{constructor(){}supports(o){return o instanceof Map||xe(o)}create(){return new SE}}class SE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||xe(o)))throw new ze(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,l);const m=f._prev,E=f._next;return m&&(m._next=E),E&&(E._prev=m),f._next=null,f._prev=null,f}const d=new AE(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class AE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function NE(){return new e0([new Jv])}let e0=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||NE()),deps:[[s,new ya,new rr]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new ze(901,!1)}}return s.\u0275prov=dn({token:s,providedIn:"root",factory:NE}),s})();function t0(){return new xE([new mT])}let xE=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||t0()),deps:[[s,new ya,new rr]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new ze(901,!1)}}return s.\u0275prov=dn({token:s,providedIn:"root",factory:t0}),s})();const _T=iT(null,"core",[]);let n0=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(vr(bE))},s.\u0275mod=_n({type:s}),s.\u0275inj=Qt({}),s})();function yT(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function ZF(s,o){const l=P(s),d=o.elementInjector||Jl();return new Bh(l).create(d,o.projectableNodes,o.hostElement,o.environmentInjector)}},3942:(St,Ve,G)=>{"use strict";G.d(Ve,{Z:()=>ze});var h=G(2090),R=G(4859),$=G(9681),we=G(1877);class Le{constructor(pe,Ce){this._delegate=pe,this.firebase=Ce,(0,$._addComponent)(pe,new R.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(pe,Ce=$._DEFAULT_ENTRY_NAME){var at;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(pe);return!ut.isInitialized()&&"EXPLICIT"===(null===(at=ut.getComponent())||void 0===at?void 0:at.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:Ce})}_removeServiceInstance(pe,Ce=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Ce)}_addComponent(pe){(0,$._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,$._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const We=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function Ye(){const Je=function ke(Je){const pe={},Ce={__esModule:!0,initializeApp:function Be(he,ge={}){const Te=$.initializeApp(he,ge);if((0,h.r3)(pe,Te.name))return pe[Te.name];const re=new Je(Te,Ce);return pe[Te.name]=re,re},app:ut,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function De(he){const ge=he.name,Te=ge.replace("-compat","");if($._registerComponent(he)&&"PUBLIC"===he.type){const re=(ie=ut())=>{if("function"!=typeof ie[Te])throw We.create("invalid-app-argument",{appName:ge});return ie[Te]()};void 0!==he.serviceProps&&(0,h.ZB)(re,he.serviceProps),Ce[Te]=re,Je.prototype[Te]=function(...ie){return this._getService.bind(this,ge).apply(this,he.multipleInstances?ie:[])}}return"PUBLIC"===he.type?Ce[Te]:null},removeApp:function at(he){delete pe[he]},useAsService:function tt(he,ge){return"serverAuth"===ge?null:ge},modularAPIs:$}};function ut(he){if(!(0,h.r3)(pe,he=he||$._DEFAULT_ENTRY_NAME))throw We.create("no-app",{appName:he});return pe[he]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ne(){return Object.keys(pe).map(he=>pe[he])}}),ut.App=Je,Ce}(Le);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:Ye,extendNamespace:function pe(Ce){(0,h.ZB)(Je,Ce)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Je}(),Z=new we.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=X;!function Ge(Je){(0,$.registerVersion)("@firebase/app-compat","0.1.37",Je)}()},9681:(St,Ve,G)=>{"use strict";G.r(Ve),G.d(Ve,{FirebaseError:()=>we.ZR,SDK_VERSION:()=>Rs,_DEFAULT_ENTRY_NAME:()=>en,_addComponent:()=>Fn,_addOrOverwriteComponent:()=>dn,_apps:()=>Pn,_clearComponents:()=>Gi,_components:()=>Er,_getProvider:()=>Qt,_registerComponent:()=>tn,_removeServiceInstance:()=>Pr,deleteApp:()=>ui,getApp:()=>Fr,getApps:()=>So,initializeApp:()=>Jn,onLog:()=>cr,registerVersion:()=>ri,setLogLevel:()=>mn});var h=G(5861),R=G(4859),$=G(1877),we=G(2090),Le=G(8766);class Ae{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(mt=>{if(function We(gt){return"VERSION"===gt.getComponent()?.type}(mt)){const Mt=mt.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(mt=>mt).join(" ")}}const ke="@firebase/app",X=new $.Yd("@firebase/app"),en="[DEFAULT]",et={[ke]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,Er=new Map;function Fn(gt,Re){try{gt.container.addComponent(Re)}catch(mt){X.debug(`Component ${Re.name} failed to register with FirebaseApp ${gt.name}`,mt)}}function dn(gt,Re){gt.container.addOrOverwriteComponent(Re)}function tn(gt){const Re=gt.name;if(Er.has(Re))return X.debug(`There were multiple attempts to register component ${Re}.`),!1;Er.set(Re,gt);for(const mt of Pn.values())Fn(mt,gt);return!0}function Qt(gt,Re){const mt=gt.container.getProvider("heartbeat").getImmediate({optional:!0});return mt&&mt.triggerHeartbeat(),gt.container.getProvider(Re)}function Pr(gt,Re,mt=en){Qt(gt,Re).clearInstance(mt)}function Gi(){Er.clear()}const Qn=new we.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ds{constructor(Re,mt,Mt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},mt),this._name=mt.name,this._automaticDataCollectionEnabled=mt.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new R.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Rs="9.12.1";function Jn(gt,Re={}){let mt=gt;"object"!=typeof Re&&(Re={name:Re});const Mt=Object.assign({name:en,automaticDataCollectionEnabled:!1},Re),kt=Mt.name;if("string"!=typeof kt||!kt)throw Qn.create("bad-app-name",{appName:String(kt)});if(mt||(mt=(0,we.aH)()),!mt)throw Qn.create("no-options");const _n=Pn.get(kt);if(_n){if((0,we.vZ)(mt,_n.options)&&(0,we.vZ)(Mt,_n.config))return _n;throw Qn.create("duplicate-app",{appName:kt})}const Y=new R.H0(kt);for(const te of Er.values())Y.addComponent(te);const z=new ds(mt,Mt,Y);return Pn.set(kt,z),z}function Fr(gt=en){const Re=Pn.get(gt);if(!Re&&gt===en)return Jn();if(!Re)throw Qn.create("no-app",{appName:gt});return Re}function So(){return Array.from(Pn.values())}function ui(gt){return yt.apply(this,arguments)}function yt(){return(yt=(0,h.Z)(function*(gt){const Re=gt.name;Pn.has(Re)&&(Pn.delete(Re),yield Promise.all(gt.container.getProviders().map(mt=>mt.delete())),gt.isDeleted=!0)})).apply(this,arguments)}function ri(gt,Re,mt){var Mt;let kt=null!==(Mt=et[gt])&&void 0!==Mt?Mt:gt;mt&&(kt+=`-${mt}`);const _n=kt.match(/\s|\//),Y=Re.match(/\s|\//);if(_n||Y){const z=[`Unable to register library "${kt}" with version "${Re}":`];return _n&&z.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),_n&&Y&&z.push("and"),Y&&z.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void X.warn(z.join(" "))}tn(new R.wA(`${kt}-version`,()=>({library:kt,version:Re}),"VERSION"))}function cr(gt,Re){if(null!==gt&&"function"!=typeof gt)throw Qn.create("invalid-log-argument");(0,$.Am)(gt,Re)}function mn(gt){(0,$.Ub)(gt)}const Xn="firebase-heartbeat-store";let jn=null;function $n(){return jn||(jn=(0,Le.X3)("firebase-heartbeat-database",1,{upgrade:(gt,Re)=>{0===Re&&gt.createObjectStore(Xn)}}).catch(gt=>{throw Qn.create("idb-open",{originalErrorMessage:gt.message})})),jn}function It(){return(It=(0,h.Z)(function*(gt){var Re;try{return(yield $n()).transaction(Xn).objectStore(Xn).get(Dr(gt))}catch(mt){if(mt instanceof we.ZR)X.warn(mt.message);else{const Mt=Qn.create("idb-get",{originalErrorMessage:null===(Re=mt)||void 0===Re?void 0:Re.message});X.warn(Mt.message)}}})).apply(this,arguments)}function $t(gt,Re){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(gt,Re){var mt;try{const kt=(yield $n()).transaction(Xn,"readwrite");return yield kt.objectStore(Xn).put(Re,Dr(gt)),kt.done}catch(Mt){if(Mt instanceof we.ZR)X.warn(Mt.message);else{const kt=Qn.create("idb-set",{originalErrorMessage:null===(mt=Mt)||void 0===mt?void 0:mt.message});X.warn(kt.message)}}})).apply(this,arguments)}function Dr(gt){return`${gt.name}!${gt.options.appId}`}class di{constructor(Re){this.container=Re,this._heartbeatsCache=null;const mt=this.container.getProvider("app").getImmediate();this._storage=new ln(mt),this._heartbeatsCachePromise=this._storage.read().then(Mt=>(this._heartbeatsCache=Mt,Mt))}triggerHeartbeat(){var Re=this;return(0,h.Z)(function*(){const Mt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Wt();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==kt&&!Re._heartbeatsCache.heartbeats.some(_n=>_n.date===kt))return Re._heartbeatsCache.heartbeats.push({date:kt,agent:Mt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(_n=>{const Y=new Date(_n.date).valueOf();return Date.now()-Y<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,h.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const mt=Wt(),{heartbeatsToSend:Mt,unsentEntries:kt}=function Wi(gt,Re=1024){const mt=[];let Mt=gt.slice();for(const kt of gt){const _n=mt.find(Y=>Y.agent===kt.agent);if(_n){if(_n.dates.push(kt.date),hi(mt)>Re){_n.dates.pop();break}}else if(mt.push({agent:kt.agent,dates:[kt.date]}),hi(mt)>Re){mt.pop();break}Mt=Mt.slice(1)}return{heartbeatsToSend:mt,unsentEntries:Mt}}(Re._heartbeatsCache.heartbeats),_n=(0,we.L)(JSON.stringify({version:2,heartbeats:Mt}));return Re._heartbeatsCache.lastSentHeartbeatDate=mt,kt.length>0?(Re._heartbeatsCache.heartbeats=kt,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),_n})()}}function Wt(){return(new Date).toISOString().substring(0,10)}class ln{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,we.hl)()&&(0,we.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,h.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function Tt(gt){return It.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var mt=this;return(0,h.Z)(function*(){var Mt;if(yield mt._canUseIndexedDBPromise){const _n=yield mt.read();return $t(mt.app,{lastSentHeartbeatDate:null!==(Mt=Re.lastSentHeartbeatDate)&&void 0!==Mt?Mt:_n.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var mt=this;return(0,h.Z)(function*(){var Mt;if(yield mt._canUseIndexedDBPromise){const _n=yield mt.read();return $t(mt.app,{lastSentHeartbeatDate:null!==(Mt=Re.lastSentHeartbeatDate)&&void 0!==Mt?Mt:_n.lastSentHeartbeatDate,heartbeats:[..._n.heartbeats,...Re.heartbeats]})}})()}}function hi(gt){return(0,we.L)(JSON.stringify({version:2,heartbeats:gt})).length}!function dr(gt){tn(new R.wA("platform-logger",Re=>new Ae(Re),"PRIVATE")),tn(new R.wA("heartbeat",Re=>new di(Re),"PRIVATE")),ri(ke,"0.8.2",gt),ri(ke,"0.8.2","esm2017"),ri("fire-js","")}("")},4859:(St,Ve,G)=>{"use strict";G.d(Ve,{H0:()=>ke,wA:()=>$});var h=G(5861),R=G(2090);class ${constructor(X,Z,de){this.name=X,this.instanceFactory=Z,this.type=de,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const we="[DEFAULT]";class Le{constructor(X,Z){this.name=X,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const Z=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(Z)){const de=new R.BH;if(this.instancesDeferred.set(Z,de),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Xe=this.getOrInitializeService({instanceIdentifier:Z});Xe&&de.resolve(Xe)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(X){var Z;const de=this.normalizeInstanceIdentifier(X?.identifier),Xe=null!==(Z=X?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(de)&&!this.shouldAutoInitialize()){if(Xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:de})}catch(Ge){if(Xe)return null;throw Ge}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function We(Ye){return"EAGER"===Ye.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:we})}catch{}for(const[Z,de]of this.instancesDeferred.entries()){const Xe=this.normalizeInstanceIdentifier(Z);try{const Ge=this.getOrInitializeService({instanceIdentifier:Xe});de.resolve(Ge)}catch{}}}}clearInstance(X=we){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,h.Z)(function*(){const Z=Array.from(X.instances.values());yield Promise.all([...Z.filter(de=>"INTERNAL"in de).map(de=>de.INTERNAL.delete()),...Z.filter(de=>"_delete"in de).map(de=>de._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=we){return this.instances.has(X)}getOptions(X=we){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:Z={}}=X,de=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(de))throw Error(`${this.name}(${de}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Xe=this.getOrInitializeService({instanceIdentifier:de,options:Z});for(const[Ge,ze]of this.instancesDeferred.entries())de===this.normalizeInstanceIdentifier(Ge)&&ze.resolve(Xe);return Xe}onInit(X,Z){var de;const Xe=this.normalizeInstanceIdentifier(Z),Ge=null!==(de=this.onInitCallbacks.get(Xe))&&void 0!==de?de:new Set;Ge.add(X),this.onInitCallbacks.set(Xe,Ge);const ze=this.instances.get(Xe);return ze&&X(ze,Xe),()=>{Ge.delete(X)}}invokeOnInitCallbacks(X,Z){const de=this.onInitCallbacks.get(Z);if(de)for(const Xe of de)try{Xe(X,Z)}catch{}}getOrInitializeService({instanceIdentifier:X,options:Z={}}){let de=this.instances.get(X);if(!de&&this.component&&(de=this.component.instanceFactory(this.container,{instanceIdentifier:(Ye=X,Ye===we?void 0:Ye),options:Z}),this.instances.set(X,de),this.instancesOptions.set(X,Z),this.invokeOnInitCallbacks(de,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,de)}catch{}var Ye;return de||null}normalizeInstanceIdentifier(X=we){return this.component?this.component.multipleInstances?X:we:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ke{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const Z=this.getProvider(X.name);if(Z.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);Z.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const Z=new Le(X,this);return this.providers.set(X,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(St,Ve,G)=>{"use strict";G.d(Ve,{Am:()=>Ye,Ub:()=>ke,Yd:()=>We,in:()=>R});const h=[];var R=(()=>{return(X=R||(R={}))[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",R;var X})();const $={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},we=R.INFO,Le={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},Ae=(X,Z,...de)=>{if(Z<X.logLevel)return;const Xe=(new Date).toISOString(),Ge=Le[Z];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Ge](`[${Xe}]  ${X.name}:`,...de)};class We{constructor(Z){this.name=Z,this._logLevel=we,this._logHandler=Ae,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in R))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?$[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...Z),this._logHandler(this,R.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...Z),this._logHandler(this,R.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,R.INFO,...Z),this._logHandler(this,R.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,R.WARN,...Z),this._logHandler(this,R.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...Z),this._logHandler(this,R.ERROR,...Z)}}function ke(X){h.forEach(Z=>{Z.setLogLevel(X)})}function Ye(X,Z){for(const de of h){let Xe=null;Z&&Z.level&&(Xe=$[Z.level]),de.userLogHandler=null===X?null:(Ge,ze,...Je)=>{const pe=Je.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");ze>=(Xe??Ge.logLevel)&&X({level:R[ze].toLowerCase(),message:pe,args:Je,type:Ge.name})}}}},8766:(St,Ve,G)=>{"use strict";G.d(Ve,{Lj:()=>Be,X3:()=>ut});var h=G(5861);let $,we;const We=new WeakMap,ke=new WeakMap,Ye=new WeakMap,X=new WeakMap,Z=new WeakMap;let Ge={get(ge,Te,re){if(ge instanceof IDBTransaction){if("done"===Te)return ke.get(ge);if("objectStoreNames"===Te)return ge.objectStoreNames||Ye.get(ge);if("store"===Te)return re.objectStoreNames[1]?void 0:re.objectStore(re.objectStoreNames[0])}return Ce(ge[Te])},set:(ge,Te,re)=>(ge[Te]=re,!0),has:(ge,Te)=>ge instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in ge};function pe(ge){return"function"==typeof ge?function Je(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...Te){return ge.apply(at(this),Te),Ce(We.get(this))}:function(...Te){return Ce(ge.apply(at(this),Te))}:function(Te,...re){const ie=ge.call(at(this),Te,...re);return Ye.set(ie,Te.sort?Te.sort():[Te]),Ce(ie)}}(ge):(ge instanceof IDBTransaction&&function Xe(ge){if(ke.has(ge))return;const Te=new Promise((re,ie)=>{const ve=()=>{ge.removeEventListener("complete",fe),ge.removeEventListener("error",qe),ge.removeEventListener("abort",qe)},fe=()=>{re(),ve()},qe=()=>{ie(ge.error||new DOMException("AbortError","AbortError")),ve()};ge.addEventListener("complete",fe),ge.addEventListener("error",qe),ge.addEventListener("abort",qe)});ke.set(ge,Te)}(ge),((ge,Te)=>Te.some(re=>ge instanceof re))(ge,function Le(){return $||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,Ge):ge)}function Ce(ge){if(ge instanceof IDBRequest)return function de(ge){const Te=new Promise((re,ie)=>{const ve=()=>{ge.removeEventListener("success",fe),ge.removeEventListener("error",qe)},fe=()=>{re(Ce(ge.result)),ve()},qe=()=>{ie(ge.error),ve()};ge.addEventListener("success",fe),ge.addEventListener("error",qe)});return Te.then(re=>{re instanceof IDBCursor&&We.set(re,ge)}).catch(()=>{}),Z.set(Te,ge),Te}(ge);if(X.has(ge))return X.get(ge);const Te=pe(ge);return Te!==ge&&(X.set(ge,Te),Z.set(Te,ge)),Te}const at=ge=>Z.get(ge);function ut(ge,Te,{blocked:re,upgrade:ie,blocking:ve,terminated:fe}={}){const qe=indexedDB.open(ge,Te),He=Ce(qe);return ie&&qe.addEventListener("upgradeneeded",Dt=>{ie(Ce(qe.result),Dt.oldVersion,Dt.newVersion,Ce(qe.transaction))}),re&&qe.addEventListener("blocked",()=>re()),He.then(Dt=>{fe&&Dt.addEventListener("close",()=>fe()),ve&&Dt.addEventListener("versionchange",()=>ve())}).catch(()=>{}),He}function Be(ge,{blocked:Te}={}){const re=indexedDB.deleteDatabase(ge);return Te&&re.addEventListener("blocked",()=>Te()),Ce(re).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],tt=new Map;function he(ge,Te){if(!(ge instanceof IDBDatabase)||Te in ge||"string"!=typeof Te)return;if(tt.get(Te))return tt.get(Te);const re=Te.replace(/FromIndex$/,""),ie=Te!==re,ve=De.includes(re);if(!(re in(ie?IDBIndex:IDBObjectStore).prototype)||!ve&&!Ne.includes(re))return;const fe=function(){var qe=(0,h.Z)(function*(He,...Dt){const Cn=this.transaction(He,ve?"readwrite":"readonly");let en=Cn.store;return ie&&(en=en.index(Dt.shift())),(yield Promise.all([en[re](...Dt),ve&&Cn.done]))[0]});return function(Dt){return qe.apply(this,arguments)}}();return tt.set(Te,fe),fe}!function ze(ge){Ge=ge(Ge)}(ge=>({...ge,get:(Te,re,ie)=>he(Te,re)||ge.get(Te,re,ie),has:(Te,re)=>!!he(Te,re)||ge.has(Te,re)}))},5861:(St,Ve,G)=>{"use strict";function h($,we,Le,Ae,We,ke,Ye){try{var X=$[ke](Ye),Z=X.value}catch(de){return void Le(de)}X.done?we(Z):Promise.resolve(Z).then(Ae,We)}function R($){return function(){var we=this,Le=arguments;return new Promise(function(Ae,We){var ke=$.apply(we,Le);function Ye(Z){h(ke,Ae,We,Ye,X,"next",Z)}function X(Z){h(ke,Ae,We,Ye,X,"throw",Z)}Ye(void 0)})}}G.d(Ve,{Z:()=>R})}},St=>{St(St.s=5188)}]);